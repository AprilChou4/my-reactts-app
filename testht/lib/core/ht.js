!function(Y,o,k5){"use strict";var k,M,E,L5="ht";if(!Y.ht){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),Y.performance&&Y.performance.now||(L=Date.now(),Y.performance||(Y.performance={}),Y.performance.now=function(){return Date.now()-L});for(var L,$=Date.now(),H=["ms","moz","webkit","o"],Q=0;Q<H.length&&!Y.requestAnimationFrame;++Q)Y.requestAnimationFrame=Y[H[Q]+"RequestAnimationFrame"],Y.cancelAnimationFrame=Y[H[Q]+"CancelAnimationFrame"]||Y[H[Q]+"CancelRequestAnimationFrame"];Y.requestAnimationFrame||(Y.requestAnimationFrame=function(y){var q=Date.now(),_=16+$-q;return $=q,Y.setTimeout(function(){$=Date.now(),y(performance.now())},_=_<0?0:_)}),Y.cancelAnimationFrame||(Y.cancelAnimationFrame=function(y){return Y.clearTimeout(y)}),o.assign===k5&&(o.assign=function(y){if(y===k5||null===y)throw new TypeError("Cannot convert undefined or null to object");for(var q=o(y),_=1;_<arguments.length;_++){var s=arguments[_];if(s!==k5&&null!==s)for(var p in s)o.prototype.hasOwnProperty.call(s,p)&&(q[p]=s[p])}return q}),Y.btoa===k5&&(Y.btoa=function(y){for(var q,_,s=String(y),p=0,O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",L="";s.charAt(0|p)||(O="=",p%1);L+=O.charAt(63&q>>8-p%1*8)){if(255<(_=s.charCodeAt(p+=.75)))throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");q=q<<8|_}return L});var w=(_x=Y.location)&&Y.document,M5=null,S=k5,P=Y.ht={},X=Y.htconfig,E5=P.Default=X&&X.Default||{},X5=P.Style=X&&X.Style||{},T=P.Attr=X&&X.Attr||{},i=function(){return!0},N=function(){return!1},B=function(y){return y},a=function(y){return!y},C=P.Color=X&&X.Color||{},l=P.IsGetter=X&&X.IsGetter||{},j=!1;try{var y=o.defineProperty({},"passive",{get:function(){return j=!0,k5}});_x&&Y.addEventListener("test",y,y),_x&&Y.removeEventListener("test",y,y)}catch(q){j=!1}E5.passiveSupported=j;var $5,T5,Z,i5,K,N5,a5,F,V,t,l5,j5,J,D,c,R,b,I,X=E5.passiveSupported,U=E5.eventListenerOptionsFalse=!!X&&{passive:!1,capture:!1},d=E5.eventListenerOptionsTrue=!X||{passive:!1,capture:!0},y5=function(y,q,_,s){y.addEventListener(q,_,s?d:U)},q5=function(y,q,_,s){y.removeEventListener(q,_,s?d:U)},Z5=(y=Math).round,K5=y.floor,C5=y.ceil,B5=y.sqrt,_5=y.max,s5=y.min,F5=y.abs,H5=y.cos,V5=y.acos,p5=y.sin,h5=y.pow,t5=y.asin,u=(y.exp,y.PI),O5=2*u,u5=u/2,J5=y.tan,D5=y.atan2,c5=y.random,X=y.log,q=h5(2,1),R5=Y.parseInt||global.parseInt,o5="2023-06-15",Y5=_x&&!!Y.navigator&&-1<Y.navigator.platform.indexOf("Win"),P5=function(y){return y*y},m5=_x&&Y.setTimeout,W5=_x&&Y.clearTimeout,A5=_x&&(Y.navigator?Y.navigator.userAgent.toLowerCase():""),z5=(xD=function(y){return y.test(A5)})(/msie/),e5=xD(/msie/)||xD(/trident/),f5=xD(/msie 10/),G5=xD(/edge/),r5=xD(/firefox/),g5=xD(/mac/),n5=xD(/mscAndroid/),v5=E5.isTouchable===k5?!Y5&&!!w&&"ontouchend"in w:E5.isTouchable,b5="default",I5="single",U5="multiple",d5="front",yD="back",qD="left",_D="right",sD="top",pD="bottom",OD="center",LD="eye",$D="middle",kD="east",MD="west",ED="north",HD="none",wD="px",QD="absolute",xD="border",SD="triangle",m="rect",XD="circle",TD="cylinder",iD="shape",ND="items",aD="normal",lD="remove",jD="clear",ZD="width",KD="height",CD="ingroup",BD="check",FD="uncheck",VD="radioOn",hD="radioOff",tD="points",uD="values",JD="series",DD="body",cD="label",RD="label2",oD="note",YD="note2",PD="icons",mD="labelFont",WD="labelColor",AD="labelSelectColor",zD="note.expanded",eD="note2.expanded",fD="edge.expanded",GD="edge.points",rD="edge.type",gD="rotation",nD="hidden",vD="visible",bD="tuv",ID="no",UD="draw",dD="select",yL="currentSubGraph",Y5="selectBackground",qL="autoMakeVisible",_L="autoHideScrollBar",sL="scrollBarColor",pL="scrollBarSize",OL="indent",LL="rowHeight",$L="columnLineColor",kL="rowLineColor",ML="columnLineVisible",EL="rowLineVisible",HL="visibleFunc",wL="expandIcon",QL="collapseIcon",xL="checkMode",SL="sortFunc",XL="editable",TL="batchEditable",iL="tristate",NL="asc",aL="desc",lL="position",jL="elevation",ZL="children",KL="translateX",CL="translateY",BL="dataModel",FL="state",VL="encode",hL="shape3d",tL="shape3d.resolution",uL="shape3d.visible",JL="shape3d.from.visible",DL="shape3d.to.visible",cL="shape3d.top.visible",RL="shape3d.bottom.visible",oL="repeat.uv.length",YL="serializeValue",PL="deserializeValue",mL="centerUniform",WL="uniform",AL="rgba(255,255,255,0)",zL="style",eL="string",fL="boolean",GL="color",rL="int",gL="number",nL="ew-resize",vL="ns-resize",bL="pointer",IL="auto",UL="mousedown",dL="mousemove",yn="mouseup",qn="mouseout",_n="touchstart",sn="touchmove",pn="touchend",On="keydown",Ln=["DOMMouseScroll","mousewheel"],$n=r5?Ln[0]:Ln[1],kn="__ht__"+VL,Mn=[_n,sn,pn],En=[UL,dL,yn,qn,$n,"wheel","mouseenter","mouseleave","mouseover"],Hn=[On,"keyup","keypress","input","contextmenu","compositionstart","compositionupdate","compositionend"],wn=(v5?Mn:En).concat(Hn),Qn=M5,xn=M5,Sn=M5,Xn=M5,Tn=yn.length,Nn=function(){Sn&&(W5(Sn.timeout),Sn=M5)},an=function(){Sn&&LA(Sn.e,Sn.info)},ln=(Y.addEventListener&&(S=_x)&&(v5||(y5(Y,qn,function(){Nn()}),y5(Y,$n,function(){$A()})),y5(Y,"keyup",function(y){91===y.keyCode?tn={}:delete tn[y.keyCode]},!0),y5(Y,On,function(y){tn[y.keyCode]=!0},!0),y5(Y,"blur",function(y){tn={}})),0),jn=M5,Zn=function(y,q){var _=m5(function(){delete jn[_],Cx(jn)&&(jn=M5),y()},q);return _},r5=M5,Kn={},Cn={},Bn={},Fn={},Vn={},hn={},tn={},un={},Jn={},Dn={},cn={},Rn=/.json$/,on=/\.(json|bin|fbx|gltf|glb)$/,Yn=/^data:image\/svg\+xml/,Pn=[],mn={},Wn=M5,An=function(){},zn=function(){throw"Oops!"},en=[0,0,0],fn={x:0,y:0,width:0,height:0},Gn=M5,rn=M5,gn=M5,nn=function(y,q){(Cn[y]=q)&&q.comps&&!q.uuid&&(q.uuid=P.Math.generateUUID()),bu[y]&&(q.cacheRule=bu[y],delete bu[y])},vn=function(y){rn&&!y._72O&&((gn=gn||{})[y._72O=hA()]=y),i5!=M5?(y=1e4*p5(Tn++))-K5(y)<.05&&Z&&!a5&&(Ol=Nn):Ol=kx},bn=function(_,s,p,O){var L,$,y=(rn=rn||{})[_];if(y){if(y.url===s)return;y.image?(y.image.onload=An,y.image.onerror=An):y.request&&(y.request.onload=An,y.request.onerror=An)}Rn.test(s)?(L=new pE,rn[_]={request:L,url:s},(s=E5.beforeLoadURL(s,_)).data?($=E5.parse(s.data),In(_,$),E5.handleImageLoaded(_,$)):(L.onload=function(y){var q;200===this.status||0===this.status?(q=E5.parse(L.getResponseText()),In(_,q),E5.handleImageLoaded(_,q)):In(_,E5.handleUnfoundImage(_,s)||M5)},L.onerror=function(y){In(_,E5.handleUnfoundImage(_,s)||M5)},(y={}).url=encodeURI(s),y.sync=!1,L.send(y))):($=new Image,rn[_]={image:$,url:s},/^data:/.test(s)||((s=E5.beforeLoadURL(s,_)).data?s=s.data:(s=E5.appendTimeStamp(s),s=encodeURI(s),$.crossOrigin=E5.crossOrigin)),E5.convertImageSrc(s,function(y){e5&&(0<s.toLowerCase().indexOf(".svg")||Yn.test(s))?(w.body.appendChild($),$.style.visibility="hidden",$.onload=function(){m5(function(){var y,q;p&&($.width=p),O&&($.height=O),$.width&&$.height||(y=$.width||$.clientWidth,q=$.height||$.clientHeight,$.width=y,$.height=q),E5.handleImageLoaded(_,$),In(_,$),w.body.removeChild($),$.style.visibility=""},180)},$.onerror=function(){In(_,E5.handleUnfoundImage(_,s)||M5),w.body.removeChild($),$.style.visibility=""}):($.onload=function(){p&&($.width=p),O&&($.height=O),E5.handleImageLoaded(_,$),In(_,$)},$.onerror=function(){In(_,E5.handleUnfoundImage(_,s)||M5)}),$.src=y}))},In=function(y,q){if(nn(y,q),delete rn[y],Cx(rn)&&(rn=M5,gn)){for(var _ in gn)(s=gn[_])._2O&&s._2O[y]&&(s.deleteTexture(y),delete s._2O[y]),s.invalidateAll&&s.invalidateAll(k5,"imageLoaded",y),s.redraw&&s.redraw(),s.iv(),s instanceof bE&&s.dm().each(function(y){y instanceof WQ&&y.updateLayoutAttaches()}),delete s._72O;gn=M5}if(q&&gn)for(var _ in gn){var s;(s=gn[_]).invalidateAll&&s.invalidateAll(k5,"imageLoading",y),s.redraw&&s.redraw(),s.iv(),s instanceof bE&&s.dm().each(function(y){y instanceof WQ&&y.updateLayoutAttaches()})}},Un=(X=y&&Date,function(){return(Y.performance&&Y.performance.now?Y.performance:Date).now()}),dn=function(y,q,_){return{width:y,height:q,comps:Hx(_)?_:[_]}},yx=function(y,q){return{type:XD,rect:[y,q,1.6,1.6],borderWidth:1,borderColor:x,gradient:OA,gradientColor:PU,background:x}},qx=function(y,q){return dn(16,16,{type:SD,rect:[4,4,10,8],background:y,rotation:q?1.57:3.14})},_x=function(y,q){return dn(16,16,{type:SD,rect:[4,4,8,7],background:y,rotation:q?3.14:0})},sx=function(y){return"horizontal"===(y=y._orientation)||"h"===y},px=function(y,q,_,s){return _||(_=v5?5:3,_/=s||1),{x:y-_,y:q-_,width:2*_,height:2*_}},Ox=function(y){return(/ble$/.test(y)||/ed$/.test(y)||l[y]?"is":"get")+y.charAt(0).toUpperCase()+y.slice(1)},Lx=function(y){return"set"+y.charAt(0).toUpperCase()+y.slice(1)},w5=function(y){return typeof y==eL||y instanceof String},$x=function(y){return typeof y==gL},kx=function(y){return typeof y===fL},Mx=function(y){return y&&"object"==typeof y},Ex=function(y){return"function"==typeof y},Hx=function(y){return y instanceof Array},wx=function(y){return y instanceof n},W=function(y){return y instanceof WQ},Qx=function(y){return y instanceof rQ},xx=function(y){return y instanceof gQ},Sx=function(y,q){return y instanceof P.Group&&(q?!(!(q=q.getDataUI(y))||!q._88I):y.isExpanded())},Xx=function(y){return y instanceof vQ},Tx=function(y){return y&&"IFRAME"===y.tagName},ix=function(y,q,_){var s,p=q.length;if(_)for(var O=0;O<_;O++)if(3===p)y.push(q[0]),y.push(q[1]),y.push(q[2]);else for(s=0;s<p;s++)y.push(q[s]);else if(3===p)y.push(q[0]),y.push(q[1]),y.push(q[2]);else for(s=0;s<p;s++)y.push(q[s])},Nx=function(y){return!!y&&(Mx(y)?y:{})},ax=function(y,q,_){var s,p=Mx(y)?y:y.prototype;for(s in q)_&&s in p?p[s]===k5&&console.warn("class",p,"has own undefined property",s,", keep exist!"):p[s]=q[s];return y},lx=function(y,q){var _;"wheelDelta"in q||((_=q.deltaMode)===q.DOM_DELTA_PIXEL?q.wheelDelta=-q.deltaY:_===q.DOM_DELTA_LINE?q.wheelDelta=40*-q.deltaY:q.wheelDelta=120*-q.deltaY),y.handle_mousewheel(q)},jx=function(y){return String.fromCharCode(y)},Zx=function(y,q){for(var _,s=0,p="",O="",L=y.length;s<L;s++)"%"===(_=y[q?s:L-1-s])?_="'":"a"===_?_='"':"]"===_&&(_="\\"),_=jx(_.charCodeAt(0)-1),q?s%2?O+=_:p=_+p:p+=_;return q?O+p:p},Kx=function(y,q,_){y.superClass.constructor.apply(q,_)},Cx=function(y){for(var q in y)return!1;return!0},Bx=function(y){return!y||0===y.length},Fx=(t="",[FD[0],kL[0],cD[0]].forEach(function(y){t+=Lx(y).slice(3)}),WL=w&&w[t]||mL,function(y,q){return y===q||y.x===q.x&&y.y===q.y&&y.width===q.width&&y.height===q.height}),Vx=function(y,q,_){return y<q?q:_<y?_:y},hx=function(y){return y<0?-1:0<y?1:0},tx=function(y,q,_){return ux(y.x,y.y,q.x,q.y,_.x,_.y,_.x+_.width,_.y,!0)||ux(y.x,y.y,q.x,q.y,_.x+_.width,_.y,_.x+_.width,_.y+_.height,!0)||ux(y.x,y.y,q.x,q.y,_.x+_.width,_.y+_.height,_.x,_.y+_.height,!0)||ux(y.x,y.y,q.x,q.y,_.x,_.y+_.height,_.x,_.y,!0)},ux=function(y,q,_,s,p,O,L,$,k){var M,E=($-O)*(_-y)-(L-p)*(s-q);return 0!=E?(M=y+(E=((L-p)*(q-O)-($-O)*(y-p))/E)*(_-y),E=q+E*(s-q),k&&(M+x8<s5(y,_)||M-x8>_5(y,_)||M+x8<s5(p,L)||M-x8>_5(p,L)||E+x8<s5(q,s)||E-x8>_5(q,s)||E+x8<s5(O,$)||E-x8>_5(O,$))?M5:[M,E]):M5},Jx=function(y,q,_){if(y&&_){var s=function(y,q,_){return q?q===zL?y.getStyle(_):"attr"===q?y.getAttr(_):"field"===q?y[_]:void 0:y[_=Ox(_)]?y[_]():void 0};if("string"!=typeof _||"{"!==_[0]||"}"!==_[_.length-1])return s(y,q,_);var p=(_=(_=_.substr(1)).substr(0,_.length-1)).split("."),O=s(y,q,p[0]);if(O!=M5)for(var L=1,$=p.length;L<$;L++)if((O=O[p[L]])==M5)return O;return O}return k5},Dx=function(y,q,_,s){y&&_&&(q?q===zL?y.s(_,s):"attr"===q?y.a(_,s):"field"===q&&(q=y[_],y[_]=s,y.fp("f:"+_,q,s)):y[_=Lx(_)]&&y[_](s))},cx=function(y,q,_){var s=100*Math.max(y.width,y.height);return q&&"top"!==q?"bottom"===q?{x:y.x-s,y:y.y-s,width:y.width+2*s,height:y.height*_+s}:"right"===q?{x:y.x-s,y:y.y-s,width:y.width*_+s,height:y.height+2*s}:"left"===q?{x:y.x+y.width*(1-_),y:y.y-s,width:y.width*_+s,height:y.height+2*s}:void 0:{x:y.x-s,y:y.y+y.height*(1-_),width:y.width+2*s,height:y.height*_+s}},Rx=function(y,q,_,s,p){q&&dl(y,_,s,1,p,q)},ox=function(y,q,_,s){var p=1-y;return p*p*q+2*y*p*_+y*y*s},Yx=function(y,q,_,s,p){var O=1-y;return O*O*O*q+3*O*O*y*_+3*O*y*y*s+y*y*y*p},Px=function(y){var q,_,s,p,O=0;return y.forEach(function(y){if(0<(q=y.length))for(_=y[0],p=1;p<q;p++)s=y[p],O+=vA(_,s),_=s}),O},mx=function(y){return o.create(y)},Wx=function(y){var q,_;y.element||((q=y.textField)?_=KA(ht.TextField,q):(q=y.textArea)?_=KA(ht.TextArea,q):(q=y.button)?_=KA(ht.Button,q):(q=y.comboBox)?_=KA(ht.ComboBox,q):(q=y.checkBox)?_=KA(ht.CheckBox,q):(q=y.radioButton)?_=KA(ht.RadioButton,q):(q=y.slider)?_=KA(ht.Slider,q):(q=y.colorPicker)?_=KA(ht.ColorPicker,q):(q=y.image)&&(_=KA(ht.Image,q)),_&&(y.element=_))},Ax=function(y,q){return(y=zx(y))._ht=q,y},qn=Y.top===Y?Y.top:Y||Y.document,zx=function(y,q){var _=w.createElement("div"),s=_.style;return _.tabIndex=-1,_.onkeydown=CA,s.msTouchAction=HD,fx(_,M5,0),v5&&s.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",M5),y&&(s.overflow=nD),q&&gx(q,_),_},ex=function(y,q){var _=w.createElement("canvas"),s=_.style;return s.msTouchAction=HD,q||(s.pointerEvents=HD),fx(_,M5,0),y&&gx(y,_),_},fx=function(y,q,_){var s=y.style;s.border=q?q+" solid 1px":0,s.outline=0,s.padding=_?"0 "+_+wD:0,Gx(y)},Gx=function(y){(y=y.style).position=QD,y.margin=0,y.setProperty("box-sizing","border-box",M5),y.setProperty("-moz-box-sizing","border-box",M5)},rx=function(y,q,_,s){s=s||sA,q!=M5&&(y.width=q*s,y.style.width=q+wD),_!=M5&&(y.height=_*s,y.style.height=_+wD)},gx=function(y,q,_){y.appendChild(q),_&&(q.style.position=QD)},nx=function(y,q){q.split||(q+="");for(var _,s=q.split("\n"),p=0,O=s.length,L=0;L<O;L++){var $=mA(y.font,s[L]);$.width>p&&(p=$.width),_=_||$.height}return y.ss=s,{width:p,height:_*O}},vx=(V=w?ex().getContext("2d"):M5,function(y,$,k,M,E,H){var q=y.split("\n"),w=[],Q=mA(k,y).height;return M=M||0,V.font=k,V.textBaseline=sD,q.forEach(function(y){for(var q=0,_=1,s=0,p=y.length;_<=p;_++){var O=y.substring(q,_),L=E?V.measureText(y[_]):mA(k,O),L=(E&&(s+=L.fontBoundingBoxDescent||Q),E?s+(O.length-1)*H:L.width+(O.length-1)*M);$<L&&(_-1===q?(w.push(y.substring(q,_)),q=_):(w.push(y.substring(q,_-1)),q=_-1,_--),s=0)}q!==_-1&&w.push(y.substring(q,_))}),w}),bx=function(y,q,_,s,p,O,L,$){y.font=_;var k,M=y.measureText(q);y.beginPath(),y.strokeStyle=s,y.lineWidth=1,"underline"===$?(k=M.actualBoundingBoxDescent?M.actualBoundingBoxDescent+1:mA(_,q).size/2,y.moveTo(p-L/2,O+k),y.lineTo(p+L/2,O+k)):"strikethrough"===$?(y.moveTo(p-L/2,O),y.lineTo(p+L/2,O)):"overline"===$&&(k=M.fontBoundingBoxAscent||mA(_,q).size/2,y.moveTo(p-L/2,O-k),y.lineTo(p+L/2,O-k)),y.stroke()},Ix=function(y,q,_,s,p,O,L,$,k,M,E){var H,w,Q=p.x,x=p.y,S=p.width,p=p.height;q!=M5&&(H=mA(_,q),w={},k&&(H.width+=(q.length-1)*k),w.y=L&&L!==$D?L===sD?x+H.height/2:x+p-H.height/2:x+p/2,w.x=O&&O!==qD?O===_D?Q+S-H.width/2:Q+S/2:Q+H.width/2,dx(y,q,w,_,s,k,M,E),$&&bx(y,q,_,s,w.x,w.y,H.width,$))},Ux=function(y,q,_,s,p,O,L,$,k,M){var E=q.length;if(1===E){var H=q[0];dx(y,H,_,s,p,$,k,M),L&&(w=mA(s,H),bx(y,H,s,p,_.x+_.width/2,_.y+_.height/2,w.width,L))}else for(var w,Q=_.height/E,x={x:_.x,y:_.y,width:_.width,height:Q},S=0;S<q.length;S++)O?Ix(y,q[S],s,p,x,O,null,L,$,k,M):(dx(y,q[S],x,s,p,$,k,M),L&&(w=mA(s,q[S]),bx(y,q[S],s,p,x.x+x.width/2,x.y+x.height/2,w.width,L))),x.y+=Q},dx=function(y,q,_,s,p,O,L,$){y.font=s||wA,y.fillStyle=p||HA,y.textAlign=OD,y.textBaseline=$D;var k,M,M=_?_.width===k5?(k=_.x,_.y):(k=_.x+_.width/2,_.y+_.height/2):k=0,E=L&&$;if(E&&(y.strokeStyle=$,y.lineWidth=L),O){k-=(mA(s,q).width+O*(q.length-1))/2;for(var H=(q+"").length,w=0;w<H;w++){var Q=q[w],x=y.measureText(Q);E&&y.strokeText(Q,Z5(k+(x.width+4)/2),Z5(M)),y.fillText(Q,Z5(k+(x.width+4)/2),Z5(M)),k+=x.width+O}}else E&&y.strokeText(q,Z5(k),Z5(M)),y.fillText(q,Z5(k),Z5(M))},yl=function(y){var q=(y=y.getView?y.getView():y).offsetWidth||y.scrollWidth;return!q&&y.style.width?R5(y.style.width):q},ql=function(y){var q=(y=y.getView?y.getView():y).offsetHeight||y.scrollHeight;return!q&&y.style.height?R5(y.style.height):q},_l=function(y,q,_){var s=q[0].toUpperCase()+q.substring(1,q.length);y["webkit"+s]=_,y["moz"+s]=_,y["ms"+s]=_,y["o"+s]=_,y[q]=_},sl=function(y,q){var _=zx(),s=_.style;return s.backgroundColor=E5.disabledBackground,y&&(s.backgroundImage="url("+y+")",s.backgroundPosition="50% 50%",s.backgroundRepeat="no-repeat no-repeat"),!1===q?F.forEach(function(y){y5(_,y,nt)}):F.forEach(function(y){y5(_,y,gt)}),_},pl=function(y,q){return(y=y.getContext("2d",q)).save(),y.lineCap=MA,y.lineJoin=EA,y},Ol=function(y,q,_,s){Ll(y,q*sA,_*sA),1!=(s*=sA)&&y.scale(s,s)},Ll=function(y,q,_){y.translate(q,_)},$l=function(y,q){q&&y.rotate(q)},kl=function(y,q,_){_===k5&&(_=1),1===(q=q===k5?1:q)&&1===_||y.scale(q,_)},Ml=!(F=[_n,On,UL]),El=qn[BD[1]+KL[0]],Hl=function(y){var q=w.activeElement;if(w.activeElement!==y){q&&q.forceOnblur&&q.forceOnblur();for(var _=[],s=y.parentNode;s;)_.push([s,s.scrollLeft,s.scrollTop]),s=s.parentNode;if(!Ml){var p=[],O=[];try{for(var L=Y.parent,$=Y;L!==$;)p.push([L,L.scrollX,L.scrollY]),$=L,L=Y.parent;var k=Y.frameElement;if(k)for(var M=k.parentNode;M;)O.push([M,M.scrollLeft,M.scrollTop]),M=M.parentNode}catch(y){Ml=!0}}v5?y.focus():(k=(q=_8()).target,y.focus(),k.scrollLeft=q.left,k.scrollTop=q.top),_.forEach(function(y){y[0].scrollLeft=y[1],y[0].scrollTop=y[2]}),Ml||(p.forEach(function(y){y[0].scrollTo(y[1],y[2])}),O.forEach(function(y){y[0].scrollLeft=y[1],y[0].scrollTop=y[2]}))}},wl=function(y){return y&&y.getView?y.getView():y},h=function(y,q,_,s,p){var O,L;2===arguments.length&&(_=q.y,s=q.width,p=q.height,q=q.x),y.isSelfViewEvent?(y.setX(q),y.setY(_),y.setWidth(s),y.setHeight(p)):(O=(L=wl(y)).style,(w.fullscreenElement||w.mozFullScreenElement||w.webkitFullscreenElement||w.msFullscreenElement)!==L?(q!==k5&&(O.left=q+wD),_!==k5&&(O.top=_+wD),s!==k5&&(O.width=s+wD),p!==k5&&(O.height=p+wD)):(L=E5.getWindowInfo(),O.left=(q=L.left)+wD,O.top=(_=L.top)+wD,O.width=(s=L.width)+wD,O.height=(p=L.height)+wD),y.endEditing&&!v5&&y.endEditing(),y.redraw&&y.redraw(),y.invalidate&&y.invalidate(),y.onLayouted&&y.onLayouted(q,_,s,p),y.fireViewEvent&&y.fireViewEvent("layout"))},Ql=function(y){return y.touches?y.touches[0]||y.changedTouches[0]:y},xl=function(y){return y&&"object"==typeof y&&"touches"in y},Sl=function(y){E5.popup&&E5.popup.close(),E5.popup=y},Xl=M5,Tl=function(y){Xl.handleWindowTouchMove(y)},il=function(y){Xl.handleWindowTouchEnd(y),q5(Y,sn,Tl),q5(Y,pn,il),q5(Y,"blur",il),Xl=M5},Nl=function(y){Xl.handleWindowMouseMove(y)},al=function(y){Xl.handleWindowMouseUp(y),q5(Y,dL,Nl),q5(Y,yn,al),q5(Y,"blur",al),Xl=M5},ll=function(y){return 1===eA(y)},jl=function(y,q){return q?q.keyCode===y:tn[y]},Zl=function(y){return rA(y)&&jl(65,y)},Kl=function(y){return jl(46,y)||jl(8,y)},Cl=(qn=function(q){return function(y){return y?y.keyCode===q:tn[q]}})((y=[65,83,68,87,37,38,39,40,32,13,27])[0]),Bl=qn(y[1]),Fl=qn(y[2]),Vl=qn(y[3]),hl=qn(y[4]),tl=qn(y[5]),ul=qn(y[6]),Jl=qn(y[7]),Dl=qn(y[8]),cl=qn(y[9]),Rl=qn(y[10]),ol={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},Yl=[2,2,2,2,2,2,2,2,2,2,3,3,3,5,5,5,5,5,7,2789],Pl=M5,ml=M5,Wl=function(y,q){Pl=Pl||ex(),rx(Pl,y,q,1);var _=pl(Pl);return _.clearRect(0,0,y,q),_},Al=function(y,q){ml=ml||ex(),rx(ml,y,q,1);var _=pl(ml,{willReadFrequently:!0});return _.clearRect(0,0,y,q),_},zl=function(y,q,_){var s,p,O,L,$,k,M,E,H,w;return q&&y?"override"===_?q:"override_rgb"===_?(w=fl(q),y=el(y),"rgba("+Z5(255*w[0])+","+Z5(255*w[1])+","+Z5(255*w[2])+","+y[3]/255+")"):"override_a"===_?(w=fl(q),"rgba("+(y=el(y))[0]+","+y[1]+","+y[2]+","+w[3]+")"):"multiply_destinationAtop"===_?(_=fl(y),E=_[3],s=fl(q),p=s[3],0!==E&&0!==p&&(L=(O=_)[3],$=_.map(function(y,q){return y*s[q]}),H=1-E,M=(k=1-p)*E+p,_=_.map(function(y,q){return(p*H*s[q]+p*E*$[q]+k*E*y)/M}),H=1-(E=M),_=_.map(function(y,q){return O[q]*H+y*E}),E=L),"rgba("+Z5(255*_[0])+","+Z5(255*_[1])+","+Z5(255*_[2])+","+E+")"):(w=fl(q),y=el(y),"rgba("+Z5(y[0]*w[0])+","+Z5(y[1]*w[1])+","+Z5(y[2]*w[2])+","+y[3]/255*w[3]+")"):y},el=function(){var s,y,p={};for(y in Y){var q=U5.length;if(y.length==q&&y[0]===U5[2]&&y[1]===HD[1]&&y[4]===U5[3]&&y[5]===U5[4]&&y.substr(q-2)===HD[1]+HD[2]){var _,O=Y[y];for(_ in O)_.length===q&&_.substr(0,3)===_D[3]+lD[3]+dD[0]&&_.substr(q-2)===U5[0]+oD[3]&&(Ln=O[_])}}return function(y){var q,_=p[y];return _||(s||(s=ex(),rx(s,1,1,1)),(q=s.getContext("2d",{willReadFrequently:!0})).clearRect(0,0,1,1),dl(q,0,0,1,1,y),_=q.getImageData(0,0,1,1).data,_=p[y]=[_[0],_[1],_[2],_[3]]),_}}(),fl=function(y){return w5(y)?((y=el(y)).CA||(y.CA=[y[0]/255,y[1]/255,y[2]/255,y[3]/255]),y.CA):y},Gl=function(y,q,_){return q&&(q="miter"===_?8*q+20:q+1,y&&s8(y,q)),q},rl=function(y,q){y&&y.beginPath();for(var _,s,p=[],O=function(y){for(var q,_=/(\-{0,1}[\d\.]+)/gi,s=[];q=_.exec(y);)s.push(parseFloat(q[0]));return s},L=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,$={x:0,y:0};k=L.exec(q);){var k=k[0],M=k.substr(0,1);if("M"===M||"m"===M){for(var E=O(k),H=0;H<E.length;H+=2){var w=E[H],Q=E[H+1];"m"===M&&(w+=$.x,Q+=$.y),y&&y.moveTo(w,Q),p.push({x:w,y:Q}),$.x=w,$.y=Q}_=s=null}else if("H"===M||"h"===M){for(E=O(k),H=0;H<E.length;H+=1)w=E[H],"h"===M&&(w+=$.x),y&&y.lineTo(w,$.y),p.push({x:w,y:$.y}),$.x=w;_=s=null}else if("C"===M||"c"===M){for(E=O(k),H=0;H<E.length;H+=6){var x=E[H],S=E[H+1],X=E[H+2],T=E[H+3],w=E[H+4],Q=E[H+5];"c"===M&&(x+=$.x,S+=$.y,X+=$.x,T+=$.y,w+=$.x,Q+=$.y),y&&y.bezierCurveTo(x,S,X,T,w,Q),p.push({x:x,y:S}),p.push({x:X,y:T}),p.push({x:w,y:Q}),$.x=w,$.y=Q}_=[x,S,X,T,w,Q],s=null}else if("S"===M||"s"===M){for(E=O(k),H=0;H<E.length;H+=4)S=_?(x=2*_[4]-_[2],2*_[5]-_[3]):(x=$.x,$.y),X=E[H],T=E[H+1],w=E[H+2],Q=E[H+3],"s"===M&&(X+=$.x,T+=$.y,w+=$.x,Q+=$.y),y&&y.bezierCurveTo(x,S,X,T,w,Q),p.push({x:x,y:S}),p.push({x:X,y:T}),p.push({x:w,y:Q}),$.x=w,$.y=Q;_=[x,S,X,T,w,Q],s=null}else if("Q"===M||"q"===M){for(E=O(k),H=0;H<E.length;H+=4)x=E[H],S=E[H+1],w=E[H+2],Q=E[H+3],"q"===M&&(x+=$.x,S+=$.y,w+=$.x,Q+=$.y),y&&y.quadraticCurveTo(x,S,w,Q),p.push({x:x,y:S}),p.push({x:w,y:Q}),$.x=w,$.y=Q;_=null,s=[x,S,w,Q]}else if("T"===M||"t"===M){for(E=O(k),H=0;H<E.length;H+=2)S=s?(x=2*s[2]-s[0],2*s[3]-s[1]):(x=$.x,$.y),w=E[H],Q=E[H+1],"t"===M&&(w+=$.x,Q+=$.y),y&&y.quadraticCurveTo(x,S,w,Q),p.push({x:x,y:S}),p.push({x:w,y:Q}),$.x=w,$.y=Q;_=null,s=[x,S,w,Q]}else if("V"===M||"v"===M){for(E=O(k),H=0;H<E.length;H+=1)Q=E[H],"v"===M&&(Q+=$.y),y&&y.lineTo($.x,Q),p.push({x:$.x,y:Q}),$.y=Q;_=s=null}else if("L"===M||"l"===M){for(E=O(k),H=0;H<E.length;H+=2)w=E[H],Q=E[H+1],"l"===M&&(w+=$.x,Q+=$.y),y&&y.lineTo(w,Q),p.push({x:w,y:Q}),$.x=w,$.y=Q;_=s=null}else if("A"===M||"a"===M){for(E=O(k),H=0;H<E.length;H+=7){var i=E[H],N=E[H+1],a=E[H+2],l=E[H+3],j=E[H+4],w=E[H+5],Q=E[H+6];"a"===M&&(w+=$.x,Q+=$.y),(i=function(y,q,_,s,p,O,L,$){function k(y,q){return(y[0]*q[1]<y[1]*q[0]?-1:1)*Math.acos(w(y,q))}s*=Math.PI/180;var M={x:Math.cos(s)*(y.x-L.x)/2+Math.sin(s)*(y.y-L.y)/2,y:-Math.sin(s)*(y.x-L.x)/2+Math.cos(s)*(y.y-L.y)/2},E=(1<(E=Math.pow(M.x,2)/Math.pow(q,2)+Math.pow(M.y,2)/Math.pow(_,2))&&(q*=Math.sqrt(E),_*=Math.sqrt(E)),(p==O?-1:1)*Math.sqrt((Math.pow(q,2)*Math.pow(_,2)-Math.pow(q,2)*Math.pow(M.y,2)-Math.pow(_,2)*Math.pow(M.x,2))/(Math.pow(q,2)*Math.pow(M.y,2)+Math.pow(_,2)*Math.pow(M.x,2)))),p=(E=isNaN(E)?0:E)*q*M.y/_,E=E*-_*M.x/q,y={x:(y.x+L.x)/2+Math.cos(s)*p-Math.sin(s)*E,y:(y.y+L.y)/2+Math.sin(s)*p+Math.cos(s)*E},H=function(y){return Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2))},w=function(y,q){return(y[0]*q[0]+y[1]*q[1])/(H(y)*H(q))},L=k([1,0],[(M.x-p)/q,(M.y-E)/_]),M=k(Q=[(M.x-p)/q,(M.y-E)/_],p=[(-M.x-p)/q,(-M.y-E)/_]),w=(w(Q,p)<=-1&&(M=Math.PI),1<=w(Q,p)&&(M=0),_<q?q:_),E=_<q?1:q/_,Q=_<q?_/q:1;if(null==$)return s8(p={x:0,y:0,width:0,height:0},w),p.x*=E,p.width*=E,p.y*=Q,p.height*=Q,_=new WB(s),(p=bA([_.tf(p.x,p.y),_.tf(p.x+p.width,p.y),_.tf(p.x+p.width,p.y+p.height),_.tf(p.x,p.y+p.height)])).x+=y.x,p.y+=y.y,[{x:p.x,y:p.y},{x:p.x+p.width,y:p.y},{x:p.x+p.width,y:p.y+p.height},{x:p.x,y:p.y+p.height}];$.translate(y.x,y.y),$.rotate(s),$.scale(E,Q),$.arc(0,0,w,L,L+M,1-O),$.scale(1/E,1/Q),$.rotate(-s),$.translate(-y.x,-y.y)}($,i,N,a,l,j,{x:w,y:Q},y))&&(p=p.concat(i)),$.x=w,$.y=Q}_=s=null}"z"!==(k=k.substr(k.length-1))&&"Z"!==k||y&&y.closePath()}return p},gl=function(y,q,_,s,p){var O=q[0];if(y.save(),Hx(q))if(O&&1===O.length)for(var L="L"===q[0],$=q.length,k=(X=L?(y.transform(q[5],q[6],q[7],q[8],q[9],q[10]),w=y.createLinearGradient(q[1],q[2],q[3],q[4]),11):(y.transform(q[7],q[8],q[9],q[10],q[11],q[12]),w=y.createRadialGradient(q[1],q[2],q[3],q[4],q[5],q[6]),13),y.compGray);X<$;)Q=_(Q=q[X+1]),w.addColorStop(q[X],k?E5.toGrayColor(Q):Q),X+=2;else for(var M,E,H,w,Q,L="linear"===O,O=p.x,x=p.y,S=p.width,p=p.height,$=q.length,k=y.compGray,X=L?(w=y.createLinearGradient(O+S*q[1],x+p*q[2],O+S*q[3],x+p*q[4]),5):(L=Math.min(S,p),H=q[1]*S+O,M=q[2]*p+x,E=q[3]*L,w5(q[5])?(w=y.createRadialGradient(H,M,0,H,M,E),4):(y.transform(q[7],q[8],q[9],q[10],q[11]+H,q[12]+M),S=q[4]*S+O-H,O=q[5]*p+x-M,H=q[6]*L,w=y.createRadialGradient(0,0,E,S,O,H),13));X<$;)Q=_(Q=q[X+1]),w.addColorStop(q[X],k?E5.toGrayColor(Q):Q),X+=2;else w=_(q);return s?y.strokeStyle=w:y.fillStyle=w,w},nl=function(y,q){var _;(_=y.s("shape.gradient.pack"))&&y.s("shape.gradient.pack",vt(_,q)),(_=y.s("shape.border.gradient.pack"))&&y.s("shape.border.gradient.pack",vt(_,q))},vl=function(y,q,_,s){var p=!1;if(y.beginPath?y.beginPath():p=!0,wx(q)&&(q=q._as),(_=wx(_)?_._as:_)&&_.length){for(var O,L,$,k,M=0,E=0,H=_.length;E<H;E++)1===(O=_[E])?(L=q[M++],y.moveTo(L.x,p?-L.y:L.y)):2===O?(L=q[M++],y.lineTo(L.x,p?-L.y:L.y)):3===O?(L=q[M++],$=q[M++],y.quadraticCurveTo(L.x,p?-L.y:L.y,$.x,p?-$.y:$.y)):4===O?(L=q[M++],$=q[M++],k=q[M++],y.bezierCurveTo(L.x,p?-L.y:L.y,$.x,p?-$.y:$.y,k.x,p?-k.y:k.y)):5===O&&y.closePath();s&&5!==O&&y.closePath()}else{var w,Q,x,S=q.length;if(0<S){for(w=q[0],y.moveTo(w.x,p?-w.y:w.y),Q=1;Q<S;Q++)x=q[Q],y.lineTo(x.x,p?-x.y:x.y);s&&y.closePath()}}},bl=function(y,q,_,s){if(wx(y)&&(y=y._as),(q=wx(q)?q._as:q)&&q.length){_=_||M8;for(var p,O,L,$,k,M,E,H,w=[],Q=M5,x=0,S=0,X=q.length;S<X;S++)if(1===(p=q[S]))w.push(Q=[]),Q.push(y[x++]);else if(2===p)Q.push(y[x++]);else if(3===p){for(O=Q[Q.length-1],L=y[x++],$=y[x++],M=1;M<_;M++)E=ox(M/_,O.x,L.x,$.x),H=ox(M/_,O.y,L.y,$.y),Q.push({x:E,y:H,b:!0});Q.push($)}else if(4===p){for(O=Q[Q.length-1],L=y[x++],$=y[x++],k=y[x++],M=1;M<_;M++)E=Yx(M/_,O.x,L.x,$.x,k.x),H=Yx(M/_,O.y,L.y,$.y,k.y),Q.push({x:E,y:H,b:!0});Q.push(k)}else 5===p&&Q.push(Q[0]);return s&&5!==p&&Q&&2<Q.length&&Q.push(Q[0]),w}return s&&2<y.length&&(y=y.slice()).push(y[0]),y?[y]:[]},Il=function(y,q,_,s,p,O){var L,$,k=s,M=(q=el(q))[0],E=q[1],H=q[2],w=_?(L=(q=el(_))[0]-M,$=q[1]-E,q[2]-H):(L=255-M,$=255-E,255-H);for(O||(O=10<s?1:.5,O=p<1?s5(O/p,2):O),y.save(),y.shadowOffsetX=0,y.shadowOffsetY=0,y.shadowBlur=0,y.shadowColor=0;0<(s-=O);){var Q=E+$*(S=1-s/k),x=H+w*S,S=s5(C5(M+L*S),255),Q=s5(C5(Q),255),x=s5(C5(x),255);y.strokeStyle="rgb("+S+","+Q+","+x+")",y.lineWidth=s,y.stroke()}y.restore()},Ul=(S&&(n5=0<(qn=S+""||NL).indexOf(nD.substr(0,2))&&1<qn.indexOf(sD+sD.substr(1,1))),J={},function(y,q){var _=y+"-"+q;if(O=J[_])return O;var s,p,O=el(y),L=q<0?(s=C5(O[0]*(q=(100+q)/100)),p=C5(O[1]*q),C5(O[2]*q)):(s=O[0],p=O[1],L=O[2],p+=(255-p)*(q/=100),L+=(255-L)*q,s=s5(C5(s+=(255-s)*q),255),p=s5(C5(p),255),s5(C5(L),255));return J[_]="rgb("+s+","+p+","+L+")"}),dl=function(y,q,_,s,p,O){O&&(y.fillStyle=O),y.beginPath(),y.rect(q,_,s,p),y.fill()},yU=function(y,q,_,s,p,O,L){y.beginPath(),SU[q](y,_.x,_.y,_.width,_.height,s,p,O,L)},qU=function(y,q,_,s,p){_=SU[_],y.fillStyle=_?_(y,q,s||PU,p.x,p.y,p.width,p.height):q},_U=function(y,q,_,s,p,O,L,$,k){y.fillStyle=pU(y,q,_,s,p,O,L,$,k)},sU=function(y,q,_,s,p,O,L,$,k){y.strokeStyle=pU(y,q,_,s,p,O,L,$,k)},pU=function(y,q,_,s,p,O,L,$,k){var M,E,H,w,Q,x,S,X,T,i,N,a,l,j;try{!q.tagName&&q.comps&&(q._cacheImage_||(q._cacheImage_={}),E="override"===s?"colors_override":"override_rgb"===s?"colors_override_rgb":"override_a"===s?"colors_override_a":"colors",q._cacheImage_[E]||(q._cacheImage_[E]={__count__:0}),(H=q._cacheImage_[E][_])||(q._cacheImage_[E].__count__>E5.imageCacheThreshold&&(q._cacheImage_[E]={__count__:0}),H=P.Default.toCanvas(q,d8(q),yu(q),null,p,O,_,null,s),q._cacheImage_[E][_]=H,q._cacheImage_[E].__count__++),q=H),(M=y.createPattern(q,"repeat")).setTransform&&$&&L&&(k=k||0,w=new WB,x=d8(q),S=yu(q),X=$.width/2,T=$.height/2,"uniform"===L?(i=$.width/x,N=$.height/S,a=1,l=$.x,j=$.y,i<N?(a=i,j+=($.height-S*a)/2,T=S*a/2):(a=N,l+=($.width-x*a)/2,X=x*a/2),w.appendTranslate(l+X,j+T).appendRotate(k).appendTranslate(-X,-T).appendScale(a,a),Q=[a,0,0,a,l,j]):"fill"===L?(w.appendTranslate($.x+X,$.y+T).appendRotate(k).appendTranslate(-X,-T).appendScale($.width/x,$.height/S),Q=[$.width/x,0,0,$.height/S,$.x,$.y]):"centerUniform"===L&&(X=x/2,T=S/2,w.appendTranslate($.x+($.width-x)/2+X,$.y+($.height-S)/2+T).appendRotate(k).appendTranslate(-X,-T),Q=[1,0,0,1,$.x+($.width-x)/2,$.y+($.height-S)/2]),(Q=w.toArray())&&M.setTransform(new DOMMatrix(Q)))}catch(y){M="black"}return M},OU=function(y){for(var q,_=[],s=0,p=y.length,O=0;O<65;O++)_[O]=O;for(O=0;O<65;O++)s=(s+_[O]+y.charCodeAt(O%p))%65,q=_[O],_[O]=_[s],_[s]=q;for(O=0;O<65;O++)_[O]=cB[_[O]];return _.join("")},LU=function(y,q,_,s,p,O,L){y.save(),y.translate(q,_),y.scale(1,L/O),y.arc(0,0,O,s,p),y.restore()},$U=function(y,q,_,s,p,O,L,$,k){6===arguments.length&&(Hx(O)?($=O[1],k=O[2],L=O[3],O=O[0]):k=$=L=O);var M=q+s,E=_+p,H=s<p?2*s:2*p;O=O<H?O:H,L=L<H?L:H,$=$<H?$:H,k=k<H?k:H,y.roundRect?y.roundRect(q,_,s,p,[O,L,k,$]):(y.moveTo(q+s/2,_),y.arcTo(M,_,M,E,L),y.arcTo(M,E,q,E,k),y.arcTo(q,E,q,_,$),y.arcTo(q,_,M,_,O),y.lineTo(q+s/2,_))},kU=function(y,q,_,s,p,O,L){q&&(_=Z5(_),s=Z5(s),L=L||1,y.fillStyle=q,y.beginPath(),y.rect(_,s,L,O),y.rect(_,s,p,L),0<O-L&&y.rect(_,s+O-L,p,L),0<p-L&&y.rect(_+p-L,s,L,O),y.fill())},MU=function(y,q,_,s){var p,O,L,$,k=s.x,M=s.y,E=s.width,s=s.height;!q||!_||E<=0||s<=0||(p=oA(q),O=YA(q),L=0<_,1===_||-1===_?(y.fillStyle=L?p:O,y.beginPath(),y.rect(k,M,1,s),y.rect(k,M,E,1),y.fill(),y.fillStyle=L?O:p,y.beginPath(),y.rect(k,M+s-1,E,1),y.rect(k+E-1,M,1,s)):(_=s5(F5(_),s5(E/2,s/2)),($=y.createLinearGradient(k,M,k+_,M)).addColorStop(0,L?p:O),$.addColorStop(1,q),y.fillStyle=$,y.beginPath(),y.moveTo(k,M),y.lineTo(k+_,M+_),y.lineTo(k+_,M+s-_),y.lineTo(k,M+s),y.lineTo(k,M),y.fill(),($=y.createLinearGradient(k,M,k,M+_)).addColorStop(0,L?p:O),$.addColorStop(1,q),y.fillStyle=$,y.beginPath(),y.moveTo(k,M),y.lineTo(k+_,M+_),y.lineTo(k+E-_,M+_),y.lineTo(k+E,M),y.lineTo(k,M),y.fill(),($=y.createLinearGradient(k,M+s,k,M+s-_)).addColorStop(0,L?O:p),$.addColorStop(1,q),y.fillStyle=$,y.beginPath(),y.moveTo(k,M+s),y.lineTo(k+_,M+s-_),y.lineTo(k+E-_,M+s-_),y.lineTo(k+E,M+s),y.lineTo(k,M+s),y.fill(),($=y.createLinearGradient(k+E,M,k+E-_,M)).addColorStop(0,L?O:p),$.addColorStop(1,q),y.fillStyle=$,y.beginPath(),y.moveTo(k+E,M),y.lineTo(k+E-_,M+_),y.lineTo(k+E-_,M+s-_),y.lineTo(k+E,M+s),y.lineTo(k+E,M)),y.fill())},EU=function(y,q,_,s,p,O,L){return(y=y.createLinearGradient(s,p,O,L)).addColorStop(0,_),y.addColorStop(1,q),y},HU=function(y,q,_,s,p,O,L){return(y=y.createLinearGradient(s,p,O,L)).addColorStop(0,q),y.addColorStop(.5,_),y.addColorStop(1,q),y},wU=function(y,q,_,s,p,O,L){return(y=y.createLinearGradient(s,p,O,L)).addColorStop(0,q),y.addColorStop(1/3,_),y.addColorStop(2/3,q),y.addColorStop(1,_),y},QU=function(y,q,_,s,p,O,L,$,k){return(y=y.createRadialGradient(s+O*$,p+L*k,s5(O,L)/24,s+O/2,p+L/2,_5(O,L)/2)).addColorStop(0,_),y.addColorStop(1,q),y},xU=[0,-1,.22451398828979272,-.30901699437494734,.9510565162951535,-.30901699437494745,.3632712640026804,.11803398874989468,.5877852522924731,.8090169943749473,-11102230246251565e-32,.38196601125010515,-.587785252292473,.8090169943749475,-.3632712640026805,.1180339887498949,-.9510565162951536,-.3090169943749473,-.22451398828979285,-.30901699437494734],SU={polygon:function(y,q,_,s,p,O,L,$){(O==M5||O<3)&&(O=6),L==M5&&(L=0),$==M5&&($=!0);var k=s5(s,p),M=k/2,E=new f(q+s/2,_+p/2),H=new f,w=0,Q=2*u/O,x=new f(M,M);if(!1===$&&x.multiply({x:s/k,y:p/k}),0===L)for(X=0;X<O;X++)H.set(H5(w),p5(w)).multiply(x).add(E),0===X?y.moveTo(H.x,H.y):y.lineTo(H.x,H.y),w+=Q;else{for(var S=[],X=0;X<2;X++)S.push(new f(H5(w),p5(w)).multiply(x).add(E)),w+=Q;var T=S.shift(),i=S[0],q=new f(H5(w),p5(w)).multiply(x).add(E),_=T.clone().sub(i),M=q.clone().sub(i),$=_.clone().normalize().dot(M.clone().normalize()),s=Math.sqrt((1-$)/(1+$));for(_.setLength(L/s).add(i),y.moveTo(_.x,_.y),X=0;X<O;X++)S.push(new f(H5(w),p5(w)).multiply(x).add(E)),w+=Q,T=S.shift(),i=S[0],y.arcTo(T.x,T.y,i.x,i.y,L)}y.closePath()},arc:function(y,q,_,s,p,O,L,$,k){O==M5&&(O=u),L==M5&&(L=O5),q+=s/2,_+=p/2,($=$==M5||$)&&y.moveTo(q,_),k?LU(y,q,_,O,L,s/2,p/2):y.arc(q,_,s5(s,p)/2,O,L),$&&y.closePath()},rect:function(y,q,_,s,p){y.rect(q,_,s,p)},circle:function(y,q,_,s,p){y.arc(q+s/2,_+p/2,s5(s,p)/2,0,O5,!0)},oval:function(y,q,_,s,p){LU(y,q+s/2,_+p/2,0,O5,s/2,p/2)},roundRect:function(y,q,_,s,p,O){O==M5&&(O=s5(s5(s,p)/4,8)),$U(y,q,_,s,p,O),y.closePath()},star:function(y,q,_,s,p){var O=2*s,L=2*p,$=q+s/2,k=_+p/2;y.moveTo($-O/4,k-L/12),y.lineTo(q+.306*s,_+.579*p),y.lineTo($-O/6,k+L/4),y.lineTo(q+s/2,_+.733*p),y.lineTo($+O/6,k+L/4),y.lineTo(q+.693*s,_+.579*p),y.lineTo($+O/4,k-L/12),y.lineTo(q+.611*s,_+.332*p),y.lineTo($+0,k-L/4),y.lineTo(q+.388*s,_+.332*p),y.closePath()},pentagram:function(y,q,_,s,p){var O=q+.5*s,L=_+(p=.5*p),$=.5257311121191336*s,k=xU,M=0;for(y.moveTo(O+($=p<$?p:$)*k[M++],L+$*k[M++]);M<20;)y.lineTo(O+$*k[M++],L+$*k[M++]);y.closePath()},triangle:function(y,q,_,s,p){y.moveTo(q+s/2,_),y.lineTo(q+s,_+p),y.lineTo(q,_+p),y.closePath()},hexagon:function(y,q,_,s,p){y.moveTo(q,_+p/2),y.lineTo(q+s/4,_+p),y.lineTo(q+3*s/4,+_+p),y.lineTo(q+s,_+p/2),y.lineTo(q+3*s/4,_),y.lineTo(q+s/4,_),y.closePath()},pentagon:function(y,q,_,s,p){var O=2*s,L=2*p,q=q+s/2,s=_+p/2;y.moveTo(q-O/4,s-L/12),y.lineTo(q-O/6,s+L/4),y.lineTo(q+O/6,s+L/4),y.lineTo(q+O/4,s-L/12),y.lineTo(q+0,s-L/4),y.closePath()},diamond:function(y,q,_,s,p){y.moveTo(q+s/2,_),y.lineTo(q,_+p/2),y.lineTo(q+s/2,_+p),y.lineTo(q+s,_+p/2),y.closePath()},rightTriangle:function(y,q,_,s,p){y.moveTo(q,_),y.lineTo(q+s,_+p),y.lineTo(q,_+p),y.closePath()},parallelogram:function(y,q,_,s,p){var O=s/4;y.moveTo(q+O,_),y.lineTo(q+s,_),y.lineTo(q+s-O,_+p),y.lineTo(q,_+p),y.closePath()},trapezoid:function(y,q,_,s,p){var O=s/4;y.moveTo(q+O,_),y.lineTo(q+s-O,_),y.lineTo(q+s,_+p),y.lineTo(q,_+p),y.closePath()},"linear.southwest":function(y,q,_,s,p,O,L){return EU(y,q,_,s,p+L,s+O,p)},"linear.southeast":function(y,q,_,s,p,O,L){return EU(y,q,_,s+O,p+L,s,p)},"linear.northwest":function(y,q,_,s,p,O,L){return EU(y,q,_,s,p,s+O,p+L)},"linear.northeast":function(y,q,_,s,p,O,L){return EU(y,q,_,s+O,p,s,p+L)},"linear.north":function(y,q,_,s,p,O,L){return EU(y,q,_,s,p,s,p+L)},"linear.south":function(y,q,_,s,p,O,L){return EU(y,q,_,s,p+L,s,p)},"linear.west":function(y,q,_,s,p,O,L){return EU(y,q,_,s,p,s+O,p)},"linear.east":function(y,q,_,s,p,O,L){return EU(y,q,_,s+O,p,s,p)},"radial.center":function(y,q,_,s,p,O,L){return QU(y,q,_,s,p,O,L,.5,.5)},"radial.southwest":function(y,q,_,s,p,O,L){return QU(y,q,_,s,p,O,L,.25,.75)},"radial.southeast":function(y,q,_,s,p,O,L){return QU(y,q,_,s,p,O,L,.75,.75)},"radial.northwest":function(y,q,_,s,p,O,L){return QU(y,q,_,s,p,O,L,.25,.25)},"radial.northeast":function(y,q,_,s,p,O,L){return QU(y,q,_,s,p,O,L,.75,.25)},"radial.north":function(y,q,_,s,p,O,L){return QU(y,q,_,s,p,O,L,.5,.25)},"radial.south":function(y,q,_,s,p,O,L){return QU(y,q,_,s,p,O,L,.5,.75)},"radial.west":function(y,q,_,s,p,O,L){return QU(y,q,_,s,p,O,L,.25,.5)},"radial.east":function(y,q,_,s,p,O,L){return QU(y,q,_,s,p,O,L,.75,.5)},"spread.horizontal":function(y,q,_,s,p,O,L){return HU(y,q,_,s,p,s+O,p)},"spread.vertical":function(y,q,_,s,p,O,L){return HU(y,q,_,s,p,s,p+L)},"spread.diagonal":function(y,q,_,s,p,O,L){return HU(y,q,_,s+O,p,s,p+L)},"spread.antidiagonal":function(y,q,_,s,p,O,L){return HU(y,q,_,s,p,s+O,p+L)},"spread.north":function(y,q,_,s,p,O,L){return wU(y,q,_,s,p-L/4,s,p+L+L/4)},"spread.south":function(y,q,_,s,p,O,L){return wU(y,_,q,s,p-L/4,s,p+L+L/4)},"spread.west":function(y,q,_,s,p,O,L){return wU(y,q,_,s-O/4,p,s+O+O/4,p)},"spread.east":function(y,q,_,s,p,O,L){return wU(y,_,q,s-O/4,p,s+O+O/4,p)}},XU=function(y,q,_){return new WB(y).tf(q,_)},TU=function(y){var q=y.touches[0],y=y.touches[1],_=q.clientX,q=q.clientY,s=y.clientX,y=y.clientY;return B5((_-s)*(_-s)+(q-y)*(q-y))},iU=(function(){for(var y=0,q=aL.split(""),_=0;_<q.length;_++)y=10*R5(q[_])+y;for(var s,p,O,L,$,k=Y[573..toString(8*_)+cD.substr(_)+3],M=Y[573..toString(8*_)+cD.substr(_)+4],E=M5||4,H=M5||1,w=M5||1,Q=(E<0?E=0:.25<E&&(E=.25),[]),x=[],S=[],X=O5/w,T=O5/H,i=.5-E,N=0;N<=H;N++)for(L=H5(p=N*T-u),O=p5(p),j=0;j<=w;j++)$=i+E*L,Q.push(H5(s=j*X)*$,O*E,-p5(s)*$),x.push(j/w,1-N/H);for(N=0;N<H;N++)for(var a=N*(w+1),l=(N+1)*(w+1),j=0;j<w;j++)S.push(a+j,l+j+1,l+j,a+j,a+j+1,l+j+1),Yx.z=nl.z=[k,M]}(),function(y,q,_){for(var s=0;s<_.size();s++){var p=_.get(s);y.co(p)&&q.add(p)}for(s=0;s<_.size();s++)p=_.get(s),iU(y,q,p._children)}),NU=function(y,q,_){for(var s=0;s<_.size();s++){var p=_.get(_.size()-1-s);y.co(p)&&q.add(p)}for(s=0;s<_.size();s++)p=_.get(s),NU(y,q,p._children)},aU=function(y,q,_){for(var s=!1,p=0;p<_.size();p++){var O=_.get(p);y.co(O)?s&&q.add(O):s=1}for(p=0;p<_.size();p++)O=_.get(p),aU(y,q,O._children)},lU=function(y,q,_){for(var s=!1,p=0;p<_.size();p++){var O=_.get(_.size()-1-p);y.co(O)?s&&q.add(O):s=!0}for(p=0;p<_.size();p++)O=_.get(p),lU(y,q,O._children)},jU=E5.moveDatas=function(y,s,p,O){var q,_,L,$,k,M,E,H=O==M5;0===s&&0===p&&(H||0===O)||(q=!0,_=[],y.forEach(function(y){q&&(y._69O||xx(y)||Xx(y))&&(q=!1)}),q?_=y:(L={},$={},y.forEach(function(y){L[y._id]=!0}),k={},M=function(y){var q=y._id;return L[q]?(_.push(y),k[q]=!0):k[q]=!1},E=function(y){var q=y._id;if($[q])return M(y);var _=k[q];if(_!==k5)return _;var s=y._parent;return s&&(Xx(s)||xx(s))&&E(s)||(s=y._host)&&($[q]=q,_=E(s),$[q]=k5,_)?k[q]=!0:M(y)},y.forEach(function(y){E(y)})),_.forEach(function(y){var q,_;W(y)?H?y.translate(s,p):y.translate3d(s,p,O):(q=y.s(GD))&&!q.isEmpty()&&(_=new n,q.each(function(y){y=DA(y),H?(y.x+=s,y.y+=p):(y.x+=s,y.y+=O,y.e==M5?y.e=p:y.e+=p),_.add(y)}),y.s(GD,_))}))},ZU=function(y,q){var _,s;if(y=y.parentElement)return y.updateAppendMatrix&&(delete y.updateAppendMatrix,function y(q,_){D||(D=new G,c=new Q5,R=new G,b=new G,I=new G),_==k5&&(_=new G);for(var s,p=getComputedStyle(q),O=(!e5&&p.perspective&&"none"!==p.perspective&&(R.el[11]=-1/It(p.perspective),Ut(p.perspectiveOrigin,c),b.setPosition(c),c.negate(),I.setPosition(c),_.multiplyMatrices(I,_),_.multiplyMatrices(R,_),_.multiplyMatrices(b,_)),p.transform&&"none"!==p.transform&&(L=p.transform,(s=D)==k5&&(s=new G),bt(L,"matrix3d")?($=($=L.substring(9,L.length-1).split(",")).map(It),s.fromArray($)):bt(L,"matrix")&&($=($=L.substring(7,L.length-1).split(",")).map(It),s.el[0]=$[0],s.el[1]=$[1],s.el[2]=0,s.el[3]=0,s.el[4]=$[2],s.el[5]=$[3],s.el[6]=0,s.el[7]=0,s.el[8]=0,s.el[9]=0,s.el[10]=1,s.el[11]=0,s.el[12]=$[4],s.el[13]=$[5],s.el[14]=0,s.el[15]=1),Ut(p.transformOrigin,c),b.setPosition(c),c.negate(),I.setPosition(c),!e5&&"preserve-3d"===p.transformStyle||(D.el[8]=0,D.el[9]=0,D.el[10]=1,D.el[11]=0),_.multiplyMatrices(I,_),_.multiplyMatrices(D,_),_.multiplyMatrices(b,_)),q.offsetParent),L=q.offsetLeft,$=q.offsetTop,k=q.parentElement;k&&k!==O;){var M=getComputedStyle(k);if("none"!==M.transform||"none"!==M.perspective)break;k=k.parentElement}k==k5&&q!==q.ownerDocument.documentElement&&"fixed"!==p.position&&(k=q.ownerDocument.documentElement),O!=k5&&O!=k&&(L-=k.offsetLeft,$-=k.offsetTop),k&&(L-=k.scrollLeft,$-=k.scrollTop),c.set(L,$,0),b.setPosition(c),_.multiplyMatrices(b,_),k&&y(k,_)}(y,_=new G),(s=new G).getInverse(_),y._matrixAppend=s,y._maxrixPreAppend=_),q?y._matrixAppend:y._maxrixPreAppend},KU=o.getPrototypeOf?function(y,q,_){(q=function(y,q){for(;y&&!y.hasOwnProperty(q);)y=o.getPrototypeOf(y);return y&&o.getOwnPropertyDescriptor(y,q)}(q,_))&&o.defineProperty(y,_,q)}:function(y,q,_){y[_]=q[_]},CU={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},BU=function(){var s={1:function(y,q){return{x:y.x-q.width/2,y:y.y-q.height/2}},2:function(y,q){return{x:y.x+q.width/2,y:y.y-q.height/2}},3:function(y,q){return{x:y.x+y.width/2,y:y.y-q.height/2}},4:function(y,q){return{x:y.x+y.width-q.width/2,y:y.y-q.height/2}},5:function(y,q){return{x:y.x+y.width+q.width/2,y:y.y-q.height/2}},6:function(y,q){return{x:y.x,y:y.y}},7:function(y,q){return{x:y.x+y.width/2,y:y.y}},8:function(y,q){return{x:y.x+y.width,y:y.y}},9:function(y,q){return{x:y.x-q.width/2,y:y.y+q.height/2}},10:function(y,q){return{x:y.x+q.width/2,y:y.y+q.height/2}},11:function(y,q){return{x:y.x+y.width/2,y:y.y+q.height/2}},12:function(y,q){return{x:y.x-q.width/2+y.width,y:y.y+q.height/2}},13:function(y,q){return{x:y.x+y.width+q.width/2,y:y.y+q.height/2}},14:function(y,q){return{x:y.x-q.width/2,y:y.y+y.height/2}},15:function(y,q){return{x:y.x,y:y.y+y.height/2}},16:function(y,q){return{x:y.x+q.width/2,y:y.y+y.height/2}},17:function(y,q){return{x:y.x+y.width/2,y:y.y+y.height/2}},18:function(y,q){return{x:y.x+y.width-q.width/2,y:y.y+y.height/2}},19:function(y,q){return{x:y.x+y.width,y:y.y+y.height/2}},20:function(y,q){return{x:y.x+y.width+q.width/2,y:y.y+y.height/2}},21:function(y,q){return{x:y.x-q.width/2,y:y.y+y.height-q.height/2}},22:function(y,q){return{x:y.x+q.width/2,y:y.y+y.height-q.height/2}},23:function(y,q){return{x:y.x+y.width/2,y:y.y+y.height-q.height/2}},24:function(y,q){return{x:y.x+y.width-q.width/2,y:y.y+y.height-q.height/2}},25:function(y,q){return{x:y.x+y.width+q.width/2,y:y.y+y.height-q.height/2}},26:function(y,q){return{x:y.x,y:y.y+y.height}},27:function(y,q){return{x:y.x+y.width/2,y:y.y+y.height}},28:function(y,q){return{x:y.x+y.width,y:y.y+y.height}},29:function(y,q){return{x:y.x-q.width/2,y:y.y+y.height+q.height/2}},30:function(y,q){return{x:y.x+q.width/2,y:y.y+y.height+q.height/2}},31:function(y,q){return{x:y.x+y.width/2,y:y.y+y.height+q.height/2}},32:function(y,q){return{x:y.x+y.width-q.width/2,y:y.y+y.height+q.height/2}},33:function(y,q){return{x:y.x+y.width+q.width/2,y:y.y+y.height+q.height/2}},34:function(y,q){return{x:y.x,y:y.y-q.height/2}},35:function(y,q){return{x:y.x+y.width,y:y.y-q.height/2}},36:function(y,q){return{x:y.x,y:y.y+y.height+q.height/2}},37:function(y,q){return{x:y.x+y.width,y:y.y+y.height+q.height/2}},38:function(y,q){return{x:y.x+y.width/4,y:y.y-q.height/2}},39:function(y,q){return{x:y.x+3*y.width/4,y:y.y-q.height/2}},40:function(y,q){return{x:y.x+y.width/4,y:y.y}},41:function(y,q){return{x:y.x+3*y.width/4,y:y.y}},42:function(y,q){return{x:y.x+y.width/4,y:y.y+q.height/2}},43:function(y,q){return{x:y.x+3*y.width/4,y:y.y+q.height/2}},44:function(y,q){return{x:y.x+y.width/2,y:y.y+y.height/2-q.height/2}},45:function(y,q){return{x:y.x+y.width/4,y:y.y+y.height/2}},46:function(y,q){return{x:y.x+y.width/2-q.width/2,y:y.y+y.height/2}},47:function(y,q){return{x:y.x+y.width/2+q.width/2,y:y.y+y.height/2}},48:function(y,q){return{x:y.x+3*y.width/4,y:y.y+y.height/2}},49:function(y,q){return{x:y.x+y.width/2,y:y.y+y.height/2+q.height/2}},50:function(y,q){return{x:y.x+y.width/4,y:y.y+y.height-q.height/2}},51:function(y,q){return{x:y.x+3*y.width/4,y:y.y+y.height-q.height/2}},52:function(y,q){return{x:y.x+y.width/4,y:y.y+y.height}},53:function(y,q){return{x:y.x+3*y.width/4,y:y.y+y.height}},54:function(y,q){return{x:y.x+y.width/4,y:y.y+y.height+q.height/2}},55:function(y,q){return{x:y.x+3*y.width/4,y:y.y+y.height+q.height/2}}};if(function(y){var q,_=0;for(q in y)2===q.length&&573===R5(q,32)&&(Wn=y[q]),_++;return _}(Y))return function(y,q,_){return s[y](q,_||fn)}}(),FU=(ax(C,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#45C4F9",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#FFF",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0),C.reverse),S=C.transparent,qn=C.rectSelectBackground,VU=C.dash,hU=C.titleBackground,tU=C.titleIconBackground,uU=C.headerBackground,JU=C.headerIconBackground,DU=C.headerSeparator,cU=C.headerLine,RU=C.contentIconBackground,oU=C.contentLine,YU=(C.widgetIconHighlight,C.widgetIconBorder),x=(C.widgetIconGradient,C.imageBackground),PU=C.imageGradient,mU=C.highlight,WU=C.label,AU=C.labelSelect;if(!Y.shutAlert1){var zU=new Date,eU=o5.split("-"),zU=new Date(zU.getFullYear(),zU.getMonth(),zU.getDate()),o5=new Date(R5(eU[0],10),R5(eU[1],10)-1,R5(eU[2],10)),eU=zU.getTime(),zU=o5.getTime(),o5="ht_try",fU=Y.alert;try{(pA=Y.localStorage)&&fU&&(eU<zU&&zU-eU<1728e6?(_=(zU-eU)/864e5,pA&&pA[o5]!=_&&(pA[o5]=_,Y.htWillExpire?fU(Y.htWillExpire.replace("{{day}}",_)):fU("HT for Web free trial license will expire in "+_+" days, please apply for a new license!"))):(zU<=eU&&(Y.htExpired?fU(Y.htExpired):fU("Your free trial of HT for Web has expired!")),pA&&delete pA[o5]))}catch(q){}}Math.sign===k5&&(Math.sign=function(y){return y<0?-1:0<y?1:+y});var GU,rU,gU,nU,vU,bU,IU,UU,dU,y0,q0,_0,s0,p0,O0,L0,$0,k0,M0,E0,H0,w0,Q0,x0,S0,X0,T0,i0,N0,a0,l0,j0,Z0,K0,C0,B0,F0,V0,h0,t0,u0,J0,D0,c0,R0,o0,Y0,P0,m0,W0,A0,z0,e0,f0,G0,r0,g0,n0,v0,b0,I0,U0,d0,yg,qg,_g,sg,pg,Og,Lg,$g,kg,Mg,Eg,Hg,wg,Qg,A,xg,Sg,Xg,Tg,ig,z,Ng,ag,lg,jg,Zg,Kg,Cg,Bg,Fg,Vg,hg,tg,ug,Jg,Dg,cg,Rg,og,Yg,Pg,mg,Wg,Ag,zg,eg,fg,Gg,rg,gg,ng,vg,bg,Ig,Ug,dg,yB,qB,_B,sB,pB,OB,LB,$B,kB,MB,EB,HB,wB,QB,xB,SB,XB,TB,iB,NB,aB,lB,jB,ZB,KB,CB,BB,FB,VB,hB,tB,uB,JB,DB,cB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",RB=function(y,q){var _,s,p,O,L,$,k="",M=0;for(y=unescape(encodeURIComponent(y));M<y.length;)p=(_=y.charCodeAt(M++))>>2,O=(3&_)<<4|(_=y.charCodeAt(M++))>>4,L=(15&_)<<2|(s=y.charCodeAt(M++))>>6,$=63&s,isNaN(_)?L=$=64:isNaN(s)&&($=64),k=k+q.charAt(p)+q.charAt(O)+q.charAt(L)+q.charAt($);return k},oB=function(y,q,_){for(var s,p,O,L,$,k,M="",E=_||0;E<y.length;)O=q.indexOf(y.charAt(E++)),s=(15&(L=q.indexOf(y.charAt(E++))))<<4|($=q.indexOf(y.charAt(E++)))>>2,p=(3&$)<<6|(k=q.indexOf(y.charAt(E++))),M+=String.fromCharCode(O<<2|L>>4),64!=$&&(M+=String.fromCharCode(s)),64!=k&&(M+=String.fromCharCode(p));return decodeURIComponent(escape(M))},YB=[],PB=[],e=P.Math={generateUUID:function(){for(var p=[],y=0;y<256;y++)p[y]=(y<16?"0":"")+y.toString(16).toUpperCase();return function(){var y=4294967295*Math.random()|0,q=4294967295*Math.random()|0,_=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return p[255&y]+p[y>>8&255]+p[y>>16&255]+p[y>>24&255]+"-"+p[255&q]+p[q>>8&255]+"-"+p[q>>16&15|64]+p[q>>24&255]+"-"+p[63&_|128]+p[_>>8&255]+"-"+p[_>>16&255]+p[_>>24&255]+p[255&s]+p[s>>8&255]+p[s>>16&255]+p[s>>24&255]}}(),clamp:function(y,q,_){return Math.max(q,Math.min(_,y))},fequal:function(y,q,_){return null==_&&(_=1e-8),Math.abs(y-q)<_},generateIncreasingID:(GU=0,function(){return++GU}),newIdGenerator:function(){var y=0;return{next:function(){return++y}}},encodeBase64:function(y,q){return RB(y,q||cB)},decodeBase64:function(y,q){return oB(y,q||cB)},randomArray:function(y,q){for(var _=(q=q||y.length)-1;0<_;_--){var s=Math.floor(Math.random()*(_+1)),p=y[_];y[_]=y[s],y[s]=p}return y},randomInt:function(y,q){return q===k5&&(q=y,y=0),y+Math.floor(Math.random()*(q-y))},randomFloat:function(y,q){return q===k5&&(q=y,y=0),y+Math.random()*(q-y)},modToPositive:function(y,q){return(y%=q)<0&&(y+=q),y},roundFloat:function(y,q){return q=1===q?10:2==q?100:3==q||q==M5?1e3:Math.pow(10,q),Math.round(y*q)/q},isPOT:function(y){return 0<y&&0==(y-1&y)},nearestPOT:function(y){if(!y)return 1;var q=y,_=(q--,q=(q=(q=(q=(q|=q>>1)|q>>2)|q>>4)|q>>8)|q>>16,++q>>1);return q-y<y-_?q:_},requestMatrix4:function(){return 0<YB.length?YB.pop():new e.Matrix4},releaseMatrix4:function(y){YB.push(y)},requestVector3:function(){return 0<PB.length?PB.pop():new e.Vector3},releaseVector3:function(y){PB.push(y)}},mB=P.Matrix=P.Math.Matrix2d=function(y,q,_,s,p){this.setFromTransform(y,q,_,s,p)},WB=mB,AB=(((mB.prototype={}).constructor=mB).prototype.set=function(y,q,_,s,p,O){return this.a=y,this.b=q,this.c=_,this.d=s,this.tx=p,this.ty=O,this},mB.prototype.setFromTransform=function(y,q,_,s,p){var O,L=this;return y===k5?(L.a=1,L.b=0,L.c=0,L.d=1,L.tx=0,void(L.ty=0)):(y=y?(O=p5(y),H5(y)):(O=0,1),p=p||1,L.a=y*(s=s||1),L.b=O*s,L.c=-O*p,L.d=y*p,L.tx=q||0,L.ty=_||0,L)},mB.prototype.apply=function(y,q){q=q||new f;var _=y.x,y=y.y;return q.x=this.a*_+this.c*y+this.tx,q.y=this.b*_+this.d*y+this.ty,q},mB.prototype.applyInverse=function(y,q){q=q||new f;var _=1/(this.a*this.d+this.c*-this.b),s=y.x,y=y.y;return q.x=this.d*_*s+-this.c*_*y+(this.ty*this.c-this.tx*this.d)*_,q.y=this.a*_*y+-this.b*_*s+(-this.ty*this.a+this.tx*this.b)*_,q},mB.prototype.translate=function(y,q){return this.tx+=y,this.ty+=q,this},mB.prototype.scale=function(y,q){return this.a*=y,this.d*=q,this.c*=y,this.b*=q,this.tx*=y,this.ty*=q,this},mB.prototype.rotate=function(y){var q=Math.cos(y),y=Math.sin(y),_=this.a,s=this.c,p=this.tx;return this.a=_*q-this.b*y,this.b=_*y+this.b*q,this.c=s*q-this.d*y,this.d=s*y+this.d*q,this.tx=p*q-this.ty*y,this.ty=p*y+this.ty*q,this},mB.prototype.appendTranslate=function(y,q){return this.tx+=this.a*y+this.c*q,this.ty+=this.b*y+this.d*q,this},mB.prototype.appendScale=function(y,q){return this.a*=y,this.d*=q,this.c*=q,this.b*=y,this},mB.prototype.appendRotate=function(y){if(!y)return this;var q=Math.cos(y),y=Math.sin(y),_=this.a,s=this.b;return this.a=_*q+this.c*y,this.b=s*q+this.d*y,this.c=-_*y+this.c*q,this.d=-s*y+this.d*q,this},mB.prototype.append=function(y){var q=this.a,_=this.b,s=this.c,p=this.d;return this.a=y.a*q+y.b*s,this.b=y.a*_+y.b*p,this.c=y.c*q+y.d*s,this.d=y.c*_+y.d*p,this.tx=y.tx*q+y.ty*s+this.tx,this.ty=y.tx*_+y.ty*p+this.ty,this},mB.prototype.setTransform=function(y,q,_,s,p,O,L,$,k){var M=Math.sin(L),L=Math.cos(L),E=Math.cos(k),k=Math.sin(k),H=-Math.sin($),$=Math.cos($),w=L*p,p=M*p,L=L*O;return this.a=E*w+k*(M=-M*O),this.b=E*p+k*L,this.c=H*w+$*M,this.d=H*p+$*L,this.tx=y+(_*w+s*M),this.ty=q+(_*p+s*L),this},mB.prototype.prepend=function(y){var q,_,s=this.tx;return 1===y.a&&0===y.b&&0===y.c&&1===y.d||(q=this.a,_=this.c,this.a=q*y.a+this.b*y.c,this.b=q*y.b+this.b*y.d,this.c=_*y.a+this.d*y.c,this.d=_*y.b+this.d*y.d),this.tx=s*y.a+this.ty*y.c+y.tx,this.ty=s*y.b+this.ty*y.d+y.ty,this},mB.prototype.transform=mB.prototype.prepend,mB.prototype.invert=function(){var y=this.a,q=this.b,_=this.c,s=this.d,p=this.tx,O=y*s-q*_;return this.a=s/O,this.b=-q/O,this.c=-_/O,this.d=y/O,this.tx=(_*this.ty-s*p)/O,this.ty=-(y*this.ty-q*p)/O,this},mB.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},mB.prototype.clone=function(){var y=new mB;return y.a=this.a,y.b=this.b,y.c=this.c,y.d=this.d,y.tx=this.tx,y.ty=this.ty,y},mB.prototype.copy=function(y){return y.a=this.a,y.b=this.b,y.c=this.c,y.d=this.d,y.tx=this.tx,y.ty=this.ty,y},mB.prototype.tf=function(y,q){1===arguments.length&&(q=y.y,y=y.x);var _=this;return{x:_.a*y+_.c*q+_.tx,y:_.b*y+_.d*q+_.ty}},mB.prototype.toArray=function(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]},mB.prototype.fromArray=function(y){return this.a=y[0],this.b=y[1],this.c=y[2],this.d=y[3],this.tx=y[4],this.ty=y[5],this},mB.prototype.toArray9=function(){return[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1]},mB.prototype.tfi=function(y,q){1===arguments.length&&(q=y.y,y=y.x);var _=this,s=1/(_.a*_.d+_.c*-_.b);return{x:_.d*s*y+-_.c*s*q+(_.ty*_.c-_.tx*_.d)*s,y:_.a*s*q+-_.b*s*y+(-_.ty*_.a+_.tx*_.b)*s}},mB.prototype.decompose=function(){var y=this,q=y.a,_=y.b,s=y.c,p=y.d,O=Math.sqrt(q*q+_*_),L=Math.sqrt(s*s+p*p);return q*p-_*s<0&&(q<p?O=-O:L=-L),O&&(q*=1/O,_*=1/O),L&&(p*=1/L),{translateX:y.tx,translateY:y.ty,rotation:Math.atan2(_,q),scaleX:O,scaleY:L}},mB.IDENTITY=new mB,mB.TEMP_MATRIX=new mB,P.Math.Quaternion=function(y,q,_,s){this.set(y,q,_,s)}),zB=(o.assign(AB.prototype,{set:function(y,q,_,s){var p=this;return p._x=y||0,p._y=q||0,p._z=_||0,p._w=s!==k5?s:1,p},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(y){var q=this;return q._x=y._x,q._y=y._y,q._z=y._z,q._w=y._w,q},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this},dot:function(y){return this._x*y._x+this._y*y._y+this._z*y._z+this._w*y._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var y=this.length();return 0===y?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(y=1/y),this._y=this._y*y,this._z=this._z*y,this._w=this._w*y),this},fromArray:function(y,q){return this._x=y[q=q===k5?0:q],this._y=y[q+1],this._z=y[q+2],this._w=y[q+3],this},slerp:function(y,q){if(0===q)return this;if(1===q)return this.copy(y);var _=this._x,s=this._y,p=this._z,O=this._w;if((L=O*y._w+_*y._x+s*y._y+p*y._z)<0?(this._w=-y._w,this._x=-y._x,this._y=-y._y,this._z=-y._z,L=-L):this.copy(y),1<=L)return this._w=O,this._x=_,this._y=s,this._z=p,this;if(y=Math.sqrt(1-L*L),Math.abs(y)<.001)return this._w=.5*(O+this._w),this._x=.5*(_+this._x),this._y=.5*(s+this._y),this._z=.5*(p+this._z),this;var L=Math.atan2(y,L),$=Math.sin((1-q)*L)/y,q=Math.sin(q*L)/y;return this._w=O*$+this._w*q,this._x=_*$+this._x*q,this._y=s*$+this._y*q,this._z=p*$+this._z*q,this},equals:function(y){return y._x===this._x&&y._y===this._y&&y._z===this._z&&y._w===this._w},setFromAxisAngle:function(y,q){var q=q/2,_=Math.sin(q);return this._x=y.x*_,this._y=y.y*_,this._z=y.z*_,this._w=Math.cos(q),this},setFromEuler:function(y){var q=y._x,_=y._y,s=y._z,y=y._order,p=Math.cos,O=Math.sin,L=p(q/2),$=p(_/2),p=p(s/2),q=O(q/2),_=O(_/2),O=O(s/2);return"XYZ"===y?(this._x=q*$*p+L*_*O,this._y=L*_*p-q*$*O,this._z=L*$*O+q*_*p,this._w=L*$*p-q*_*O):"YXZ"===y?(this._x=q*$*p+L*_*O,this._y=L*_*p-q*$*O,this._z=L*$*O-q*_*p,this._w=L*$*p+q*_*O):"ZXY"===y?(this._x=q*$*p-L*_*O,this._y=L*_*p+q*$*O,this._z=L*$*O+q*_*p,this._w=L*$*p-q*_*O):"ZYX"===y?(this._x=q*$*p-L*_*O,this._y=L*_*p+q*$*O,this._z=L*$*O-q*_*p,this._w=L*$*p+q*_*O):"YZX"===y?(this._x=q*$*p+L*_*O,this._y=L*_*p+q*$*O,this._z=L*$*O-q*_*p,this._w=L*$*p-q*_*O):"XZY"===y&&(this._x=q*$*p-L*_*O,this._y=L*_*p-q*$*O,this._z=L*$*O+q*_*p,this._w=L*$*p+q*_*O),this},setFromRotationMatrix:function(y){var q,_=(y=y.el)[0],s=y[4],p=y[8],O=y[1],L=y[5],$=y[9],k=y[2],M=y[6],E=_+L+(y=y[10]);return 0<E?(q=.5/Math.sqrt(E+1),this._w=.25/q,this._x=(M-$)*q,this._y=(p-k)*q,this._z=(O-s)*q):L<_&&y<_?(q=2*Math.sqrt(1+_-L-y),this._w=(M-$)/q,this._x=.25*q,this._y=(s+O)/q,this._z=(p+k)/q):y<L?(q=2*Math.sqrt(1+L-_-y),this._w=(p-k)/q,this._x=(s+O)/q,this._y=.25*q,this._z=($+M)/q):(q=2*Math.sqrt(1+y-_-L),this._w=(O-s)/q,this._x=(p+k)/q,this._y=($+M)/q,this._z=.25*q),this},setFromToVectors:function(y,q){return nU===k5&&(nU=new Q5),(vU=y.dot(q)+1)<1e-7?(vU=0,Math.abs(y.x)>Math.abs(y.z)?nU.set(-y.y,y.x,0):nU.set(0,-y.z,y.y)):nU.crossVectors(y,q),this._x=nU.x,this._y=nU.y,this._z=nU.z,this._w=vU,this.normalize()},setFromUnitVectors:function(y,q){return rU===k5&&(rU=new Q5),(gU=y.dot(q)+1)<1e-6?(gU=0,Math.abs(y.x)>Math.abs(y.z)?rU.set(-y.y,y.x,0):rU.set(0,-y.z,y.y)):rU.crossVectors(y,q),this._x=rU.x,this._y=rU.y,this._z=rU.z,this._w=gU,this.normalize()},multiply:function(y){return this.multiplyQuaternions(this,y)},premultiply:function(y){return this.multiplyQuaternions(y,this)},multiplyQuaternions:function(y,q){var _=y._x,s=y._y,p=y._z,y=y._w,O=q._x,L=q._y,$=q._z,q=q._w;return this._x=_*q+y*O+s*$-p*L,this._y=s*q+y*L+p*O-_*$,this._z=p*q+y*$+_*L-s*O,this._w=y*q-_*O-s*L-p*$,this},toArray:function(y,q){return(y=y||[])[q=q||0]=this._x,y[q+1]=this._y,y[q+2]=this._z,y[q+3]=this._w,y}}),AB.slerpFlat=function(y,q,_,s,p,O,L){var $,k,M,E=_[s+0],H=_[s+1],w=_[s+2],_=_[s+3],s=p[O+0],Q=p[O+1],x=p[O+2],p=p[O+3];return 0===L?(y[q+0]=E,y[q+1]=H,y[q+2]=w,void(y[q+3]=_)):1===L?(y[q+0]=s,y[q+1]=Q,y[q+2]=x,void(y[q+3]=p)):(_===p&&E===s&&H===Q&&w===x||(O=1-L,$=0<=(k=E*s+H*Q+w*x+_*p)?1:-1,(M=1-k*k)>Number.EPSILON&&(M=Math.sqrt(M),k=Math.atan2(M,k*$),O=Math.sin(O*k)/M,L=Math.sin(L*k)/M),E=E*O+s*(k=L*$),H=H*O+Q*k,w=w*O+x*k,_=_*O+p*k,O===1-L&&(E*=M=1/Math.sqrt(E*E+H*H+w*w+_*_),H*=M,w*=M,_*=M)),y[q]=E,y[q+1]=H,y[q+2]=w,void(y[q+3]=_))},P.Math.Vector4=function(y,q,_,s){this.x=y||0,this.y=q||0,this.z=_||0,this.w=s!==k5?s:1}),Q5=(o.assign(zB.prototype,{isVector4:!0,set:function(y,q,_,s){return this.x=y,this.y=q,this.z=_,this.w=s,this},setScalar:function(y){return this.x=y,this.y=y,this.z=y,this.w=y,this},setX:function(y){return this.x=y,this},setY:function(y){return this.y=y,this},setZ:function(y){return this.z=y,this},setW:function(y){return this.w=y,this},setComponent:function(y,q){switch(y){case 0:this.x=q;break;case 1:this.y=q;break;case 2:this.z=q;break;case 3:this.w=q;break;default:throw new Error("index is out of range: "+y)}return this},getComponent:function(y){switch(y){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+y)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(y){return this.x=y.x,this.y=y.y,this.z=y.z,this.w=y.w!==k5?y.w:1,this},add:function(y,q){return q!==k5?this.addVectors(y,q):(this.x+=y.x,this.y+=y.y,this.z+=y.z,this.w+=y.w,this)},addScalar:function(y){return this.x+=y,this.y+=y,this.z+=y,this.w+=y,this},addVectors:function(y,q){return this.x=y.x+q.x,this.y=y.y+q.y,this.z=y.z+q.z,this.w=y.w+q.w,this},addScaledVector:function(y,q){return this.x+=y.x*q,this.y+=y.y*q,this.z+=y.z*q,this.w+=y.w*q,this},sub:function(y,q){return q!==k5?this.subVectors(y,q):(this.x-=y.x,this.y-=y.y,this.z-=y.z,this.w-=y.w,this)},subScalar:function(y){return this.x-=y,this.y-=y,this.z-=y,this.w-=y,this},subVectors:function(y,q){return this.x=y.x-q.x,this.y=y.y-q.y,this.z=y.z-q.z,this.w=y.w-q.w,this},multiplyScalar:function(y){return this.x*=y,this.y*=y,this.z*=y,this.w*=y,this},applyMatrix4:function(y){var q=this.x,_=this.y,s=this.z,p=this.w,y=y.el;return this.x=y[0]*q+y[4]*_+y[8]*s+y[12]*p,this.y=y[1]*q+y[5]*_+y[9]*s+y[13]*p,this.z=y[2]*q+y[6]*_+y[10]*s+y[14]*p,this.w=y[3]*q+y[7]*_+y[11]*s+y[15]*p,this},divideScalar:function(y){return this.multiplyScalar(1/y)},setAxisAngleFromQuaternion:function(y){this.w=2*Math.acos(y.w);var q=Math.sqrt(1-y.w*y.w);return q<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=y.x/q,this.y=y.y/q,this.z=y.z/q),this},setAxisAngleFromRotationMatrix:function(y){var q,_,s,p=(y=y.el)[0],O=y[4],L=y[8],$=y[1],k=y[5],M=y[9],E=y[2],H=y[6],y=y[10];if(Math.abs(O-$)<.01&&Math.abs(L-E)<.01&&Math.abs(M-H)<.01){if(Math.abs(O+$)<.1&&Math.abs(L+E)<.1&&Math.abs(M+H)<.1&&Math.abs(p+k+y-3)<.1)return this.set(1,0,0,0),this;var w=Math.PI,Q=(p+1)/2,x=(k+1)/2,S=(y+1)/2,X=(O+$)/4,T=(L+E)/4,i=(M+H)/4;return x<Q&&S<Q?s=Q<.01?(q=0,_=.707106781):(_=X/(q=Math.sqrt(Q)),T/q):S<x?s=x<.01?(_=0,q=.707106781):(q=X/(_=Math.sqrt(x)),i/_):S<.01?(_=q=.707106781,s=0):(q=T/(s=Math.sqrt(S)),_=i/s),this.set(q,_,s,w),this}return Q=Math.sqrt((H-M)*(H-M)+(L-E)*(L-E)+($-O)*($-O)),Math.abs(Q)<.001&&(Q=1),this.x=(H-M)/Q,this.y=(L-E)/Q,this.z=($-O)/Q,this.w=Math.acos((p+k+y-1)/2),this},min:function(y){return this.x=Math.min(this.x,y.x),this.y=Math.min(this.y,y.y),this.z=Math.min(this.z,y.z),this.w=Math.min(this.w,y.w),this},max:function(y){return this.x=Math.max(this.x,y.x),this.y=Math.max(this.y,y.y),this.z=Math.max(this.z,y.z),this.w=Math.max(this.w,y.w),this},clamp:function(y,q){return this.x=Math.max(y.x,Math.min(q.x,this.x)),this.y=Math.max(y.y,Math.min(q.y,this.y)),this.z=Math.max(y.z,Math.min(q.z,this.z)),this.w=Math.max(y.w,Math.min(q.w,this.w)),this},clampScalar:function(y,q){return bU===k5&&(bU=new zB,IU=new zB),bU.set(y,y,y,y),IU.set(q,q,q,q),this.clamp(bU,IU)},clampLength:function(y,q){var _=this.length();return this.divideScalar(_||1).multiplyScalar(Math.max(y,Math.min(q,_)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(y){return this.x*y.x+this.y*y.y+this.z*y.z+this.w*y.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(y){return this.normalize().multiplyScalar(y)},lerp:function(y,q){return this.x+=(y.x-this.x)*q,this.y+=(y.y-this.y)*q,this.z+=(y.z-this.z)*q,this.w+=(y.w-this.w)*q,this},lerpVectors:function(y,q,_){return this.subVectors(q,y).multiplyScalar(_).add(y)},equals:function(y){return y.x===this.x&&y.y===this.y&&y.z===this.z&&y.w===this.w},fromArray:function(y,q){return this.x=y[q=q===k5?0:q],this.y=y[q+1],this.z=y[q+2],this.w=y[q+3],this},toArray:function(y,q){return(y=y===k5?[]:y)[q=q===k5?0:q]=this.x,y[q+1]=this.y,y[q+2]=this.z,y[q+3]=this.w,y},fromBufferAttribute:function(y,q,_){return this.x=y.getX(q),this.y=y.getY(q),this.z=y.getZ(q),this.w=y.getW(q),this}}),P.Math.Vector3=function(y,q,_){y===k5?(this.x=0,this.y=0,this.z=0):"object"==typeof y?this.copy(y):this.set(y,q==k5?y:q,_==k5?y:_)}),eB=(o.assign(Q5.prototype,{isVector3:!0,isNaN:function(){return isNaN(this.x)||isNaN(this.y)||isNaN(this.z)},set:function(y,q,_){return this.x=y,this.y=q,this.z=_,this},equals:function(y){return y&&this.x===y.x&&this.y===y.y&&this.z===y.z},setScalar:function(y){return this.x=y,this.y=y,this.z=y,this},setX:function(y){return this.x=y,this},setY:function(y){return this.y=y,this},setZ:function(y){return this.z=y,this},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(y){return y.x===k5?(this.x=y[0],this.y=y[1],this.z=y[2]):(this.x=y.x,this.y=y.y,this.z=y.z||0),this},add:function(y){return this.x+=y.x,this.y+=y.y,this.z+=y.z,this},addScalar:function(y){return this.x+=y,this.y+=y,this.z+=y,this},addVectors:function(y,q){return this.x=y.x+q.x,this.y=y.y+q.y,this.z=y.z+q.z,this},addScaledVector:function(y,q){return this.x+=y.x*q,this.y+=y.y*q,this.z+=y.z*q,this},sub:function(y){return this.x-=y.x,this.y-=y.y,this.z-=y.z,this},subScalar:function(y){return this.x-=y,this.y-=y,this.z-=y,this},subVectors:function(y,q){return this.x=y.x-q.x,this.y=y.y-q.y,this.z=y.z-q.z,this},divide:function(y){return this.x/=y.x,this.y/=y.y,this.z/=y.z,this},multiply:function(y){return this.x*=y.x,this.y*=y.y,this.z*=y.z,this},multiplyScalar:function(y){return this.x*=y,this.y*=y,this.z*=y,this},divideScalar:function(y){return 0!==y?(this.x*=y=1/y,this.y*=y,this.z*=y):(this.x=0,this.y=0,this.z=0),this},distanceTo:function(y){return Math.sqrt(this.distanceToSquared(y))},distanceToSquared:function(y){var q=this.x-y.x,_=this.y-y.y;return q*q+_*_+(y=this.z-y.z)*y},distanceToSquared2:function(y){var q=this.x-y[0],_=this.y-y[1];return q*q+_*_+(y=this.z-y[2])*y},divideVectors:function(y,q){return this.x=y.x/q.x,this.y=y.y/q.y,this.z=y.z/q.z,this},multiplyVectors:function(y,q){return this.x=y.x*q.x,this.y=y.y*q.y,this.z=y.z*q.z,this},transformDirection:function(y){var q=this.x,_=this.y,s=this.z,y=y.el;return this.x=y[0]*q+y[4]*_+y[8]*s,this.y=y[1]*q+y[5]*_+y[9]*s,this.z=y[2]*q+y[6]*_+y[10]*s,this.normalize()},applyAxisAngle:(y0=new AB,function(y,q){return this.applyQuaternion(y0.setFromAxisAngle(y,q))}),applyEuler:(dU=new AB,function(y){return this.applyQuaternion(dU.setFromEuler(y))}),applyQuaternion:function(y){var q=this.x,_=this.y,s=this.z,p=y._x,O=y._y,L=y._z,$=(y=y._w)*q+O*s-L*_,k=y*_+L*q-p*s,M=y*s+p*_-O*q;return this.x=$*y+(q=-p*q-O*_-L*s)*-p+k*-L-M*-O,this.y=k*y+q*-O+M*-p-$*-L,this.z=M*y+q*-L+$*-O-k*-p,this},applyMatrix4:function(y){var q=this.x,_=this.y,s=this.z,p=1/((y=y.el)[3]*q+y[7]*_+y[11]*s+y[15]);return this.x=(y[0]*q+y[4]*_+y[8]*s+y[12])*p,this.y=(y[1]*q+y[5]*_+y[9]*s+y[13])*p,this.z=(y[2]*q+y[6]*_+y[10]*s+y[14])*p,this},applyMatrix3:function(y){var q=this.x,_=this.y,s=this.z,y=y.el;return this.x=y[0]*q+y[3]*_+y[6]*s,this.y=y[1]*q+y[4]*_+y[7]*s,this.z=y[2]*q+y[5]*_+y[8]*s,this},applyNormalMatrix:function(y){return this.applyMatrix3(y).normalize()},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},reflect:(UU=new Q5,function(y){return this.sub(UU.copy(y).multiplyScalar(2*this.dot(y)))}),dot:function(y){return this.x*y.x+this.y*y.y+this.z*y.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){var y=this.length();return y?this.multiplyScalar(1/y):this},setLength:function(y){return this.normalize().multiplyScalar(y)},fromArray:function(y,q){return this.x=y[q=q===k5?0:q],this.y=y[q+1],this.z=y[q+2],this},toArray:function(y,q){return(y=y===k5?[0,0,0]:y)[q=q===k5?0:q]=this.x,y[q+1]=this.y,y[q+2]=this.z,y},cross:function(y){return this.crossVectors(this,y)},angleTo:function(y){return 1+1e-6<(y=this.dot(y)/Math.sqrt(this.lengthSq()*y.lengthSq()))||y<-1-1e-6?0:Math.acos(e.clamp(y,-1,1))},lerp:function(y,q){return this.x+=(y.x-this.x)*q,this.y+=(y.y-this.y)*q,this.z+=(y.z-this.z)*q,this},lerpVectors:function(y,q,_){return this.subVectors(q,y).multiplyScalar(_).add(y)},crossVectors:function(y,q){var _=y.x,s=y.y,y=y.z,p=q.x,O=q.y,q=q.z;return this.x=s*q-y*O,this.y=y*p-_*q,this.z=_*O-s*p,this},min:function(y){return this.x=Math.min(this.x,y.x),this.y=Math.min(this.y,y.y),this.z=Math.min(this.z,y.z),this},max:function(y){return this.x=Math.max(this.x,y.x),this.y=Math.max(this.y,y.y),this.z=Math.max(this.z,y.z),this},setFromMatrixPosition:function(y){return this.setFromMatrixColumn(y,3)},setFromMatrixScale:function(y){var q=this.setFromMatrixColumn(y,0).length(),_=this.setFromMatrixColumn(y,1).length(),y=this.setFromMatrixColumn(y,2).length();return this.x=q,this.y=_,this.z=y,this},setFromMatrixColumn:function(y,q){return this.fromArray(y.el,4*q)}}),Q5.UP=new Q5(0,1,0),Q5.AxisX=new Q5(1,0,0),Q5.AxisY=new Q5(0,1,0),Q5.AxisZ=new Q5(0,0,1),Q5.normalizeArray=(q0=new Q5,function(y){return q0.copy(y).normalize().toArray()}),_0=new Q5,function(y,q){return(q=q||_0).x=y[0],q.y=y[1],q.z=y[2],q}),f=P.Math.Vector2=function(y,q,_){"object"==typeof y&&(y=y.x!=k5?(q=y.y,_=y.e,y.x):(_=y[2],q=y[1],y[0])),this.set(y||0,q||0,_)},_=(f.prototype={},(f.prototype.constructor=f).prototype.isVector2=!0,o.defineProperties(f.prototype,{width:{get:function(){return this.x},set:function(y){this.x=y}},height:{get:function(){return this.y},set:function(y){this.y=y}}}),f.prototype.clone=function(){return new f(this.x,this.y,this.e)},f.prototype.copy=function(y){return this.set(y.x,y.y,y.e),this},f.prototype.equals=function(y){return y.x===this.x&&y.y===this.y&&y.e===this.e},f.prototype.set=function(y,q,_){return this.x=y||0,this.y=q||(0!==q?this.x:0),_!=k5&&(this.e=_),this},f.prototype.setScalar=function(y){return this.x=y,this.y=y,this.e=y,this},f.prototype.setX=function(y){return this.x=y||0,this},f.prototype.setY=function(y){return this.y=y||0,this},f.prototype.setE=function(y){return this.e=y||0,this},f.prototype.add=function(y){return this.x+=y.x,this.y+=y.y,this},f.prototype.addVectors=function(y,q){return this.x=y.x+q.x,this.y=y.y+q.y,this},f.prototype.addScalar=function(y){return this.x+=y,this.y+=y,this},f.prototype.addScaledVector=function(y,q){return this.x+=y.x*q,this.y+=y.y*q,this},f.prototype.sub=function(y){return this.x-=y.x,this.y-=y.y,this},f.prototype.subScalar=function(y){return this.x-=y,this.y-=y,this},f.prototype.subVectors=function(y,q){return this.x=y.x-q.x,this.y=y.y-q.y,this},f.prototype.multiply=function(y){return this.x*=y.x,this.y*=y.y,this},f.prototype.multiplyScalar=function(y){return this.x*=y,this.y*=y,this},f.prototype.divide=function(y){return this.x/=y.x,this.y/=y.y,this},f.prototype.divideScalar=function(y){return this.multiplyScalar(1/y)},f.prototype.min=function(y){return this.x=Math.min(this.x,y.x),this.y=Math.min(this.y,y.y),this},f.prototype.max=function(y){return this.x=Math.max(this.x,y.x),this.y=Math.max(this.y,y.y),this},f.prototype.fromArray=function(y,q){return this.x=y[q=q===k5?0:q],this.y=y[q+1],this},f.prototype.clamp=function(y,q){return this.x=Math.max(y.x,Math.min(q.x,this.x)),this.y=Math.max(y.y,Math.min(q.y,this.y)),this},f.prototype.clampScalar=function(y,q){return s0===k5&&(s0=new f,p0=new f),s0.set(y,y),p0.set(q,q),this.clamp(s0,p0)},f.prototype.clampLength=function(y,q){var _=this.length();return this.multiplyScalar(Math.max(y,Math.min(q,_))/_)},f.prototype.dot=function(y){return this.x*y.x+this.y*y.y},f.prototype.cross=function(y){return this.x*y.y-this.y*y.x},f.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},f.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},f.prototype.normalize=function(){return this.divideScalar(this.length())},f.prototype.angle=function(){var y=Math.atan2(this.y,this.x);return y<0&&(y+=2*Math.PI),y},f.prototype.distanceTo=function(y){return Math.sqrt(this.distanceToSquared(y))},f.prototype.distanceToSquared=function(y){var q=this.x-y.x;return q*q+(y=this.y-y.y)*y},f.prototype.isNearEnough=function(y){return this.distanceToSquared(y)<1e-8},f.prototype.setLength=function(y){var q=this.length();return q?this.multiplyScalar(y/q):this},f.prototype.lerp=function(y,q){return this.x+=(y.x-this.x)*q,this.y+=(y.y-this.y)*q,"number"==typeof y.e&&"number"==typeof this.e&&(this.e+=(y.e-this.e)*q),this},f.prototype.lerpVectors=function(y,q,_){return this.subVectors(q,y).multiplyScalar(_).add(y)},f.prototype.rotateAround=function(y,q){var _=y?y.x:0,y=y?y.y:0,s=Math.cos(q),q=Math.sin(q),p=this.x-_,O=this.y-y;return this.x=p*s-O*q+_,this.y=p*q+O*s+y,this},P.Math.Matrix3=function(){this.el=[1,0,0,0,1,0,0,0,1]}),fB=(o.assign(_.prototype,{isMatrix3:!0,set:function(y,q,_,s,p,O,L,$,k){var M=this.el;return M[0]=y,M[1]=s,M[2]=L,M[3]=q,M[4]=p,M[5]=$,M[6]=_,M[7]=O,M[8]=k,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.el)},copy:function(y){var q=this.el,y=y.el;return q[0]=y[0],q[1]=y[1],q[2]=y[2],q[3]=y[3],q[4]=y[4],q[5]=y[5],q[6]=y[6],q[7]=y[7],q[8]=y[8],this},setFromMatrix4:function(y){return y=y.el,this.set(y[0],y[4],y[8],y[1],y[5],y[9],y[2],y[6],y[10]),this},applyToBufferAttribute:(O0=new Q5,function(y){for(var q=0,_=y.count;q<_;q++)O0.x=y.getX(q),O0.y=y.getY(q),O0.z=y.getZ(q),O0.applyMatrix3(this),y.setXYZ(q,O0.x,O0.y,O0.z);return y}),multiply:function(y){return this.multiplyMatrices(this,y)},premultiply:function(y){return this.multiplyMatrices(y,this)},multiplyMatrices:function(y,q){var y=y.el,q=q.el,_=this.el,s=y[0],p=y[3],O=y[6],L=y[1],$=y[4],k=y[7],M=y[2],E=y[5],y=y[8],H=q[0],w=q[3],Q=q[6],x=q[1],S=q[4],X=q[7],T=q[2],i=q[5],q=q[8];return _[0]=s*H+p*x+O*T,_[3]=s*w+p*S+O*i,_[6]=s*Q+p*X+O*q,_[1]=L*H+$*x+k*T,_[4]=L*w+$*S+k*i,_[7]=L*Q+$*X+k*q,_[2]=M*H+E*x+y*T,_[5]=M*w+E*S+y*i,_[8]=M*Q+E*X+y*q,this},multiplyScalar:function(y){var q=this.el;return q[0]*=y,q[3]*=y,q[6]*=y,q[1]*=y,q[4]*=y,q[7]*=y,q[2]*=y,q[5]*=y,q[8]*=y,this},determinant:function(){var y=this.el,q=y[0],_=y[1],s=y[2],p=y[3],O=y[4],L=y[5],$=y[6],k=y[7];return q*O*(y=y[8])-q*L*k-_*p*y+_*L*$+s*p*k-s*O*$},getInverse:function(y,q){var y=y.el,_=this.el,s=y[0],p=y[1],O=y[2],L=y[3],$=y[4],k=y[5],M=y[6],E=y[7],H=(y=y[8])*$-k*E,w=k*M-y*L,Q=E*L-$*M,x=s*H+p*w+O*Q;return 0==x?this.identity():(_[0]=H*(x=1/x),_[1]=(O*E-y*p)*x,_[2]=(k*p-O*$)*x,_[3]=w*x,_[4]=(y*s-O*M)*x,_[5]=(O*L-k*s)*x,_[6]=Q*x,_[7]=(p*M-E*s)*x,_[8]=($*s-p*L)*x,this)},transpose:function(){var y=this.el,q=y[1];return y[1]=y[3],y[3]=q,q=y[2],y[2]=y[6],y[6]=q,q=y[5],y[5]=y[7],y[7]=q,this},getNormalMatrix:function(y){return this.setFromMatrix4(y).getInverse(this).transpose()},transposeIntoArray:function(y){var q=this.el;return y[0]=q[0],y[1]=q[3],y[2]=q[6],y[3]=q[1],y[4]=q[4],y[5]=q[7],y[6]=q[2],y[7]=q[5],y[8]=q[8],this},setUvTransform:function(y,q,_,s,p,O,L){var $=Math.cos(p),p=Math.sin(p);this.set(_*$,_*p,-_*($*O+p*L)+O+y,-s*p,s*$,-s*(-p*O+$*L)+L+q,0,0,1)},scale:function(y,q){var _=this.el;return _[0]*=y,_[3]*=y,_[6]*=y,_[1]*=q,_[4]*=q,_[7]*=q,this},rotate:function(y){var q=Math.cos(y),y=Math.sin(y),_=this.el,s=_[0],p=_[3],O=_[6],L=_[1],$=_[4],k=_[7];return _[0]=q*s+y*L,_[3]=q*p+y*$,_[6]=q*O+y*k,_[1]=-y*s+q*L,_[4]=-y*p+q*$,_[7]=-y*O+q*k,this},translate:function(y,q){var _=this.el;return _[0]+=y*_[2],_[3]+=y*_[5],_[6]+=y*_[8],_[1]+=q*_[2],_[4]+=q*_[5],_[7]+=q*_[8],this},equals:function(y){for(var q=this.el,_=y.el,s=0;s<9;s++)if(q[s]!==_[s])return!1;return!0},fromArray:function(y,q){q===k5&&(q=0);for(var _=0;_<9;_++)this.el[_]=y[_+q];return this},getElements:function(){return this.el},toArray:function(y,q){var _=this.el;return(y=y===k5?[]:y)[q=q===k5?0:q]=_[0],y[q+1]=_[1],y[q+2]=_[2],y[q+3]=_[3],y[q+4]=_[4],y[q+5]=_[5],y[q+6]=_[6],y[q+7]=_[7],y[q+8]=_[8],y}}),P.Math.Plane=function(y,q){this.normal=y!==k5?y:new Q5(1,0,0),this.constant=q!==k5?q:0}),GB=(o.assign(fB.prototype,{set:function(y,q){return this.normal.copy(y),this.constant=q,this},setComponents:function(y,q,_,s){return this.normal.set(y,q,_),this.constant=s,this},setFromNormalAndCoplanarPoint:function(y,q){return this.normal.copy(y),this.constant=-q.dot(this.normal),this},setFromCoplanarPoints:(M0=new Q5,E0=new Q5,function(y,q,_){return _=M0.subVectors(_,q).cross(E0.subVectors(y,q)).normalize(),this.setFromNormalAndCoplanarPoint(_,y),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(y){return this.normal.copy(y.normal),this.constant=y.constant,this},normalize:function(){var y=1/this.normal.length();return this.normal.multiplyScalar(y),this.constant*=y,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(y){return this.normal.dot(y)+this.constant},distanceToSphere:function(y){return this.distanceToPoint(y.center)-y.radius},projectPoint:function(y,q){return(q=q===k5?new Q5:q).copy(this.normal).multiplyScalar(-this.distanceToPoint(y)).add(y)},intersectLine:(k0=new Q5,function(y,q){q===k5&&(q=new Q5);var _=y.delta(k0),s=this.normal.dot(_);return 0===s?0===this.distanceToPoint(y.start)?q.copy(y.start):k5:(s=-(y.start.dot(this.normal)+this.constant)/s)<0||1<s?k5:q.copy(_).multiplyScalar(s).add(y.start)}),intersectsLine:function(y){var q=this.distanceToPoint(y.start),y=this.distanceToPoint(y.end);return q<0&&0<y||y<0&&0<q},intersectsBox:function(y){return y.intersectsPlane(this)},intersectsSphere:function(y){return y.intersectsPlane(this)},coplanarPoint:function(y){return(y=y===k5?new Q5:y).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:(L0=new Q5,$0=new _,function(y,q){return q=q||$0.getNormalMatrix(y),y=this.coplanarPoint(L0).applyMatrix4(y),q=this.normal.applyMatrix3(q).normalize(),this.constant=-y.dot(q),this}),translate:function(y){return this.constant-=y.dot(this.normal),this},equals:function(y){return y.normal.equals(this.normal)&&y.constant===this.constant}}),P.Math.Ray=function(y,q){this.origin=y!==k5?y.clone():new Q5,this.direction=q!==k5?q.clone():new Q5}),rB=(o.assign(GB.prototype,{set:function(y,q){return this.origin.copy(y),this.direction.copy(q),this},clone:function(){return(new this.constructor).copy(this)},copy:function(y){return this.origin.copy(y.origin),this.direction.copy(y.direction),this.maxHitLen=y.maxHitLen,this},at:function(y,q){return(q||new Q5).copy(this.direction).multiplyScalar(y).add(this.origin)},setMaxHitLength:function(y){this.maxHitLen=y},lookAt:function(y){return this.direction.copy(y).sub(this.origin).normalize(),this},applyMatrix4:function(y){var q,_=this.maxHitLen;return _&&(q=this.direction.clone().multiplyScalar(_).add(this.origin)).applyMatrix4(y),this.origin.applyMatrix4(y),this.direction.transformDirection(y),_&&(this.maxHitLen=this.origin.distanceTo(q)),this},distanceToPlane:function(y){var q=y.normal.dot(this.direction);return 0===q?0===y.distanceToPoint(this.origin)?0:null:0<=(y=-(this.origin.dot(y.normal)+y.constant)/q)?y:null},intersectPlane:function(y,q){return null===(y=this.distanceToPlane(y))?null:this.at(y,q)},intersectSphere:(T0=new Q5,function(y,q){T0.subVectors(y.center,this.origin);var _=T0.dot(this.direction),s=T0.dot(T0)-_*_;return(y=y.radius*y.radius)<s?null:(s=_-(y=Math.sqrt(y-s)),_+=y,s<0&&_<0?null:s<0?this.at(_,q):this.at(s,q))}),intersectEllipsoid:(S0=new Q5,X0=new Q5,function(y,q){S0.subVectors(y.center,this.origin),S0.divide(y.radius),X0.divideVectors(this.direction,y.radius);var y=X0.lengthSq(),_=S0.dot(X0),s=S0.dot(S0)*y-_*_;if(y<s)return null;var p=(_-(s=Math.sqrt(y-s)))/y,_=(_+s)/y;return p<0&&_<0?null:p<0?this.at(_,q):this.at(p,q)}),intersectBox:function(y,q){var _,s,p,O=1/this.direction.x,L=1/this.direction.y,$=1/this.direction.z,k=this.origin,O=0<=O?(_=(y.min.x-k.x)*O,(y.max.x-k.x)*O):(_=(y.max.x-k.x)*O,(y.min.x-k.x)*O);return(L=0<=L?(p=(y.min.y-k.y)*L,(y.max.y-k.y)*L):(p=(y.max.y-k.y)*L,(y.min.y-k.y)*L))<_||O<p?null:((_<p||_!=_)&&(_=p),(L<O||O!=O)&&(O=L),(p=0<=$?(s=(y.min.z-k.z)*$,(y.max.z-k.z)*$):(s=(y.max.z-k.z)*$,(y.min.z-k.z)*$))<_||O<s||(O=p<O||O!=O?p:O)<0?null:(L=0<=(_=_<s||_!=_?s:_)?_:O,(y=this.maxHitLen)&&y<L?null:this.at(L,q)))},intersectTriangle:(H0=new Q5,w0=new Q5,Q0=new Q5,x0=new Q5,function(y,q,_,s,p,O){if(w0.subVectors(q,y),Q0.subVectors(_,y),x0.crossVectors(w0,Q0),(q=p||0)<(_=this.direction.dot(x0))){if(s)return null}else if(-q<=_)return null;return p=1/_,H0.subVectors(this.origin,y),(s=p*this.direction.dot(Q0.crossVectors(H0,Q0)))<-q||(_=p*this.direction.dot(w0.cross(H0)))<-q||1+q<s+_||(y=-p*H0.dot(x0))<0||(q=this.maxHitLen)&&q<y?null:this.at(y,O)})}),P.Math.Box3=function(y,q){this.min=y!==k5?y:new Q5(1/0,1/0,1/0),this.max=q!==k5?q:new Q5(-1/0,-1/0,-1/0)}),zU=(o.assign(rB.prototype,{set:function(y,q){return this.min.copy(y),this.max.copy(q),this},setFromArray:function(y){for(var q=1/0,_=1/0,s=1/0,p=-1/0,O=-1/0,L=-1/0,$=0,k=y.length;$<k;$+=3){var M=y[$],E=y[$+1],H=y[$+2];M<q&&(q=M),E<_&&(_=E),H<s&&(s=H),p<M&&(p=M),O<E&&(O=E),L<H&&(L=H)}return this.min.set(q,_,s),this.max.set(p,O,L),this},setFromPoints:function(y){this.makeEmpty();for(var q=0,_=y.length;q<_;q++)this.expandByPoint(y[q]);return this},clone:function(){return(new this.constructor).copy(this)},intersectsBox:function(y){return!(y.max.x<this.min.x||y.min.x>this.max.x||y.max.y<this.min.y||y.min.y>this.max.y||y.max.z<this.min.z||y.min.z>this.max.z)},copy:function(y){return this.min.copy(y.min),this.max.copy(y.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(y){return this.isEmpty()?y.set(0,0,0):y.addVectors(this.min,this.max).multiplyScalar(.5)},expandByPoint:function(y){return this.min.min(y),this.max.max(y),this},expandByBox:function(y){return this.min.min(y.min),this.max.max(y.max),this},applyMatrix4:(i0=[new Q5,new Q5,new Q5,new Q5,new Q5,new Q5,new Q5,new Q5],function(y){return this.isEmpty()||(i0[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(y),i0[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(y),i0[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(y),i0[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(y),i0[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(y),i0[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(y),i0[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(y),i0[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(y),this.setFromPoints(i0)),this})}),P.Math.Sphere=function(y,q){this.center=y!==k5?y:new Q5,this.radius=q!==k5?q:0}),eU=(o.assign(zU.prototype,{set:function(y,q){return this.center.copy(y),this.radius=q,this},setFromPoints:(N0=new rB,function(y,q){for(var _=this.center,s=(q!==k5?_.copy(q):N0.setFromPoints(y).getCenter(_),0),p=0,O=y.length;p<O;p++)s=Math.max(s,_.distanceToSquared(y[p]));return this.radius=Math.sqrt(s),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(y){return this.center.copy(y.center),this.radius=y.radius,this},empty:function(){return this.radius<=0},containsPoint:function(y){return y.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(y){return y.distanceTo(this.center)-this.radius},intersectsSphere:function(y){var q=this.radius+y.radius;return y.center.distanceToSquared(this.center)<=q*q},intersectsBox:function(y){return y.intersectsSphere(this)},intersectsPlane:function(y){return Math.abs(y.distanceToPoint(this.center))<=this.radius},clampPoint:function(y,q){var _=this.center.distanceToSquared(y);return(q=q===k5?new Q5:q).copy(y),_>this.radius*this.radius&&(q.sub(this.center).normalize(),q.multiplyScalar(this.radius).add(this.center)),q},getBoundingBox:function(y){return(y=y===k5?new rB:y).set(this.center,this.center),y.expandByScalar(this.radius),y},applyMatrix4:function(y){return this.center.applyMatrix4(y),this.radius=this.radius*y.getMaxScaleOnAxis(),this},translate:function(y){return this.center.add(y),this},equals:function(y){return y.center.equals(this.center)&&y.radius===this.radius}}),P.Math.Frustum=function(y,q,_,s,p,O){this.planes=[y!==k5?y:new fB,q!==k5?q:new fB,_!==k5?_:new fB,s!==k5?s:new fB,p!==k5?p:new fB,O!==k5?O:new fB]}),G=(o.assign(eU.prototype,{set:function(y,q,_,s,p,O){var L=this.planes;return L[0].copy(y),L[1].copy(q),L[2].copy(_),L[3].copy(s),L[4].copy(p),L[5].copy(O),this},clone:function(){return(new this.constructor).copy(this)},copy:function(y){for(var q=this.planes,_=0;_<6;_++)q[_].copy(y.planes[_]);return this},setFromMatrix:function(y){var q=this.planes,_=(y=y.el)[0],s=y[1],p=y[2],O=y[3],L=y[4],$=y[5],k=y[6],M=y[7],E=y[8],H=y[9],w=y[10],Q=y[11],x=y[12],S=y[13],X=y[14],y=y[15];return q[0].setComponents(O-_,M-L,Q-E,y-x).normalize(),q[1].setComponents(O+_,M+L,Q+E,y+x).normalize(),q[2].setComponents(O+s,M+$,Q+H,y+S).normalize(),q[3].setComponents(O-s,M-$,Q-H,y-S).normalize(),q[4].setComponents(O-p,M-k,Q-w,y-X).normalize(),q[5].setComponents(O+p,M+k,Q+w,y+X).normalize(),this},intersectsObject:(j0=new zU,function(y){var q=y.geometry;return null===q.boundingSphere&&q.computeBoundingSphere(),j0.copy(q.boundingSphere).applyMatrix4(y.matrixWorld),this.intersectsSphere(j0)}),intersectsSprite:(l0=new zU,function(y){return l0.center.set(0,0,0),l0.radius=.7071067811865476,l0.applyMatrix4(y.matrixWorld),this.intersectsSphere(l0)}),intersectsSphere:function(y){for(var q=this.planes,_=y.center,s=-y.radius,p=0;p<6;p++)if(q[p].distanceToPoint(_)<s)return!1;return!0},intersectsBox:(a0=new Q5,function(y){for(var q=this.planes,_=0;_<6;_++){var s=q[_];if(a0.x=(0<s.normal.x?y.max:y.min).x,a0.y=(0<s.normal.y?y.max:y.min).y,a0.z=(0<s.normal.z?y.max:y.min).z,s.distanceToPoint(a0)<0)return!1}return!0}),containsPoint:function(y){for(var q=this.planes,_=0;_<6;_++)if(q[_].distanceToPoint(y)<0)return!1;return!0}}),P.Math.Matrix4=function(){this.el=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}),gB=(o.assign(G.prototype,{isMatrix4:!0,set:function(y,q,_,s,p,O,L,$,k,M,E,H,w,Q,x,S){var X=this.el;return X[0]=y,X[4]=q,X[8]=_,X[12]=s,X[1]=p,X[5]=O,X[9]=L,X[13]=$,X[2]=k,X[6]=M,X[10]=E,X[14]=H,X[3]=w,X[7]=Q,X[11]=x,X[15]=S,this},clone:function(){return(new G).fromArray(this.el)},fromArray:function(y,q){q===k5&&(q=0);for(var _=this.el,s=0;s<16;s++)_[s]=y[s+q];return this},getElements:function(){return this.el},scale:function(y){var q=this.el,_=y.x,s=y.y,y=y.z;return q[0]*=_,q[4]*=s,q[8]*=y,q[1]*=_,q[5]*=s,q[9]*=y,q[2]*=_,q[6]*=s,q[10]*=y,q[3]*=_,q[7]*=s,q[11]*=y,this},translate:function(y){var q=this.el,_=y.x||0,s=y.y||0,y=y.z||0;return q[12]+=q[0]*_+q[4]*s+q[8]*y,q[13]+=q[1]*_+q[5]*s+q[9]*y,q[14]+=q[2]*_+q[6]*s+q[10]*y,q[15]+=q[3]*_+q[7]*s+q[11]*y,this},rotate:(u0=new G,function(y){return u0.makeRotationFromQuaternion(y),this.multiply(u0)}),makeRotationFromEuler:function(y){var q,_,s,p,O,L,$,k,M,E,H,w,Q=this.el,x=y._x,S=y._y,X=y._z,y=y._order,T=Math.cos(x),x=Math.sin(x),i=Math.cos(S),S=Math.sin(S),N=Math.cos(X),X=Math.sin(X);return"XYZ"===y?(O=T*N,L=T*X,$=x*N,k=x*X,Q[0]=i*N,Q[4]=-i*X,Q[8]=S,Q[1]=L+$*S,Q[5]=O-k*S,Q[9]=-x*i,Q[2]=k-O*S,Q[6]=$+L*S,Q[10]=T*i):"YXZ"===y?(_=i*X,s=S*N,Q[0]=(q=i*N)+(p=S*X)*x,Q[4]=s*x-_,Q[8]=T*S,Q[1]=T*X,Q[5]=T*N,Q[9]=-x,Q[2]=_*x-s,Q[6]=p+q*x,Q[10]=T*i):"ZXY"===y?(_=i*X,s=S*N,Q[0]=(q=i*N)-(p=S*X)*x,Q[4]=-T*X,Q[8]=s+_*x,Q[1]=_+s*x,Q[5]=T*N,Q[9]=p-q*x,Q[2]=-T*S,Q[6]=x,Q[10]=T*i):"ZYX"===y?(O=T*N,L=T*X,$=x*N,k=x*X,Q[0]=i*N,Q[4]=$*S-L,Q[8]=O*S+k,Q[1]=i*X,Q[5]=k*S+O,Q[9]=L*S-$,Q[2]=-S,Q[6]=x*i,Q[10]=T*i):"YZX"===y?(M=T*i,E=T*S,H=x*i,w=x*S,Q[0]=i*N,Q[4]=w-M*X,Q[8]=H*X+E,Q[1]=X,Q[5]=T*N,Q[9]=-x*N,Q[2]=-S*N,Q[6]=E*X+H,Q[10]=M-w*X):"XZY"===y&&(M=T*i,E=T*S,H=x*i,w=x*S,Q[0]=i*N,Q[4]=-X,Q[8]=S*N,Q[1]=M*X+w,Q[5]=T*N,Q[9]=E*X-H,Q[2]=H*X-E,Q[6]=x*N,Q[10]=w*X+M),Q[3]=0,Q[7]=0,Q[11]=0,Q[12]=0,Q[13]=0,Q[14]=0,Q[15]=1,this},makeRotationFromQuaternion:function(y){var q=this.el,_=y._x,s=y._y,p=y._z,O=p+p,L=_*(M=_+_),$=_*(E=s+s),_=_*O,k=s*E,s=s*O,M=(y=y._w)*M,E=y*E,y=y*O;return q[0]=1-(k+(p=p*O)),q[4]=$-y,q[8]=_+E,q[1]=$+y,q[5]=1-(L+p),q[9]=s-M,q[2]=_-E,q[6]=s+M,q[10]=1-(L+k),q[3]=0,q[7]=0,q[11]=0,q[12]=0,q[13]=0,q[14]=0,q[15]=1,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},getInverse:function(y,q){var _=this.el,s=(y=y.el)[0],p=y[1],O=y[2],L=y[3],$=y[4],k=y[5],M=y[6],E=y[7],H=y[8],w=y[9],Q=y[10],x=y[11],S=y[12],X=y[13],T=y[14],i=w*T*E-X*Q*E+X*M*x-k*T*x-w*M*(y=y[15])+k*Q*y,N=S*Q*E-H*T*E-S*M*x+$*T*x+H*M*y-$*Q*y,a=H*X*E-S*w*E+S*k*x-$*X*x-H*k*y+$*w*y,l=S*w*M-H*X*M-S*k*Q+$*X*Q+H*k*T-$*w*T,j=s*i+p*N+O*a+L*l;return 0==j?this.identity():(_[0]=i*(j=1/j),_[1]=(X*Q*L-w*T*L-X*O*x+p*T*x+w*O*y-p*Q*y)*j,_[2]=(k*T*L-X*M*L+X*O*E-p*T*E-k*O*y+p*M*y)*j,_[3]=(w*M*L-k*Q*L-w*O*E+p*Q*E+k*O*x-p*M*x)*j,_[4]=N*j,_[5]=(H*T*L-S*Q*L+S*O*x-s*T*x-H*O*y+s*Q*y)*j,_[6]=(S*M*L-$*T*L-S*O*E+s*T*E+$*O*y-s*M*y)*j,_[7]=($*Q*L-H*M*L+H*O*E-s*Q*E-$*O*x+s*M*x)*j,_[8]=a*j,_[9]=(S*w*L-H*X*L-S*p*x+s*X*x+H*p*y-s*w*y)*j,_[10]=($*X*L-S*k*L+S*p*E-s*X*E-$*p*y+s*k*y)*j,_[11]=(H*k*L-$*w*L-H*p*E+s*w*E+$*p*x-s*k*x)*j,_[12]=l*j,_[13]=(H*X*O-S*w*O+S*p*Q-s*X*Q-H*p*T+s*w*T)*j,_[14]=(S*k*O-$*X*O-S*p*M+s*X*M+$*p*T-s*k*T)*j,_[15]=($*w*O-H*k*O+H*p*M-s*w*M-$*p*Q+s*k*Q)*j,this)},invert:function(){return this.getInverse(this)},makeRotationAxis:function(y,q){var _=Math.cos(q),q=Math.sin(q),s=1-_,p=y.x,O=y.y,y=y.z,L=s*p,$=s*O;return this.set(L*p+_,L*O-q*y,L*y+q*O,0,L*O+q*y,$*O+_,$*y-q*p,0,L*y-q*O,$*y+q*p,s*y*y+_,0,0,0,0,1),this},multiply:function(y){return this.multiplyMatrices(this,y)},premultiply:function(y){return this.multiplyMatrices(y,this)},multiplyMatrices:function(y,q){var y=y.el||y,q=q.el||q,_=this.el,s=y[0],p=y[4],O=y[8],L=y[12],$=y[1],k=y[5],M=y[9],E=y[13],H=y[2],w=y[6],Q=y[10],x=y[14],S=y[3],X=y[7],T=y[11],y=y[15],i=q[0],N=q[4],a=q[8],l=q[12],j=q[1],Z=q[5],K=q[9],C=q[13],B=q[2],F=q[6],V=q[10],h=q[14],t=q[3],u=q[7],J=q[11],q=q[15];return _[0]=s*i+p*j+O*B+L*t,_[4]=s*N+p*Z+O*F+L*u,_[8]=s*a+p*K+O*V+L*J,_[12]=s*l+p*C+O*h+L*q,_[1]=$*i+k*j+M*B+E*t,_[5]=$*N+k*Z+M*F+E*u,_[9]=$*a+k*K+M*V+E*J,_[13]=$*l+k*C+M*h+E*q,_[2]=H*i+w*j+Q*B+x*t,_[6]=H*N+w*Z+Q*F+x*u,_[10]=H*a+w*K+Q*V+x*J,_[14]=H*l+w*C+Q*h+x*q,_[3]=S*i+X*j+T*B+y*t,_[7]=S*N+X*Z+T*F+y*u,_[11]=S*a+X*K+T*V+y*J,_[15]=S*l+X*C+T*h+y*q,this},lookAt:(t0=new Q5,function(y,q,_){return t0.subVectors(y,q),this.lookAtDirection(t0,_)}),lookAtDirection:(F0=new Q5,V0=new Q5,h0=new Q5,function(y,q){q=q||Q5.UP;var _=this.el;return h0.copy(y),0===h0.lengthSq()&&(h0.z=1),h0.normalize(),F0.crossVectors(q,h0),0===F0.lengthSq()&&(1===Math.abs(q.z)?h0.x+=1e-4:h0.z+=1e-4,h0.normalize(),F0.crossVectors(q,h0)),F0.normalize(),V0.crossVectors(h0,F0),_[0]=F0.x,_[4]=V0.x,_[8]=h0.x,_[1]=F0.y,_[5]=V0.y,_[9]=h0.y,_[2]=F0.z,_[6]=V0.z,_[10]=h0.z,this}),extractScale:function(y){B0===k5&&(B0=new Q5),y===k5&&(y=new Q5);var q=B0.setFromMatrixColumn(this,0).length(),_=B0.setFromMatrixColumn(this,1).length(),s=B0.setFromMatrixColumn(this,2).length();return y.set(q,_,s),y},extractRotation:function(y){C0===k5&&(C0=new Q5),y===k5&&(y=new G);var q=this.el,_=y.el,s=1/C0.setFromMatrixColumn(y,0).length(),p=1/C0.setFromMatrixColumn(y,1).length(),y=1/C0.setFromMatrixColumn(y,2).length();return q[0]=_[0]*s,q[1]=_[1]*s,q[2]=_[2]*s,q[4]=_[4]*p,q[5]=_[5]*p,q[6]=_[6]*p,q[8]=_[8]*y,q[9]=_[9]*y,q[10]=_[10]*y,this},multiplyScalar:function(y){var q=this.el;return q[0]*=y,q[4]*=y,q[8]*=y,q[12]*=y,q[1]*=y,q[5]*=y,q[9]*=y,q[13]*=y,q[2]*=y,q[6]*=y,q[10]*=y,q[14]*=y,q[3]*=y,q[7]*=y,q[11]*=y,q[15]*=y,this},getPosition:function(y){return(y=y===k5?new Q5:y).setFromMatrixColumn(this,3)},setPosition:function(y){var q=this.el;return q[12]=y.x,q[13]=y.y,q[14]=y.z,this},copyPosition:function(y){var q=this.el,y=y.el;return q[12]=y[12],q[13]=y[13],q[14]=y[14],this},toArray:function(y,q){var _=this.el;return(y=y===k5?[]:y)[q=q===k5?0:q]=_[0],y[q+1]=_[1],y[q+2]=_[2],y[q+3]=_[3],y[q+4]=_[4],y[q+5]=_[5],y[q+6]=_[6],y[q+7]=_[7],y[q+8]=_[8],y[q+9]=_[9],y[q+10]=_[10],y[q+11]=_[11],y[q+12]=_[12],y[q+13]=_[13],y[q+14]=_[14],y[q+15]=_[15],y},determinant:function(){var y=this.el||this,q=y[0],_=y[4],s=y[8],p=y[12],O=y[1],L=y[5],$=y[9],k=y[13],M=y[2],E=y[6],H=y[10],w=y[14];return y[3]*(+p*$*E-s*k*E-p*L*H+_*k*H+s*L*w-_*$*w)+y[7]*(+q*$*w-q*k*H+p*O*H-s*O*w+s*k*M-p*$*M)+y[11]*(+q*k*E-q*L*w-p*O*E+_*O*w+p*L*M-_*k*M)+y[15]*(-s*L*M-q*$*E+q*L*H+s*O*E-_*O*H+_*$*M)},copy:function(y){var q=this.el,y=y.el||y;return q[0]=y[0],q[1]=y[1],q[2]=y[2],q[3]=y[3],q[4]=y[4],q[5]=y[5],q[6]=y[6],q[7]=y[7],q[8]=y[8],q[9]=y[9],q[10]=y[10],q[11]=y[11],q[12]=y[12],q[13]=y[13],q[14]=y[14],q[15]=y[15],this},composeFromArray:function(y,q,_){var s,p,O,L,$,k,M,E,H,q=q?(s=q[0],p=q[1],O=q[2],q[3]):(O=p=s=0,1);return _?(L=_[0],$=_[1],k=_[2]):L=$=k=1,y?(M=y[0],E=y[1],H=y[2]):M=E=H=0,this._composeImpl(s,p,O,q,L,$,k,M,E,H)},compose:function(y,q,_){var s,p,O,L,$,k,M,E,H,q=q?(s=q._x,p=q._y,O=q._z,q._w):(O=p=s=0,1);return _?(L=_.x,$=_.y,k=_.z):L=$=k=1,y?(M=y.x,E=y.y,H=y.z):M=E=H=0,this._composeImpl(s,p,O,q,L,$,k,M,E,H)},_composeImpl:function(y,q,_,s,p,O,L,$,k,M){var E=this.el,H=_+_,w=y*(S=y+y),Q=y*(X=q+q),y=y*H,x=q*X,q=q*H,_=_*H,S=s*S,X=s*X,s=s*H;return E[0]=(1-(x+_))*p,E[1]=(Q+s)*p,E[2]=(y-X)*p,E[3]=0,E[4]=(Q-s)*O,E[5]=(1-(w+_))*O,E[6]=(q+S)*O,E[7]=0,E[8]=(y+X)*L,E[9]=(q-S)*L,E[10]=(1-(w+x))*L,E[11]=0,E[12]=$,E[13]=k,E[14]=M,E[15]=1,this},decompose:(Z0=new Q5,K0=new G,function(y,q,_){var s=this.el,p=Z0.set(s[0],s[1],s[2]).length(),O=Z0.set(s[4],s[5],s[6]).length(),L=Z0.set(s[8],s[9],s[10]).length(),y=(this.determinant()<0&&(p=-p),y.x=s[12],y.y=s[13],y.z=s[14],K0.copy(this),1/p),s=1/O,$=1/L;return K0.el[0]*=y,K0.el[1]*=y,K0.el[2]*=y,K0.el[4]*=s,K0.el[5]*=s,K0.el[6]*=s,K0.el[8]*=$,K0.el[9]*=$,K0.el[10]*=$,q.setFromRotationMatrix(K0),_.x=p,_.y=O,_.z=L,this}),equals:function(y){for(var q=this.el,_=y.el,s=0;s<16;s++)if(q[s]!==_[s])return!1;return!0},transpose:function(){var y=this.el,q=y[1];return y[1]=y[4],y[4]=q,q=y[2],y[2]=y[8],y[8]=q,q=y[6],y[6]=y[9],y[9]=q,q=y[3],y[3]=y[12],y[12]=q,q=y[7],y[7]=y[13],y[13]=q,q=y[11],y[11]=y[14],y[14]=q,this}}),new G),nB=new G,vB=(G.determinantOfArray=(J0=P.Math.Matrix4.prototype.determinant,function(y){return y?J0.call(y):0}),G.multiplyMatrixArray=function(y,q,_,s,p,O){var L=y.el||y,q=q.el||q,_=_.el||_,$=q[p+0],k=q[p+4],M=q[p+8],E=q[p+12],H=q[p+1],w=q[p+5],Q=q[p+9],x=q[p+13],S=q[p+2],X=q[p+6],T=q[p+10],i=q[p+14],N=q[p+3],a=q[p+7],l=q[p+11],q=q[p+15],p=_[O+0],j=_[O+4],Z=_[O+8],K=_[O+12],C=_[O+1],B=_[O+5],F=_[O+9],V=_[O+13],h=_[O+2],t=_[O+6],u=_[O+10],J=_[O+14],D=_[O+3],c=_[O+7],R=_[O+11],_=_[O+15];return L[s+0]=$*p+k*C+M*h+E*D,L[s+4]=$*j+k*B+M*t+E*c,L[s+8]=$*Z+k*F+M*u+E*R,L[s+12]=$*K+k*V+M*J+E*_,L[s+1]=H*p+w*C+Q*h+x*D,L[s+5]=H*j+w*B+Q*t+x*c,L[s+9]=H*Z+w*F+Q*u+x*R,L[s+13]=H*K+w*V+Q*J+x*_,L[s+2]=S*p+X*C+T*h+i*D,L[s+6]=S*j+X*B+T*t+i*c,L[s+10]=S*Z+X*F+T*u+i*R,L[s+14]=S*K+X*V+T*J+i*_,L[s+3]=N*p+a*C+l*h+q*D,L[s+7]=N*j+a*B+l*t+q*c,L[s+11]=N*Z+a*F+l*u+q*R,L[s+15]=N*K+a*V+l*J+q*_,y},P.Math.Triangle=function(y,q,_){this.a=y!==k5?y:new Q5,this.b=q!==k5?q:new Q5,this.c=_!==k5?_:new Q5}),bB=(o.assign(vB,{barycoordFromPoint:(c0=new Q5,R0=new Q5,o0=new Q5,function(y,q,_,s,p){c0.subVectors(s,q),R0.subVectors(_,q),o0.subVectors(y,q);var s=c0.dot(c0),_=c0.dot(R0),y=c0.dot(o0),q=R0.dot(R0),O=R0.dot(o0),L=s*q-_*_,p=p||new Q5;return 0==L?p.set(-2,-1,-1):p.set(1-(q=(q*y-_*O)*(L=1/L))-(s=(s*O-_*y)*L),s,q)}),uvIntersection:(D0=new Q5,function(y,q,_,s,p,O,L){return vB.barycoordFromPoint(y,q,_,s,D0),p.multiplyScalar(D0.x),O.multiplyScalar(D0.y),L.multiplyScalar(D0.z),p.add(O).add(L),p.clone()})}),P.Math.Euler=function(y,q,_,s,p){this.set(y,q,_,s,p)}),IB=(bB.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],bB.DefaultOrder="XYZ",bB.ReverseOrder=(Y0={xyz:"ZYX",xzy:"YZX",yxz:"ZXY",yzx:"XZY",zxy:"YXZ",zyx:"XYZ"},function(y){return Y0[y]}),o.defineProperties(bB.prototype,{x:{get:function(){return this._x},set:function(y){this._x=y,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(y){this._y=y,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(y){this._z=y,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(y){this._order=y,this.onChangeCallback()}}}),o.assign(bB.prototype,{set:function(y,q,_,s,p){return Hx(y)&&(p=_,s=q,_=y[2],q=y[1],y=y[0]),s?p&&(s=bB.ReverseOrder(s)):s=this._order||"ZYX",this._x=y||0,this._y=q||0,this._z=_||0,this._order=s,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(y){return this._x=y._x,this._y=y._y,this._z=y._z,this._order=y._order,this.onChangeCallback(),this},setFromRotationMatrix:function(y,q,_){var s=P.Math.clamp,p=(y=y.el||y)[0],O=y[4],L=y[8],$=y[1],k=y[5],M=y[9],E=y[2],H=y[6],y=y[10];return"XYZ"===(q=q||this._order)?(this._y=Math.asin(s(L,-1,1)),Math.abs(L)<.9999999?(this._x=Math.atan2(-M,y),this._z=Math.atan2(-O,p)):(this._x=Math.atan2(H,k),this._z=0)):"YXZ"===q?(this._x=Math.asin(-s(M,-1,1)),Math.abs(M)<.9999999?(this._y=Math.atan2(L,y),this._z=Math.atan2($,k)):(this._y=Math.atan2(-E,p),this._z=0)):"ZXY"===q?(this._x=Math.asin(s(H,-1,1)),Math.abs(H)<.9999999?(this._y=Math.atan2(-E,y),this._z=Math.atan2(-O,k)):(this._y=0,this._z=Math.atan2($,p))):"ZYX"===q?(this._y=Math.asin(-s(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(H,y),this._z=Math.atan2($,p)):(this._x=0,this._z=Math.atan2(-O,k))):"YZX"===q?(this._z=Math.asin(s($,-1,1)),Math.abs($)<.9999999?(this._x=Math.atan2(-M,k),this._y=Math.atan2(-E,p)):(this._x=0,this._y=Math.atan2(L,y))):"XZY"===q?(this._z=Math.asin(-s(O,-1,1)),Math.abs(O)<.9999999?(this._x=Math.atan2(H,k),this._y=Math.atan2(L,p)):(this._x=Math.atan2(-M,y),this._y=0)):console.warn("unsupported order: "+q),this._order=q,!1!==_&&this.onChangeCallback(),this},setFromQuaternion:(m0=new G,function(y,q,_){return m0.makeRotationFromQuaternion(y),this.setFromRotationMatrix(m0,q,_)}),setFromVector3:function(y,q){return this.set(y.x,y.y,y.z,q||this._order)},reorder:(P0=new AB,function(y){return P0.setFromEuler(this),this.setFromQuaternion(P0,y)}),equals:function(y){return y._x===this._x&&y._y===this._y&&y._z===this._z&&y._order===this._order},fromArray:function(y){return this._x=y[0],this._y=y[1],this._z=y[2],y[3]!==k5&&(this._order=y[3]),this.onChangeCallback(),this},toArray:function(y,q){return(y=y===k5?[]:y)[q=q===k5?0:q]=this._x,y[q+1]=this._y,y[q+2]=this._z,y[q+3]=this._order,y},toVector3:function(y){return y?y.set(this._x,this._y,this._z):new Q5(this._x,this._y,this._z)},onChange:function(y){return this.onChangeCallback=y,this},onChangeCallback:function(){}}),e.eulerArrayToQuaternionArray=(W0=new AB,A0=new bB,function(y,q){return W0.setFromEuler(A0.fromArray(y)).toArray(q)}),P.Math.Interpolant=function(y,q,_,s){this.parameterPositions=y,this._cachedIndex=0,y=q.length/y.length,_&&(y/=_),this.resultBuffer=s!==k5?s:new q.constructor(y),this.sampleValues=q,this.valueSize=y,this.settings=null,this.DefaultSettings_={}}),UB=(o.assign(IB.prototype,{evaluate:function(y){var q,_=this.parameterPositions,s=this._cachedIndex,p=_[s],O=_[s-1];y:{q:{_:{s:if(!(y<p)){for(var L=s+2;;){if(p===k5){if(y<O)break s;return s=_.length,this._cachedIndex=s,this.copySampleValue_(s-1,y,O)}if(s===L)break;if(O=p,y<(p=_[++s]))break q}q=_.length;break _}if(O<=y)break y;var $=_[1];for(y<$&&(s=2,O=$),L=s-2;;){if(O===k5)return this._cachedIndex=0,this.copySampleValue_(0,y,p);if(s===L)break;if(p=O,(O=_[--s-1])<=y)break q}q=s,s=0}for(;s<q;){var k=s+q>>>1;y<_[k]?q=k:s=1+k}if(p=_[s],(O=_[s-1])===k5)return this._cachedIndex=0,this.copySampleValue_(0,y,p);if(p===k5)return s=_.length,this._cachedIndex=s,this.copySampleValue_(s-1,O,y)}this._cachedIndex=s,this.intervalChanged_(s,O,p)}return this.interpolateImpl(s,O,y,p)},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(y){for(var q=this.resultBuffer,_=this.sampleValues,s=this.valueSize,p=y*s,O=0;O!==s;++O)q[O]=_[p+O];return q},interpolateImpl:function(){},intervalChanged_:function(){}}),(dt.prototype=o.create(IB.prototype)).interpolateImpl=function(y){return this.copySampleValue_(y-1)},(yM.prototype=o.create(IB.prototype)).interpolateImpl=function(y,q,_,s){for(var p=this.resultBuffer,O=this.sampleValues,L=this.valueSize,$=y*L,k=$-L,M=(_-q)/(s-q),E=1-M,H=0;H!==L;++H)p[H]=O[k+H]*E+O[$+H]*M;return p},(qM.prototype=o.create(IB.prototype)).interpolateImpl=function(y,q,_,s){for(var p=this.resultBuffer,O=this.sampleValues,L=this.valueSize,$=(_-q)/(s-q),k=y*L,M=k+L;k!==M;k+=4)AB.slerpFlat(p,0,O,k-L,O,k,$);return p},(_M.prototype=o.create(IB.prototype)).intervalChanged_=function(y,q,_){var s=this.parameterPositions,p=y-2,O=y+1,L=s[p],$=s[O];if(L===k5)switch(this.getSettings_().endingStart){case"ZeroSlope":p=y,L=2*q-_;break;case"WrapAround":L=q+s[p=s.length-2]-s[p+1];break;default:p=y,L=_}if($===k5)switch(this.getSettings_().endingEnd){case"ZeroSlope":O=y,$=2*_-q;break;case"WrapAround":$=_+s[O=1]-s[0];break;default:O=y-1,$=q}var k=.5*(_-q),M=this.valueSize;this._weightPrev=k/(q-L),this._weightNext=k/($-_),this._offsetPrev=p*M,this._offsetNext=O*M},_M.prototype.interpolateImpl=function(y,q,_,s){for(var p=this.resultBuffer,O=this.sampleValues,L=this.valueSize,$=y*L,k=$-L,M=this._offsetPrev,E=this._offsetNext,y=this._weightPrev,H=this._weightNext,w=-y*(q=(s=(_=(_-q)/(s-q))*_)*_)+2*y*s-y*_,Q=(1+y)*q+(-1.5-2*y)*s+(-.5+y)*_+1,x=(-1-H)*q+(1.5+H)*s+.5*_,S=H*q-H*s,X=0;X!==L;++X)p[X]=w*O[M+X]+Q*O[k+X]+x*O[$+X]+S*O[E+X];return p},(sM.prototype=o.create(IB.prototype)).copySampleValue_=function(y){for(var q=this.resultBuffer,_=this.sampleValues,s=this.valueSize,p=y*s*3+s,O=0;O!==s;O++)q[O]=_[p+O];return q},sM.prototype.interpolateImpl=(z0=new AB,function(y,q,_,s){for(var p=this.resultBuffer,O=this.sampleValues,L=this.valueSize,$=2*L,k=3*L,M=s-q,E=y*k,H=E-k,w=-2*(q=(_=(s=(_-q)/M)*s)*s)+3*_,Q=q-_,x=1-w,S=Q-_+s,X=0;X!==L;X++){var T=O[H+X+L],i=O[H+X+$]*M,N=O[E+X+L],a=O[E+X]*M;p[X]=x*T+S*i+w*N+Q*a}return this.isQuaternion&&z0.fromArray(p).normalize().toArray(p),p}),P.Math.BitArray=function(y){y instanceof UB?this.fromString(y.toString()):"string"==typeof y?this.fromString(y):(this.size=y=y||0,this.data=new Uint32Array(Math.ceil(y/32)))}),dB=(o.assign(UB.prototype,{set:function(y,q,_){var s=y>>5,y=31&y;_&&1<_?(_=8==_?255:4===_?15:3,q?q&=_:q=0,this.data[s]=this.data[s]&~(_<<y)|q<<y):q?this.data[s]|=1<<y:this.data[s]&=~(1<<y)},get:function(y,q){var _=y>>5,y=31&y;return q&&1<q?this.data[_]>>y&(8==q?255:4===q?15:3):0!=(this.data[_]&1<<y)},toString:(e0=["","0","00","000","0000","00000","000000","0000000","00000000"],function(){for(var y,q="",_=0,s=this.data.length;_<s;_++)y=this.data[_].toString(16),q+=e0[8-y.length]+y;return q}),fromString:function(y){var q=y.length/8;this.size=32*q,this.data=new Uint32Array(q);for(var _=0;_<q;_++)this.data[_]=R5(y.substr(8*_,8),16);return this}}),{ms_ac:function(y,q){for(var _=q.ms_ac,s=0;s<_.length;s++)!function(y,_){var s="_"+_;y[Ox(_)]=function(){return this[s]},y[Lx(_)]=function(y){var q=this[s];this[s]=y,this.fp(_,q,y)}}(y,_[s])},ms_listener:function(y,q){y.addListeners=function(){var q=this,y=wn;E5.mockTouch&&(y=Mn.concat(En).concat(Hn));for(var _=0,s=(q.__events__=y).length;_<s;_++){var p=y[_];"wheel"===p&&!q.handle_wheel&&q.handle_mousewheel&&(q.handle_wheel=function(y){lx(q,y)}),q["handle_"+p]&&function(q,y,_){function s(y){"mousedown"!==q&&"mouseup"!==q&&"touchstart"!==q&&"touchend"!==q||fA(y),_.disabled||_["handle_"+q](y)}var p="__"+q;_[p]||(_[p]=s,y5(y,q,s))}(p,q.getView(),q)}},y.removeListeners=function(){var y=this.__events__;if(y){this.__events__=k5;for(var q,_,s,p,O=0,L=y.length;O<L;O++)this["handle_"+y[O]]&&(q=y[O],_=this.getView(),0,(p=this[s="__"+q])&&(q5(_,q,p),delete this[s]))}}},ms_fire:function(y,q){y.mp=function(y,q,_){this.addPropertyChangeListener(y,q,_)},y.ump=function(y,q){this.removePropertyChangeListener(y,q)},y.fp=function(y,q,_,s,p){return this.firePropertyChange(y,q,_,s,p)},y.addPropertyChangeListener=function(y,q,_){this._62I||(this._62I=new Tu),this._62I.add(y,q,_)},y.removePropertyChangeListener=function(y,q){this._62I&&this._62I.remove(y,q)},y.firePropertyChange=function(y,q,_,s,p){if(s){if(s(q,_))return!1}else if(q===_)return!1;return(s=p||{}).property=y,s.oldValue=q,s.newValue=_,s.source=this,(s.data=this)._62I&&this._62I.fire(s),this.onPropertyChanged&&this.onPropertyChanged(s),!0}},ms_attr:function(y,q){y.a=function(y,q){if(2===arguments.length)this.setAttr(y,q);else{if(!Mx(y))return this.getAttr(y);for(var _ in y)this.setAttr(_,y[_])}return this},y.getAttr=function(y,q){if(q===k5&&(q=1),this._attrObject&&y in this._attrObject)return this._attrObject[y];if(this.getImage){var _=this.getImage();if(w5(_)&&(_=Cn[_]),Mx(_)&&"dataBindings"in _)for(var s=_.dataBindings,p=s.length-1;0<=p;p--){var O=s[p];if(O.attr===y){if("defaultValue"in O)return O.defaultValue;break}}}return q?T[y]:k5},y.setAttr=function(y,q){this._attrObject||(this._attrObject={});var _=this._attrObject[y];q===k5?delete this._attrObject[y]:this._attrObject[y]=q,this.fp&&this.fp("a:"+y,_,q)&&this.onAttrChanged&&this.onAttrChanged(y,_,q)},y.getSerializableAttrs=function(){var y,q={};for(y in this._attrObject)q[y]=1;return q}},ms_bnb:function(y,q){y.getBodyColor=function(y){return y.s("body.color")},y.getBorderColor=function(y){return y.s("border.color")}},_51o:function(y,q){y.mi=function(y,q,_){this.addInteractorListener(y,q,_)},y.umi=function(y,q){this.removeInteractorListener(y,q)},y.fi=function(y){this.fireInteractorEvent(y)},y.addInteractorListener=function(y,q,_){this._63I||(this._63I=new Tu),this._63I.add(y,q,_)},y.removeInteractorListener=function(y,q){this._63I&&this._63I.remove(y,q)},y.fireInteractorEvent=function(y){this._63I&&this._63I.fire(y)},y.setInteractors=function(y){var q=this._interactors;q&&q.each(function(y){y.tearDown()}),Hx(y)&&(y=new n(y)),(this._interactors=y)&&y.each(function(y){y.setUp()}),this.fp("interactors",q,y),this.invalidateSelection()},y.getInteractors=function(){return this._interactors}},_49o:function(y,q){y._44O=M5,y._45O=M5,y.getTopPainters=function(){return this._44O},y.getBottomPainters=function(){return this._45O},y.addTopPainter=function(y){this._44O||(this._44O=new n),this._44O.contains(y)||(this._44O.add(y),this.redraw&&this.redraw())},y.removeTopPainter=function(y){this._44O&&(this._44O.remove(y),this.redraw&&this.redraw())},y.addBottomPainter=function(y){this._45O||(this._45O=new n),this._45O.contains(y)||(this._45O.add(y),this.redraw&&this.redraw())},y.removeBottomPainter=function(y){this._45O&&(this._45O.remove(y),this.redraw&&this.redraw())},y._93db=function(q,_){var s=this;s._45O&&s._45O.each(function(y){y.draw?y.draw(q,_):y.call(s,q,_)})},y._92db=function(q,_){var s=this;s._44O&&s._44O.each(function(y){y.draw?y.draw(q,_):y.call(s,q,_)})}},ms_sm:function(y,q){y.sm=function(){return this.getSelectionModel()},y.setSelectableFunc=function(y){this.sm().setFilterFunc(y)},y.getSelectableFunc=function(){return this.sm().getFilterFunc()},y.getSelectionModel=function(){return this._selectionModel||this.dm().sm()},y.isSelectionModelShared=function(){return!this._selectionModel},y.setSelectionModelShared=function(y){var q=this,_=q.sm(),s=!q._selectionModel,p=q.handleSelectionChange,O=q.dm();s!==y&&(q.invalidateSelection&&q.invalidateSelection(),y?(O.sm().ms(p,q),q._selectionModel.ums(p,q),q._selectionModel.dispose(),q._selectionModel=M5):(O.sm().ums(p,q),q._selectionModel=new au(O),q._selectionModel.ms(p,q)),q.onSelectionModelSharedChanged(),q.fp("selectionModelShared",s,y),q.fireViewEvent({kind:"selectionModelSharedChange",oldValue:s,newValue:y,oldSelectionModel:_,newSelectionModel:q.sm()}))},y.onSelectionModelSharedChanged=function(){this.redraw(),this.invalidateSelection&&this.invalidateSelection()},y.removeSelection=function(){var y=this.dm();y.beginTransaction(),this.sm().toSelection().each(y.remove,y),y.endTransaction()},y.selectAll=function(){var q=this;q.sm().ss(q.dm().toDatas(function(y){return q.isVisible(y)&&q.isSelectable(y)}))},y.isSelected=function(y){return this.sm().co(y)},y.isSelectedById=function(y){return!!(y=this.dm().getDataById(y))&&this.isSelected(y)},y.isSelectable=function(y){return this.sm().isSelectable(y)}},ms_tx:function(y,q){y._64I=0,y._65O=0,y.isScrollable=function(){return this.getWidth()<this._64I},y._40o=function(){return this.isScrollable()},y.getLogicalPoint=function(y){return p8(y,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},y.tx=function(y){if(y===k5)return this.getTranslateX();this.setTranslateX(y)},y.getTranslateX=function(){return this._65O},y.setTranslateX=function(y){var q=this.getWidth()-this._64I,q=(y=Z5(y=0<(y=y<q?q:y)?0:y),this._65O);this._65O=y,this.fp(KL,q,y)}},ms_ty:function(y,q){y._23Q=0,y._66O=0,y._41o=function(){return this.getHeight()<this._23Q},y.getLogicalPoint=function(y){return p8(y,this._canvas||this._view,this.tx?this.tx():0,this.ty())},y.ty=function(y){if(y===k5)return this.getTranslateY();this.setTranslateY(y)},y.getTranslateY=function(){return this._66O},y.setTranslateY=function(y){var q=this.getHeight()-this._23Q,q=(y=Z5(y=0<(y=y<q?q:y)?0:y),this._66O);this._66O=y,this.fp(CL,q,y)}},ms_txy:function(y,q){y._65O=0,y._66O=0,y.tx=function(y){if(y===k5)return this.getTranslateX();this.setTranslateX(y)},y.ty=function(y){if(y===k5)return this.getTranslateY();this.setTranslateY(y)},y.onTranslateEnded=function(){},y.setTranslate=function(q,_,y){var s,p,O=this;(y=Nx(y))?(O._65I&&O._65I.stop(!0),s=O.tx(),p=O.ty(),y.action=function(y){O.setTranslate(s+(q-s)*y,p+(_-p)*y)},y._37o=function(){delete O._66I,delete O._65I,O.onTranslateEnded()},O._66I=1,O._65I=RA(y)):(O.tx(q),O.ty(_))},y.getTranslateX=function(){return this._65O},y.setTranslateX=function(y){y=this.adjustTranslateX(y);var q=this._65O;this._65O=y,this.fp(KL,q,y)},y.getTranslateY=function(){return this._66O},y.setTranslateY=function(y){y=this.adjustTranslateY(y);var q=this._66O;this._66O=y,this.fp(CL,q,y)},y.adjustTranslateX=function(y){return Z5(y)},y.adjustTranslateY=function(y){return Z5(y)},y.translate=function(y,q,_){this.setTranslate(this.tx()+y,this.ty()+q,_)},y.getLogicalPoint=function(y){return p8(y,this._canvas||this._view,this.tx(),this.ty())}},ms_dm:function(y,q){y.dm=function(y){if(!y)return this.getDataModel();this.setDataModel(y)},y.getDataModel=function(){return this._dataModel}},ms_lp:function(y,q){y.lp=function(y){return this.getLogicalPoint(y)}},ms_v:function(y,q){y._disabled=!1,y.setDisabled=function(y,q){var _=this._disabled;_!==y&&(_&&($8(this._63O),delete this._63O),y&&(gx(this._view,this._63O=sl(q)),this.iv()),this._disabled=y,this.fp("disabled",_,y))},y.isDisabled=function(){return this._disabled},y.getDisabledDiv=function(){return this._63O},y.getView=function(){return this._view},y.addToDOM=function(y){var q=this,_=q.getView(),s=_.style;(y=y||w.body).appendChild(_),s.left="0",s.right="0",s.top="0",s.bottom="0",y5(Y,"resize",function(){q.iv()}),q.iv()},y.setCursor=function(y){"default"===y&&(y=this._defaultCursor||y);var q=this.getView().style;q.cursor=y,q.cursor="-webkit-"+y,q.cursor="-moz-"+y},y.getWidth=function(){return this._view.clientWidth},y.getHeight=function(){return this._view.clientHeight},y.setWidth=function(y){this._view.style.width=y+wD,this.iv(),this.fp&&this.fp(ZD,M5,y)},y.setHeight=function(y){this._view.style.height=y+wD,this.iv(),this.fp&&this.fp(KD,M5,y)},y.setFocus=function(y){var q=this._currentEditor;return!(y&&q&&(q=q.getView?q.getView():q).contains(y.target)||(Hl(this._view),this.endEditing&&this.endEditing(),this.fireViewEvent("focus"),0))},y.iv=function(y){this.invalidate(y)},y.invalidate=function(y){this._68I||(this._68I=1,this._ivTimerId=tA(this._validateImpl,this,M5,y),this._ivTimerDelay=y,this.onInvalidated&&this.onInvalidated(),this.fireViewEvent("invalidate"))},y.validate=function(){var y=this._ivTimerId,q=this._ivTimerDelay;!1!==this._validateImpl()&&y&&uA(y,q)},y._validateImpl=function(){var y,q=this,_=q._view;if(!q._68I)return!1;delete q._68I,_.parentNode&&(0===_.offsetWidth&&0===_.offsetHeight&&q._67I!==M5?(q._67I===k5&&(q._67I=E5.reinvalidateCount),0<q._67I?q._67I--:q._67I=M5,q.iv()):(q.fireViewEvent("beginValidate"),q.validateImpl(),q.onValidated&&q.onValidated(),q.fireViewEvent("validate"),(y=q._63O)&&(_.lastChild!==y&&($8(y),gx(_,y)),h(y,0,0,q.getWidth(),q.getHeight())),vn(q),A8(q),M_(q),ME(q)))},y.layout=function(y,q,_,s){1===arguments.length?h(this,y):h(this,y,q,_,s)},y.addViewListener=function(y,q,_){this._67O||(this._67O=new Tu),this._67O.add(y,q,_)},y.removeViewListener=function(y,q){this._67O.remove(y,q)},y.fireViewEvent=function(y){this._67O&&(w5(y)&&(y={kind:y}),this._67O.fire(y)),E5.viewListener&&E5.viewListener(this,y)}},ms_tip:function(y,q){y.setToolTipEnabled=function(y){y?v5||this._13o||(this.enableToolTip(),this.fp("toolTipEnabled",!1,!0)):this._13o&&(this.disableToolTip(),this.fp("toolTipEnabled",!0,!1))},y.isToolTipEnabled=function(){return!!this._13o},y.enableToolTip=function(){var y,_=this;v5||_._13o||(_._13o=function(y){var q;y.toolTipView||((q=(y.toolTipView=_).getToolTip(y))!=M5?(E5.toolTipContinual&&E5.isToolTipShowing()?LA(y,q):($A(),Sn={timeout:m5(an,_A),e:y,info:q}),Xn={e:y,view:_}):$A())},y=_.getView(),y5(y,dL,_._13o),y5(y,"mouseleave",E5.hideToolTip))},y.disableToolTip=function(){var y;this._13o&&(y=this.getView(),q5(y,dL,this._13o),q5(y,"mouseleave",E5.hideToolTip),delete this._13o)},y.getToolTip=function(y){return this.getDataAt?(y=this.getDataAt(y))?y.getToolTip():M5:this.getValue?this.getValue():void 0}},_52o:function(y,q){y._zoom=1,y._29I=fn,y.zoomIn=function(y,q){this.setZoom(this._zoom*NA,y,q)},y.zoomOut=function(y,q){this.setZoom(this._zoom/NA,y,q)},y.zoomReset=function(y,q){this.setZoom(1,y,q)},y.scrollZoomIn=function(y){this.setZoom(this._zoom*aA,M5,y)},y.scrollZoomOut=function(y){this.setZoom(this._zoom/aA,M5,y)},y.pinchZoomIn=function(y){this.setZoom(this._zoom*lA,M5,y)},y.pinchZoomOut=function(y){this.setZoom(this._zoom/lA,M5,y)},y.adjustZoom=function(y){return y<ZA?ZA:jA<y?jA:y},y.getZoom=function(){return this._zoom},y.setZoom=function(q,y,_){var s,p=this;(y=Nx(y))?(p._14o&&p._14o.stop(!0),s=p._zoom,y.action=function(y){p._96O(s+(q-s)*y,_)},y._37o=function(){delete p._zooming,delete p._14o,p.onZoomEnded()},p._zooming=1,p._14o=RA(y)):p._96O(q,_)},y._96O=function(y,q){var _,s;(y=this.adjustZoom(y))!==this._zoom&&(this.validate(),_=this._29I,s=this._zoom,0!==_.width&&0!==_.height&&(q=q||{x:_.x+_.width/2,y:_.y+_.height/2},this.tx((q.x-_.x)*s-q.x*y),this.ty((q.y-_.y)*s-q.y*y)),this._zoom=y,this.fp("zoom",s,y))}},ms_edge:function(y,q){y._2I=function(y){this._44I||(this._44I=new n),this._42I||(this._42I=new n),this._44I.add(y),this._42I.add(y),this._20I()},y._4I=function(y){this._44I||(this._44I=new n),this._43I||(this._43I=new n),this._44I.add(y),this._43I.add(y),this._20I()},y._16I=function(y){this._44I.remove(y),this._42I.remove(y),this._44I.isEmpty()&&delete this._44I,this._42I.isEmpty()&&delete this._42I,this._20I()},y._18I=function(y){this._44I.remove(y),this._43I.remove(y),this._44I.isEmpty()&&delete this._44I,this._43I.isEmpty()&&delete this._43I,this._20I()},y._20I=function(){var q,_=this;delete _._45I,!_._44I||_._44I.isEmpty()?delete _._70O:(_._44I.each(function(y){y.isLooped()&&!(q=q||{})[y._id]&&(_._45I||(_._45I=new n),_._45I.add(y),q[y._id]=y)}),q?(_._70O=new n,_._44I.each(function(y){q[y._id]?"A"!==q[y._id]&&(q[y._id]="A",_._70O.add(y)):_._70O.add(y)})):_._70O=_._44I)},y.hasAgentEdges=function(){return!!this._49I&&!this._49I.isEmpty()},y.getSourceAgentEdges=function(){return this._46I},y.getTargetAgentEdges=function(){return this._47I},y._1I=function(y){this._46I||(this._46I=new n),this._48I||(this._48I=new n),this._46I.add(y),this._48I.add(y),this._19I()},y._3I=function(y){this._47I||(this._47I=new n),this._48I||(this._48I=new n),this._47I.add(y),this._48I.add(y),this._19I()},y._15I=function(y){this._46I.remove(y),this._48I.remove(y),this._46I.isEmpty()&&delete this._46I,this._48I.isEmpty()&&delete this._48I,this._19I()},y._17I=function(y){this._47I.remove(y),this._48I.remove(y),this._47I.isEmpty()&&delete this._47I,this._48I.isEmpty()&&delete this._48I,this._19I()},y._19I=function(){var q,_=this,y=(delete _._49I,_._48I);y&&!y.isEmpty()&&(q={},y.each(function(y){q[y._id]?_._49I||(_._49I=new n):q[y._id]=y}),_._49I?y.each(function(y){q[y._id]&&(_._49I.add(y),delete q[y._id])}):_._49I=y)},y.getLoopedEdges=function(){return this._45I},y.getEdges=function(){return this._70O},y.getAgentEdges=function(){return this._49I},y.getSourceEdges=function(){return this._42I},y.getTargetEdges=function(){return this._43I},y._8I=function(){this._70O&&this._70O.each(function(y){y._7I()})}}}),yA=(ax(E5,{getVersion:function(){return"7.6.2-dev43"}},!0),function(y){return y.devicePixelRatio||(y.screen&&y.screen.logicalXDPI?y.screen.deviceXDPI/y.screen.logicalXDPI:1)}),qA=(ax(E5,{numberDigits:5,crossOrigin:"",baseZIndex:k5,isTouchable:v5,mockTouch:!0,devicePixelRatio:yA(Y),reinvalidateCount:3,hitMaxArea:3e3,imageCacheThreshold:20,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:C.disabledBackground,forceHierarchicalSerialization:!0,extractBatchTranslation:!1,extractShapeTranslation:!1,extractPolylineTranslation:!1,extractVerticesTranslation:!1,envmapProbeMinWaitTime:300,envmapProbeMaxWaitTime:25e3,EnvmapTextureSize:1024,hoverDelay:600,clickDelay:200,toolTipDelay:800,toolTipContinual:!1,getDragger:function(){return Xl},lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],blockMinSize:1,textExtraWidth:4,encodeStringKey:null,doubleClickSpeed:500,doubleClickRange:1,doubleTouchRange:20,touchMoveThreshold:10,animDuration:200,animEasing:function(y){return y*y},labelColor:WU,labelSelectColor:AU,labelFont:"12px arial, sans-serif",widgetIndent:v5?30:20,widgetRowHeight:v5?30:20,widgetHeaderHeight:v5?32:22,widgetTitleHeight:v5?34:24,scrollBarColor:S,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:v5?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,pinchZoomThreshold:1,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:tx,intersectionLineLine:ux,isEnter:cl,isEsc:Rl,isDelete:Kl,isSpace:Dl,isLeft:hl,isUp:tl,isRight:ul,isDown:Jl,isTouchEvent:xl,getTarget:function(y){return(xl(y)?Ql(y):y).target},isString:w5,isNumber:$x,isBoolean:kx,isArray:Hx,isSelectAll:Zl,isFunction:Ex,isObject:Mx,getPropertyValue:Jx,setPropertyValue:Dx,addMethod:ax,createGradient:function(y,q,_,s,p,O,L,$){return(0,SU[q])(y,_,s,p,O,L,$)},appendToScreen:function(y){y=y.getView?y.getView():y,(w.fullscreenElement||w.mozFullScreenElement||w.webkitFullscreenElement||w.msFullscreenElement||w.body).appendChild(y)},encodeString:function(y){return P.Math.encodeBase64(y,E5.encodeStringKey)},decodeString:function(y){return P.Math.decodeBase64(y,E5.encodeStringKey)},findView:function(y){function q(y,q){for(var _="2d"===q?vu.GraphView:B3.Graph3dView,s=0,p=y.length;s<p;s++)if(y[s]instanceof _)return O[s];return null}var O=[];return function y(q,_){var s=_._ht,p=(s&&q.push(s),_.children),O=p.length;if(O)for(var L=0;L<O;L++)y(q,p[L])}(O,w.body),"all"===y?O:"2d"===y?q(O,"2d"):"3d"===y?q(O,"3d"):q(O,"3d")||q(O,"2d")},toggleFullscreen:function(q){var _,s,p,O,L,$,k,y,M,E,H=q.getView();w.fullscreenElement||w.mozFullScreenElement||w.webkitFullscreenElement||w.msFullscreenElement?w.exitFullscreen?w.exitFullscreen():w.msExitFullscreen?w.msExitFullscreen():w.mozCancelFullScreen?w.mozCancelFullScreen():w.webkitExitFullscreen&&w.webkitExitFullscreen():(_=!0,E=q.isSelfViewEvent?(s=q.getX(),p=q.getY(),$=q.getWidth(),k=q.getHeight(),y=H.style.background,M=H.style.backgroundColor,y||M||(H.style.backgroundColor="white"),H.requestFullscreen?H.requestFullscreen():H.msRequestFullscreen?H.msRequestFullscreen():H.mozRequestFullScreen?H.mozRequestFullScreen():H.webkitRequestFullscreen&&H.webkitRequestFullscreen(),setInterval(function(){var y;H!==(w.fullscreenElement||w.mozFullScreenElement||w.webkitFullscreenElement||w.msFullscreenElement)?(clearInterval(E),q.setX(s),q.setY(p),q.setWidth($),q.setHeight(k),q._fullscreen=!1,H.style.oldBackgroundColor=M,q.iv()):(y=P.Default.getWindowInfo(),!_&&y.width===q.getWidth()&&y.height===q.getHeight()||(q.setX(y.left),q.setY(y.top),q.setWidth(y.width),q.setHeight(y.height),q._fullscreen=!0,q.iv(),_=!1))},500)):(O=H.style.left,L=H.style.top,$=H.style.width,k=H.style.height,y=H.style.background,M=H.style.backgroundColor,y||M||(H.style.backgroundColor="white"),H.requestFullscreen?H.requestFullscreen():H.msRequestFullscreen?H.msRequestFullscreen():H.mozRequestFullScreen?H.mozRequestFullScreen():H.webkitRequestFullscreen&&H.webkitRequestFullscreen(),setInterval(function(){var y;H!==(w.fullscreenElement||w.mozFullScreenElement||w.webkitFullscreenElement||w.msFullscreenElement)?(clearInterval(E),H.style.left=O,H.style.top=L,H.style.width=$,H.style.height=k,H.style.oldBackgroundColor=M,q.iv()):(y=P.Default.getWindowInfo(),!_&&y.width===q.getWidth()&&y.height===q.getHeight()||(h(q),_=!1))},500)))},appendTimeStamp:function(y){return y},setCompType:function(y,q){w5(q)&&q.substr(0,12)==kn&&(q=E5.parse(q)),Ex(q)||Mx(q)?un[y]=q:z8(y)},getCompType:function(y){var q=un[y];return q===k5&&Rn.test(y)&&(z8(y),q=un[y]),q},getCompTypeMap:function(){return un},drawCompType:function(y,q,_,s,p,O){y(q,_,s,p,O)},numberListener:(sg={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1},function(y){var q=y.keyCode;sg[q]||65===q&&E5.isCtrlDown(y)||86===q&&E5.isCtrlDown(y)||67===q&&E5.isCtrlDown(y)||88===q&&E5.isCtrlDown(y)||35<=q&&q<=40||(y.shiftKey||q<48||57<q)&&(q<96||105<q)&&y.preventDefault()}),ignoreKeyCodes:[122,123],preventDefault:function(y){var q=y.target.tagName;"DIV"!==q&&"CANVAS"!==q||0<=E5.ignoreKeyCodes.indexOf(y.keyCode)||!("keydown"!==y.type||hl(y)||ul(y)||tl(y)||Jl(y)||Kl(y)||65===y.keyCode&&(y.metaKey||y.ctrlKey))||!0!==y.cancelable||(y.preventDefault(),y.preventManipulation&&y.preventManipulation())},getWindowInfo:function(){var y=w.documentElement;return{target:y=y&&(y.scrollLeft||y.scrollTop)?y:w.body,left:y.scrollLeft,top:y.scrollTop,width:Y.innerWidth||y.clientWidth,height:Y.innerHeight||y.clientHeight}},isDragging:function(){return!!Xl},isLeftButton:function(y){return!!xl(y)||0===y.button},isMiddleButton:function(y){return!xl(y)&&y&&(1===y.button||4&(y.buttons||0))},isRightButton:function(y){return!xl(y)&&y&&(2===y.button||2&(y.buttons||0))},isInput:function(y){return!!y&&("INPUT"===(y=y.tagName)||"TEXTAREA"===y||"SELECT"===y)},getTouchCount:function(y){return xl(y)?y.touches.length:1},isDoubleClick:(_g={},r5=new X,K=r5.getTime(),function(y){if(1<eA(y))return!1;var q=y.button==M5?"":y.button,_=(q=y.type+q)+"_isDoubleClick",s=(s=_g[q])||(_g[q]={details:0,timeout:null,lastPoint:null});return y[_]===k5&&(y[_]=!0,q=gA(y),s.timeout&&(W5(s.timeout),s.timeout=null),_=xl(y)?E5.doubleTouchRange:E5.doubleClickRange,s.lastPoint&&vA(s.lastPoint,q)>_&&kM(s),s.lastPoint=q,s.details++,s.timeout=m5(function(){kM(this)}.bind(s),E5.doubleClickSpeed)),2===s.details}),isShiftDown:function(y){return y?y.shiftKey:tn[16]},isCtrlDown:function(y){return y?g5?y.metaKey:y.ctrlKey:g5?tn[91]:tn[17]},getClientPoint:function(y){return{x:(y=xl(y)?Ql(y):y).clientX,y:y.clientY}},isMouseEvent:function(y){return y instanceof MouseEvent||0===y.type.indexOf("mouse")},getTargetElement:function(y){var q=nA(y),_=E5.isMouseEvent(y)||!w.elementFromPoint?y.target:w.elementFromPoint(q.x,q.y);if(e5&&w.elementFromPoint){for(var s=[],p=[];"none"===_.style.pointerEvents;)s.push(_),p.push(_.style.display||""),_.style.display="none",_=w.elementFromPoint(q.x,q.y);s.forEach(function(y,q){y.style.display=p[q]})}return _},getPagePoint:function(y){return{x:(y=xl(y)?Ql(y):y).pageX,y:y.pageY}},createObject:function(y,q){var _,s=new y;for(_ in q){var p,O=q[_];Ex(O)?s[_]=O:0===_.indexOf("s:")?s.s(_.substr(2),q[_]):0===_.indexOf("a:")?s.a(_.substr(2),q[_]):(p=Lx(_),O=q[_],s[p]?(s[p](O),"setToolTip"===p&&s.enableToolTip&&s.enableToolTip()):s[_]=O)}return s},setImage:function(y,q,_,s){var p=arguments.length;4===p?bn(y,s,q,_):2===p?w5(q)?q.substr(0,12)==kn?nn(y,E5.parse(q)):bn(y,q):nn(y,q):1===p&&bn(y,y)},getImage:function(y,q,_){var s,p;return y==M5?M5:(Mx(y)?s=y:(s=Cn[y],!y||s!==k5||rn&&rn[y]||(bn(y,y),s=Cn[y])),q&&s&&s.tagName?(s[y="override"===_?"colors_override":"override_rgb"===_?"colors_override_rgb":"override_a"===_?"colors_override_a":"colors"]||(s[y]={__count__:0}),(p=s[y][q])||(s[y].__count__>E5.imageCacheThreshold&&(s[y]={__count__:0}),p=function(y,q,_,s,p){var O=ex(),L=(O.width=_,O.height=s,O.getContext("2d"));L.drawImage(y,0,0,_,s);try{for(var $=L.getImageData(0,0,_,s),k=$.data,M=0,E=k.length;M<E;M+=4){var H=k[M+0],w=k[M+1],Q=k[M+2],x=k[M+3];"override_a"===p?k[M+3]=255*q[3]:"override_rgb"===p?(k[M+0]=255*q[0],k[M+1]=255*q[1],k[M+2]=255*q[2]):"override"===p?(k[M+0]=255*q[0],k[M+1]=255*q[1],k[M+2]=255*q[2],k[M+3]=255*q[3]):(k[M+0]=q[0]*H,k[M+1]=q[1]*w,k[M+2]=q[2]*Q,k[M+3]=q[3]*x)}L.putImageData($,0,0)}catch(q){return y}return O}(s,fl(q),s.width,s.height,_),s[y][q]=p,s[y].__count__++),p):s)},isImageComplete:function(y,q,_){var s=r(y);if(!s)return!1;if(s.tagName)return s.complete;for(var p=s.comps,O=!0,L=0,$=p.length;L<$;L++){var k,M=(k=p[L]).type;if("image"===k.type){if((y=k.name)&&y.func&&(y=g(y,q)),!BA(y,q,_)){O=!1;break}}else if(Rn.test(M)&&E5.getCompType(M)===k5){z8(M),E5.getCompType(M)===k5&&(O=!1);break}}return O},getId:(qg=1,function(){return++qg}),callLater:function(y,q,_,s){function p(){y.apply(q,_)}return s?m5(p,s):Y.requestAnimationFrame(p)},cancelLater:function(y,q){q?W5(y):Y.cancelAnimationFrame(y)},clone:function(y){if(null==y||"object"!=typeof y)return y;if(y instanceof Date)return(q=new Date).setTime(y.getTime()),q;if(y instanceof Array){for(var q=[],_=0,s=y.length;_<s;_++)q[_]=DA(y[_]);return q}if(y instanceof n){for(q=new n,_=0,s=y.length;_<s;_++)q.set(_,DA(y.get(_)));return q}if(y instanceof iu)return y;if(y instanceof Nu)return(q=new Nu).deserialize(y.serialize()),q;if(y instanceof o){var p,q={};for(p in y)y.hasOwnProperty(p)&&(q[p]=DA(y[p]));return q}return y},callWhenLoaded:function(y,q){var _=Zn(y,q=q||100);(jn=jn||{})[_]={tick:_,cb:y,delay:q}},beforeLoadURL:function(y,q){if(jn){var _={};for(q in jn){var s=jn[q],p=(W5(s.tick),Zn(s.cb,s.delay));_[p]={tick:p,delay:s.delay,cb:s.cb}}jn=_}return E5.convertURL?E5.convertURL(y,q):y},convertURL:function(y){return y},handleRefGraphLoaded:function(y,q,_){},handleCompTypeLoaded:function(y,q){},handleImageLoaded:function(y,q){},handleUnfoundImage:function(y,q){return E5.getImage("default_blank")},resizeImage:function(y,q,_,s){_=_||q;var p=(s=s||ex()).getContext("2d");return rx(s,q,_,1),p.drawImage(y,0,0,q,_),s},resizeImagePOT:function(y,q,_){if(!y||!y.tagName)return y;var s,p=y.width,O=y.height;return p&&O&&(!e.isPOT(p)||!e.isPOT(O)||q&&p!==O)?(q=q?s=e.nearestPOT(Math.min(p,O)):(s=e.nearestPOT(p),e.nearestPOT(O)),E5.resizeImage(y,s,q,_)):y},sortFunc:function(y,q){if(y===q)return 0;if(y==M5&&q!=M5)return 1;if(y!=M5&&q==M5)return-1;if(y==M5&&q==M5)return 0;var _,s=typeof y,p=typeof q;return s==eL&&p==eL?_=y.localeCompare(q):s==gL&&p==gL&&(_=y-q),0<(_=_===k5?(""+y).localeCompare(""+q):_)?1:_<0?-1:0},getClassMap:function(){return Kn},getClass:function(y){if(w5(y)){if(!(_=Kn[y])){for(var q=y.split("."),_=Y,s=0;s<q.length;s++)_=_[q[s]];Kn[y]=_}return _}return y},def:function(y,q,_){function s(){}var p,O,L;if(s.prototype=q.prototype,p=new s,w5(y)){if(Kn[y])throw"'"+y+"' already defined";L=cA(y),p.getClassName=function(){return y}}else L=y;if(p.constructor=L,p.getClass=function(){return L},p.getSuperClass=function(){return q},_)for(O in _)dB[O]&&dB.hasOwnProperty(O)?dB[O](p,_):KU(p,_,O);L.prototype=p,L.superClass=q.prototype},startAnim:function(q){return(q=DA(q)).easing=q.easing||E5.animEasing,q.duration||q.frames||(q.duration=E5.animDuration),q.t=0,q.duration?q.interval=0:(q.frame=0,q.interval=q.interval||10),q.tick=function(){var y;q.duration?(y=(Un()-q.startTime)/q.duration,q.t=y=1<y?1:y,q.action(q.easing(y),y),q.isRunning()&&(1===y?q.stop():q._isPaused||(q.timeId=tA(q.tick)))):(q.frame++,y=q.t=q.frame/q.frames,q.action(q.easing(y),y),q.isRunning()&&(q.frame<q.frames?q._isPaused||(q.timeId=tA(q.tick,M5,M5,q.interval)):q.stop()))},q.resume=function(){q._isPaused&&(delete q._isPaused,q.duration?q.t<1&&(q.startTime=Un()-q.duration*q.t,q.timeId=tA(q.tick)):q.frame<q.frames&&(q.timeId=tA(q.tick,M5,M5,q.interval)))},q.pause=function(){uA(q.timeId,!q.duration),q._isPaused=!0},q.isPaused=function(){return this._isPaused},q.stop=function(y){q.isRunning()&&(uA(q.timeId,!q.duration),delete q.timeId,q.duration?q.t<1&&y&&(q.t=1,q.action(q.easing(1),1)):q.frame<q.frames&&y&&(q.frame=q.frames,q.action(q.easing(1),1)),q._37o&&q._37o(),q.finishFunc&&q.finishFunc())},q.isRunning=function(){return q.timeId!=M5},q.delay?tA($M,M5,[q],q.delay):$M(q),q},getTextSize:(d0={},yg=w?ex().getContext("2d"):M5,function(y,q){return yg.font=y||wA,(y=d0[yg.font])||(y=2*yg.measureText("e").width+4,d0[yg.font]=y),{width:yg.measureText(q).width+E5.textExtraWidth,height:y}}),drawText:function(y,q,_,s,p,O,L,$,k,M,E){var H,w;q!=M5&&(H=mA(_,q),(w={}).y=M&&M!==$D?M===sD?O+H.height/2:O+$-H.height/2:O+$/2,w.x=k&&k!==qD?k===_D?p+L-H.width/2:p+L/2:p+H.width/2,dx(y,q,w,_,s),E&&bx(y,q,_,s,w.x,w.y,H.width,E))},getDistance:function(y,q){var _=y.length;return q?3===_?B5(P5(y[0]-q[0])+P5(y[1]-q[1])+P5(y[2]-q[2])):2===_?B5(P5(y[0]-q[0])+P5(y[1]-q[1])):y.z===k5?B5(P5(q.x-y.x)+P5(q.y-y.y)):B5(P5(q.x-y.x)+P5(q.y-y.y)+P5(q.z-y.z)):3===_?B5(P5(y[0])+P5(y[1])+P5(y[2])):2===_?B5(P5(y[0])+P5(y[1])):void 0},brighter:function(y,q){return Ul(y,(q=q<0?-q:q)||40)},darker:function(y,q){return Ul(y,(q=0<q?-q:q)||-40)},traverse:(U0={},function(y,q,_,s){var p,k;(p=(p=U0[s=s||""])?p:U0[s]=(k=s,function y(q,_,s,p){var O;if(s&&s(q,_),O=(O=""===k?q.getChildren():q[k])instanceof P.List?O.getArray():O)for(var L=0,$=O.length;L<$;L++)y(O[L],q,s,p);p&&p(q,_)}))(y,null,q,_)}),unionPoint:function(y,q){if(!y)return M5;if(2===arguments.length)return y&&q?{x:s5(y.x,q.x),y:s5(y.y,q.y),width:F5(y.x-q.x),height:F5(y.y-q.y)}:M5;var _=y;if((_=_._as||_).length===k5)return M5;var s=_.length;if(s<=0)return M5;for(var p=1,O={x:(L=_[0]).x,y:L.y,width:0,height:0};p<s;p++){var L=_[p],$=s5(O.x,L.x),k=_5(O.x+O.width,L.x),M=s5(O.y,L.y),E=_5(O.y+O.height,L.y);O.x=$,O.y=M,O.width=k-$,O.height=E-M}return O},unionRect:function(y,q){return y&&!q?DA(y):!y&&q?DA(q):y&&q?((_={x:s5(y.x,q.x),y:s5(y.y,q.y)}).width=_5(y.x+y.width,q.x+q.width)-_.x,_.height=_5(y.y+y.height,q.y+q.height)-_.y,_):M5;var _},containsPoint:function(y,q,_,s){var p,O,L,$;return s!=M5&&1!==s&&(p=y.x+y.width/2,O=y.y+y.height/2,y={x:p-y.width/2*s,y:O-y.height/2*s,width:y.width*s,height:y.height*s}),_?(p=y.width/2,O=y.height/2,s=p5(-_),_=H5(-_),L=q.x-y.x-p,$=q.y-y.y-O,UA({x:-p,y:-O,width:y.width,height:y.height},q={x:_*L-s*$,y:s*L+_*$})):!(!y||q.x<y.x||q.y<y.y||q.x>y.x+y.width||q.y>y.y+y.height)},containsRect:function(y,q){if(!y||!q)return!1;var _=q.x,s=q.y,p=q.width,q=q.height,O=y.width,L=y.height;if((O|L|p|q)<0)return!1;var $=y.x,y=y.y;if(_<$||s<y)return!1;if(O+=$,(p+=_)<=_){if($<=O||O<p)return!1}else if($<=O&&O<p)return!1;if(L+=y,(q+=s)<=s){if(y<=L||L<q)return!1}else if(y<=L&&L<q)return!1;return!0},intersectsRect:function(y,q){if(!y||!q)return!1;var _=q.width,s=q.height,p=y.width,O=y.height;if(p<=0||O<=0||_<=0||s<=0)return!1;var L=q.x,q=q.y,$=y.x;return O+=y=y.y,_+=L,s+=q,L<(p+=$)&&q<O&&$<_&&y<s},intersection:function(y,q){if(!y||!q)return M5;var _=q.x,s=q.y,p=y.x,O=y.y,L=_,$=s,k=p,M=O;return L+=q.width,$+=q.height,(k+=y.width)<L&&(L=k),(M+=y.height)<$&&($=M),$-=s=s<O?O:s,(L-=_=_<p?p:_)<=0||$<=0?M5:{x:_,y:s,width:L,height:$}},grow:function(y,q,_){_===k5&&(_=q),y.x-=q,y.y-=_,y.width=y.width+2*q,y.height=y.height+2*_},getScreenPoint:function(y,q,_,s,p,O,L){var $=_.getBoundingClientRect(),y=y*(O||1)-_.scrollLeft+(s||0),O=q*(L||1)-_.scrollTop+(p||0);return(s=ZU(_,!1))?((q=new Q5(y,O,0)).applyMatrix4(s),{x:q.x,y:q.y}):{x:y+$.left,y:O+$.top}},getLogicalPoint:function(y,q,_,s,p,O){var L,$=q.getBoundingClientRect(),k=y.target?(rA(y)?g5?tn[91]=!0:tn[17]=!0:g5?tn[91]=!1:tn[17]=!1,GA(y)?tn[16]=!0:tn[16]=!1,L=(y=xl(y)?Ql(y):y).clientX,y.clientY):(L=y.x,y.y),M=ZU(q,!0);if(M){var E=new Q5(L,k,0);E.applyMatrix4(M);do{if(Math.abs(E.z)<=1e-6)break;var H=new Q5(L,k,1);if(H.applyMatrix4(M),Math.abs(H.z)<=1e-6){E=H;break}}while(H.sub(E),!(Math.abs(H.z)<=1e-6)&&(E.addScaledVector(H,-E.z/H.z),0));return{x:(E.x+q.scrollLeft-(_||0))/(p||1),y:(E.y+q.scrollTop-(s||0))/(O||1)}}return{x:(L-$.left+q.scrollLeft-(_||0))/(p||1),y:(k-$.top+q.scrollTop-(s||0))/(O||1)}},removeHTML:function(y){return!(!(y=y&&y.getView?y.getView():y)||!y.parentNode||(I0!==y&&((I0=y).parentNode.removeChild(y),I0=M5),0))},getToolTipDiv:function(){var y;return Qn||(Qn=zx(),xn=zx(),y=Qn.style,E5.baseZIndex!=M5&&(y.zIndex=R5(E5.baseZIndex)+3+""),y.whiteSpace="nowrap",y.color=E5.toolTipLabelColor,y.background=E5.toolTipBackground,y.font=E5.toolTipLabelFont,y.padding="5px",y.boxShadow="0px 0px 3px "+E5.toolTipShadowColor),Qn},isToolTipShowing:function(){return!(!Qn||!Qn.parentNode)||!(!xn||!xn.parentNode)},updateToolTipContent:function(y,q){E5.isToolTipShowing()&&(q=q||Xn&&Xn.view,(y=y===k5&&q&&Xn.e?q.getToolTip(Xn.e):y)!=M5&&((y.html?(y=y.html,xn):Qn).innerHTML=y))},hideToolTip:function(){var y;Nn(),E5.isToolTipShowing()&&($8(Qn),$8(xn),(y=Xn&&Xn.view)&&y.onHideToolTip&&y.onHideToolTip(),Xn=M5)},showToolTip:function(y,q,_){var s,p,O,L,$,k;y&&q!=M5?(E5.getToolTipDiv(),q.html?(q=q.html,s=xn,$8(Qn)):(s=Qn,$8(xn)),p=s.style,s.innerHTML="",q instanceof HTMLElement?s.appendChild(q):s.innerHTML=q,s.parentNode||P.Default.appendToScreen(s),y.target?(y=nA(y),q=_8(),O=y.x,L=y.y,$=v5?60:12,v5?(k=s.getBoundingClientRect(),p.left=O-k.width/2+wD,L-k.height-$<q.top?p.top=L+$+wD:p.top=L-k.height-$+wD):(p.left=O+$+wD,p.top=L+$+wD,(k=s.getBoundingClientRect()).left+k.width>q.width&&(p.left=O-$-k.width+wD),k.top+k.height>q.height&&(p.top=L-$-k.height+wD),k.left<0&&(p.left=O+$+wD),k.top<0&&(p.top=L+$+wD))):(p.left=y.x+wD,p.top=y.y+wD),Nn(),_===k5?_=Xn&&Xn.view:Xn={e:y,view:_},_&&_.onShowToolTip&&_.onShowToolTip()):$A()},startDragging:function(y,q,_){_==k5&&(_=!0),y!==Xl&&(Xl?_&&(xl(q)?Xl.handleWindowTouchEnd(q):Xl.handleWindowMouseUp(q)):xl(q)?(y5(Y,sn,Tl),y5(Y,pn,il),y5(Y,"blur",il)):(y5(Y,dL,Nl),y5(Y,yn,al),y5(Y,"blur",al)),Xl=y)},getImageMap:function(){return Cn},toBoundaries:function(y,q,_,s){var p=[];return bl(y,q,_,s).forEach(function(y){var q=[];y.forEach(function(y){q.push(y.x,y.y)}),p.push(q)}),p},getCurrentKeyCodeMap:function(){return tn},drawCenterImage:function(y,q,_,s,p,O,L,$){!p&&O&&O.isSelfViewEvent&&(p=O);var k=d8(q,p,O),M=yu(q,p,O);qu(y,q,Z5(_-k/2),Z5(s-M/2),k,M,p,O,L,$)},drawStretchImage:function(y,q,_,s,p,O,L,$,k,M,E,H){!$&&k&&k.isSelfViewEvent&&($=k);var w,Q,x,S=d8(q,$,k,O),X=yu(q,$,k,L),T=("uniform"===_?(X*=T=s5(O/S,L/X),s+=Z5((O-(S*=T))/2),p+=Z5((L-X)/2),O=S,L=X):"centerUniform"===_?((O<S||L<X)&&(S*=T=s5(O/S,L/X),X*=T),s+=Z5((O-S)/2),p+=Z5((L-X)/2),O=S,L=X):"cover"===_&&(X*=T=S/O<X/L?O/S:L/X,s+=Z5((O-(S*=T))/2),p+=Z5((L-X)/2),O=S,L=X),y.interactiveInfo);T&&(Q="center"===_?{x:s+O/2-S/2,y:p+L/2-X/2,width:S,height:X}:{x:s,y:p,width:O,height:L},T.rect?(w=(x=T.compInfos).length)&&(x[w-1].rect.image=q):T.rect=Q),"center"===_?((x=!1!==E&&(O<S||L<X))&&(y.save(),y.beginPath(),y.rect(s,p,O,L),y.clip()),qu(y,q,s+O/2-S/2,p+L/2-X/2,S,X,$,k,M,H),x&&y.restore()):qu(y,q,s,p,O,L,$,k,M,H)},toCanvas:function(y,q,_,s,p,O,L,$,k){y=r(y,L),q=q||d8(y,p),_=_||yu(y,p);var M=ex(),E=pl(M);return $?(rx(M,q,_,$),E.scale($,$)):rx(M,q,_,1),VA(E,y,s,0,0,q,_,p,O,L,k),y&&y.clampToEdge&&(M.clampToEdge=y.clampToEdge),E.restore(),M},toGrayColor:function(y){if(!y)return y;var y=el(y),q=Z5(.299*y[0]+.587*y[1]+.114*y[2]);return"rgba("+q+","+q+","+q+","+y[3]/255+")"},createGradientImage:function(y,q,_,s){for(var p=["L",0,0,y,0,1,0,0,1,0,0],O=0,L=Math.min(q.length,_.length);O<L;O++)p.push(_[O],q[O]);return P.Default.toCanvas({width:y,height:y,clampToEdge:!0,comps:[{type:"shape",rotation:s||0,points:[0,0,y,0,y,y,0,y],background:"#ffffff",gradientPack:p}]})},createElement:function(y,q,_,s){return y=w.createElement(y),fx(y,q||C.widgetBorder,2),y.style.font=_||wA,s!=M5&&(y.value=s),E5.onElementCreated&&E5.onElementCreated(y),y},containedInView:function(y,q){return q=wl(q).getBoundingClientRect(),UA({x:q.left,y:q.top,width:q.width,height:q.height},gA(y))},isIsolating:function(){return 0<ln},setIsolating:function(y){y?ln++:ln--},getMSMap:function(){return dB},stringify:function(y,q,_){var s=Date.prototype.toJSON,p=(Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()},Nu.prototype.toJSON),y=(Nu.prototype.toJSON=function(){return"__ht__dataModel"+this.serialize(0)},q=_?0:q==M5?2:q,JSON.stringify(y,function(y,q){return"function"==typeof q?"__ht__"+(q.__ht__||q.toString()):$x(q)?q==M5||E5.numberDigits==M5?q:parseFloat(q.toFixed(E5.numberDigits)):U4(q)?null:q instanceof P.List?"__ht__list"+(q.__ht__list||E5.stringify(q._as)):q},q));return Date.prototype.toJSON=s,Nu.prototype.toJSON=p,_?kn+function(y){for(var q=8+e.randomInt(8),_=cB[8*e.randomInt(8)+(q-8)],s="",p=0;p<q;p++)s+=cB[e.randomInt(64)];var O=OU(s+L5+"__"+VL);return _+s+RB(y,O)}(y):y},parse:function(y,$){return w5(y)&&(y.substr(0,12)!=kn||(y=function(y){var q=y[0];if((q=cB.indexOf(q))<0)return"";var _=y.slice(1,1+(q=8+(7&q))),_=OU(_+L5+"__"+VL);return oB(y,_,1+q)}(y.substr(12)),w5(y)))?($=$||{},JSON.parse(y,function(y,q){if(w5(q))if($.ignoreFunction||"__ht__function"!=q.substr(0,14)){if(!$.ignoreDate&&"__ht__date"==q.substr(0,10))return new Date(R5(q.substr(10)));if("__ht__list"===q.substr(0,10))return new n(E5.parse(q.substr(10)));if(!$.ignoreDataModel&&"__ht__dataModel"===q.substr(0,15))return(_=new Nu).deserialize(E5.parse(q.substr(15))),_}else{var _=q.indexOf("{")+1,s=q.lastIndexOf("}"),p=q.indexOf("(")+1,O=q.indexOf(")");if(_&&s&&p&&O)try{var L=new Function(q.substring(p,O),q.substring(_,s));return L.__ht__=q.substr(6),L}catch(y){throw console.info("=== SyntaxError ===\n",q),y}}return q})):y},loadJS:function(y,q){q&&y.push(q);var _,q=y.shift();Hx(q)?(y=q.contact(y),E5.loadJS(y)):Ex(q)?(q(),E5.loadJS(y)):w5(q)?((_=w.createElement("script")).onload=function(){E5.loadJS(y)},_.setAttribute("src",q),w.getElementsByTagName("head")[0].appendChild(_)):y.length&&E5.loadJS(y)},extendClass:function(y,q){var _,s=y.prototype;for(_ in q)dB[_]&&dB.hasOwnProperty(_)?dB[_](s,q):s[_]=q[_]},toRoundedCorner:(g0=new Q5,n0=new Q5,v0=new Q5,b0=new Q5,function(y,q){var _,s=0,p=(y.getPoints&&(s=y.getElevation(),y=y.getPoints()),(_=y instanceof n?y:new n(y)).size());if(q<=0)return{points:_};var O=new n,L=new n,$=_.get(0);LM(g0,$,s),O.add($),L.add(1);for(var k,M,E=1;E<p;E++)E+1<p?(k=_.get(E),M=_.get(E+1),LM(n0,k,s),LM(v0,M,s),b0.subVectors(g0,n0).setLength(Math.min(.99*b0.length(),q)).add(n0),k.e!==k5||$.e!==k5?O.add({x:b0.x,y:b0.z,e:b0.y}):O.add({x:b0.x,y:b0.z}),O.add(k),b0.subVectors(v0,n0).setLength(Math.min(.99*b0.length(),q)).add(n0),k.e!==k5||M.e!==k5?O.add($={x:b0.x,y:b0.z,e:b0.y}):O.add($={x:b0.x,y:b0.z}),g0.copy(b0),L.addAll([2,3])):(O.add(_.get(E)),L.add(2));return{points:O,segments:L}}),toColorData:el,setCanvas:rx,createDiv:zx,createDisabledDiv:sl,createView:Ax,createCanvas:ex,appendChild:gx,initContext:pl,checkLoadingImage:vn,translateAndScale:Ol,layout:h,getPosition:BU,drawPoints:vl,drawRoundRect:$U,drawBorder:kU,setFocus:Hl,getter:Ox,setter:Lx,isEmptyObject:Cx,cameraPriority:(r0={skybox:0,main:1e4,top:1e7,infinity:1/0},o.seal(o.defineProperties({},{skybox:{configurable:!1,enumerable:!1,get:function(){return r0.skybox},set:function(y){if(y>=r0.main)throw new RangeError("Skybox camera must have lower priority than the main camera.");r0.skybox=Number(y)}},main:{configurable:!1,enumerable:!1,get:function(){return r0.main},set:function(y){if(y<=r0.skybox)throw new RangeError("Main camera must have higher priority than the skybox camera.");if(y>=r0.top)throw new RangeError("Main camera must have lower priority than the top camera.");r0.main=Number(y)}},top:{configurable:!1,enumerable:!1,get:function(){return r0.top},set:function(y){if(y<=r0.main)throw new RangeError("Top camera must have higher priority than the main camera.");r0.top=Number(y)}}}))),addFontFace:(f0={ttf:"truetype",otf:"opentype",eot:"embedded-opentype"},G0={eot:0,woff2:1,woff:2,ttf:3,otf:4},function(y,q,_,s){if(y){var p;if(s&&E5.removeFontFace(y,!0),s=Bn[y])return s.parentNode||w.head.appendChild(s),void(_&&_(s));0!==(q=(q=w5(q)?[q]:q).filter(function(y){return!!w5(y)&&0<y.length})).length&&(q=q.map(pM),p="",q.sort(OM).forEach(function(y){p+=", "+y.url}),p=p.substr(2),(s=w.createElement("style")).innerText='@font-face{font-family: "'+y+'";src: '+p+";}",w.head.appendChild(s),Bn[y]=s,_&&_(s))}}),clearFontFace:function(){if(!Cx(Bn)){for(var y in Bn)E5.removeFontFace(y);Bn={}}},removeFontFace:function(y,q){if(y){var _=y;if(_.tagName){if($8(_),q){var s,p=[];for(s in Bn)Bn[s]===_&&p.push(s);if(0<p.length)for(var O=0,L=p.length;O<L;O++)delete Bn[p[O]]}}else(_=Bn[y])&&($8(_),q&&delete Bn[y])}},getFontFaceMap:function(){return Bn},handleFontFacesLoaded:function(y){}},!0),w&&w.fonts&&w.fonts.addEventListener&&w.fonts.addEventListener("loadingdone",function(y){E5.handleFontFacesLoaded(y.fontfaces),E5.findView("all").forEach(function(y){y.redraw?y.redraw():y.iv()})}),ax(l,{autoAdjustIndex:1,hierarchicalRendering:1,adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1,doubleClickToToggle:1,continuousLayout:1,syncSize:1},!0),E5.disabledOpacity),_A=E5.toolTipDelay,sA=E5.devicePixelRatio,fU=E5.autoMakeVisible,pA=E5.autoHideScrollBar,OA=E5.imageGradient,LA=E5.showToolTip,$A=E5.hideToolTip,kA=E5.dashPattern,MA=E5.lineCap,EA=E5.lineJoin,HA=E5.labelColor,o5=E5.labelSelectColor,wA=E5.labelFont,QA=E5.widgetIndent,WU=E5.widgetRowHeight,xA=E5.widgetHeaderHeight,SA=E5.widgetTitleHeight,AU=E5.scrollBarColor,X=E5.scrollBarSize,XA=E5.scrollBarTimeout,TA=E5.scrollBarMinLength,iA=E5.scrollBarInteractiveSize,NA=E5.zoomIncrement,aA=E5.scrollZoomIncrement,lA=E5.pinchZoomIncrement,jA=E5.zoomMax,ZA=E5.zoomMin,KA=E5.createObject,CA=E5.preventDefault,r5=E5.setImage,r=E5.getImage,BA=E5.isImageComplete,FA=E5.drawCenterImage,VA=E5.drawStretchImage,hA=E5.getId,tA=E5.callLater,uA=E5.cancelLater,JA=E5.sortFunc,DA=E5.clone,cA=E5.getClass,RA=E5.startAnim,oA=E5.brighter,YA=E5.darker,PA=E5.drawText,mA=E5.getTextSize,WA=E5.isLeftButton,AA=E5.isMiddleButton,zA=E5.isRightButton,eA=E5.getTouchCount,fA=E5.isDoubleClick,GA=E5.isShiftDown,rA=E5.isCtrlDown,gA=E5.getClientPoint,nA=E5.getPagePoint,vA=E5.getDistance,bA=E5.unionPoint,IA=E5.unionRect,UA=E5.containsPoint,dA=E5.containsRect,y8=E5.intersectsRect,q8=E5.intersection,_8=E5.getWindowInfo,s8=E5.grow,p8=E5.getLogicalPoint,O8=E5.getScreenPoint,L8=E5.startDragging,$8=E5.removeHTML,k8=E5.createElement,M8=E5.segmentResolution,E8=E5.shapeResolution,H8=E5.shapeSide,w8=E5.def,zU=function(y,q,_){w8("ht."+y,q,_)},Q8=function(y,q){y.childNodes.forEach(function(y){q(y),Q8(y,q)})},x8=(ax(E5,{toolTipLabelColor:HA,toolTipLabelFont:wA,toolTipBackground:C.toolTipBackground,toolTipShadowColor:S,debugTipLabelFont:wA,debugTipLabelColor:HA,debugTipBackground:C.toolTipBackground,drawBreakableText:Ux,setDevicePixelRatio:function(y){sA=E5.devicePixelRatio="number"==typeof y?y:yA(Y),Q8(w.body,function(y){(y=y._ht)&&y._canvas&&(rx(y._canvas,y.getWidth(),y.getHeight()),y.redraw?y.redraw():y.iv())})},getPosition3dGap:function(){return HK()}},!0),1e-6),S8="undefined"!=typeof Uint16Array?Uint16Array:Array,X8="undefined"!=typeof Uint32Array?Uint32Array:S8,T8="undefined"!=typeof Float32Array?Float32Array:Array,i8=function(y,q,_){return y=[y[0]-q[0],y[1]-q[1],y[2]-q[2]],_&&0<(q=vA(y))&&(y[0]/=q,y[1]/=q,y[2]/=q),y},N8=function(){var y,q="charCodeAt",_=2*(2*QD.length+1);for(y in Y)if(y===L5+qD[0]+(wD.length+2)){var s=Y[y];if(!s)break;for(var p=s.length,O=0;O<p;O++)if(s[O][q](0)===_&&s[O+1]!=M5&&s[O+1]===wD[0]&&s[O+2]!=M5&&s[O+2][q](0)===_){for(var L=O+3;L<p;L++)if(s[L][q](0)===_){if(0==s[L+1])for(var $,k=L+2;k<p;k++){if(s[k][q](0)===_){0==s[k-1]&&$&&(z5=$.substr(0,$.length-1));break}$==M5?$=s[k]:$+=s[k]}break}break}break}return function(y){return[-y[0],-y[1],-y[2]]}}(),a8=function(y,q){return 3===y.length?y[0]*q[0]+y[1]*q[1]+y[2]*q[2]:y[0]*q[0]+y[1]*q[1]},l8=function(){var y=new Array(16);return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y},j8=l8(),Z8=function(y){var q=new Array(16);return q[0]=y[0],q[1]=y[1],q[2]=y[2],q[3]=y[3],q[4]=y[4],q[5]=y[5],q[6]=y[6],q[7]=y[7],q[8]=y[8],q[9]=y[9],q[10]=y[10],q[11]=y[11],q[12]=y[12],q[13]=y[13],q[14]=y[14],q[15]=y[15],q},K8=function(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y},C8=function(y,q){var _=y[0],s=y[1],p=y[2];return y[0]=q[0]*_+q[4]*s+q[8]*p+q[12],y[1]=q[1]*_+q[5]*s+q[9]*p+q[13],y[2]=q[2]*_+q[6]*s+q[10]*p+q[14],y},B8=function(y,q){var _=y[0],s=y[1],p=y[2],O=y[3];return y[0]=q[0]*_+q[4]*s+q[8]*p+q[12]*O,y[1]=q[1]*_+q[5]*s+q[9]*p+q[13]*O,y[2]=q[2]*_+q[6]*s+q[10]*p+q[14]*O,y[3]=q[3]*_+q[7]*s+q[11]*p+q[15]*O,y},F8=function(y,q,_){var s,p;if("number"==typeof y?p=y:y&&(p=y.length,s=!0),p)for(var O,L=0,$=0;L<p;L++)O=q?s5(p-1,1==$?L+1:2==$?L-1:L):L,_(s?y[O]:O),2<++$&&($=0)},V8=($g=jx(y[1]+y[7]),kg=jx(y[0]+y[3]-y[10]),Mg=jx(y[8]+2),Eg=function(){return Og=Lg.charAt(pg),pg+=1,Og},Hg=function(){var y="";if(Og===Mg)for(;Eg();){if(Og===Mg)return Eg(),y;y+=Og}else Eg()},wg=function(){for(;Og&&Og<=" ";)Eg()},Qg=function(){if(wg(),Og!==$g)return Hg();var y,q={};if(Og===$g){if(Eg(),wg(),Og===kg)return Eg(),q;for(;Og;){if(y=Hg(),wg(),Eg(),q[y]=Qg(),wg(),Og===kg)return Eg(),q;Eg(),wg()}}},function(y){if(Z={},y&&(Lg=y,pg=0,Og=" ",y=Qg(),wg(),!Og))return y}),h8=function(y,q){var _,s,p,O,L,$,k,M,E;q&&(_=p5(q),q=H5(q),s=y[4],p=y[5],O=y[6],L=y[7],$=y[8],k=y[9],M=y[10],E=y[11],y[4]=s*q+$*_,y[5]=p*q+k*_,y[6]=O*q+M*_,y[7]=L*q+E*_,y[8]=$*q-s*_,y[9]=k*q-p*_,y[10]=M*q-O*_,y[11]=E*q-L*_)},t8=function(y,q){var _,s,p,O,L,$,k,M,E;q&&(_=p5(q),q=H5(q),s=y[0],p=y[1],O=y[2],L=y[3],$=y[8],k=y[9],M=y[10],E=y[11],y[0]=s*q-$*_,y[1]=p*q-k*_,y[2]=O*q-M*_,y[3]=L*q-E*_,y[8]=s*_+$*q,y[9]=p*_+k*q,y[10]=O*_+M*q,y[11]=L*_+E*q)},u8=function(y,q){var _,s,p,O,L,$,k,M,E;q&&(_=p5(q),q=H5(q),s=y[0],p=y[1],O=y[2],L=y[3],$=y[4],k=y[5],M=y[6],E=y[7],y[0]=s*q+$*_,y[1]=p*q+k*_,y[2]=O*q+M*_,y[3]=L*q+E*_,y[4]=$*q-s*_,y[5]=k*q-p*_,y[6]=M*q-O*_,y[7]=E*q-L*_)},J8=function(y,q,_){return D8(M5,!1===_?M5:y.getFinalScale3d(),y.getFinalRotation3d(),y.getRotationMode(),y.p3(),M5,q)},D8=function(y,q,_,s,p,O,L){return O=O||l8(),p&&XK(O,p),GQ(O,_,s),L&&iK(O,O,L),q&&TK(O,q),y&&iK(O,O,y),O},c8=function(y,q,_){q=R5(q),_=R5(_),this.g=y,this._84O=q,this._85O=_,this._70I=!0,this.F=0,this._83O=q+_,this.pen={x:0,y:0}},R8="lineDashOffset",o8="setLineDash",Y8=function(y,q,_){return Bx(q)?y:y[o8]?(y[o8](q),_&&(y.lineDashOffset=_),y):new c8(y,q[0],1<q.length?q[1]:q[0])},P8=function(y,q){!Bx(q)&&y[o8]&&(y[o8](Pn),y.lineDashOffset=0)},m8=(w8(c8,o,{_69I:6,moveTo:function(y,q){var _=this.pen;_.x=y,_.y=q,this.g.moveTo(y,q),this.start||(this.start={x:y,y:q})},lineTo:function(y,q){var _=this,s=_.pen,p=y-s.x,O=q-s.y,O=D5(O,p),p=H5(O),O=p5(O),L=_._23O(s.x,s.y,y,q),$=_._85O,k=_._84O,M=_._83O;if(_.F){if(_.F>L)return _._70I?_._72I(y,q):_.moveTo(y,q),void(_.F-=L);if(_._70I?_._72I(s.x+p*_.F,s.y+O*_.F):_.moveTo(s.x+p*_.F,s.y+O*_.F),L-=_.F,_.F=0,_._70I=!_._70I,!L)return}var E=K5(L/M);if(E){for(var H=p*k,w=O*k,Q=p*$,x=O*$,S=0;S<E;S++)_._70I?(_._72I(s.x+H,s.y+w),_.moveTo(s.x+Q,s.y+x)):(_.moveTo(s.x+Q,s.y+x),_._72I(s.x+H,s.y+w));L-=M*E}_._70I?k<L?(_._72I(s.x+p*k,s.y+O*k),_.moveTo(y,q),_.F=$-(L-k),_._70I=!1):(_._72I(y,q),L===k?(_.F=0,_._70I=!_._70I):(_.F=k-L,_.moveTo(y,q))):$<L?(_.moveTo(s.x+p*$,s.y+O*$),_._72I(y,q),_.F=k-(L-$),_._70I=!0):(_.moveTo(y,q),L===$?(_.F=0,_._70I=!_._70I):_.F=$-L)},quadraticCurveTo:function(y,q,_,s){var p,O=this,L=(k=O.pen).x,$=k.y,k=O._22O(L,$,y,q,_,s),M=0,E=0,H=O._85O,w=O._84O;if(O.F){if(O.F>k)return O._70I?O._71I(y,q,_,s):O.moveTo(_,s),void(O.F-=k);if(M=O.F/k,p=O._20O(L,$,y,q,_,s,M),O._70I?O._71I(p[2],p[3],p[4],p[5]):O.moveTo(p[4],p[5]),O.F=0,O._70I=!O._70I,!k)return}var Q,x=K5((k-k*M)/O._83O),S=w/k,X=H/k;if(x)for(var T=0;T<x;T++)O._70I?(p=O._21O(L,$,y,q,_,s,M,E=M+S),O._71I(p[2],p[3],p[4],p[5]),M=E,p=O._21O(L,$,y,q,_,s,M,E=M+X),O.moveTo(p[4],p[5])):(p=O._21O(L,$,y,q,_,s,M,E=M+X),O.moveTo(p[4],p[5]),M=E,p=O._21O(L,$,y,q,_,s,M,E=M+S),O._71I(p[2],p[3],p[4],p[5])),M=E;Q=k-k*M,O._70I?w<Q?(p=O._21O(L,$,y,q,_,s,M,E=M+S),O._71I(p[2],p[3],p[4],p[5]),O.moveTo(_,s),O.F=H-(Q-w),O._70I=!1):(p=O._19O(L,$,y,q,_,s,M),O._71I(p[2],p[3],p[4],p[5]),k===w?(O.F=0,O._70I=!O._70I):(O.F=w-Q,O.moveTo(_,s))):H<Q?(p=O._21O(L,$,y,q,_,s,M,E=M+X),O.moveTo(p[4],p[5]),p=O._19O(L,$,y,q,_,s,E),O._71I(p[2],p[3],p[4],p[5]),O.F=w-(Q-H),O._70I=!0):(O.moveTo(_,s),Q===H?(O.F=0,O._70I=!O._70I):O.F=H-Q)},bezierCurveTo:function(){var y=arguments;this.pen={x:y[4],y:y[5]},this.g.bezierCurveTo(y[0],y[1],y[2],y[3],y[4],y[5])},arc:function(y,q,_,s,p,O){O||(s=-s,p=-p);var L,$,k,M,E,H=y,w=q,O=s,Q=_,x=_,q=!1,S=-((y=F5(y=p-s)>2*u?2*u:y)/(L=C5(F5(y)/(u/4)))),X=-O;if(0<L){y=H+H5(O)*Q,O=w+p5(-O)*x,q?this.lineTo(y,O):this.moveTo(y,O);for(var T=0;T<L;T++)E=(X+=S)-S/2,$=H+H5(X)*Q,k=w+p5(X)*x,M=H+H5(E)*(Q/H5(S/2)),E=w+p5(E)*(x/H5(S/2)),this.quadraticCurveTo(M,E,$,k)}},rect:function(y,q,_,s){this.pen={x:y,y:q},this.moveTo(y,q),this.lineTo(y,q+s),this.lineTo(y+_,q+s),this.lineTo(y+_,q),this.lineTo(y,q)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(y,q,_,s){return B5((_-=y)*_+(y=s-q)*y)},_22O:function(y,q,_,s,p,O,L){for(var $,k,M,E,H=0,w=y,Q=q,x=0<L?L:this._69I,S=1;S<=x;S++)H+=this._23O(w,Q,$=(k=(M=1-(E=S/x))*M)*y+(M*=2*E)*_+(E*=E)*p,k=k*q+M*s+E*O),w=$,Q=k;return H},_21O:function(y,q,_,s,p,O,L,$){return 0===L?this._20O(y,q,_,s,p,O,$):1===$?this._19O(y,q,_,s,p,O,L):((y=this._20O(y,q,_,s,p,O,$)).push(L/$),this._19O.apply(this,y))},_20O:function(y,q,_,s,p,O,L){var $,k;return 1!==L&&($=_+(p-_)*L,k=s+(O-s)*L,p=(_=y+(_-y)*L)+($-_)*L,O=(s=q+(s-q)*L)+(k-s)*L),[y,q,_,s,p,O]},_19O:function(y,q,_,s,p,O,L){var $;return 1!==L&&(y=($=y+(_-y)*L)+((_+=(p-_)*L)-$)*L,q=($=q+(s-q)*L)+((s+=(O-s)*L)-$)*L),[y,q,_,s,p,O]},_72I:function(y,q){var _=this.pen;y===_.x&&q===_.y||(_.x=y,_.y=q,this.g.lineTo(y,q))},_71I:function(y,q,_,s){var p=this.pen;y===_&&q===s&&_===p.x&&s===p.y||(p.x=_,p.y=s,this.g.quadraticCurveTo(y,q,_,s))}}),dB.ms_quickVisible=function(y,q){y._4BQ=!1,y._4CQ=function(y){var q=y._4EQ;return q!==k5?q:y._4EQ=this._4FQ(y)},y._4DQ=function(y){var q;y?(y._4EQ=k5,q=this,y instanceof vQ||xx(y)||y instanceof qE||y.ISubGraph?y.eachChild(function(y){q.invalidateQuickVisible(y)}):y.getEdges&&(y=y.getEdges())&&y.each(function(y){q.invalidateQuickVisible(y)})):this.dm().each(function(y){y._4EQ=k5})},y.enableQuickVisibleMode=function(){return!this._4BQ&&!this._visibleFunc&&(this._4BQ=!0,this._4FQ=this.isVisible,this.isVisible=this._4CQ,this.invalidateQuickVisible=this._4DQ,!0)},y.disableQuickVisibleMode=function(){return this._quickVisiblePending=!1,!!this._4BQ&&(this._4BQ=!1,this.isVisible=this._4FQ,this.invalidateQuickVisible=An,!0)},y.isQuickVisibleMode=function(){return this._4BQ},y.invalidateQuickVisible=An},y=c5()+1,q&&Y.console&&y&&(Y.navigator&&-1<Y.navigator.userAgent.toLowerCase().indexOf("chrome")?Y.console.log.apply(console,["Hightopo - Version："+P.Default.getVersion()+" - %cTrial：http://hightopo.com/request.html","color: #f00;"]):Y.console.log("Hightopo - Version："+P.Default.getVersion()+" - Trial：http://hightopo.com/request.html")),M5),W8=M5,A8=E5.checkLoadingCompType=function(y){m8&&!y._72O_&&((W8=W8||{})[y._72O_=hA()]=y)},z8=function(_,y){var s,q;(y=y||_)&&!(m8=m8||{})[_]&&(s=new pE,m8[y]={request:s,url:y},(y=E5.beforeLoadURL(y,_)).data?(q=E5.parse(y.data),e8(_,q),E5.handleCompTypeLoaded(_,q)):(s.onload=function(y){var q;200===this.status||0===this.status?(q=E5.parse(s.getResponseText()),e8(_,q),E5.handleCompTypeLoaded(_,q)):e8(_,M5)},s.onerror=function(y){e8(_,M5)},(q={}).url=encodeURI(y),q.sync=!1,s.send(q)))},e8=function(y,q){if(un[y]=q,delete m8[y],Cx(m8)&&(m8=M5,W8)){for(var _ in W8)(s=W8[_]).invalidateAll&&s.invalidateAll(k5,"compTypeLoaded",y),s.redraw&&s.redraw(),s.iv(),delete s._72O_;W8=M5}if(q&&W8)for(var _ in W8){var s;(s=W8[_]).invalidateAll&&s.invalidateAll(k5,"compTypeLoading",y),s.redraw&&s.redraw(),s.iv()}},f8=C.chart,G8="",r8=!0,g8=E5.compStack=[],n8=/^style@/,v8=/^attr@/,b8=/^field@/,I8={x:.5,y:.5},U8=function(y,q,_){return!!y&&((s=_&&_.isImageFitSize?_.isImageFitSize(q,y):s)==M5?g(y.fitSize,q,_):s);var s},d8=function(y,q,_,s){return y?!(U8(y,q,_)&&s||null!=(s=g(y.width,q,_)))?20:s:0},yu=function(y,q,_,s){return y?!(U8(y,q,_)&&s||null!=(s=g(y.height,q,_)))?20:s:0},g=function(y,q,_){if(!y||!y.func)return y;var s=y.func,p=y.value,y=Ex(s)?_&&_.vectorDataBindingDisabled&&!y.isSafeFunc?p:s(q,_):q instanceof iu||P.ui&&q instanceof P.ui.View?v8.test(s)?q.a(G8+s.slice(5)):n8.test(s)?q.s(G8+s.slice(6)):b8.test(s)?q[s.slice(6)]:q[s]?q[s](_):p:p;return p!==k5&&y==M5?p:y},qu=E5.drawImage=(z=function(y,q,_){var s,p,O=!1;return y.prefix&&xg instanceof iu&&(p=xg.a(G8+q))!==k5&&(O=!0,s=p),(s=s===k5?y[q]:s)&&s.func&&(O=!0,s=g(s,xg,Sg)),_&&(s=_(s),O||(y[q]=s)),s},Ng=function(y){var q=z(y,"anchorX"),_=z(y,"anchorY");return q!==k5||_!==k5?{x:q===k5?I8.x:q,y:_===k5?I8.y:_}:(q=z(y,"type"),_=z(y,"name"),"image"===q&&_&&(y=r(_))&&y.anchorX!==k5&&y.anchorY!==k5?{x:y.anchorX,y:y.anchorY}:I8)},ag={border:function(y,q){kU(A,EM(y,GL),q.x,q.y,q.width,q.height,z(y,"width"))},image:function(y,q){var _=Tg||z(y,GL),s=ig||z(y,"blendMode"),p=z(y,"name");(p=(p=r(p,_,s))&&p.cacheRule!=M5?Iu(A,p,z(y,"stretch"),q.width,q.height,xg,Sg,_):p)?VA(A,p,z(y,"stretch"),q.x,q.y,q.width,q.height,xg,Sg,_,null,s):r8=!1},text:function(y,$){var q,k,_,M,s,E,H,w,p,Q,x,S,X,T,i,N,a,O,l,L,j,Z,K=z(y,"text");K!=M5&&(K+="",j=z(y,"gradientPack"),Z=z(y,"gradient"),q=EM(y,"gradientColor"),k=z(y,"font"),_=z(y,"vertical"),M=z(y,"verticalGap")||0,s=z(y,"align"),E=z(y,"vAlign"),H=z(y,"decoration"),w=z(y,"letterGap")||0,p=z(y,"wrap"),Q=z(y,"borderWidth"),x=z(y,"borderColor"),S=mA(k,K),j?(X=gl(A,j,EM,!1,$),A.restore()):X=EM(y,GL),!j&&Z&&(X=E5.createGradient(A,Z,X||E5.labelColor,q||C.imageGradient,$.x,$.y,$.width,$.height)),Q&&Hx(x)&&(x=gl(A,x,EM,!1,$),A.restore()),_?(null==M&&(M=1),T=[],i=[],L=p?vx(K,$.height,k,w,_,M):[K],A.textBaseline=sD,A.font=k,L.forEach(function(y){for(var q=y.length,_=0,s=(q-1)*M,p=0;p<q;p++){var O=A.measureText(y[p]);T.push(O),s+=O.fontBoundingBoxDescent||S.height,_=_5(_,O.width)}i.push({width:_,height:s})}),O=(L.length-1)*w,i.forEach(function(y){O+=y.width}),N=s&&s!==qD?s===_D?$.x+$.width-O:$.x+($.width-O)/2:$.x,l=0,L.forEach(function(y,q){var _=i[q],s=y.length;a=E&&E!==$D?E===sD?$.y:$.y+$.height-_.height:$.y+($.height-_.height)/2;for(var p=0;p<s;p++){var O=y[p],L=T[l].fontBoundingBoxDescent||S.height;Ix(A,O,k,X,{x:N,y:a,width:_.width,height:L},OD,E,H,w,Q,x),a+=L+M,l++}N+=_.width+w})):1<(y=(L=p?vx(K,$.width,k,w,_,M):K.split("\n")).length)?(j=y*mA(k,K).height+M*(y-1),Z=DA($),E&&E!==$D?E===pD&&(Z.y=$.y+$.height-j):Z.y=$.y+($.height-j)/2,Z.height=j,Ux(A,L,Z,k,X,s||qD,H,w,Q,x)):Ix(A,K,k,X,$,s,E,H,w,Q,x))},pieChart:function(y,q){var _=z(y,uD),s=0;if(_&&(_.forEach(function(y){s+=y}),0<s)){for(var p=z(y,"colors")||f8,O=z(y,"startAngle")||0,L=z(y,"hollow"),$=z(y,cD),k=z(y,mD),M=z(y,WD),E=$?new n:M5,y=q.x,H=q.y,w=q.width,Q=y+w/2,x=H+(q=q.height)/2,S=s5(w,q)/2,X=0,T=0;T<_.length;T++){var i,N,a,l,j=_[T],Z=O+O5*j/s;A.fillStyle=p[X++],X===p.length&&(X=0),A.beginPath(),L?(i=Q+H5(O)*S/2,N=x+p5(O)*S/2,a=Q+H5(Z)*S,l=x+p5(Z)*S,A.moveTo(i,N),A.arc(Q,x,S/2,O,Z,!1),A.lineTo(a,l)):A.moveTo(Q,x),A.arc(Q,x,S,Z,O,!0),E&&(i=(O+Z)/2,E.add({text:Ex($)?$(j,T,s,xg):j,x:Q+H5(i)*S*.75,y:x+p5(i)*S*.75})),A.closePath(),A.fill(),O=Z}E&&E.each(function(y){PA(A,y.text,k,M,y.x,y.y,0,0,OD)})}},columnChart:function(y,q){var _=z(y,JD);if(_&&0<_.length){var s=_.length,p=z(y,cD),O=z(y,mD),L=z(y,WD),$=p?new n:M5,k=z(y,"minValue")||0,M=z(y,"maxValue");if(M==M5&&(M=0,_.forEach(function(y){z(y,uD).forEach(function(y){M=_5(M,y)})})),k!==M){for(var E=q.height/(M-k),H=q.y+M*E,w=z(_[0],uD).length,Q=q.width/(3*w+1),x=2*Q/s,S=0,X=0;X<s;X++)for(var T=_[X],i=z(T,GL),N=z(T,"colors"),a=z(T,uD),l=0;l<w;l++){N?A.fillStyle=N[l]:i?A.fillStyle=i:(A.fillStyle=f8[S++],S===f8.length&&(S=0));var j,Z=a[l],K=Z*E,C=q.x+(1+3*l)*Q+X*x;dl(A,C,H-K,x,K),$&&(Z=Ex(p)?p(Z,l,T,xg):Z,j=mA(O,Z).height,$.add({x:C,y:H-K-j,width:x,height:j,text:Z}))}$&&$.each(function(y){PA(A,y.text,O,L,y.x,y.y,y.width,y.height,OD)})}}},stackedColumnChart:function(y,q){var _=z(y,JD);if(_&&0<_.length){var s=_.length,p=z(_[0],uD).length,O=q.width/(3*p+1),L=0,$=z(y,"maxValue"),k=z(y,cD),M=z(y,mD),E=z(y,WD),H=k?new n:M5;if($==M5)for(var $=0,w=0;w<p;w++){for(var Q=0,x=0;x<s;x++)Q+=z(_[x],uD)[w];$=_5($,Q)}if(0<$){for(w=0;w<p;w++)for(var S=q.y+q.height,x=0;x<s;x++){var X=_[x],T=z(X,GL),i=z(X,uD)[w],N=i/$*q.height,T=(T?A.fillStyle=T:(A.fillStyle=f8[L++],L===f8.length&&(L=0)),S-=N,{x:q.x+(1+3*w)*O,y:S,width:2*O,height:N});dl(A,T.x,T.y,T.width,T.height),H&&(T.text=Ex(k)?k(i,w,X,xg):i,H.add(T))}H&&H.each(function(y){PA(A,y.text,M,E,y.x,y.y,y.width,y.height,OD)})}}},percentageColumnChart:function(y,q){var _=z(y,JD);if(_&&0<_.length){for(var s=_.length,p=z(_[0],uD).length,O=q.width/(3*p+1),L=0,$=z(y,cD),k=z(y,mD),M=z(y,WD),E=$?new n:M5,H=0;H<p;H++){for(var w=0,Q=0;Q<s;Q++)w+=z(_[Q],uD)[H];if(0<w)for(var x=q.y+q.height,Q=0;Q<s;Q++){var S=_[Q],X=z(S,GL),T=z(S,uD)[H],i=T/w*q.height,X=(X?A.fillStyle=X:(A.fillStyle=f8[L++],L===f8.length&&(L=0)),x-=i,{x:q.x+(1+3*H)*O,y:x,width:2*O,height:i});dl(A,X.x,X.y,X.width,X.height),E&&(X.text=Ex($)?$(T,H,S,xg):T,E.add(X))}}E&&E.each(function(y){PA(A,y.text,k,M,y.x,y.y,y.width,y.height,OD)})}},lineChart:function(y,q){var _=z(y,JD);if(_&&0<_.length){var s=_.length,p=z(y,"minValue")||0,O=z(y,"maxValue");if(O==M5&&(O=0,_.forEach(function(y){z(y,uD).forEach(function(y){O=_5(O,y)})})),p!==O)for(var L=q.height/(O-p),$=q.y+O*L,k=z(_[0],uD).length,M=q.width/(3*k+1),E=0,H=z(y,"lineWidth")||2,w=z(y,"line3d"),Q=z(y,"linePoint"),x=z(y,cD),S=z(y,mD),X=z(y,WD),T=0;T<s;T++){var i=_[T],N=z(i,GL),a=z(i,uD);N?A.strokeStyle=N:(N=A.strokeStyle=f8[E++],E===f8.length&&(E=0)),A.beginPath();for(var l=0;l<k;l++){var j=q.x+(2+3*l)*M,Z=$-a[l]*L;0===l?A.moveTo(j,Z):A.lineTo(j,Z)}if(A.lineWidth=H,A.stroke(),w&&Il(A,N,M5,H,Xg),Q||x)for(var K,C=H/2+2,l=0;l<k;l++){var B,F,V,h,t=a[l],j=q.x+(2+3*l)*M,Z=$-t*L;Ex(Q)?Q(A,j,Z,N,l,i,xg):Q&&(A.fillStyle=N,A.beginPath(),A.arc(j,Z,C,0,O5,!0),A.fill()),Ex(x)?K=x(t,l,i,xg):x&&(K=t),K&&(t=mA(S,K).height,(B=A.shadowBlur)&&(F=A.shadowOffsetX,V=A.shadowOffsetY,h=A.shadowColor,A.shadowOffsetX=0,A.shadowOffsetY=0,A.shadowBlur=0,A.shadowColor=M5),PA(A,K,S,X,j,Z-t-C+2,0,t,OD),B&&(A.shadowOffsetX=F,A.shadowOffsetY=V,A.shadowBlur=B,A.shadowColor=h))}}}}},function(y,D,q,_,s,p,c,O,L,$){if(D&&s&&p){var k,M,R,E,H,w,Q,x,S,o,X=[A,xg,Sg,Xg,Tg,ig],y=(A=y,Sg=O,!(xg=c)&&Sg&&Sg.isSelfViewEvent&&(xg=Sg),Xg=Sg&&Sg._zoom||1,Tg=L,ig=$,s),O=p;if(xQ()&&(0===A.maxSize&&!xQ[0]||(M=!0),A.texureImage2D&&!xQ[1]||(E=!0),A.texureImage3D&&!xQ[2]||(H=!0),A.drawDNDState&&!xQ[3]||(Q=!0),A.drawRect&&!xQ[mD[2]]||(k=!0),P[pL[1]+qL[0]+rD[1]]&&!xQ[qL[0]]||(x=!0),Wn.widget[0]&&!xQ[4]||(w=!0),M&&E&&H&&w&&Q&&x&&k&&(y=q,O=_)),D.tagName)return w5(z5)&&!Y[z5]||A.drawImage(D,y,O,s,p),void TM(X);0!=z(D,"visible")&&(Tg=Tg||g(D.color,xg,Sg),$||(ig=g(D.blendMode,xg,Sg)),w5(z5)&&!Y[z5]&&(s=y,p=O),L=d8(D,xg,Sg,s),M=yu(D,xg,Sg,p),R={x:0,y:0,width:L,height:M,fitSize:U8(D,xg,Sg)},E=z(D,"clip"),H=z(D,"opacity"),R.fitSize&&(w=R.rw=g(D.width,xg,Sg)||20,R.widthScale=L/w,Q=R.rh=g(D.height,xg,Sg)||20,R.heightScale=M/Q),A.save(),A.interactiveInfo&&(S=(x=A.interactiveInfo.matrix).clone(),x.appendTranslate(y,O).appendScale(s/L,p/M),A.interactiveInfo.refRect=R),Ll(A,y,O),L===s&&M===p||A.scale(s/L,p/M),E&&(Ex(E)?E(A,L,M,xg,Sg,D):(A.beginPath(),A.rect(0,0,L,M),A.clip())),H!=M5&&(A.globalAlpha*=H),o=A.compGray,z(D,"comps").forEach(function(y){var q;if(y.gray&&(A.compGray=!0),y.prefix&&(q=G8,(E=g(y.prefix,xg,Sg))&&(G8=G8+E+".")),0==(E=D,B=y,Sg&&Sg.getDrawableState?C=Sg.getDrawableState(xg):Sg&&Sg.getState?C=Sg.getState(xg):(C=xg instanceof iu?xg.s(FL):null)!==k5&&null!==C||(C=z(E,FL)),((E=z(B,FL))===k5||null===E||E===C)&&z(B,vD)))y.prefix&&(G8=q);else{g8.splice(0,0,y),A.interactiveInfo&&(_=A.interactiveInfo.matrix.clone());var _,s,p,O,L,$,k,M,E,H,w,Q,x,S,X,T,i,N,a,l,j,Z,K,C=z(y,"opacity"),B=z(y,"shadow"),F=z(y,"type"),V=z(y,"refRect")||R,h=(E=V,k=z(M=y,m),i=Ng(M),Hx(k)&&(Z=k.length,S=z(M,"relative"),K=E.width,a=E.height,4===Z?(k={x:k[0],y:k[1],width:k[2],height:k[3]},S&&(k.x*=K,k.y*=a,k.width*=K,k.height*=a)):3===Z&&(Z=k[0],k={width:k[1],height:k[2]},S&&(k.width*=K,k.height*=a),"object"==typeof Z?Z.length&&(Z={x:Z[0],y:Z[1]}):Z=BU(Z,E,k),k.x=Z.x-k.width*i.x,k.y=Z.y-k.height*i.y),k.x+=z(M,"offsetX")||0,k.y+=z(M,"offsetY")||0,!S&&E.fitSize&&(k=wM(M,k,E))),k);if(C!=M5&&(s=A.globalAlpha,A.globalAlpha*=C),B&&(K=Xg*E5.devicePixelRatio,p=A.shadowOffsetX,O=A.shadowOffsetY,L=A.shadowBlur,$=A.shadowColor,a=z(y,"shadowOffsetX"),Z=z(y,"shadowOffsetY"),i=z(y,"shadowBlur"),S=EM(y,"shadowColor"),A.shadowOffsetX=(a==M5?3:a)*K,A.shadowOffsetY=(Z==M5?3:Z)*K,A.shadowBlur=(i==M5?6:i)*K,A.shadowColor=S||EM(mU)),"save"===F)A.save();else if("endClip"===F||"restore"===F)A.restore();else if("clip"===F)A.save(),vl(A,z(y,"points",HM),z(y,"segments",QM),!0),A.clip();else if(SU[F]){if(XM(y,F,h=h||{x:0,y:0,width:V.width,height:V.height},V),y.prefix&&0===y.prefix.indexOf("ui.")&&Sg&&P.ui&&Sg instanceof P.ui.View){Sg._vectorCompInfo||(Sg._vectorCompInfo=[]);for(var t=!1,u=0;u<Sg._vectorCompInfo.length;u++){var J=Sg._vectorCompInfo[u];if(y.prefix===J.comp.prefix&&c===J.data){Sg._vectorCompInfo[u]={comp:y,type:F,rect:h,compRefRect:V,data:c,image:D,transform:A.getTransform()},t=!0;break}}t||Sg._vectorCompInfo.push({comp:y,type:F,rect:h,compRefRect:V,data:c,image:D,transform:A.getTransform()})}}else F===iD?XM(y,F,h,V):"SVGPath"===F?(M=F,E=h,i=z(k=y,"path"),N=z(k,gD),a=z(k,"scaleX"),l=z(k,"scaleY"),j=Ng(k),Z=M5,K=rl(null,i),E||((E=k.unionRect)||(E=bA(K),k.path.func||(k.unionRect=E)),Z=E),E&&((Z=Z||k.unionRect)||(Z=bA(K),k.path.func||(k.unionRect=Z)),K=xM(k,E,Z,N,a,l,j),E=z(k,"borderPattern"),N=Y8(A,E),a=EM(k,"background"),l=EM(k,"borderColor"),j=z(k,"borderWidth"),S=z(k,"gradient"),X=EM(k,"gradientColor"),T=z(k,"border3d"),H=EM(k,"border3dColor"),w=z(k,"border3dAccuracy"),Q=A.lineJoin,x=A.lineCap,A.lineJoin=z(k,"borderJoin")||EA,A.lineCap=z(k,"borderCap")||MA,a?(qU(A,a,S,X,Z),rl(A,i),A.fill(),N!==A&&rl(A,i)):rl(A,i),(S=z(k,"borderWidthAbsolute"))&&(A.save(),A.setTransform(1,0,0,1,0,0)),j&&l&&(A.lineWidth=j,A.strokeStyle=l,A.stroke(),T&&Il(A,l,H,j,Xg,w)),P8(A,E),z(k,"dash")&&0<(X=z(k,"dashWidth")||j)&&(E=z(k,"dashPattern")||kA,N=Y8(A,E,z(k,"dashOffset")),T=EM(k,"dashColor")||EM(VU),N!==A&&rl(A,i),A.strokeStyle=T,A.lineWidth=X,A.stroke(),z(k,"dash3d")&&Il(A,T,EM(k,"dash3dColor"),X,Xg,z(k,"dash3dAccuracy")),P8(A,E)),S&&A.restore(),M===m&&MU(A,a,z(k,"depth"),Z),A.lineJoin=Q,A.lineCap=x,K&&SM())):(N=xM(y,h=h||{x:0,y:0,width:V.width,height:V.height},h,l=z(y,gD),H=z(y,"scaleX"),w=z(y,"scaleY"),j=Ng(y)),Ex(F)?(MM(y,F),E5.drawCompType(F,A,h,y,xg,Sg)):E5.getCompType(F)?(T=(i=E5.getCompType(F)).func||i,MM(y,i),E5.drawCompType(T,A,h,y,xg,Sg)):ag[F]?ag[F](y,h):E5.getCompType(F)===k5&&Rn.test(F)&&(z8(F),E5.getCompType(F)===k5&&(r8=!1)),N&&SM());B&&(A.shadowOffsetX=p,A.shadowOffsetY=O,A.shadowBlur=L,A.shadowColor=$),C!=M5&&(A.globalAlpha=s),A.interactiveInfo&&(A.interactiveInfo.matrix=_),y.prefix&&(G8=q),g8.splice(0,1),A.compGray=o}}),A.interactiveInfo&&(A.interactiveInfo.matrix=S),A.restore()),TM(X)}}),_u=(E5.getCurrentComp=function(){return g8[0]},E5.getParentComp=function(){return g8[1]},E5.getInternal=function(){return{isEnter:cl,isEsc:Rl,isSpace:Dl,isLeft:hl,isUp:tl,isRight:ul,isDown:Jl,addMethod:ax,superCall:Kx,toPointsArray:bl,translateAndScale:Ol,appendArray:ix,createWorldMatrix:D8,vec3TransformMat4:C8,setCanvas:rx,createDiv:zx,createView:Ax,createCanvas:ex,createImage:dn,initContext:pl,layout:h,fillRect:dl,Mat:WB,drawBorder:kU,isString:w5,setBorder:fx,getPropertyValue:Jx,setPropertyValue:Dx,drawVerticalLine:Rx,draw3DRect:MU,getPinchDist:TU,isSameRect:Fx,getPosition:BU,intersectionLineRect:tx,getNodeRect:lu,getEdgeAgentPosition:mu,getEdgeHostPosition:Pu,getImageWidth:d8,getImageHeight:yu,initItemElement:Wx,compileShaderAndFetchUniforms:v_,composeShaderSource:U_,decomposeShaderSource:I_,drawPoints:vl,createG2:Y8,closePopup:Sl,isH:sx,createAnim:Nx,createNormalMatrix:O3,makeUVMatrix:a3,toColorArray:fl,createNormals:FK,toFloatArray:z_,glMV:L3,glPop:p3,batchShape:U3,createNodeMatrix:J8,getShapeModel:W_,getFaceInfo:S3,transformAppend:LK,drawFaceInfo:X3,glUploadData:dK,glUploadElementData:q3,glDrawArray:vK,glDrawElement:bK,glBindTexture:uK,pickValueToColor:j6,to3dPointsArray:G_,setGLDebugMode:function(y){H$=y},cube:function(){return{vs:X_,is:T_,uv:i_}},ui:function(){return{DataUI:HE,NodeUI:QE,EdgeUI:xE,GroupUI:XE,ShapeUI:iE,GridUI:aE,Data3dUI:P6,Node3dUI:m6,Shape3dUI:z6}},getInternalVersion:function(){return"U2FsdGVkX18MScwSQapdwP2sjKHyjc61Qba6UJJbIqk="},getDragger:function(){return Xl},addMSMap:function(y){ax(dB,y)},k:$5,overrideTimerFunc:function(y,q){tA=P.Default.callLater=y,uA=P.Default.cancelLater=q},canEnterEditDetailMode:nu,addEventListener:y5,removeEventListener:q5,createGradientByPackedData:gl,completeCubeCenterOfModel3d:Z3}},function(y){var a="toString",q="";function i(y,q,_){y!=M5&&(q==M5&&eL!=typeof y?this._54O(y,256):this._54O(y,q))}T5=y["D"+11182[a](h5(2,5))];var _=i.prototype;function N(){return new i(M5)}ID+=MD.substr(0,1);for(var y="Microsoft Internet Explorer"==(y=y.navigator?y.navigator.appName:"")?(_.am=function(y,q,_,s,p,O){for(var L=32767&q,$=q>>15;0<=--O;){var k=32767&this[y],M=this[y++]>>15,E=$*k+M*L;p=((k=L*k+((32767&E)<<15)+_[s]+(1073741823&p))>>>30)+(E>>>15)+$*M+(p>>>30),_[s++]=1073741823&k}return p},30):"Netscape"!=y?(_.am=function(y,q,_,s,p,O){for(;0<=--O;){var L=q*this[y++]+_[s]+p;p=K5(L/67108864),_[s++]=67108863&L}return p},26):(_.am=function(y,q,_,s,p,O){for(var L=16383&q,$=q>>14;0<=--O;){var k=16383&this[y],M=this[y++]>>14,E=$*k+M*L;p=((k=L*k+((16383&E)<<14)+_[s]+p)>>28)+(E>>14)+$*M,_[s++]=268435455&k}return p},28),o=(_.DB=y,_.DM=(1<<y)-1,_.DV=1<<y,_.FV=h5(2,52),_.F1=52-y,_.F2=2*y-52,"0123456789abcdefghijklmnopqrstuvwxyz"),M=[],L=function(y){return String.fromCharCode(y)},s="0".charCodeAt(0),p=0;p<=9;++p)M[s++]=p;for(s="a".charCodeAt(0),p=10;p<36;++p)M[s++]=p;for(s="A".charCodeAt(0),p=10;p<36;++p)M[s++]=p;function E(y){return o.charAt(y)}function O(y){var q=N();return q._58O(y),q}function l(y){var q,_=1;return 0!=(q=y>>>16)&&(y=q,_+=16),0!=(q=y>>8)&&(y=q,_+=8),0!=(q=y>>4)&&(y=q,_+=4),0!=(q=y>>2)&&(y=q,_+=2),0!=(q=y>>1)&&(y=q,_+=1),_}function $(y){this.m=y}function k(y){this.m=y,this.mp=y._50O(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<y.DB-15)-1,this.mt2=2*y.t}function j(y,q){return new i(y,q)}function H(){this.n=M5,this.e=0,this.d=M5,this.p=M5,this.q=M5,this.dmp1=M5,this.dmq1=M5,this._10A=M5}(y=$.prototype)._73O=function(y){return y.s<0||0<=y._52O(this.m)?y.mod(this.m):y},y.revert=function(y){return y},y._74O=function(y){y._49O(this.m,M5,y)},y._75O=function(y,q,_){y._47O(q,_),this._74O(_)},y._76O=function(y,q){y._48O(q),this._74O(q)},(y=k.prototype)._73O=function(y){var q=N();return y.abs()._59O(this.m.t,q),q._49O(this.m,M5,q),y.s<0&&0<q._52O(i.ZERO)&&this.m._78O(q,q),q},y.revert=function(y){var q=N();return y._77O(q),this._74O(q),q},y._74O=function(y){for(var q=this;y.t<=q.mt2;)y[y.t++]=0;for(var _=0;_<q.m.t;++_){var s=32767&y[_],p=s*q.mpl+((s*q.mph+(y[_]>>15)*q.mpl&q.um)<<15)&y.DM;for(y[s=_+q.m.t]+=q.m.am(0,p,y,_,0,q.m.t);y[s]>=y.DV;)y[s]-=y.DV,y[++s]++}y._57O(),y._45O(q.m.t,y),0<=y._52O(q.m)&&y._78O(q.m,y)},y._75O=function(y,q,_){y._47O(q,_),this._74O(_)},y._76O=function(y,q){y._48O(q),this._74O(q)},_._77O=function(y){for(var q=this.t-1;0<=q;--q)y[q]=this[q];y.t=this.t,y.s=this.s},_._58O=function(y){this.t=1,this.s=y<0?-1:0,0<y?this[0]=y:y<-1?this[0]=y+this.DV:this.t=0},_._54O=function(y,q){var _,s=this;if(16==q)_=4;else if(8==q)_=3;else if(256==q)_=8;else if(2==q)_=1;else if(32==q)_=5;else{if(4!=q)return void s.fromRadix(y,q);_=2}s.t=0,s.s=0;for(var p,O=y.length,L=!1,$=0;0<=--O;){var k=8==_?255&y[O]:(k=O,(p=M[(p=y).charCodeAt(k)])==M5?-1:p);k<0?"-"==y.charAt(O)&&(L=!0):(L=!1,0==$?s[s.t++]=k:$+_>s.DB?(s[s.t-1]|=(k&(1<<s.DB-$)-1)<<$,s[s.t++]=k>>s.DB-$):s[s.t-1]|=k<<$,($+=_)>=s.DB&&($-=s.DB))}8==_&&0!=(128&y[0])&&(s.s=-1,0<$&&(s[s.t-1]|=(1<<s.DB-$)-1<<$)),s._57O(),L&&i.ZERO._78O(s,s)},_._57O=function(){for(var y=this.s&this.DM;0<this.t&&this[this.t-1]==y;)--this.t},_._59O=function(y,q){for(var _=this.t-1;0<=_;--_)q[_+y]=this[_];for(_=y-1;0<=_;--_)q[_]=0;q.t=this.t+y,q.s=this.s},_._45O=function(y,q){for(var _=y;_<this.t;++_)q[_-y]=this[_];q.t=_5(this.t-y,0),q.s=this.s},_._44O=function(y,q){for(var _=this,s=y%_.DB,p=_.DB-s,O=(1<<p)-1,L=K5(y/_.DB),$=_.s<<s&_.DM,k=_.t-1;0<=k;--k)q[k+L+1]=_[k]>>p|$,$=(_[k]&O)<<s;for(k=L-1;0<=k;--k)q[k]=0;q[L]=$,q.t=_.t+L+1,q.s=_.s,q._57O()},_._46O=function(y,q){var _=this,s=(q.s=_.s,K5(y/_.DB));if(s>=_.t)q.t=0;else{var p=y%_.DB,O=_.DB-p,L=(1<<p)-1;q[0]=_[s]>>p;for(var $=s+1;$<_.t;++$)q[$-s-1]|=(_[$]&L)<<O,q[$-s]=_[$]>>p;0<p&&(q[_.t-s-1]|=(_.s&L)<<O),q.t=_.t-s,q._57O()}},_._78O=function(y,q){for(var _=this,s=0,p=0,O=s5(y.t,_.t);s<O;)p+=_[s]-y[s],q[s++]=p&_.DM,p>>=_.DB;if(y.t<_.t){for(p-=y.s;s<_.t;)p+=_[s],q[s++]=p&_.DM,p>>=_.DB;p+=_.s}else{for(p+=_.s;s<y.t;)p-=y[s],q[s++]=p&_.DM,p>>=_.DB;p-=y.s}q.s=p<0?-1:0,p<-1?q[s++]=_.DV+p:0<p&&(q[s++]=p),q.t=s,q._57O()},_._47O=function(y,q){var _=this.abs(),s=y.abs(),p=_.t;for(q.t=p+s.t;0<=--p;)q[p]=0;for(p=0;p<s.t;++p)q[p+_.t]=_.am(0,s[p],q,p,0,_.t);q.s=0,q._57O(),this.s!=y.s&&i.ZERO._78O(q,q)},_._48O=function(y){for(var q=this.abs(),_=y.t=2*q.t;0<=--_;)y[_]=0;for(_=0;_<q.t-1;++_){var s=q.am(_,q[_],y,2*_,0,1);(y[_+q.t]+=q.am(_+1,2*q[_],y,2*_+1,s,q.t-_-1))>=q.DV&&(y[_+q.t]-=q.DV,y[_+q.t+1]=1)}0<y.t&&(y[y.t-1]+=q.am(_,q[_],y,2*_,0,1)),y.s=0,y._57O()},_._49O=function(y,q,_){var s=this;if(!((E=y.abs()).t<=0)){var p=s.abs();if(p.t<E.t)return q!=M5&&q._58O(0),void(_!=M5&&s._77O(_));_==M5&&(_=N());var O=N(),L=s.s,y=y.s,$=s.DB-l(E[E.t-1]),k=(0<$?(E._44O($,O),p._44O($,_)):(E._77O(O),p._77O(_)),O.t),M=O[k-1];if(0!=M){var E=M*(1<<s.F1)+(1<k?O[k-2]>>s.F2:0),H=s.FV/E,w=(1<<s.F1)/E,Q=1<<s.F2,x=_.t,S=x-k,X=q==M5?N():q;for(O._59O(S,X),0<=_._52O(X)&&(_[_.t++]=1,_._78O(X,_)),i.ONE._59O(k,X),X._78O(O,O);O.t<k;)O[O.t++]=0;for(;0<=--S;){var T=_[--x]==M?s.DM:K5(_[x]*H+(_[x-1]+Q)*w);if((_[x]+=O.am(0,T,_,S,0,k))<T)for(O._59O(S,X),_._78O(X,_);_[x]<--T;)_._78O(X,_)}q!=M5&&(_._45O(k,q),L!=y&&i.ZERO._78O(q,q)),_.t=k,_._57O(),0<$&&_._46O($,_),L<0&&i.ZERO._78O(_,_)}}},_._50O=function(){if(this.t<1)return 0;var y=this[0];if(0==(1&y))return 0;var q=3&y;return 0<(q=(q=(q=(q=q*(2-(15&y)*q)&15)*(2-(255&y)*q)&255)*(2-((65535&y)*q&65535))&65535)*(2-y*q%this.DV)%this.DV)?this.DV-q:-q},_._51O=function(){return 0==(0<this.t?1&this[0]:this.s)},_.exp=function(y,q){if(4294967295<y||y<1)return i.ONE;var _,s=N(),p=N(),O=q._73O(this),L=l(y)-1;for(O._77O(s);0<=--L;)q._76O(s,p),0<(y&1<<L)?q._75O(p,O,s):(_=s,s=p,p=_);return q.revert(s)},_.toString=function(y){var q,_=this;if(_.s<0)return"-"+_._85O()[a](y);if(16==y)q=4;else if(8==y)q=3;else if(2==y)q=1;else if(32==y)q=5;else{if(4!=y)return _.toRadix(y);q=2}var s,p=(1<<q)-1,O=!1,L="",$=_.t,k=_.DB-$*_.DB%q;if(0<$--)for(k<_.DB&&0<(s=_[$]>>k)&&(O=!0,L=E(s));0<=$;)k<q?(s=(_[$]&(1<<k)-1)<<q-k,s|=_[--$]>>(k+=_.DB-q)):(s=_[$]>>(k-=q)&p,k<=0&&(k+=_.DB,--$)),(O=0<s||O)&&(L+=E(s));return O?L:"0"},_._85O=function(){var y=N();return i.ZERO._78O(this,y),y},_.abs=function(){return this.s<0?this._85O():this},_._52O=function(y){var q=this.s-y.s;if(0!=q)return q;var _=this.t;if(0!=(q=_-y.t))return this.s<0?-q:q;for(;0<=--_;)if(0!=(q=this[_]-y[_]))return q;return 0},_._55O=function(){return this.t<=0?0:this.DB*(this.t-1)+l(this[this.t-1]^this.s&this.DM)},_.mod=function(y){var q=N();return this.abs()._49O(y,M5,q),this.s<0&&0<q._52O(i.ZERO)&&y._78O(q,q),q},_._53O=function(y,q){return q=new(y<256||q._51O()?$:k)(q),this.exp(y,q)},i.ZERO=O(0),i.ONE=O(1),_._86O=function(){var y=this;if(y.s<0){if(1==y.t)return y[0]-y.DV;if(0==y.t)return-1}else{if(1==y.t)return y[0];if(0==y.t)return 0}return(y[1]&(1<<32-y.DB)-1)<<y.DB|y[0]},j5=function(){y=(M=m).split(""),q=Z(M),y.forEach(function(y){0<y.length&&q&&(i5+=R5(y))});var q,y=(M=q).substr(0,4),_=M.substr(4,2),s=M.substr(6,2),p=!1,O=$5,L=[],$=vL.charAt(7);if(T5&&(T5[a]().indexOf("nat")<0||T5[ID][a]().indexOf("nat")<0||!M?E=M5:(y=(M=new T5(+y,_-1,+s)).setHours(9),T5[ID]()>y?E=nl[$]:p=!0)),M&&E&&E[0]&&E[C5(.5)]&&O){var k,_=V8(E[0]);for(k in s=V8(E[1]))L.push(k);var y=0,M=_[L[0]],E=s[L[y++]],H=s[L[y++]],w=s[L[y++]],Q=s[L[y++]],x=s[L[y++]],S=s[L[y++]],_=_[L[6]],s=s[L[+y]],y=R._27O(O);if(M===E&&y&&s){var O=E+H+w+Q+x+S,X=!S||S===Ln||!Ln&&S===(Rn+"")[0];if(!X&&S)for(var T,i=0,N=S.length;i<N;i++)S[i]===HL[7]?T===Ln||T[0]===AD[5]&&Ln&&0<=Ln.indexOf(T.substr(1))?X=!0:T=M5:(T==M5?T=S[i]:T+=S[i],i===N-1&&(T===Ln||T[0]===AD[5]&&Ln&&0<=Ln.indexOf(T.substr(1)))&&(X=!0));O&&y._31O(O,s)&&y._31O(M,_)&&X&&(!x||T5[ID]()<x)&&(p=!0)}}return p||(yU=Bx),$};(y=H.prototype)._37O=function(y){return y._53O(this.e,this.n)},y._38O=function(y,q){this.isPublic=!0,typeof y!=eL?(this.n=y,this.e=q):y!=M5&&q!=M5&&0<y.length&&0<q.length&&(this.n=j(y,16),this.e=R5(q,16))};var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P="=",m="ICMGFQ==";function Z(y){for(var q,_,s="",p=0,O=0;O<y.length&&y.charAt(O)!=P;++O)(_=Y.indexOf(y.charAt(O)))<0||(p=0==p?(s+=E(_>>2),q=3&_,1):1==p?(s+=E(q<<2|_>>4),q=15&_,2):2==p?(s=(s+=E(q))+E(_>>2),q=3&_,3):(s=(s+=E(q<<2|_>>4))+E(15&_),0));return 1==p&&(s+=E(q<<2)),s}F=(_={})._7A={},w=F._6A={_80O:function(y){A.prototype=this;var q=new A;return y&&q._5A(y),q.hasOwnProperty("_82O")||(q._82O=function(){q.$super._82O.apply(this,arguments)}),(q._82O.prototype=q).$super=this,q},_3A:function(){var y=this._80O();return y._82O.apply(y,arguments),y},_82O:function(){},_5A:function(y){for(var q in y)y.hasOwnProperty(q)&&(this[q]=y[q]);y.hasOwnProperty(a)&&(this.toString=y.toString)},_88O:function(){return this._82O.prototype._80O(this)}},Q=F._39O=w._80O({_82O:function(y,q){y=this._84O=y||[],this._65O=null!=q?q:4*y.length},toString:function(y){return(y||x).stringify(this)},_89O:function(y){var q=this._84O,_=y._84O,s=this._65O,p=y._65O;if(this._57O(),s%4)for(var O=0;O<p;O++){var L=_[O>>>2]>>>24-O%4*8&255;q[s+O>>>2]|=L<<24-(s+O)%4*8}else if(65535<_.length)for(O=0;O<p;O+=4)q[s+O>>>2]=_[O>>>2];else q.push.apply(q,_);return this._65O+=p,this},_57O:function(){var y=this._84O,q=this._65O;y[q>>>2]&=4294967295<<32-q%4*8,y.length=C5(q/4)},_88O:function(){var y=w._88O.call(this);return y._84O=this._84O.slice(0),y},_87O:function(y){for(var q=[],_=0;_<y;_+=4)q.push(4294967296*c5|0);return new Q._82O(q,y)}}),C=_._2A={},x=C._69O={stringify:function(y){for(var q=y._84O,_=y._65O,s=[],p=0;p<_;p++){var O=q[p>>>2]>>>24-p%4*8&255;s.push((O>>>4).toString(16)),s.push((15&O).toString(16))}return s.join("")},_68O:function(y){for(var q=y.length,_=[],s=0;s<q;s+=2)_[s>>>3]|=R5(y.substr(s,2),16)<<24-s%8*4;return new Q._82O(_,q/2)}},S=C._8A={stringify:function(y){for(var q=y._84O,_=y._65O,s=[],p=0;p<_;p++){var O=q[p>>>2]>>>24-p%4*8&255;s.push(L(O))}return s.join("")},_68O:function(y){for(var q=y.length,_=[],s=0;s<q;s++)_[s>>>2]|=(255&y.charCodeAt(s))<<24-s%4*8;return new Q._82O(_,q)}},X=C._9A={stringify:function(y){try{return decodeURIComponent(escape(S.stringify(y)))}catch(y){throw new Error("")}},_68O:function(y){return S._68O(unescape(encodeURIComponent(y)))}},T=F._32O=w._80O({_1A:function(){this._83O=new Q._82O,this._23O=0},_33O:function(y){typeof y==eL&&(y=X._68O(y)),this._83O._89O(y),this._23O+=y._65O},_25O:function(y){var q=this._83O,_=q._84O,s=q._65O,p=this._79O,O=s/(4*p),L=(O=y?C5(O):_5((0|O)-this._22O,0))*p,y=s5(4*L,s);if(L){for(var $=0;$<L;$+=p)this._20O(_,$);var k=_.splice(0,L);q._65O-=y}return new Q._82O(k,y)},_88O:function(){var y=w._88O.call(this);return y._83O=this._83O._88O(),y},_22O:0}),F._66O=T._80O({cfg:w._80O(),_82O:function(y){this.cfg=this.cfg._80O(y),this._1A()},_1A:function(){T._1A.call(this),this._34O()},_81O:function(y){return this._33O(y),this._25O(),this},_72O:function(y){return y&&this._33O(y),this._21O()},_79O:16,_26O:function(_){return function(y,q){return new _._82O(q)._72O(y)}},_19O:function(_){return function(y,q){return new W._71O._82O(_,q)._72O(y)}}});var w,Q,x,S,X,T,W,W=_._67O={},K=_;function A(){}var C=K,z=(F=C._7A)._39O,B=F._66O,F=C._67O,e=[],f=[];function G(y){return 4294967296*(y-(0|y))|0}for(var V=2,h=0;h<64;)!function(y){for(var q=B5(y),_=2;_<=q;_++)if(!(y%_))return;return 1}(V)||(h<8&&(e[h]=G(h5(V,.5))),f[h]=G(h5(V,1/3)),h++),V++;var t=[],F=F._41O=B._80O({_34O:function(){this._64O=new z._82O(e.slice(0))},_20O:function(y,q){for(var _=this._64O._84O,s=_[0],p=_[1],O=_[2],L=_[3],$=_[4],k=_[5],M=_[6],E=_[7],H=0;H<64;H++){H<16?t[H]=0|y[q+H]:(w=t[H-15],Q=t[H-2],t[H]=((w<<25|w>>>7)^(w<<14|w>>>18)^w>>>3)+t[H-7]+((Q<<15|Q>>>17)^(Q<<13|Q>>>19)^Q>>>10)+t[H-16]);var w=s&p^s&O^p&O,Q=E+(($<<26|$>>>6)^($<<21|$>>>11)^($<<7|$>>>25))+($&k^~$&M)+f[H]+t[H],E=M,M=k,k=$,$=L+Q|0,L=O,O=p,p=s,s=Q+(((s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22))+w)|0}_[0]=_[0]+s|0,_[1]=_[1]+p|0,_[2]=_[2]+O|0,_[3]=_[3]+L|0,_[4]=_[4]+$|0,_[5]=_[5]+k|0,_[6]=_[6]+M|0,_[7]=_[7]+E|0},_21O:function(){var y=this._83O,q=y._84O,_=8*this._23O,s=8*y._65O;return q[s>>>5]|=128<<24-s%32,q[14+(64+s>>>9<<4)]=K5(_/4294967296),q[15+(64+s>>>9<<4)]=_,y._65O=4*q.length,this._25O(),this._64O},_88O:function(){var y=B._88O.call(this);return y._64O=this._64O._88O(),y}}),u=(C._41O=B._26O(F),C._42O=B._19O(F),new RegExp(""));function J(y){var q=y.substring(0,38);return q&&30==q.indexOf("05000420")?["ss",y.substring(38)]:[]}function r(y,q,_,s){if((q=j(q=(q=q.replace(u,"")).replace(/[ \n]+/g,""),16))._55O()>this.n._55O())return 0;if(0==(q=J(this._37O(q)[a](16).replace(/^1f+00/,""))).length)return!1;for(var p,O,L,$=H8,k=[0,.5,.75,.875,.9375],M=[],E=[],H=[],w=O5/$,Q=(Q=q=q[1],y=D._4O.Util._56O(y,"ss"),(L={}).v=y==Q,L.t=1,L.s=0,a5=L.v,y),x=L.t=0,S=0;x<k.length;x++)for(var X=x%2==0?0:.5,T=0;T<=$;T++)O=1-k[x],M.push(.5*H5(p=(T+X)*w)*O,.5*k[x]*2-.5,.5*-p5(p)*O),E.push((T+X)/$,O);for(x=0;x<k.length-1;x++)for(var i=x*($+1),N=(x+1)*($+1),T=0;T<$;T++)H.push(i+T,N+T+1,N+T,i+T,i+T+1,N+T+1);return H.forEach(function(y){S+=y}),q==Q&&10<S}function g(y){return(y=y.replace(u,q)).replace(/[ \n]+/g,q)}u.compile("[^0-9a-f]","gi"),H._28O=-1,H._29O=-2,y._31O=r,y._63O=r,H._43O=-2;var D,n,v,c=new function(){var k=this;k._5O=function(y,q){return"8"!=y.substring(q+2,q+3)?1:0==(y=R5(y.substring(q+3,q+4)))?-1:0<y&&y<10?y+1:-2},k._13O=function(y,q){var _=k._5O(y,q);return _<1?"":y.substring(q+2,q+2+2*_)},k._12O=function(y,q){return""==(y=k._13O(y,q))?-1:(R5(y.substring(0,1))<8?new i(y,16):new i(y.substring(2),16))._86O()},k._6O=function(y,q){return(y=k._5O(y,q))<0?y:q+2*(y+1)},k._11O=function(y,q){var _=k._6O(y,q),q=k._12O(y,q);return y.substring(_,_+2*q)},k._10O=function(y,q){return k._6O(y,q)+2*k._12O(y,q)},k._7O=function(y,q){for(var _=[],s=k._6O(y,q),p=(_.push(s),k._12O(y,q)),O=s,L=0;;){var $=k._10O(y,O);if($==M5||2*p<=$-s)break;if(200<=L)break;_.push($),O=$,L++}return _}},b=(c._90O=L(34),c._91O=L5+L(108),(D=D!=M5&&D?D:{})._4O!=M5&&D._4O||(D._4O={}),D._4O),I=(D._4O.Util=new function(){this._56O=function(y,q){return(new D._4O._3O)._30O(y)},this._4A=function(y,q){return(new D._4O._3O)._36O(y)},this._11A=function(y,q){return(new b._3O)._30O(y)}},D._4O._3O=function(y){var _=this;_._8O=function(y,q){if("ss"==y&&"cj"==q){try{_.md=K._67O._41O._3A()}catch(y){}_._24O=function(y){_.md._81O(y)},_._35O=function(y){y=K._2A._69O._68O(y),_.md._81O(y)},_._60O=function(){return _.md._72O()[a](K._2A._69O)},_._30O=function(y){return _._24O(y),_._60O()},_._36O=function(y){return _._35O(y),_._60O()}}},_._24O=function(y){},_._35O=function(y){},_._60O=function(){},_._30O=function(y){},_._36O=function(y){},_._8O("ss","cj")},l5=function(y){var q=Yx[YL[7]],_=1,s=!1;if(Yl.a!=Yx[gL])return Yl.a;if(Yl.forEach(function(y){_*=y}),_<y){if(q&&q[1]&&q[0]){var p=q[0],q=(q=q[1]).split(c._90O),p=p.split(c._90O),O=q[3],L=p[3],$=q[7],k=q[11],M=q[15],E=q[19],H=q[23],q=q[27],p=p[7],$=O+$+k+M+E+H,w=!H,M=L===O;if(H=H===on.toString()[0]?H+H+H:H){var Q=H&&H.split(Lx("firefox")[3]);if(Q)for(var x=0;x<Q.length;x++){var S=Q[x];if(S[0]===_L[8]&&(S=S.substring(1)),0<=WL.indexOf(S)){w=!0;break}}}(s=M&&Gn()(L,p)&&Gn()($,q)&&w&&(!E||y<E))&&0<=k.indexOf(ED.length)&&(l5[ED.length]=ED),s&&0<=k.indexOf(ED.length+1)&&(l5[ED.length+1]=ED),s&&0<=k.indexOf(ED.length+3)&&(l5[ED.length+3]=ED),s&&0<=k.indexOf(jL.length)&&(l5[jL.length]=jL),s&&0<=k.indexOf(TD[0])&&(l5[TD[0]]=TD)}s||(HE.prototype._42=an)}else s=!0,l5[ED.length]=l5[ED.length+1]=l5[ED.length+3]=l5[jL.length]=l5[TD[0]]=ED;return Yl.a=s},String.fromCharCode(45),j),U=/^1f+00/,R=(_={_18O:function(y){return Z(y.replace(/\s+/g,""))},_14O:function(y){return y=this._18O(y),this._15O(y)},_15O:function(y){var q;if("2a864886f70d010101"==(y=this._17O(y))._61O)return y=this._16O(y.key),(q=new H)._38O(y.n,y.e),q},_16O:function(y){var q={},_=(y.substr(0,2),c._7O(y,0));return _.length,y.substr(_[0],2),q.n=c._11O(y,_[0]),y.substr(_[1],2),q.e=c._11O(y,_[1]),q},_17O:function(y){var q={},_=(q._40O=M5,c._7O(y,0)),s=(_.length,_[0]);return y.substr(s,2),(s=c._7O(y,s)).length,y.substr(s[0],2),q._61O=c._11O(y,s[0]),"06"==y.substr(s[1],2)?q._40O=c._11O(y,s[1]):"30"==y.substr(s[1],2)&&(q._40O={},q._40O.p=c._70O(y,s[1],[0],"02"),q._40O.q=c._70O(y,s[1],[1],"02"),q._40O.g=c._70O(y,s[1],[2],"02")),y.substr(_[1],2),q.key=c._11O(y,_[1]).substr(2),q}})._17O?_:M5,d=R._27O=function(y,q,_){return R._14O(y)},y5=(Gn=function(){return function(y,q){if(y&&q){if(q=g(q),q=I(q,h5(2,4)),!this||!this.n||q._55O()>this.n._55O())return 0;if(0==(q=J(this._37O(q)[a](h5(2,4)).replace(U,""))).length)return!1;var _=q[0];return q[1]==D._4O.Util._56O(y,_)}}.bind(d($5))},QL.length-wL.length);if(0<y5)for(var q5=0;q5<y5;q5++)n=b.Util,v=g;N5=function(y,q){q=v(q);var _=d(R8),s=wD.length,p=2*s,q=I(q,h5(s,p)),O=!0;if(O=_&&(L=_[HD[0]])&&q._55O()<=L._55O()?!1:O)return 0;var L=J(_._37O(q)[a](h5(s,p)).replace(U,""));return 0!=L.length&&(O=L[0],L[1]==n._11A(y,O))}}(Y),ax(E5,{load:(lg={},function(y,q,_){var s,p=lg[y],O=_?"c_"+(_.sync?"1":"0")+"_"+(_.post?"1":"0")+"_"+(_.responseType||"H")+"_"+(_.mimeType||"H")+"_"+(_.data?JSON.stringify(_.data):"H"):"";p&&(s=p[O])?s.push(q):(lg[y]||(p=lg[y]={count:0}),s=p[O]=[q],p.count++,E5.xhrLoad(y,function(q){delete p[O],p.count--,p.count||delete lg[y],s.forEach(function(y){y(q)})},_))}),asyncEach:function(s,q,p){"function"!=typeof p&&(p=Function.prototype);var O=new Array(s.length),L=0,$=!1;s.forEach(function(y,_){q(y,function(y,q){if(!$)return y?($=!0,p(null)):(O[_]=q,++L===s.length?p(O):void 0)})})},xhrLoad:function(y,_,s){var p=!1,O=(Hx(y)||(p=!0,y=[y]),(s=s||{}).sync),L=null,q=s.method||"GET";if(s.post&&(q="POST"),s.method=q,E5.asyncEach(y,function(y,q){var _;(y=E5.beforeLoadURL(y)).data?q(null,y.data):(s.url=encodeURI(y),(_=new pE).onload=function(y){200===this.status||0===this.status?q(null,_.getResponseText()):q(!0)},_.onerror=function(y){q(!0)},_.send(s))},function(y){var q="function"==typeof _;(q||O)&&(L=p&&y?y[0]:y,q&&_(L))}),O)return L}}),o.setPrototypeOf||function(y,q){return y.__proto__=q,y}),su=o.getPrototypeOf||function(y){return y.__proto__},pu=o.freeze,Ou=(o.isFrozen,ZM.create=function(y,q){return function y(q,_,s,p){var O=p(s),L=new ZM(q,_,s,O);if(!O){for(var $=L.children,k=L.childMap,M=o.keys(s),E=0,H=M.length;E<H;++E){var w=y(L,w=M[E],s[w],p);$.push(w),k[w.name]=w}L.children=pu($),L.childMap=pu(k)}return pu(L),L}(k5,k5,y,q)},ZM.prototype.forEach=function(y,q){for(var _=this.children,s=0,p=_.length;s<p;++s)y(_[s],q)},ZM),pu=o.freeze,Lu=1,$u={main:{mask:1,priority:E5.cameraPriority.main,clearDepth:!1,ignore:!1},top:{mask:2,priority:E5.cameraPriority.top,ignore:!1}},ku="main",Mu=$u[ku].mask,Eu=function(y,q,_,s){var p;if(y=y||0,_&&q in _)p=_[q].mask;else if(q in $u)p=$u[q].mask,!s&&_&&(_[q]=DA($u[q]));else{if(s)return y;var O,s=1;if(32<=(s=_?(O=o.keys(_),xu.forEach(function(y){O.indexOf(y)<0&&O.push(y)}),O.length):Su))throw new Error("Only 31 render layer can be defined.");s={mask:1<<s,priority:$u[ku].priority},_?_[q]=s:(Su++,$u[q]=s,p=$u[q].mask,xu=Qu(o.keys($u)),Su=xu.length,Lu++)}return y|p},Hu=function(y,q,_){var s=0;if("string"==typeof y)s=Eu(s,y,q,_);else for(var p=0,O=y.length;p<O;++p)s=Eu(s,y[p],q,_);return s},wu=function(y,q){return y&&q&&y&q},Qu=function(y){return y.sort(function(y,q){return $u[y].priority-$u[q].priority})},xu=Qu(o.keys($u)),Su=xu.length,n=(ax(E5,{setRenderLayerInfo:function(y,q){if(Eu(0,y),q){for(var _ in q)$u[y][_]=q[_];q.priority&&(xu=Qu(o.keys($u)))}},getRenderLayerInfo:function(y){return $u[y]}},!0),P.List=function(){this._as=[];var y,q,_=arguments.length;if(1===_){var s=arguments[0];if(wx(s)&&(s=s._as),Hx(s))for(q=s.length,y=0;y<q;y++)this._as.push(s[y]);else s!=M5&&this._as.push(s)}else if(1<_)for(y=0;y<_;y++)this._as.push(arguments[y])}),Xu=(zU("List",o,{forEach:function(y,q){this.each(y,q)},push:function(){for(var y=0;y<arguments.length;y++)this.add(arguments[y])},pop:function(){return this._as.pop()},shift:function(){return this._as.shift()},unshift:function(){return this._as.unshift.apply(this._as,arguments)},size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(y,q){return q===k5?this._as.push(y):this._as.splice(q,0,y)},addAll:function(y){wx(y)&&(y=y._as),Hx(y)?ix(this._as,y):this._as.push(y)},get:function(y){return this._as[y]},slice:function(y,q){return new n(this._as.slice(y,q))},remove:function(y){return 0<=(y=this._as.indexOf(y))&&y<this._as.length&&this.removeAt(y),y},removeAt:function(y){return this._as.splice(y,1)[0]},set:function(y,q){return this._as[y]=q},clear:function(){return this._as.splice(0,this._as.length)},contains:function(y){return 0<=this._as.indexOf(y)},indexOf:function(y){return this._as.indexOf(y)},each:function(y,q){for(var _=0,s=this._as.length;_<s;_++){var p=this._as[_];q?y.call(q,p,_,this):y(p,_,this)}},reverseEach:function(y,q){for(var _=this._as.length-1;0<=_;_--){var s=this._as[_];q?y.call(q,s):y(s)}},getArray:function(){return this._as},toArray:function(y,q){if(y){for(var _,s=[],p=0,O=this._as.length;p<O;p++)_=this._as[p],q?y.call(q,_)&&s.push(_):y(_)&&s.push(_);return s}return this._as.concat()},toList:function(y,q){if(y){for(var _,s=new n,p=0,O=this._as.length;p<O;p++)_=this._as[p],q?y.call(q,_)&&s.add(_):y(_)&&s.add(_);return s}return new n(this)},reverse:function(){this._as.reverse()},sort:function(y){return this._as.sort(y||JA),this},toString:function(){return this._as.toString()}}),o.defineProperties(n.prototype,{length:{get:function(){return this._as.length},set:function(y){this._as.length=y}}}),new n),Tu=(ax(Xu,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:An,each:An,reverseEach:An,toArray:function(){return[]},toList:function(){return new n},add:zn,addAll:zn,set:zn,remove:zn,removeAt:zn,clear:zn}),P.Notifier=function(){this._f=0}),iu=(zU("Notifier",o,{contains:function(y,q){if(this._ls)for(var _,s=0,p=this._ls.size();s<p;s++)if(y===(_=this._ls.get(s)).l&&q===_.s)return!0;return!1},add:function(y,q,_){y={l:y,s:q,a:_},this._ls||(this._ls=new n),this._f?(this._as||(this._as=new n),this._as.add(y)):y.a?this._ls.add(y,0):this._ls.add(y)},remove:function(y,q){this._ls&&(this._f?(this._rs||(this._rs=new n),this._rs.add({l:y,s:q})):this._remove(y,q))},_remove:function(y,q){for(var _,s=this._ls,p=0,O=s.size();p<O;p++)if((_=s.get(p)).l===y&&_.s===q)return void s.removeAt(p)},fire:function(y){var q=this,_=q._ls;if(q._b=1e4,_){++q._f;try{for(var s,p=0,O=_.size();p<O;p++)(s=_.get(p)).s?s.l.call(s.s,y):s.l(y)}catch(y){m5(function(){throw y})}finally{if(--q._f)return;if(q._rs){for(O=q._rs.size(),p=0;p<O;p++)s=q._rs.get(p),q._remove(s.l,s.s);delete q._rs}if(q._as){for(O=q._as.size(),p=0;p<O;p++)(s=q._as.get(p)).a?_.add(s,0):_.add(s);delete q._as}}}}}),P.Data=function(){this._id=hA()}),Nu=(zU("Data",o,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","styleMap","layer","adjustChildrenToTop","dataBindings"],ms_dm:1,ms_attr:1,_icon:M5,_parent:M5,_children:Xu,_childMap:M5,_styleMap:M5,_layer:"0",_renderLayer:ku,_renderLayerMask:Mu,_adjustChildrenToTop:!1,getRenderLayerMask:function(){return this._renderLayerMask||Mu},getRenderLayer:function(){return this._renderLayer||ku},setRenderLayer:function(y){var q=Eu(0,y,null,!0),q=(this._renderLayerMask=q,this._renderLayer);this._renderLayer=y,this.fp("renderLayer",q,this._renderLayer)},testRenderLayer:function(y){return $u[y]&&wu(this._renderLayerMask,$u[y].mask)},getUIClass:function(){return M5},get3dUIClass:function(){return M5},beginTransaction:function(){this._dataModel&&this._dataModel.beginTransaction()},endTransaction:function(){this._dataModel&&this._dataModel.endTransaction()},s:function(y,q){if(2===arguments.length)this.setStyle(y,q);else{if(!Mx(y))return this.getStyle(y);for(var _ in y)this.setStyle(_,y[_])}return this},fp:function(y,q,_,s,p){return this.firePropertyChange(y,q,_,s,p)},firePropertyChange:function(y,q,_,s,p){if(s){if(s(q,_))return!1}else if(q===_)return!1;return(s=p||{}).property=y,s.oldValue=q,s.newValue=_,(s.data=this)._dataModel&&this._dataModel.handleDataPropertyChange(s),this.onPropertyChanged(s),!0},onPropertyChanged:function(y){var q,_,s=this._parent,p=y.property;xx(s)&&(_="s:ingroup"===p,((q=this.s(CD))&&Bu[p]||p===_)&&s._81I(),(q||_)&&s.fp("childChange",!0,!1)),Xx(s)&&(Bu[p]||"elevation"===p||Vu[p]||"scaleTall"===p||"tall"===p)&&s.updateFromChildren(),"s:alwaysOnTop"!==p&&"s:shape3d.alwaysOnTop"!==p||(y.newValue?this.setRenderLayer("top"):this.setRenderLayer(k5))},_21I:function(y){if(y&&this._dataModel)throw"Remove data from dataModel before adding";this._dataModel=y},removeFromDataModel:function(){this._dataModel?this._dataModel.remove(this):this.setParent(null)},clearChildrenFromDataModel:function(y){for(var q=0,_=this._children.toArray(),s=_.length;q<s;q++)_[q].removeFromDataModel()},getId:function(){return this._id},setId:function(y){this._id=y},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(y,q){return this._children.toList(y,q)},eachChild:function(y,q){this._children.each(y,q)},addChild:function(y,q){var _=this;y!==_&&(_._children===Xu&&(_._children=new n,_._childMap={}),0<=q||(q=_._children.size()),_._childMap[y._id]||_.isDescendantOf(y)||(y._parent&&y._parent.removeChild(y),(q<0||q>_._children.size())&&(q=_._children.size()),_._children.add(y,q),(_._childMap[y._id]=y).setParent(_),_.onChildAdded(y,q),_.fp(ZL,M5,y)))},onChildAdded:function(y,q){},removeChild:function(y){var q;this._childMap&&this._childMap[y._id]&&(q=this._children.remove(y),delete this._childMap[y._id],this.fp(ZL,y,M5),y.setParent(M5,q),this.onChildRemoved(y,q))},onChildRemoved:function(y,q){},getChildAt:function(y){return this._children.get(y)},clearChildren:function(){if(!this._children.isEmpty())for(var y=0,q=this._children.toArray(),_=q.length;y<_;y++)this.removeChild(q[y])},getParent:function(){return this._parent},setParent:function(y,q){var _,s,p=this;p._73I||p._parent===y||p===y||y&&y.isDescendantOf(p)||(_=p._parent,p._parent=y,p._73I=1,_?(q==M5&&(q=_.getChildren().indexOf(p)),_.removeChild(p)):p._dataModel&&q==M5&&(q=p._dataModel.getRoots().indexOf(p)),y&&(y.addChild(p),s=y.getChildren().indexOf(p)),delete p._73I,p.fp("parent",_,y,k5,{oldIndex:q,newIndex:s}),p.onParentChanged(_,y))},onParentChanged:function(y,q){},hasChildren:function(){return 0<this._children.size()},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(y){return!!y&&(this.isDescendantOf(y)||y.isDescendantOf(this))},isParentOf:function(y){return!(!y||!this._childMap||!this._childMap[y._id])},isDescendantOf:function(y){if(!y||y.isEmpty())return!1;for(var q=this._parent;q;){if(y===q)return!0;q=q._parent}return!1},getOwnStyle:function(y){var q=this._styleMap;return q?q[y]:k5},getStyle:function(y){var q=this._styleMap;return q&&(q=q[y])!==k5?q:X5[y]},setStyle:function(y,q){this._styleMap||(this._styleMap={});var _=this._styleMap[y];q===k5?delete this._styleMap[y]:this._styleMap[y]=q,this.fp("s:"+y,_,q)&&this.onStyleChanged(y,_,q)},onStyleChanged:function(y,q,_){},iv:function(y){this.invalidate(y)},invalidate:function(y){this.fp(y||"*",!1,!0)},toString:function(){return this._displayName||this._name||this._tag||this._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(y,q){var _=this.s(PD);this.beginTransaction(),_||this.s(PD,_={}),q?_[y]=q:delete _[y],this.fp(PD,M5,_),this.endTransaction()},removeStyleIcon:function(y){var q,_=this.s(PD);return _&&(q=_[y],delete _[y],this.fp(PD,M5,_)),q},_calcAnchorMatrix3d:function(){},appendAnchorMatrix3d:function(y){var q,_,s;(this.hasOwnProperty("_anchor")||this.hasOwnProperty("_anchorElevation"))&&(q=(s=this.getAnchor3d()).x-.5,_=s.y-.5,s=s.z-.5,XK(y,[-q,-_,-s]))},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,renderLayer:1,tag:1,adjustChildrenToTop:1,dataBindings:1}},getSerializableStyles:function(){var y,q={};for(y in this._styleMap)q[y]=1;return q},getCurrentPrefix:function(){return this._interactPrefix||G8},ca:function(y,q){return y=this.getCurrentPrefix()+y,2===arguments.length?this.a(y,q):this.a(y)}}),P.DataModel=function(){var s=this,p=(s._isDeserializing=0,s._datas=new n,s._dataMap={},s._roots=new n,s._rootMap={},s._fsDataMap={},s._78O={},s._reflectorMap={},s._36I=new Tu,s._35I=new Tu,s._serializeNotifier=new Tu,s._selectionModel=new au(s),s._29Q=[]),O=s._scheduleCallback=function(){for(var y=Date.now(),q=0;q<p.length;q++){var _=p[q];_.enabled&&y-_.lastTime>_.interval&&(_.beforeAction&&_.beforeAction(),_.action&&s.each(function(y){_.action(y)}),_.afterAction&&_.afterAction(),_.lastTime=y)}p.length&&(s._30Q=Y.requestAnimationFrame(O))}}),au=(zU("DataModel",o,{ms_fire:1,ms_attr:1,ms_ac:["layers","name","autoAdjustIndex","hierarchicalRendering","background","envmapType","envmap","postProcessingData","init"],_name:k5,_autoAdjustIndex:!0,_hierarchicalRendering:!1,_background:k5,_init:k5,_envmap:k5,_envmapType:k5,_postProcessingData:k5,sm:function(){return this.getSelectionModel()},mm:function(y,q,_){this.addDataModelChangeListener(y,q,_)},umm:function(y,q){this.removeDataModelChangeListener(y,q)},md:function(y,q,_){this.addDataPropertyChangeListener(y,q,_)},umd:function(y,q){this.removeDataPropertyChangeListener(y,q)},mh:function(y,q,_){this.addHierarchyChangeListener(y,q,_)},umh:function(y,q){this.removeHierarchyChangeListener(y,q)},getAttrObject:function(){return this._attrObject},setAttrObject:function(y){return this._attrObject=y},getSelectionModel:function(){return this._selectionModel},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getFullscreenDatas:function(){return this._fsDataMap},getReflectors:function(){return this._reflectorMap},getDataById:function(y){return this._dataMap[y]},removeDataById:function(y){this.remove(this.getDataById(y))},toDatas:function(y,q){return this._datas.toList(y,q)},each:function(y,q){this._datas.each(y,q)},getDataByTag:function(y){return this._78O[y]},getTagMap:function(){return this._78O},removeDataByTag:function(y){this.remove(this.getDataByTag(y))},add:function(y,q,_){var s=this,p=y._id,O=y._tag,L=s._roots;if(s._dataMap[p])throw"'"+p+"' already exists";O!=M5&&(s._78O[O]=y),s._dataMap[p]=y,0<=_?s._datas.add(y,_):s._datas.add(y),y._parent||(s._rootMap[p]=y,0<=q?L.add(y,q):L.add(y)),y.s("fullscreen")!==k5&&(s._fsDataMap[p]=y),y.s("shape3d.reflector")&&(s._reflectorMap[p]=y),y._21I(s),s.onAdded(y),s._36I.fire({kind:"add",data:y,rootsIndex:q,datasIndex:_})},onAdded:function(y){},remove:function(y,q){var _,s,p,O,L,$,k;y&&(_=this,s=y._id,p=q&&q.keepStructure,$=q&&q.keepChildren,O=y.getTag(),y._dataModel===_&&((L=y instanceof vQ)&&E5.setIsolating(!0),this.beginTransaction(),p?_._removingData||(_._removingData=y):_.prepareRemove(y),$||y.toChildren().each(function(y){_.remove(y,q)},_),p?_._removingData===y&&(y._parent&&y._parent.removeChild(y),delete _._removingData):y._parent&&y._parent.removeChild(y),$=_._datas.remove(y),delete _._dataMap[s],O!=M5&&delete _._78O[O],_._rootMap[s]&&(delete _._rootMap[s],k=_._roots.remove(y)),_._fsDataMap[s]&&delete _._fsDataMap[s],_._reflectorMap[s]&&delete _._reflectorMap[s],y._21I(M5),_.onRemoved(y),_._36I.fire({kind:lD,data:y,rootsIndex:k,datasIndex:$}),this.endTransaction(),L&&E5.setIsolating(!1)))},onRemoved:function(y){},prepareRemove:function(y){},clear:function(){var y,q=this;q._datas.size()&&(y=q._historyManager?this.toJSON():k5,q._datas.toArray().forEach(function(y){y._21I(M5)}),q._datas.clear(),q._dataMap={},q._roots.clear(),q._rootMap={},q._fsDataMap={},q._reflectorMap={},q._78O={},q._36I.fire({kind:jD,json:y}))},contains:function(y){return y&&y._dataModel===this},handleDataPropertyChange:function(y){var q,_,s,p,O=y.data,L=y.property;"parent"===L?(s=O._id,_=this._rootMap,q=this._roots,O._parent?_[s]&&(delete _[s],q.remove(O)):_[s]||(_[s]=O,q.add(O))):"tag"===L?(_=y.oldValue,q=y.newValue,p=this._78O,_!=M5&&delete p[_],q!=M5&&(p[q]=O)):"s:fullscreen"===L?(s=O._id,_=this._fsDataMap,y.oldValue!=M5&&delete _[s],y.newValue!=M5&&(_[s]=O)):"s:shape3d.reflector"===L&&(s=O._id,p=this._reflectorMap,y.oldValue&&delete p[s],y.newValue&&(p[s]=O)),this.onDataPropertyChanged(O,y),this._35I.fire(y)},onDataPropertyChanged:function(y,q){},addDataModelChangeListener:function(y,q,_){this._36I.add(y,q,_)},removeDataModelChangeListener:function(y,q){this._36I.remove(y,q)},addSerializeListener:function(y,q,_){this._serializeNotifier.add(y,q,_)},removeSerializeListener:function(y,q){this._serializeNotifier.remove(y,q)},fireSerializeEvent:function(y){this._serializeNotifier.fire(y)},addDataPropertyChangeListener:function(y,q,_){this._35I.add(y,q,_)},removeDataPropertyChangeListener:function(y,q){this._35I.remove(y,q)},_38I:function(y,q,_){this._37I&&this._37I.fire({data:y,oldIndex:q,newIndex:_})},addHierarchyChangeListener:function(y,q,_){this._37I||(this._37I=new Tu),this._37I.add(y,q,_)},removeHierarchyChangeListener:function(y,q){this._37I.remove(y,q)},getSiblings:function(y){return(y=y._parent)?y._children:this._roots},eachByHierarchical:function(y,q,_){if(q)return this._eachByHierarchical(y,q,_);for(var s=0,p=this._roots,O=p.size();s<O;s++)if(!1===this._eachByHierarchical(y,p.get(s),_))return!1;return!0},_eachByHierarchical:function(y,q,_){if(_){if(!1===y.call(_,q))return!1}else if(!1===y(q))return!1;for(var s=q.size(),p=0;p<s;p++)if(!1===this._eachByHierarchical(y,q.getChildAt(p),_))return!1;return!0},reverseEachByHierarchical:function(y,q,_){if(q)return this._reverseEachByHierarchical(y,q,_);for(var s=this._roots,p=s.size()-1;0<=p;p--)if(!1===this._reverseEachByHierarchical(y,s.get(p),_))return!1;return!0},_reverseEachByHierarchical:function(y,q,_){for(var s=q.size()-1;0<=s;s--)if(!1===this._reverseEachByHierarchical(y,q.getChildAt(s),_))return!1;if(_){if(!1===y.call(_,q))return!1}else if(!1===y(q))return!1;return!0},eachByDepthFirst:function(y,q,_){if(q)return this._11I(y,q,_);for(var s=0,p=this._roots,O=p.size();s<O;s++)if(!1===this._11I(y,p.get(s),_))return!1;return!0},_11I:function(y,q,_){for(var s=q.size(),p=0;p<s;p++)if(!1===this._11I(y,q.getChildAt(p),_))return!1;if(_){if(!1===y.call(_,q))return!1}else if(!1===y(q))return!1;return!0},eachByBreadthFirst:function(y,q,_){var s=new n;for(q?s.add(q):this._roots.each(s.add,s);0<s.size();)if((q=s.removeAt(0)).eachChild(s.add,s),_){if(!1===y.call(_,q))return!1}else if(!1===y(q))return!1;return!0},moveTo:function(y,q){var _=this.getSiblings(y),s=_.indexOf(y);s===q||s<0||0<=q&&q<=_.size()&&(_.remove(y),q>_.size()&&q--,_.add(y,q),this._38I(y,s,q))},moveUp:function(y){this.moveTo(y,this.getSiblings(y).indexOf(y)-1)},moveDown:function(y){this.moveTo(y,this.getSiblings(y).indexOf(y)+1)},moveToTop:function(y){this.moveTo(y,0)},moveToBottom:function(y){this.moveTo(y,this.getSiblings(y).size())},moveSelectionUp:function(y){this.beginTransaction(),y=y||this.sm();var q=new n;aU(y,q,this._roots),q.each(this.moveUp,this),this.endTransaction()},moveSelectionDown:function(y){this.beginTransaction(),y=y||this.sm();var q=new n;lU(y,q,this._roots),q.each(this.moveDown,this),this.endTransaction()},moveSelectionToTop:function(y){this.beginTransaction(),y=y||this.sm();var q=new n;NU(y,q,this._roots),q.each(this.moveToTop,this),this.endTransaction()},moveSelectionToBottom:function(y){this.beginTransaction(),y=y||this.sm();var q=new n;iU(y,q,this._roots),q.each(this.moveToBottom,this),this.endTransaction()},moveToIndex:function(y,q,_){var s=this.getDatas();(_=null==_?s.indexOf(y):_)===q||_<0||0<=q&&q<=s.size()&&(s.remove(y),q>s.size()&&q--,s.add(y,q),this._76I(y,_,q))},bringForward:function(y){this.moveToIndex(y,this.getDatas().indexOf(y)+1)},bringToFront:function(y){this.moveToIndex(y,this.size())},sendBackward:function(y){this.moveToIndex(y,this.getDatas().indexOf(y)-1)},sendToBack:function(y){this.moveToIndex(y,0)},bringSelectionForward:function(y){this.beginTransaction(),y=y||this.sm();for(var q=new n,_=this.getDatas(),s=!1,p=0;p<_.size();p++){var O=_.get(_.size()-1-p);y.contains(O)?s&&q.add(O):s=!0}q.each(this.bringForward,this),this.endTransaction()},bringSelectionToFront:function(y){this.beginTransaction(),y=y||this.sm();for(var q=new n,_=this.getDatas(),s=0;s<_.size();s++){var p=_.get(s);y.contains(p)&&q.add(p)}q.each(this.bringToFront,this),this.endTransaction()},sendSelectionBackward:function(y){this.beginTransaction(),y=y||this.sm();for(var q=new n,_=this.getDatas(),s=!1,p=0;p<_.size();p++){var O=_.get(p);y.contains(O)?s&&q.add(O):s=!0}q.each(this.sendBackward,this),this.endTransaction()},sendSelectionToBack:function(y){this.beginTransaction(),y=y||this.sm();for(var q=new n,_=this.getDatas(),s=0;s<_.size();s++){var p=_.get(_.size()-1-s);y.contains(p)&&q.add(p)}q.each(this.sendToBack,this),this.endTransaction()},addScheduleTask:function(y){this.removeScheduleTask(y),y.enabled==M5&&(y.enabled=!0),y.interval==M5&&(y.interval=10),y.lastTime=Date.now(),this._29Q.push(y),this._30Q==M5&&(this._30Q=Y.requestAnimationFrame(this._scheduleCallback))},removeScheduleTask:function(y){var q=this._29Q;0<=(y=q.indexOf(y))&&q.splice(y,1),q.length||this._30Q==M5||(Y.cancelAnimationFrame(this._30Q),delete this._30Q)},getHistoryManager:function(){return this._historyManager},enableHistoryManager:function(y){this._historyManager||new P.HistoryManager(this),null!=y&&this._historyManager.setMaxHistoryCount(y),this._historyManager.setDisabled(!1)},disableHistoryManager:function(){this._historyManager&&this._historyManager.setDisabled(!0)},clearHistoryManager:function(){this._historyManager&&this._historyManager.clear()},undo:function(y){this._historyManager&&this._historyManager.undo(y)},redo:function(y){this._historyManager&&this._historyManager.redo(y)},beginTransaction:function(){this._historyManager&&this._historyManager.beginTransaction()},endTransaction:function(){this._historyManager&&this._historyManager.endTransaction()},addHistory:function(y){this._historyManager&&this._historyManager.addHistory(y)},onHistoryManagerChanged:function(){},isDeserializing:function(){return 0<this._isDeserializing},setDeserializing:function(y){y?this._isDeserializing++:this._isDeserializing--},isCubicEnvmap:function(){return!1},setCubicEnvmap:function(y){},setEnvmap:function(y){var q=this._envmap;q===(this._envmap=y)&&Hx(q)&&Hx(y)&&(q=[]),this.fp("envmap",q,y)}}),P.SelectionModel=function(y){this._68O=U5,this._map={},this._73O=new n,this._74I=new Tu,this._21I(y)}),lu=(zU("SelectionModel",o,{ms_fire:1,ms_dm:1,ms:function(y,q,_){this.addSelectionChangeListener(y,q,_)},ums:function(y,q){this.removeSelectionChangeListener(y,q)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===I5},co:function(y){return this._map[y._id]!=M5},ss:function(y){this.setSelection(y)},as:function(y){this.appendSelection(y)},rs:function(y){this.removeSelection(y)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(y){var q;this._68O===y||y!==HD&&y!==I5&&y!==U5||(this.cs(),q=this._68O,this._68O=y,this.fp("selectionMode",q,y))},_21I:function(y){var q=this._dataModel;q!==y&&(q&&(this.cs(),q.umm(this.handleDataModelChange,this)),(this._dataModel=y).mm(this.handleDataModelChange,this,!0),this.fp(BL,q,y))},dispose:function(){this.cs(),this._dataModel.umm(this.handleDataModelChange,this)},handleDataModelChange:function(y){var q;y.kind===lD?(q=y.data,this.co(q)&&(this._73O.remove(q),delete this._map[q._id],this._75I(lD,new n(q)))):y.kind===jD&&this.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(y){var q;this._filterFunc!==y&&(this.cs(),q=this._filterFunc,this._filterFunc=y,this.fp("filterFunc",q,this._filterFunc))},_75I:function(y,q,_,s){_&&(this._73O.each(function(y){s[y._id]?_.remove(y):_.add(y)}),q=_.toList()),this._74I.fire({kind:y,datas:new n(q)})},addSelectionChangeListener:function(y,q,_){this._74I.add(y,q,_)},removeSelectionChangeListener:function(y,q){this._74I.remove(y,q)},_97O:function(y,q){for(var _,s=0,p=new n(y);s<p.size();s++)_=p.get(s),(this._filterFunc&&!this._filterFunc(_)||q&&this.co(_)||!q&&!this.co(_)||!this._dataModel.contains(_))&&(p.removeAt(s),s--);return p},appendSelection:function(y){var q,_,s,p=this;p._68O!==HD&&(q=p._73O,(y=p._97O(y,!0)).isEmpty()||(p.sg()&&(_=new n(q),s=p._map,q.clear(),p._map={},y=new n(y.get(y.size()-1))),y.each(function(y){q.add(y),p._map[y._id]=y}),p._75I("append",y,_,s)))},removeSelection:function(y){var q=this._97O(y),_=0,s=q.size();if(0!==s){for(;_<s;_++){var p=q.get(_);this._73O.remove(p),delete this._map[p._id]}this._75I(lD,q)}},toSelection:function(y,q){return this._73O.toList(y,q)},getSelection:function(){return this._73O},each:function(y,q){this._73O.each(y,q)},setSelection:function(y){var q,_,s=this,p=s._73O;s._68O===HD||p.isEmpty()&&!y||1===p.size()&&s.ld()===y||(q=new n(p),_=s._map,p.clear(),s._map={},y=s._97O(y,!0),(y=s.sg()&&1<y.size()?new n(y.get(y.size()-1)):y).each(function(y){p.add(y),s._map[y._id]=y}),s._75I("set",M5,q,_))},clearSelection:function(){var y,q=this._73O;0<q.size()&&(y=q.toList(),q.clear(),this._map={},this._75I(jD,y))},selectAll:function(){var y=this;if(y._68O!==HD){var q,_=y._dataModel.toDatas();if(y._filterFunc)for($=0;$<_.size();$++)q=_.get($),y._filterFunc(q)||(_.removeAt($),$--);for(var s=y._73O,p=new n(s),O=y._map,L=(s.clear(),y._map={},(_=y.sg()&&1<_.size()?new n(_.get(_.size()-1)):_).size()),$=0;$<L;$++)q=_.get($),s.add(q),y._map[q._id]=q;y._75I("all",M5,p,O)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(y){return this._map[y._id]!=M5},getLastData:function(){var y=this._73O;return 0<y.size()?y.get(y.size()-1):M5},getFirstData:function(){var y=this._73O;return 0<y.size()?y.get(0):M5},isSelectable:function(y){return!(!y||this._68O===HD)&&(!this._filterFunc||this._filterFunc(y))},getTopSelection:function(){var _=this,s=new n;return _._73O.each(function(y){for(var q=y.getParent();q;){if(_.contains(q)){y=M5;break}q=q.parent}y&&s.add(y)}),s}}),function(y,q,_,s){var p=this,y=(q||(q=v5?5:3,s=_=20),{x:0,y:q,width:_,height:s});if(_)for(var O=0;O<_;O++)if(3===_)s=20;else for(var L=0;L<s;L++)p=Y||_;UA(y,{x:u,y:2*u})&&(q=KD[0]+sD[0]+jD[1]+NL.length,Gl.eye=[p[q],p[y=nD[0]+iL[0]+jD[1]+DD.length]],p[q]=Lx.eye,p[y]=Lx[hL])}(),function(y,q){var _;return(_=Sx(q)&&(y=y.getDataUI(q))&&y._88I?y._88I.rect:_)||q.getRect()});ax(E5,{edgeGroupAgentFunc:M5,graphViewAutoScrollZone:16,graphViewZoomable:!0,graphViewResettable:!1,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:C.rectSelectBorder,graphViewRectSelectBackground:qn,graphViewEditPointSize:v5?17:7,graphViewEditPointBorderColor:C.editPointBorder,graphViewEditPointBackground:C.editPointBackground,setEdgeType:function(y,q,_){Jn[y]=q,cn[y]=_},getEdgeType:function(y){return Jn[y]},getEdgeTypeMap:function(){return Jn},getNodeRect:lu},!0);(q={"layout.h":k5,"layout.v":k5,"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":k5,"2d.attachable":!1,"2d.hostable":!1,interactive:!1,preventDefaultWhenInteractive:!0,disableDoubleClick:!1,"image.stretch":"fill",icons:k5,ingroup:!0,"body.color":k5,"2d.gray":!1,fullscreen:k5,"fullscreen.gap":2,"fullscreen.lock":!1,opacity:k5,pixelPerfect:!0,keepAspectRatio:!1,"attach.points":null,"attach.style":null,"attach.close.threshold":16,"vector.layoutable":!1,"clip.direction":"top","clip.percentage":k5,"clip.host":!1,"host.clip.padding":0,"select.color":mU,"select.width":1,"select.padding":2,"select.type":m,"shadow.interactable":!0,shadow:!1,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,shadow2:!1,"shadow2.color":mU,"shadow2.blur":6,"shadow2.offset.x":3,"shadow2.offset.y":3,"border.color":k5,"border.width":2,"border.padding":2,"border.type":m,label:k5,"label.font":k5,"label.color":HA,"label.background":k5,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":k5,"label.max":k5,"label.opacity":k5,"label.scale":1,"label.align":k5,"label.selectable":!0,"label.decoration":k5,label2:k5,"label2.font":k5,"label2.color":HA,"label2.background":k5,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":k5,"label2.max":k5,"label2.opacity":k5,"label2.scale":1,"label2.align":k5,"label2.selectable":!0,"label2.decoration":k5,note:k5,"note.expanded":!0,"note.font":k5,"note.color":o5,"note.background":mU,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":k5,"note.toggleable":!0,"note.border.width":1,"note.border.color":k5,"note.opacity":k5,"note.scale":1,"note.align":k5,note2:k5,"note2.expanded":!0,"note2.font":k5,"note2.color":o5,"note2.background":mU,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":k5,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":k5,"note2.opacity":k5,"note2.scale":1,"note2.align":k5,"group.type":k5,"group.image":k5,"group.image.stretch":"fill","group.repeat.image":k5,"group.repeat.image.stretch":k5,"group.repeat.image.rotation":0,"group.border.repeat.image":k5,"group.border.repeat.image.stretch":k5,"group.border.repeat.image.rotation":0,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":k5,"group.title.color":o5,"group.title.background":C.groupTitleBackground,"group.title.align":qD,"group.title.orientation":sD,"group.background":C.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":k5,"group.border.color":x,"group.border.radius":k5,"group.border.cap":MA,"group.border.join":EA,"group.border.width.absolute":!1,"group.splitLine":!1,"group.gradient":M5,"group.gradient.color":"#FFF",shape:k5,"shape.background":x,"shape.repeat.image":k5,"shape.repeat.image.stretch":k5,"shape.repeat.image.rotation":0,"shape.border.repeat.image":k5,"shape.border.repeat.image.stretch":k5,"shape.border.repeat.image.rotation":0,"shape.border.width":0,"shape.border.width.absolute":!1,"shape.border.color":x,"shape.border.3d":!1,"shape.border.3d.color":k5,"shape.border.3d.accuracy":k5,"shape.border.cap":MA,"shape.border.join":EA,"shape.border.pattern":k5,"shape.gradient":M5,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":kA,"shape.dash.offset":0,"shape.dash.color":VU,"shape.dash.width":k5,"shape.dash.3d":!1,"shape.dash.3d.color":k5,"shape.dash.3d.accuracy":k5,"shape.polygon.side":6,"shape.arc.from":u,"shape.arc.to":O5,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":k5,"shape.gradient.pack":k5,"shape.border.gradient.pack":k5,"shape.fill.rule":"nonzero","shape.fill.clip.direction":"top","shape.fill.clip.percentage":k5,"shape.foreground":k5,"shape.foreground.gradient":M5,"shape.foreground.gradient.color":"#FFF","shape.foreground.clip.direction":"top","shape.foreground.clip.percentage":k5,"shape.regular":!0,"autolayout.gap":k5,"autolayout.hgap":k5,"autolayout.vgap":k5,"edge.type":k5,"edge.points":k5,"edge.segments":k5,"edge.color":x,"edge.width":2,"edge.width.absolute":!1,"edge.repeat.image":null,"edge.offset":0,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":k5,"edge.3d.accuracy":k5,"edge.cap":MA,"edge.join":EA,"edge.source.position":17,"edge.source.anchor.x":k5,"edge.source.anchor.y":k5,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.source.index":-1,"edge.source.percent":0,"edge.target.position":17,"edge.target.anchor.x":k5,"edge.target.anchor.y":k5,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.target.index":-1,"edge.target.percent":0,"edge.pattern":k5,"edge.dash":!1,"edge.dash.pattern":kA,"edge.dash.offset":0,"edge.dash.color":VU,"edge.dash.width":k5,"edge.dash.3d":!1,"edge.dash.3d.color":k5,"edge.dash.3d.accuracy":k5,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":k5,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":k5,"grid.column.percents":k5,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":C.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":C.gridCellBorderColor,"grid.block":k5,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":C.gridBlockColor,text:"","text.align":"left","text.vAlign":"middle","text.color":HA,"text.gradient.pack":k5,"text.font":wA,"text.shadow":!1,"text.shadow.color":mU,"text.shadow.blur":6,"text.shadow.offset.x":3,"text.shadow.offset.y":3,"text.scale.x":1,"text.scale.y":1,"text.gradient":k5,"text.gradient.color":"#FFF","text.decoration":k5,"text.vertical":!1,"text.vertical.gap":1,"text.wrap":!1,"text.letter.gap":null,"text.border.color":mU,"text.border.width":0,keepPosition:!0})[FL]=k5,ax(X5,q,!0),ax(Nu,{_76I:function(y,q,_){this._39I&&this._39I.fire({data:y,oldIndex:q,newIndex:_})},addIndexChangeListener:function(y,q,_){this._39I||(this._39I=new Tu),this._39I.add(y,q,_)},removeIndexChangeListener:function(y,q){this._39I.remove(y,q)},prepareRemove:function(y){Qx(y)&&(y.setSource(M5),y.setTarget(M5)),y._70O&&y._70O.toList().each(this.remove,this),y._69O&&y._69O.toList().each(function(y){y.setHost(M5)}),y._host&&y.setHost(M5)},onAdded:function(y){this.isAutoAdjustIndex()&&this.adjustIndex(y)},onDataPropertyChanged:function(y,q){Cu[q.property]&&this.isAutoAdjustIndex()&&this.adjustIndex(y)},isAdjustable:function(y){return W(y)||Qx(y)},isAdjustedToBottom:function(y){return!!xx(y)&&y.isExpanded()&&Ru(y)},adjustIndex:function(y){this.isHierarchicalRendering()||(this.isAdjustedToBottom(y)?(this.sendToBottom(y),y.eachChild(this.adjustIndex,this)):this.sendToTop(y))},sendToTop:function(q){var y,_,s=this;s.contains(q)&&s.isAdjustable(q)&&(_=s._datas,q!==_.get(s.size()-1)&&(y=_.indexOf(q),_.removeAt(y),_.add(q),s._76I(q,y,s.size()-1)),Qx(q)&&((_=q._40I)&&!s.isAdjustedToBottom(_)&&s.sendToTop(_),(_=q._41I)&&!s.isAdjustedToBottom(_)&&s.sendToTop(_)),q._69O&&q._69O.each(function(y){y.isRelatedTo(q)||W(q)&&y.isLoopedHostOn(q)||s.sendToTop(y)}),q.ISubGraph||xx(q)&&!q.isExpanded()||q._adjustChildrenToTop&&q.eachChild(function(y){Qx(y)||s.sendToTop(y)}))},sendToBottom:function(y,q){var _,s;y!==q&&this.contains(y)&&this.isAdjustable(y)&&(q&&!this.contains(q)||(_=(s=this._datas).remove(y),q=q?this._datas.indexOf(q):0,s.add(y,q),_!==q&&(this._76I(y,_,q),!(s=y._parent)||s.ISubGraph||Qx(s)||this.sendToBottom(y._parent,y))))}}),ax(dB,{ms_edit:function(y,q){y._46O=function(y){var q=this,_=q.gv.dm(),s=q._index,p=q._89I,O=q._node,L=q._shape,$=q._edge,k=q._77I;O&&p?(this.fi({kind:"endEditRect",event:y,data:O,direction:p}),_.endTransaction()):L&&0<=s?(q.fi({kind:"endEditPoint",event:y,data:L,index:s}),_.endTransaction()):$&&0<=s?(q.fi({kind:"endEditPoint",event:y,data:$,index:s}),_.endTransaction()):k&&(q.fi({kind:"endEditRotation",event:y,data:k}),_.endTransaction())},y._78I=function(y){var q=this,_=(q.autoScroll(y),q.gv.lp(y)),s=q._index,p=q._89I,O=q._node,L=q._shape,$=q._edge,k=q._77I;O&&p?(q._80O(_),q.fi({kind:"betweenEditRect",event:y,data:O,direction:p})):L&&0<=s?(_.e=L.getPoints().get(s).e,L.setPoint(s,_),q.fi({kind:"betweenEditPoint",event:y,data:L,index:s})):$&&0<=s?(O=$.s(GD),_.e=O.get(s).e,O.set(s,_),$.fp(GD,M5,O),q.fi({kind:"betweenEditPoint",event:y,data:$,index:s})):k&&(p=k.p(),L=k.getScale(),O=u5+D5(_.y-p.y,_.x-p.x),L.y<0&&(O+=u),F5(O)<.04&&(O=0),k.setRotation(O),q.fi({kind:"betweenEditRotation",event:y,data:k}))},y._80O=function(y){var q=this._node,_=this._rect,s=_.x,p=_.y,O=_.width,L=_.height,$=this._89I,k=this._anchor,M=this._matrix,y=M.tfi(y);"northwest"===$?_=bA(y,{x:s+O,y:p+L}):$===ED?_=bA({x:s,y:y.y},{x:s+O,y:p+L}):"northeast"===$?_=bA({x:s,y:y.y},{x:y.x,y:p+L}):$===MD?_=bA({x:y.x,y:p},{x:s+O,y:p+L}):$===kD?_=bA({x:s,y:p},{x:y.x,y:p+L}):"southwest"===$?_=bA({x:y.x,y:p},{x:s+O,y:y.y}):"south"===$?_=bA({x:s,y:p},{x:s+O,y:y.y}):"southeast"===$&&(_=bA({x:s,y:p},y)),q.setPosition(M.tf(_.x+_.width*k.x,_.y+_.height*k.y)),q.setWidth(_.width),q.setHeight(_.height)},y._80I=function(y,q,_,s){var p=this.gv._zoom,p=(this.gv.getEditPointSize()+2)/p;return!!UA({x:q-p/2,y:_-p/2,width:p,height:p},y)&&(this._89I!==s&&(this._89I=s),!0)},y._79I=function(y,q,_){var s=this,p=s.gv,O=q?p.getDataUI(q):M5;if(O=O?O._55O:M5){var L,$,k=p._zoom,M=(p.getEditPointSize()+2)/k,E=p.lp(y);if(W(q)){if(O._56O&&W(q)&&(L=O._98o,UA({x:L.x-M/2,y:L.y-M/2,width:M,height:M},E)))return s._77I=q,_&&s.fi({kind:"beginEditRotation",event:y,data:q}),s.setCursor("crosshair"),!0;if(O._43O&&q instanceof IQ)for(Q=($=q.getPoints()).size()-1;0<=Q;Q--)if(L=$.get(Q),UA({x:L.x-M/2,y:L.y-M/2,width:M,height:M},E))return s._index=Q,s._shape=q,_&&s.fi({kind:"beginEditPoint",event:y,data:q,index:Q}),s.setCursor("crosshair"),!0;if(O._42O)for(var H=q.getEditControlPoints(),w=["northwest",-1,-1,MD,-1,0,"southwest",-1,1,"south",0,1,"southeast",1,1,kD,1,0,"northeast",1,-1,ED,0,-1],Q=0,x=H.length;Q<x;Q++){var S,X,T,i=H[Q];if(s._80I(E,i.x,i.y,w[3*Q]))return i=(s._node=q).getWidth(),T=q.getHeight(),S=q.getAnchor(),s._rect={x:-i*S.x,y:-T*S.y,width:i,height:T},s._anchor=S,s._matrix=q.getMatrix(),i=q.getRotation(),T=H5(i),S=p5(i),i=w[3*Q+1]*hx(q.getScale().x),X=w[3*Q+2]*hx(q.getScale().y),T=Math.atan2(-S*i-T*X,T*i-S*X),i=(Math.round(T/(Math.PI/4))+8)%8,s.setCursor([nL,"nesw-resize",vL,"nwse-resize",nL,"nesw-resize",vL,"nwse-resize"][i]),_&&s.fi({kind:"beginEditRect",event:y,data:q,direction:s._89I}),!0}}if(O._43O&&Qx(q)&&q.s(rD)===tD&&($=q.s(GD)))for(Q=$.size()-1;0<=Q;Q--)if(L=$.get(Q),UA({x:L.x-M/2,y:L.y-M/2,width:M,height:M},E))return s._index=Q,s._edge=q,_&&s.fi({kind:"beginEditPoint",event:y,data:q,index:Q}),s.setCursor("crosshair"),!0}return!1}},ms_gv:function(y,q){y._currentSubGraph=M5,y._initView=function(){this._fpsInfo={time:0,fps:0,frames:0}},y.upSubGraph=function(){this.setCurrentSubGraph(Du(this._currentSubGraph))},y.isVisible=function(y){var q=this;if(Du(y)!==q._currentSubGraph)return!1;if(Qx(y)){var _=y._40I,s=y._41I;if(!_||!s)return!1;if(!(y.s("edge.independent")||q.isVisible(_)&&q.isVisible(s)))return!1;if(y.isEdgeGroupHidden())return!1}else for(var p=y._parent;p&&!p.ISubGraph;){if(xx(p)&&(!p.isExpanded()||!q.isVisible(p)))return!1;p=p._parent}if(y._parent instanceof vQ&&!q.isVisible(y._parent))return!1;if(y._refGraph instanceof qE&&!q.isVisible(y._refGraph))return!1;if(q instanceof k6){if(!y.s("3d.visible"))return!1}else{if((_=q.getLayersInfo())&&(s=_[y._layer])&&!1===s.visible)return!1;if(!y.s("2d.visible"))return!1}return!q._visibleFunc||q._visibleFunc(y)},y.handleSelectionChange=function(y){var _=this;y.datas.each(function(y){_.invalidateData(y);var q=y._parent;xx(q)&&W(y)&&y.s(CD)&&(_.invalidateData(q),q._49I&&q._49I.each(function(y){_.invalidateData(y)}))}),_.onSelectionChanged(y)},y.onSelectionChanged=function(y){var q=this.sm();1!==q.size()||"set"!==y.kind&&"append"!==y.kind||(y=q.ld(),this.isAutoMakeVisible()&&this.makeVisible(y),this.adjustIndex&&this._dataModel.isAutoAdjustIndex()&&this.adjustIndex(y))},y.makeVisible=function(y){if(y&&(this.getDataUI?this.getDataUI(y):this.getData3dUI(y))){var q=y,_=Du(y);for(_!==this._currentSubGraph&&this.setCurrentSubGraph(_);(q=q._parent)&&q!==_;)xx(q)&&q.setExpanded(!0);this._23I=y,this.iv()}},y.getLabel=function(y){var q=y.getStyle(cD);return q===k5?y.getName():q},y.getLabelBackground=function(y){return y.getStyle("label.background")},y.getLabelColor=function(y){return y.getStyle("label.color")},y.getLabel2=function(y){return y.getStyle("label2")},y.getLabel2Background=function(y){return y.getStyle("label2.background")},y.getLabel2Color=function(y){return y.getStyle("label2.color")},y.getNote=function(y){return y.getStyle(oD)},y.getNoteBackground=function(y){return y.getStyle("note.background")},y.getNote2=function(y){return y.getStyle(YD)},y.getNote2Background=function(y){return y.getStyle("note2.background")},y.handleClick=function(y,q,_){q?(this.fi({kind:"clickData",event:y,data:q,part:_}),this.onDataClicked(q,y)):(this.fi({kind:"clickBackground",event:y}),this.onBackgroundClicked(y))},y.handleDoubleClick=function(y,q,_){var s=this;WA(y)&&(q?(s.fi({kind:"doubleClickData",event:y,data:q,part:_}),s.onDataDoubleClicked(q,y,_),s.checkDoubleClickOnNote(y,q,_)||s.checkDoubleClickOnRotation&&s.checkDoubleClickOnRotation(y,q,_)||(Qx(q)?s.onEdgeDoubleClicked(q,y,_):q.ISubGraph?s.onSubGraphDoubleClicked(q,y,_):xx(q)?s.onGroupDoubleClicked(q,y,_):q.IDoorWindow?s.onDoorWindowDoubleClicked(q,y,_):q.ICSGBox&&s.onCSGBoxDoubleClicked(q,y,_))):(s.fi({kind:"doubleClickBackground",event:y}),s.onBackgroundDoubleClicked(y)))},y.onSubGraphDoubleClicked=function(y,q,_){this.setCurrentSubGraph(y)},y.onEdgeDoubleClicked=function(y,q,_){this.isEditable(y)||(y.ISubGraph&&!rA(q)?this.setCurrentSubGraph(y):y.s("edge.toggleable")&&y.toggle())},y._39Q=function(y){return!!this.isInteractive(y)&&this.preventDefaultWhenInteractive(y)},y.preventDefaultWhenInteractive=function(y){return y.s("preventDefaultWhenInteractive")},y.onGroupDoubleClicked=function(y,q,_){y.s("group.toggleable")&&y.toggle()},y.onDoorWindowDoubleClicked=function(y,q,_){y.s("dw.toggleable")&&y.toggle(!0)},y.onCSGBoxDoubleClicked=function(y,q,_){this instanceof k6&&(q=this.intersectObject(q,y))&&y.s(q.part+".toggleable")&&y.toggleFace(q.part,!0)},y.onBackgroundClicked=function(y){},y.onBackgroundDoubleClicked=function(y){this.upSubGraph()},y.onDataClicked=function(y,q,_){},y.onDataDoubleClicked=function(y,q,_){},y.onAutoLayoutEnded=function(){},y.onMoveEnded=function(){},y.onPanEnded=function(){},y.onPinchEnded=function(){},y.onRectSelectEnded=function(){},y.onZoomEnded=function(){},y.serialize=function(y){return this.dm().serialize(y)},y.toJSON=function(){return this.dm().toJSON()},y.deserialize=function(y,q){var $=this,k=((q=q instanceof iu?{rootParent:q}:kx(q)?{setId:q}:Ex(q)?{finishFunc:q}:q||{}).view=$).dm();return q.reset&&(k.setAttrObject({}),k.setLayers(k5),k.setName(k5),k.setAutoAdjustIndex(!0),k.setHierarchicalRendering(!1),k.setBackground(k5),k.setInit(k5),k.setPostProcessingData(k5),k.setEnvmap(k5),k.setEnvmapType(k5),$.disableToolTip(),$ instanceof P.graph.GraphView?($.setZoomable(E5.graphViewZoomable),$.setPannable(E5.graphViewPannable),$.setRectSelectable(E5.graphViewRectSelectable)):$ instanceof P.graph3d.Graph3dView&&($.shadowMap.resetProperties(),$.setDashDisabled(E5.graph3dViewDashDisabled),$.setUvClipEnabled(E5.graph3dViewUvClipEnabled),$.getHighlightHelper().resetProperties(),$.resetHeadlightProperties(),$.resetFogProperties(),$.setBatchInfoMap({}),$.setBatchColorDisabled(E5.graph3dViewBatchColorDisabled),$.setBatchInstancedDisabled(E5.graph3dViewBatchInstancedDisabled),$.setBatchBlendDisabled(E5.graph3dViewBatchBlendDisabled),$.setBatchBrightnessDisabled(E5.graph3dViewBatchBrightnessDisabled),$.setFlowBlendMode(E5.graph3dViewFlowBlendMode),$.setMoveStep(E5.graph3dViewMoveStep),$.setRotateStep(E5.graph3dViewRotateStep),$.setSortable(E5.graph3dViewSortable),$.setSortFunc(k5),$.setSkybox(k5),$.setToneMapping(k5),$.setToneMappingExposure(1),$.disableOIT(),$.setOITPassCount(3))),q.__innerHandler__=function(y){var _,s,p,q,O,L;kx(k.a("toolTipEnable"))&&(k.a("toolTipEnable")?$.enableToolTip():$.disableToolTip()),Hx(k.a("fontFaces"))&&k.a("fontFaces").forEach(function(y){E5.addFontFace(y.name,y.url)}),$ instanceof P.graph.GraphView&&(kx(k.a("zoomable"))&&$.setZoomable&&$.setZoomable(k.a("zoomable")),kx(k.a("pannable"))&&$.setPannable&&$.setPannable(k.a("pannable")),kx(k.a("rectSelectable"))&&$.setRectSelectable&&$.setRectSelectable(k.a("rectSelectable")),!0===k.a("fitContent")&&$.fitContent&&$.fitContent(!0,0)),$ instanceof P.graph3d.Graph3dView&&((y=y.scene)&&y.shadow!=M5&&$.shadowMap.setShadow(y.shadow,y.shadowParams),(L=k.a("sceneContext"))?(L.eye&&$.setEye(L.eye),L.center&&$.setCenter(L.center),$x(L.far)&&$.setFar(L.far),$x(L.near)&&$.setNear(L.near)):($x(k.a("sceneNear"))&&$.setNear(k.a("sceneNear")),$x(k.a("sceneFar"))&&$.setFar(k.a("sceneFar")),y&&(y.eye&&$.setEye(y.eye),y.center&&$.setCenter(y.center))),$x(k.a("sceneDevicePixelRatio"))&&$.setDevicePixelRatio(k.a("sceneDevicePixelRatio")),$x(k.a("sceneFovy"))&&$.setFovy(k.a("sceneFovy")),kx(k.a("sceneOrtho"))&&$.setOrtho(k.a("sceneOrtho")),$x(k.a("sceneOrthoWidth"))&&$.setOrthoWidth(k.a("sceneOrthoWidth")),kx(k.a("sceneShadowEnabled"))&&(k.a("sceneShadowEnabled")?$.enableShadow():$.disableShadow()),$x(k.a("sceneShadowDegreeX"))&&$.setShadowDegreeX(k.a("sceneShadowDegreeX")),$x(k.a("sceneShadowDegreeZ"))&&$.setShadowDegreeZ(k.a("sceneShadowDegreeZ")),$x(k.a("sceneShadowIntensity"))&&$.setShadowIntensity(k.a("sceneShadowIntensity")),k.a("sceneShadowQuality")!=M5&&$.setShadowQuality(k.a("sceneShadowQuality")),k.a("sceneShadowType")&&$.setShadowType(k.a("sceneShadowType")),$x(k.a("sceneShadowRadius"))&&$.setShadowRadius(k.a("sceneShadowRadius")),$x(k.a("sceneShadowBias"))&&$.setShadowBias(k.a("sceneShadowBias")),kx(k.a("sceneDashEnable"))&&$.setDashDisabled(!k.a("sceneDashEnable")),kx(k.a("sceneUvClipEnabled"))&&$.setUvClipEnabled(k.a("sceneUvClipEnabled")),w5(k.a("sceneHighlightMode"))&&$.setHighlightMode(k.a("sceneHighlightMode")),$x(k.a("sceneHighlightWidth"))&&$.setHighlightWidth(k.a("sceneHighlightWidth")),k.a("sceneHighlightColor")&&$.setHighlightColor(k.a("sceneHighlightColor")),k.a("sceneHighlightType")&&$.setHighlightType(k.a("sceneHighlightType")),k.a("sceneHighlightGlow")&&$.setHighlightGlow(k.a("sceneHighlightGlow")),k.a("sceneHighlightStrength")&&$.setHighlightStrength(k.a("sceneHighlightStrength")),kx(k.a("sceneHeadlightEnable"))&&$.setHeadlightDisabled(!k.a("sceneHeadlightEnable")),k.a("sceneHeadlightDirection")!=M5&&$.setHeadlightDirection(k.a("sceneHeadlightDirection")),$x(k.a("sceneHeadlightRange"))&&$.setHeadlightRange(k.a("sceneHeadlightRange")),k.a("sceneHeadlightColor")&&$.setHeadlightColor(k.a("sceneHeadlightColor")),$x(k.a("sceneHeadlightIntensity"))&&$.setHeadlightIntensity(k.a("sceneHeadlightIntensity")),$x(k.a("sceneHeadlightAmbientIntensity"))&&$.setHeadlightAmbientIntensity(k.a("sceneHeadlightAmbientIntensity")),$x(k.a("sceneHeadlightRatioForPhysicalMaterial"))&&$.setHeadlightRatioForPhysicalMaterial(k.a("sceneHeadlightRatioForPhysicalMaterial")),$x(k.a("sceneHeadlightGroup"))&&$.setHeadlightGroup(k.a("sceneHeadlightGroup")),kx(k.a("sceneFogEnable"))&&$.setFogDisabled(!k.a("sceneFogEnable")),k.a("sceneFogMode")&&$.setFogMode(k.a("sceneFogMode")),$x(k.a("sceneFogDensity"))&&$.setFogDensity(k.a("sceneFogDensity")),k.a("sceneFogColor")&&$.setFogColor(k.a("sceneFogColor")),$x(k.a("sceneFogNear"))&&$.setFogNear(k.a("sceneFogNear")),$x(k.a("sceneFogFar"))&&$.setFogFar(k.a("sceneFogFar")),kx(k.a("sceneBatchBrightnessDisabled"))&&$.setBatchBrightnessDisabled(k.a("sceneBatchBrightnessDisabled")),k.a("sceneFlowBlendMode")!==k5&&$.setFlowBlendMode(k.a("sceneFlowBlendMode")),k.a("sceneToneMapping")!==k5&&$.setToneMapping(k.a("sceneToneMapping")),$x(k.a("sceneToneMappingExposure"))&&$.setToneMappingExposure(k.a("sceneToneMappingExposure")),kx(k.a("sceneBatchBlendDisabled"))&&$.setBatchBlendDisabled(k.a("sceneBatchBlendDisabled")),kx(k.a("sceneBatchColorDisabled"))&&$.setBatchColorDisabled(k.a("sceneBatchColorDisabled")),kx(k.a("sceneBatchInstancedDisabled"))&&$.setBatchInstancedDisabled(k.a("sceneBatchInstancedDisabled")),k.a("sceneBatchInfoMap")&&$.setBatchInfoMap(k.a("sceneBatchInfoMap")),k.a("sceneRenderLayerInfoMap")&&$.setRenderLayerInfoMap(k.a("sceneRenderLayerInfoMap")),$x(k.a("sceneMoveStep"))&&$.setMoveStep(k.a("sceneMoveStep")),$x(k.a("sceneRotateStep"))&&$.setRotateStep(k.a("sceneRotateStep")),kx(k.a("sceneSortable"))&&$.setSortable(k.a("sceneSortable")),Ex(k.a("sceneSortFunc"))&&$.setSortFunc(k.a("sceneSortFunc")),w5(k.a("sceneShaderSummary"))&&($.enableShaderCompileParallel(),$.setShaderGCInterval(1/0),$.deserializePhysicalShader(k.a("sceneShaderSummary"))),kx(k.a("sceneOIT"))&&$.enableOIT(),$x(k.a("sceneOITPassCount"))&&$.setOITPassCount(k.a("sceneOITPassCount")),(L=k.a("sceneSkyboxType")||"sphere")!=M5&&(s=!(_={}),y=k.a("sceneSkyboxColor"),"sphere"===L?(_.shape3d=L,(q=k.a("sceneSkyboxImage"))&&(_["shape3d.image"]=q,s=!0)):"cube"===L?(_.shape3d=k5,["front","back","left","right","top","bottom"].forEach(function(y){var q=y+".image",y=y.charAt(0).toUpperCase()+y.slice(1);(y=k.a("sceneSkybox"+y+"Image"))&&(_[q]=y,s=!0)})):"color"===L&&y&&(s=!0),s&&(p=new WQ,O=k.a("sceneSkyboxDiameter"),$x(O)?p.s3(O,O,O):p.s3(20,20,20),_["body.color"]=k.a("sceneSkyboxBodyColor"),_.envmap=k.a("sceneSkyboxEnvmap"),_["envmap.probe"]=k.a("sceneSkyboxEnvmapProbe"),_.roughness=k.a("sceneSkyboxRoughness"),_["shape3d.light"]=_["all.light"]=k.a("sceneSkyboxLight"),_["light.mask"]=k.a("sceneSkyboxLightMask"),_["headlight.ambientIntensity"]=k.a("sceneSkyboxHeadLightAmbientIntensity"),_["skybox.blur.size"]=k.a("sceneSkyboxBlurSize"),_["skybox.blur.resolution"]=k.a("sceneSkyboxBlurResolution"),_["texture.wrap"]="clampToEdge",_["3d.clipbox.mask"]=g4,_["effect.flow.mask"]=g4,"color"===L&&(_.shape3d="sphere",(O=(q=p.s("shape3d.image"))&&P.Default.getImage(q))&&"CANVAS"===O.tagName||(O=w.createElement("canvas"),q=P.Math.generateUUID(),P.Default.setImage(q,O)),q&&$.getTextureMap()&&$.deleteTexture(q),P.Default.setCanvas(O,2,1024,1),(L=O.getContext("2d")).clearRect(0,0,2,1024),L.beginPath(),L.rect(0,0,2,1024),gl(L,y,function(y){return y},!1,{x:0,y:0,width:2,height:1024}),L.fill(),L.restore(),_["shape3d.image"]=q),p.s(_),["X","Y","Z"].forEach(function(y){var q=k.a("sceneSkyboxRotation"+y);$x(q)&&p["setRotation"+y](q)}),$.setSkybox(p))))},k.deserialize(y,q.rootParent,q)},y.isDebugTipShowing=function(){return!!this._debugDiv},y.showDebugTip=function(){var y,_,s=this,p=s._debugDiv;p||((p=s._debugDiv=w.createElement("div")).style.position="absolute",p.style.overflow="hidden",p.style.font=E5.debugTipLabelFont,p.style.padding="6px",p.style.backgroundColor=E5.debugTipBackground,p.style.color=E5.debugTipLabelColor,y=s.getView(),s._79O?y.insertBefore(p,s._79O):y.appendChild(p),_=function(){s.redraw();var y=s._canvas,y="FPS: "+s._fpsInfo.fps+"<br/>Datas: "+s.dm().getDatas().length+(y?"<br/>Size: "+y.width+" * "+y.height:""),q=s.dm()._historyManager;q&&(y+="<br/>Undoes: "+q.getHistories().length+" index: "+q.getHistoryIndex()),(q=s.getDebugTip())&&(y+="<hr>"+q),p.innerHTML=y,s._isDebugging&&requestAnimationFrame(_)},requestAnimationFrame(_),s._isDebugging=!0)},y.hideDebugTip=function(){var y=this._debugDiv;y&&(delete this._debugDiv,this.getView().removeChild(y),this._isDebugging=!1)},y.updateDOMAppendMatrix=function(){var y=this.getView();y&&(y.updateAppendMatrix=!0)},y.countFrame=function(){var y,q;this._isDebugging&&(1e3<(y=Date.now())-(q=this._fpsInfo).time?(q.fps=Math.round(1e5*(q.frames+1)/(y-q.time))/100,q.time=y,q.frames=0):q.frames++)}},ms_icons:function(y,q){y.getRotation=function(y,q){return y==M5?0:y},y._15O=function(){var y=this,q=y.s(PD);if(q){var _,s=y,p=y.data||y._data,O=p.getRotation&&p.getRotation(),L=y._38o={icons:q,rects:{}};for(_ in q){var $=q[_],k=g($.shape3d,p,s);if(!(!1===g($.visible,p,s)||g($.for3d,p,s)&&!y.I3d||k&&!y.I3d)){var M=k?[k]:g($.names,p,s),E=M?M.length:0,H=g($.position,p,s)||3,w=g($.offsetX,p,s)||0,Q=g($.offsetY,p,s)||0,x=g($.direction,p,s)||kD,S=(X=g($.gap,p,s))!=M5?X:1,X=g($.rotation,p,s),T=g($.keepOrien,p,s),i=g($.rotationFixed,p,s)?X:y.getRotation(X,T,H),N=M5,a=L.rects[_]=new Array(E);$x(O)&&($x(i)?i+=O:i=O),a.rotation=i;for(var l=0;l<E;l++){var j,Z,K,C=M[l];k?Z=j=0:(C=r(C),j=g($.width,p,s),Z=g($.height,p,s),j==M5&&(j=d8(C,p)),Z==M5&&(Z=yu(C,p))),N?x===kD?w+=j/2:x===MD?w-=j/2:x===ED?Q-=Z/2:Q+=Z/2:N={width:j,height:Z},y.I3d?(C=-j/2,K=-Z/2,K={width:j,height:Z,mat:y._16O(g($.autorotate,p,s),H,N,g($.face,p,s)||d5,g($.t3,p,s),g($.r3,p,s),g($.rotationMode,p,s),w,Q),vs:new T8([C,-K,0,C,-K-Z,0,C+j,-K-Z,0,C+j,-K,0])}):(K={x:(C=y.getPosition(H,w,Q,N,g($.positionFixed,p,s))).x-j/2,y:C.y-Z/2,width:j,height:Z},y._68o(K,i)),a[l]=K,x===kD?w+=j/2+S:x===MD?w-=j/2+S:x===ED?Q-=Z/2+S:Q+=Z/2+S}}}}}}});var ju={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},Zu={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},Ku={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},Cu={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},Bu={position:1,width:1,height:1,expanded:1,rotation:1,anchor:1,scale:1,"s:edge.points":1},Fu={"edge.type":1,"edge.group":1},Vu={rotation:1,rotationX:1,rotationZ:1,rotation3d:1},hu={rotation:1,position:1,width:1,height:1,anchor:1,scale:1,host:1,"s:vector.layoutable":1},tu={position:1,width:1,height:1,anchor:1,scale:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},uu={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},Ju={shape:1,thickness:1,position:1,anchor:1,scale:1},Du=function(y){if(!y)return M5;var q,_;if(Qx(y))return q=y._40I,_=y._41I,q&&_&&(q=Du(q))===Du(_)?q:M5;for(var s=y._parent;Qx(s)&&!s.ISubGraph;)s=s._parent;return s?s.ISubGraph?s:Du(s):M5},cu=function(y,q,_,s){var p=q.getStyle(_)*s;p&&s8(y,p),(p=q.getStyle(_+".left")*s)&&(y.x-=p,y.width+=p),(p=q.getStyle(_+".right")*s)&&(y.width+=p),(p=q.getStyle(_+".top")*s)&&(y.y-=p,y.height+=p),(p=q.getStyle(_+".bottom")*s)&&(y.height+=p),y.width<0&&(y.width=-y.width,y.x-=y.width),y.height<0&&(y.height=-y.height,y.y-=y.height)},Ru=function(y){for(var q,_=0,s=y.size();_<s;_++)if(q=y.getChildAt(_),W(q)&&Ru(q))return!0;return y.hasAgentEdges()},ou=function(y){if(!y)return M5;for(var q=y._parent;xx(q);){if(!xx(q._parent))return q.isExpanded()?y:q;q.isExpanded()||(y=q),q=q._parent}return y},Yu=function(y,q){if(!y||!q)return M5;var _,s,p,O=Du(y),L=Du(q);if(O===L)return y;for(;L&&O!==L;)L=Du(L);if(O===L)return y;(_=new n).add(y,0);for(var $=y._parent;W($)&&!q.isDescendantOf($);)_.add($,0),$=$._parent;for(p=_.size(),s=0;s<p;s++){var k=_.get(s);if(xx(k)&&!k.isExpanded())return k;if(k.ISubGraph)return k}return y},Pu=function(y,q,_){var s,p,O,L="target"===(_="target"!==_?"source":_)?q.getTargetAgent():q.getSourceAgent(),_="edge."+_+".";return Qx(L)?((s=y.getDataUI(L))._79o(),0<=(p=q.s(_+"index"))?(O=OQ(s))[Math.max(0,Math.min(p,O.length-1))]:(p=q.s(_+"percent")||0,p=Math.max(0,Math.min(p,1)),O=yQ(s),pQ(O,100*p))):mu(y,L,q.s(_+"position"),q.s(_+"offset.x"),q.s(_+"offset.y"),q.s(_+"anchor.x"),q.s(_+"anchor.y"))},mu=function(y,q,_,s,p,O,L){if(!q)return M5;var $,k,M,E,H,w=q.getRotation?q.getRotation():0;return _=O!==k5||L!==k5?(O=O===k5?.5:O,L=L===k5?.5:L,M=q.getScale(),w&&!Sx(q,y)||M.x<0||M.y<0?($=q.getPosition(),E=q.getWidth(),k=q.getHeight(),H=q.getAnchor(),new WB(w,$.x,$.y,M.x,M.y).tf((O-H.x)*E,(L-H.y)*k)):{x:($=lu(y,q)).x+O*$.width,y:$.y+L*$.height}):BU(_,lu(y,q)),w&&(H=s*(M=H5(w))-p*(E=p5(w)),p=s*E+p*M,s=H),_.x+=s,_.y+=p,_},Wu=function(y,q){var _,s,p=function(y,q){if(!y||!q)return M5;var _,s,p,O,L,$;if(y===q){if(!(O=y.getLoopedEdges()))return M5;O=new n(O)}else{if(L=y.getAgentEdges(),$=q.getAgentEdges(),!L||!$)return M5;for(s=L.size(),_=0;_<s;_++)p=L.get(_),$.contains(p)&&(O=O||new n).add(p)}if(O)for(_=0;_<O.size();_++)(p=O.get(_)).getStyle(rD)===tD&&(p._22I(M5),O.removeAt(_),_--);return O}(y,q);p&&!p.isEmpty()&&(1===p.size()?p.get(0)._22I(M5):(_=new n,s=new n,p.each(function(y){y=y.s("edge.group"),_.contains(y)||_.add(y)}),_.sort(),_.each(function(q){s.add(new P.EdgeGroup(p.toList(function(y){return q===y.s("edge.group")}),s))}),s.each(function(q){q.each(function(y){y._22I(q)})})))},Au=function(y,q,_){var s=y._canvas,y=(y._zoom,p8(q,s)),q=p8(_,s);return{x:y.x-q.x,y:y.y-q.y}},zu=function(y,q){var _,s,p,O,L,$,k,M,E,H,w,Q;q&&(_=q.rect,s=q.color,p=q.rotation,O=q.labelWidth,L=q.background,$=q.opacity,k=(Q=q.scale)!=M5&&1!==Q,$!=M5&&(M=y.globalAlpha,y.globalAlpha*=$),(p||k)&&(y.save(),E=_.x+_.width/2,H=_.y+_.height/2,Ll(y,E,H),p&&$l(y,p),k&&y.scale(Q,Q),Ll(y,-E,-H)),L&&dl(y,_.x,_.y,_.width,_.height,L),O&&(w=_.width,(Q=y.createLinearGradient(_.x,_.y,_.x+w,_.y)).addColorStop(0,s),Q.addColorStop(.9,s),Q.addColorStop(1,AL),s=Q,_.width=O),Ux(y,q.ss,_,q.font,s,q.align,q.decoration),O&&(_.width=w),(p||k)&&y.restore(),$!=M5&&(y.globalAlpha=M))},eu=function(y,q){var _,s,p,O,L,$,k,M,E,H,w,Q,x,S,X,T,i;q&&(s=(_=q.rect).x,p=_.y,O=_.width,L=_.height,$=q.background,k=q.backgroundImage,M=q.borderWidth,E=q.borderColor,H=q.labelWidth,w=q.opacity,Q=(i=q.scale)!=M5&&1!==i,w!=M5&&(x=y.globalAlpha,y.globalAlpha*=w),Q&&(y.save(),S=_.x+_.width/2,T=_.y+_.height/2,Ll(y,S,T),y.scale(i,i),Ll(y,-S,-T)),q.expanded?(i=s5(8,O/4),S=p+L-8,y.fillStyle=$,y.beginPath(),y.moveTo(s,p),y.lineTo(s,S),y.lineTo(s+O/2,S),y.lineTo(s+O/2,p+L),y.lineTo(s+O/2+i,S),y.lineTo(s+O,S),y.lineTo(s+O,p),y.closePath(),y.fill(),M&&(y.lineWidth=M,y.lineJoin="round",y.lineCap="round",E?y.strokeStyle=E:(y.strokeStyle=YA($),y.beginPath(),y.moveTo(s+O,p),y.lineTo(s+O,S),y.lineTo(s+O/2+i,S),y.lineTo(s+O/2,p+L),y.stroke(),y.strokeStyle=oA($),y.beginPath(),y.moveTo(s+O,p),y.lineTo(s,p),y.lineTo(s,S),y.lineTo(s+O/2,S),y.lineTo(s+O/2,p+L)),y.stroke()),k?VA(y,r(k),mL,_.x,_.y,_.width,_.height-8,q.data,q.view):(_.height-=8,$=q.color,H&&((T=y.createLinearGradient(s,p,s+(X=O),p)).addColorStop(0,$),T.addColorStop(.9,$),T.addColorStop(1,AL),$=T,_.width=H),Ux(y,q.ss,_,q.font,$,q.align),H&&(_.width=X),_.height+=8)):q.icon?qu(y,r(q.icon),s,p,O,L,q.data,q.view):(i=O/2,M&&(y.lineWidth=M,y.lineJoin="round",y.lineCap="round",y.strokeStyle=E||YA($),y.beginPath(),y.arc(s+i,p+i,i,u5,1.6*u,!0),y.moveTo(s+i,p+L),y.lineTo(s+O-i/5,p+i),y.stroke(),y.strokeStyle=E||oA($),y.beginPath(),y.arc(s+i,p+i,i,1.6*u,u5,!0),y.moveTo(s+i,p+L),y.lineTo(s+i/5,p+i),y.stroke()),y.fillStyle=$,y.beginPath(),y.arc(s+i,p+i,i,0,O5,!0),y.moveTo(s+i,p+L),y.lineTo(s+O-i/5,p+i),y.lineTo(s+i/5,p+i),y.closePath(),y.fill(),y.fillStyle=q.color,y.beginPath(),y.arc(s+i,p+i,i/3,0,O5,!0),y.fill()),Q&&y.restore(),w!=M5&&(y.globalAlpha=x))},fu=function(y,q){return 2*y<q?y:q/2},Gu=function(y,q,_,s){if(!y||!q)return 0;var p=D5(q.y-y.y,q.x-y.x);return(p=!_&&q.x<y.x?p+u:p)+s},ru=function(y,q,_,s,p,O,L){return L&&(y.x>q.x||y.x===q.x&&y.y>q.y)&&(_=CU[_],p=-p),(L=BU(_,{x:0,y:0,width:vA(y,q),height:0},O)).x+=s,L.y+=p,(L=new WB(D5(q.y-y.y,q.x-y.x)).tf(L)).x+=y.x,L.y+=y.y,L},gu=function(y,_,s,q,p){if(y._19Q=!0,!s.getEdgeGroup())return q?s.s("edge.gap"):0;if(Qx(s.getSourceAgent())||Qx(s.getTargetAgent()))return 0;var O,L=0,$=0,k=0;return s.getEdgeGroup().getSiblings().each(function(y){y.each(function(y){var q;_.isVisible(y)&&y.s(rD)==p&&(q=y.s("edge.gap"),O?$+=k/2+q/2:O=y,k=q,y===s&&(L=$))})}),q?$-L+k:(q=L-$/2,O&&s._40I!==O._40I&&(y._19Q=!1),q)},nu=function(y){if(1===(q=y._getValidSelection()).length){var q,_=(q=q[0])instanceof P.Edge;if((q instanceof P.Shape||_)&&(!(_=_&&q.s("edge.type"))||"points"===_))return(_=y.gv).isPointEditable&&!_.isPointEditable(q)||!_.isEditable(q)?void 0:q}},vu=P.graph={},y=function(y,q,_){w8("ht.graph."+y,q,_)},bu=(P.layout={},{}),Iu=function(y,q,_,s,p,O,L,$){var k=L._zoom;if(!k)return q;if(k!==L._cacheZoom&&(L._cacheZoom=k,L._cacheImage={}),k*=sA,s=Math.ceil(s),p=Math.ceil(p),2048<s*k||2048<p*k)return q;var M,E=[q.uuid,s,p,_].join("_"),H=O.s("state");if(H&&(E+="_"+H),(H=q.cacheRule)&&(Ex(H)?Q=H(O,L):Ex(H.func)&&(Q=H.func(O,L))),Q===k5&&O instanceof P.Data){var w=q.dataBindings;if(w){for(var Q="",x=w.length-1;0<=x;x--){var S=O.ca(w[x].attr);Mx(S)||Hx(S)||(Q+="_"+S)}Q=Q.slice(1)}}if(E+="_"+Q,s<=p&&s*k<1?(M=p/s,p=(s=1/k)*M):p<=s&&p*k<1&&(M=s/p,s=(p=1/k)*M),s=Math.ceil(s),p=Math.ceil(p),!(H=L._cacheImage[E])){if(r8=!0,H=P.Default.toCanvas(q,s,p,_,O,L,$,k),!r8)return q;L._cacheImage[E]=H}return H};ax(E5,{setImageCacheRule:function(y,q){var _,s;for(s in q||"object"!=typeof y?(_={})[y]=q:_=y,_){var p=_[s];w5(s)?(w8=r(s))?w8.cacheRule=p:bu[s]=p:s.cacheRule=p}}});(q={comps:[{type:iD,points:[85,50,70,115,100,71,86,107,88,49,43,78,71,116,73,53,102,101,54,86,66,71,121,84,81,102,51,51,104,82,102,89,57,72,88,113,86,102,122,100,103,54,52,61],borderWidth:1,borderColor:M5}]})[ZD]=q[KD]=160,Y.Image&&((XQ=new Y.Image).src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAALUlEQVRYR+3QQREAAAABQfqXFsNnFTizzXk99+MAAQIECBAgQIAAAQIECBAgMBo/ACHo7lH9AAAAAElFTkSuQmCC",r5("default_blank",XQ)),r5("node_image",dn(30,30,[{type:m,rect:[4,5,22,16],gradient:OA,gradientColor:PU,background:x},{type:m,rect:[2,3,26,20],borderWidth:1,borderColor:x},{type:m,rect:[11,23,8,4],background:x},{type:m,rect:[6,27,18,2],background:x}])),r5("node_icon",dn(16,16,[{type:m,rect:[2,2,12,10],gradient:OA,gradientColor:PU,background:x},{type:xD,rect:[2,2,12,10],width:1,color:x},{type:m,rect:[6,12,4,2],background:x},{type:m,rect:[4,14,8,1],background:x}])),r5("block_icon",dn(16,16,[{type:xD,rect:[1,1,14,14],width:1,color:x}])),r5("group_image",dn(66,39,[{type:m,rect:[44.3,18,18.1,12.8],gradient:OA,gradientColor:PU,background:x},{type:m,rect:[3.3,17.8,18.1,12.8],gradient:OA,gradientColor:PU,background:x},{type:m,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:x,gradient:OA,gradientColor:PU,background:x},{type:m,rect:[26.2,29.4,12.8,4.2],background:x},{type:m,rect:[21.3,33.5,22.5,2.3],background:x},{type:m,rect:[5.3,32.7,14.1,2.1],background:x},{type:m,rect:[9,30.4,6.7,2.4],background:x},{type:m,rect:[50,30.7,6.7,2.4],background:x},{type:m,rect:[46.3,33,14.1,2.1],background:x}])),r5("group_icon",dn(16,16,[{type:m,rect:[4,12,4,2],background:x},{type:m,rect:[2,13,8,1],background:x},{type:m,rect:[12,12,2,1],background:x},{type:m,rect:[11,13,4,1],background:x},{type:m,rect:[10,7,6,5],gradient:OA,gradientColor:PU,background:x},{type:m,rect:[1,2,10,10],gradient:OA,gradientColor:PU,background:x},{type:xD,rect:[1,2,10,10],width:1,color:x}])),r5("refGraph_icon",dn(16,16,[{type:"shape",borderWidth:1,borderColor:x,borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:x,borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}])),r5("edge_icon",dn(16,16,[{type:m,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:OA,gradientColor:PU,background:x},{type:m,rect:[10.8,1,4,4],background:x},{type:m,rect:[1,11,4,4],background:x}])),r5("subGraph_image",dn(72,45,[{type:iD,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:OA,gradientColor:PU,background:x},{type:m,rect:[29.6,30.7,3.6,1.8],background:x},{type:m,rect:[28.4,32.3,6,1.2],background:x},{type:m,rect:[37.3,32,10.8,1.8],background:x},{type:m,rect:[39.1,29.9,7.2,2.3],background:x},{type:m,rect:[26.6,23.7,9.6,7.2],gradient:OA,gradientColor:PU,background:x},{type:m,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:x,gradient:OA,gradientColor:PU,background:x}])),r5("subGraph_icon",dn(17,17,[{type:iD,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:OA,gradientColor:PU,background:x}])),r5("shape_icon",dn(16,16,[{type:iD,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:x}])),r5("polyline_icon",dn(16,16,[{type:iD,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:x},yx(7.5,.4),yx(7.5,6.3),yx(13.6,6.3),yx(13.6,14),yx(.7,13.9),yx(.7,.3)])),r5("grid_icon",dn(16,16,[{type:m,rect:[1,1,4,4],background:x,gradient:OA,gradientColor:PU},{type:m,rect:[6,1,4,4],background:x,gradient:OA,gradientColor:PU},{type:m,rect:[11,1,4,4],background:x,gradient:OA,gradientColor:PU},{type:m,rect:[11,6,4,4],background:x,gradient:OA,gradientColor:PU},{type:m,rect:[6,6,4,4],background:x,gradient:OA,gradientColor:PU},{type:m,rect:[1,6,4,4],background:x,gradient:OA,gradientColor:PU},{type:m,rect:[11,11,4,4],background:x,gradient:OA,gradientColor:PU},{type:m,rect:[6,11,4,4],background:x,gradient:OA,gradientColor:PU},{type:m,rect:[1,11,4,4],background:x,gradient:OA,gradientColor:PU}])),r5("light_icon",dn(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:x},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:x,gradient:OA,gradientColor:PU,background:{func:function(y){return y=y?y.s(G4):M5,Hx(y)?"rgb("+R5(255*y[0])+","+R5(255*y[1])+","+R5(255*y[2])+")":y||x}}}])),r5("text_icon",dn(16,16,[{type:"shape",points:[3,3,13,3,8,3,8,14],segments:[1,2,1,2],borderWidth:1,borderColor:x}])),r5("border_image",{fitSize:!0,comps:[{type:"border",relative:!0,rect:[0,0,1,1],color:{func:"style@border_color"},width:{func:"style@border_width"}}]}),r5("columnChart_image",{fitSize:!0,boundExtend:150,comps:[{type:{func:"style@chart.type"},relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"}}]}),r5("lineChart_image",{fitSize:!0,boundExtend:150,comps:[{type:"lineChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"},linePoint:{func:"style@chart.line.point"},lineWidth:{func:"style@chart.line.width"},line3d:{func:"style@chart.line.3d"}}]}),r5("pieChart_image",{fitSize:!0,boundExtend:150,comps:[{type:"pieChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},hollow:{func:"style@chart.hollow"},startAngle:{func:"style@chart.start.angle"},values:{func:"style@chart.values"},colors:{func:"style@chart.colors"}}]});var Uu=function(y,q,_,s,p,O){var L,$,k,M,E,H=[],w=-((s=Math.abs(s)>2*Math.PI?2*Math.PI:s)/(L=Math.ceil(Math.abs(s)/(Math.PI/4)))),Q=-_;if(0<L){s=y+Math.cos(_)*p,_=q+Math.sin(-_)*O,H.push({x:s,y:_});for(var x=0;x<L;x++)E=(Q+=w)-w/2,$=y+Math.cos(Q)*p,k=q+Math.sin(Q)*O,M=y+Math.cos(E)*(p/Math.cos(w/2)),E=q+Math.sin(E)*(O/Math.cos(w/2)),H.push({x:M,y:E}),H.push({x:$,y:k})}return H},du=function(y){if(y){var q=y._data;if(q instanceof P.Shape)return{points:q.getPoints(),segments:q.getSegments()};if(q instanceof P.Edge&&(q=y._78o)){var y=q.type,_=q.points,s=q.segments,p=q.edgeTypeInfo;if(!y||_){var O=(L=q.sourcePoint).x,L=L.y,$=(k=q.targetPoint).x,k=k.y;if(y)s?((M=new n({x:O,y:L})).addAll(_),M.add({x:$,y:k}),E=new n(s._as)):(M=new n({x:O,y:L}),_.each(function(y){M.add(y)}),M.add({x:$,y:k}));else if(q.looped)for(var M=new n(Uu(O,L,0,2*Math.PI,q.radius,q.radius)),E=new n([1]),H=0;H<(M.size()-1)/2;H++)E.add(3);else M=new n,q.center?(M.add({x:q.c1.x,y:q.c1.y}),M.add({x:O,y:L}),M.add({x:$,y:k}),M.add({x:q.c2.x,y:q.c2.y})):(M.add({x:O,y:L}),M.add({x:$,y:k}))}else p&&(M=new n(p.points._as),p.segments&&(E=new n(p.segments._as)));return{points:M,segments:E}}}},yQ=function(y,q,_){if(null==q){if(!(y=du(y)))return;q=y.points,_=y.segments}if(q){if("number"==typeof(q=Array.isArray(q)?new n(q):q).get(0)){for(var s=new P.List,p=0;p<q.size();p+=2)s.add({x:q.get(p),y:q.get(p+1)});q=s}if(!_){_=[1];for(var O=q.length-1;0<O;O--)_.push(2)}Array.isArray(_)&&(_=new n(_));for(var L=bl(q._as,_._as,50),$=L.length,k=[],p=0;p<$;p++){var M=L[p];1<M.length&&k.push(M)}return k}},qQ=function(y){for(var q=0,_=y.length-1,s=0;s<_;s++){var p=y[s],O=(L=y[s+1]).x-p.x,L=L.y-p.y;q+=Math.sqrt(O*O+L*L)}return q},_Q=function(y,q){for(var _=0,s=q.length,p=0;p<s;p++)if(y<(_+=q[p]))return p;return Math.min(p,s-1)},sQ=function(y,q){for(var _=0,s=0,p=y.length-1,O=0;O<p;O++){var L=y[O],$=y[O+1],k=$.x-L.x,M=$.y-L.y;if(q<(_+=$=Math.sqrt(k*k+M*M))){_-=$,s=O;break}}var E=y[s],H=y[s+1],H=Math.atan2(H.y-E.y,H.x-E.x),w=q-_,M=Math.sin(H)*w,k=Math.cos(H)*w;return{x:E.x+k,y:E.y+M}},pQ=function(y,q){if(y){var _;if(0===q)_=y[0][0];else if(100===q)_=(y=y[y.length-1])[y.length-1];else{for(var s=0,p=[],O=y.length,L=0;L<O;L++){var $=y[L];s+=$=qQ($),p.push($)}for(var k=_Q(q=s*q/100,p),M=0,E=0;E<k;E++)M+=p[E];_=sQ(y[k],q-=M)}return _}},OQ=function(y){for(var q,_,s,p,O,L=[],$=-1,k=0,M=((s=y instanceof HE?(_=(q=du(y)).points,q.segments):(_=y,arguments[1]))||_).length;k<M;k++){if(3===(p=s?s.get(k):1))O=2;else if(4===p)O=3;else{if(5===p)continue;O=1}$+=O,L.push(_.get($))}return L},LQ=(ax(E5,{_edgeProtectMethod:{getStraightLinePoints:yQ,calculateLineLength:qQ,calcSegmentIndexByDistance:_Q,calculatePointAlongLine:sQ,getPercentPosition:pQ,getRealPointsFromDataUI:OQ}}),function(y,q){for(var _=y.vertices,s=0;s<_.length;s++){var p=_[s],O=p.y;p.y=p.z,p.z=-O,q&&(p.y+=q)}}),$Q=function(y){for(var q,_,s,p,O,L,$=[],k=[],M=[],E=y.faces,H=0,w=E.length;H<w;H++,0){var Q=E[H];1===Q.i?(q||(q=[],_=[],s=[]),kQ(Q,H,0,0,y,q,s,_)):2===Q.i?(p||(p=[],O=[],L=[]),kQ(Q,H,0,0,y,p,L,O)):kQ(Q,H,0,0,y,$,M,k)}return{vs:$,uv:k,ns:M,top_vs:q,top_uv:_,top_ns:s,bottom_vs:p,bottom_uv:O,bottom_ns:L}},kQ=function(y,q,_,s,p,O,L,$){var k,M,E,H=p.vertices,p=p.faceVertexUvs,w=H[y.a],Q=H[y.b],H=H[y.c];O.push(w.x,w.y,w.z,Q.x,Q.y,Q.z,H.x,H.y,H.z);3===(O=y.vertexNormals).length?(k=O[0],M=O[1],E=O[2]):k=M=E=y.normal,L.push(k.x,k.y,k.z,M.x,M.y,M.z,E.x,E.y,E.z),w=p[0][q][0],Q=p[0][q][1],H=p[0][q][2];$.push(w.x,w.y,Q.x,Q.y,H.x,H.y)},MQ=(jg=new Q5,Zg=new Q5,Kg=new Q5,Cg=new Q5,Bg=new Q5,Fg=new Q5,Vg=new Q5,hg=new Q5,tg=new Q5,ug=new Q5,Jg=new Q5,Dg=new Q5,BM.prototype._findVertex=function(y,q,_){return Dg.fromArray(y,3*q),_&&Dg.applyMatrix4(_),y=[Dg.x,Dg.y,Dg.z].join(","),(q=this._vertexMap[y])||((_=Dg.clone())._key=y,this._vertexMap[y]=q=_),q},BM.prototype._findLine=function(y,q){var _=[y,q];return y._key>q._key&&_.reverse(),_._key=[_[0]._key,_[1]._key].join("|"),(y=this._lineMap[_._key])||((this._lineMap[_._key]=y=_)._triangles={},_._planes={},this._lineList.push(_)),y},cg=new Q5(1,0,0),Rg=new Q5(0,1,0),og=new Q5(0,0,1),Yg=new Q5,Pg=new Q5,mg=new _,BM.prototype._addTriangle=function(y,q,_,s,p,O,L,$){var k,M=this._findVertex(y,_,O),E=this._findVertex(y,s,O),y=this._findVertex(y,p,O),O=this._findLine(M,E),H=this._findLine(E,y),w=this._findLine(y,M);q?(k=(new Q5).fromArray(q,3*_),_=(new Q5).fromArray(q,3*s),s=(new Q5).fromArray(q,3*p),L&&(k.applyMatrix3(L),_.applyMatrix3(L),s.applyMatrix3(L)),k._key=hM(k,$),_._key=hM(_,$),s._key=hM(s,$),FM(O,0,k,E,_,y,s),FM(H,0,_,y,s,M,k),FM(w,0,s,M,k,E,_)):(Pg.subVectors(y,E),Yg.subVectors(E,M),(k=(new Q5).crossVectors(Yg,Pg))._key=hM(k,$),VM(O,y,k),VM(H,M,k),VM(w,E,k))},BM.prototype._toLineVS=function(y){for(var q=this._lineList,_=0,s=q.length;_<s;++_){var p,O=q[_],L=!1;for(p in O._triangles)if(1==o.keys(O._triangles[p]).length){y.push(O[0].x,O[0].y,O[0].z,O[1].x,O[1].y,O[1].z),L=!0;break}if(!L)for(var $ in O._planes)if(1==O._planes[$]._vertices.length){y.push(O[0].x,O[0].y,O[0].z,O[1].x,O[1].y,O[1].z),L=!0;break}}},[function(y,q){var _,s,p,O,L,$,k,M;if((l=y._ctlineModel)||(y._ctlineModel=l=[]),l[0])return l[0];var E,H,w,Q,x,S,X,T,i,N=Hx(y)?y:[y],a=["","top_","bottom_"],l=[],j=[];for(N3(N,q,j),_=0,s=j.length;_<s;_++)if((k=j[_])&&(M=k.mesh))for(A_(M),p=0,O=a.length;p<O;p++)if($=M[a[p]+"lvs"])for(X=l.length,T=$.length,l.length=X+T,i=0;i<T;++i,++X)l[X]=$[i];else if(L=M[a[p]+"vs"]){for(var Z=M[a[p]+"is"],K=k.matrix,C=Z?Z.length:L.length/3,B=0;B<C-1;)S=Z?(E=Z[B],H=Z[B+1],w=Z[B+2],Q=Z[B+3],x=Z[B+4],Z[B+5]):(H=(E=B)+1,w=B+2,Q=B+3,x=B+4,B+5),jg.fromArray(L,3*E),Zg.fromArray(L,3*H),Kg.fromArray(L,3*w),Cg.fromArray(L,3*Q),Bg.fromArray(L,3*x),Fg.fromArray(L,3*S),K&&(jg.applyMatrix4(K),Zg.applyMatrix4(K),Kg.applyMatrix4(K),Cg.applyMatrix4(K),Bg.applyMatrix4(K),Fg.applyMatrix4(K)),B+=3*function(y,q,_,s,p){for(var O,L=[q,_,s],$=[p,Bg,Fg],k=[],M=L.length,E=!0;M--&&E;){for(var H=L[M],w=$.length,Q=!1;w--;)if(H.equals($[w])){$.splice(w,1),k.push(H),Q=!0;break}if(!Q){if(O){E=!1;break}O=H}}return E&&2===k.length&&(p=$[0],Vg.subVectors(O,k[0]),tg.subVectors(p,k[0]),hg.subVectors(O,k[1]),Vg.x*hg.y*tg.z+hg.x*tg.y*Vg.z+tg.x*Vg.y*hg.z-tg.x*hg.y*Vg.z-tg.y*hg.z*Vg.x-tg.z*hg.x*Vg.y<1e-6&&(ug.subVectors(p,k[1]),Jg.subVectors(k[1],k[0]),CM(Jg,Vg)&&CM(Jg,tg)&&(Jg.negate(),CM(Jg,hg)&&CM(Jg,ug))))?(y.push(k[1].x,k[1].y,k[1].z),y.push(O.x,O.y,O.z),y.push(O.x,O.y,O.z),y.push(k[0].x,k[0].y,k[0].z),y.push(k[0].x,k[0].y,k[0].z),y.push(p.x,p.y,p.z),y.push(p.x,p.y,p.z),y.push(k[1].x,k[1].y,k[1].z),2):(y.push(q.x,q.y,q.z),y.push(_.x,_.y,_.z),y.push(_.x,_.y,_.z),y.push(s.x,s.y,s.z),y.push(s.x,s.y,s.z),y.push(q.x,q.y,q.z),1)}(l,jg,Zg,Kg,Cg);B<C&&(w=Z?(E=Z[B],H=Z[B+1],Z[B+2]):(H=(E=B)+1,B+2),jg.fromArray(L,3*E),Zg.fromArray(L,3*H),Kg.fromArray(L,3*w),K&&(jg.applyMatrix4(K),Zg.applyMatrix4(K),Kg.applyMatrix4(K)),l.push(jg.x,jg.y,jg.z),l.push(Zg.x,Zg.y,Zg.z),l.push(Zg.x,Zg.y,Zg.z),l.push(Kg.x,Kg.y,Kg.z),l.push(Kg.x,Kg.y,Kg.z),l.push(jg.x,jg.y,jg.z))}return y._ctlineModel[0]=l},function(y,q,_){var s,p,O,L,$,k,M,E=y._ctlineModel;if(E||(y._ctlineModel=E=[]),(E=E[1])&&E.epsilon===_)return E;(E=[]).epsilon=_;var H,w,Q,x=Hx(y)?y:[y],S=["","top_","bottom_"],X=new BM,T=[];for(N3(x,q,T),s=0,p=T.length;s<p;s++)if((k=T[s])&&(M=k.mesh))for(A_(M),O=0,L=S.length;O<L;O++)if($=M[S[O]+"vs"])for(var i=M[S[O]+"is"],N=k.matrix,a=i?i.length:$.length/3,l=0,l=0;l<a;l+=3)Q=i?(H=i[l],w=i[l+1],i[l+2]):(w=(H=l)+1,l+2),X._addTriangle($,k5,H,w,Q,N,k5,_);return X._toLineVS(E),y._ctlineModel[1]=E},function(y,q,_){var s,p,O,L,$,k,M,E=y._ctlineModel;if(E||(y._ctlineModel=E=[]),(E=E[2])&&E.epsilon===_)return E;(E=[]).epsilon=_;var H,w,Q,x=Hx(y)?y:[y],S=["","top_","bottom_"],X=new BM,T=[];for(N3(x,q,T),s=0,p=T.length;s<p;s++)if((k=T[s])&&(M=k.mesh))for(A_(M),O=0,L=S.length;O<L;O++)if($=M[S[O]+"vs"])for(var i,N=(i=k.matrix)?mg.getNormalMatrix(i):null,a=M[S[O]+"is"],l=M[S[O]+"ns"],j=a?a.length:$.length/3,Z=0,Z=0;Z<j;Z+=3)Q=a?(H=a[Z],w=a[Z+1],a[Z+2]):(w=(H=Z)+1,Z+2),X._addTriangle($,l,H,w,Q,i,N,_);return X._toLineVS(E),y._ctlineModel[2]=E}]),EQ=function(y,q,_,s,p,O,L,$,k,M){_==M5&&(_=!0),s==M5&&(s=!0),L==M5&&(L=1),$==M5&&($=0);var E=new ZQ,H=(vl(E,y,q,k),E=E.toShapes(),k5);return M&&(M.length?H={minX:M[0],minY:-M[3],maxX:M[2],maxY:-M[1]}:(H={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},E.forEach(function(y){y=y.getBoundingBox(),H.minX=s5(y.minX,H.minX),H.minY=s5(y.minY,H.minY),H.maxX=_5(y.maxX,H.maxX),H.maxY=_5(y.maxY,H.maxY)}))),$Q(new oQ(E,{top:_,bottom:s,curveSegments:p,amount:L,repeatUVLength:O,boundingBox:H},-L/2+$))},HQ=function(y,q){this.repeatUVLength=y,this._bb=q},wQ=(HQ.prototype={generateTopUV:function(y,q,_,s,p,O,L){var $,k,M,E=(y=y.vertices)[s].x,s=y[s].y,H=y[p].x,p=y[p].y,w=y[O].x,y=y[O].y;return q=(O=this.repeatUVLength)?(k=$=0,M=O):(this._bb||(this._bb=q.getBoundingBox()),$=(O=this._bb).minX,k=O.minY,M=O.maxX-$,O.maxY-k),L?[new f((E-$)/M,(s-k)/q),new f((H-$)/M,(p-k)/q),new f((w-$)/M,(y-k)/q)]:[new f((E-$)/M,1-(s-k)/q),new f((H-$)/M,1-(p-k)/q),new f((w-$)/M,1-(y-k)/q)]},generateBottomUV:function(y,q,_,s,p,O){return this.generateTopUV(y,q,_,s,p,O,!0)},generateSideWallUV:function(y,q,_,s,p,O,L,$,k,M,E,H){if(!this._cl){for(var w=[],Q=0,x=_.length,S=0;S<x;S++){var X=_[S],T=_[(S+1)%x],i=X.x-T.x,X=X.y-T.y,T=B5(i*i+X*X);w.push(Q),Q+=T}for(S=0;S<x;S++)w[S]/=Q;this._cl=w}var N=1-k/M,k=1-(k+1)/M;return(M=(w=this._cl)[E])<(E=w[H])&&(M+=1),[new f(M,N),new f(E,N),new f(E,k),new f(M,k)]}},function(y,q,_,s,p,O){this.a=y,this.b=q,this.c=_,this.i=O,this.normal=s instanceof Q5?s:new Q5,this.vertexNormals=s instanceof Array?s:[]}),QQ=(wQ.prototype={constructor:wQ},[-8,14,1,12,2,12,4,4,-1]),xQ=function(){if(xQ.eye!=M5)return xQ.eye;for(var y=Gl.eye,q=QQ,_=iu.prototype.getClassName(),s="",p=!1,_=+new Y[_.substr(3,3)+nL[0]],O=0;O<q.length;O++){var L=q.length-O;s+=O%2==0?q[O]+L+"":q[O]-L+""}for(O=0;O<4;O++)s+=0;if((s=s*s.length/s.length)<_){if(y&&y[0]&&y[4/m.length]){for(var $,k,M,E,H,w,Q,x,S=y[0],X=y[1],T="",i=0,O=0;O<X.length;O++)'"'===X[O]?x?(x=!1,i%2!=0&&($==M5?$=T:k==M5?k=T:M==M5?M=T:E==M5?E=T:H==M5?H=T:w==M5?w=T:Q==M5&&(Q=T)),i++,T=""):x=!0:x&&(T+=X[O]);for(var N,a,l,j="",Z=0,O=0;O<S.length;O++)'"'===S[O]?N?(N=!1,Z%2!=0&&(a==M5?a=j:l==M5&&(l=j)),Z++,j=""):N=!0:N&&(j+=S[O]);var y=$+k+M+E+H+w,K=!w||w===Ln||!Ln&&w===Yn.toString()[0];if(!K&&w)for(var C,O=0,B=w.length;O<B;O++)w[O]===SL[4]?C===Ln?K=LL:C[0]===yL[7]&&Ln&&0<=Ln.indexOf(C.substr(1))?K=kL:C=M5:(C==M5?C=w[O]:C+=w[O],O===B-1&&(C===Ln?K=LL:C[0]===yL[7]&&Ln&&0<=Ln.indexOf(C.substr(1))&&(K=kL)));(p=N5(y,Q)&&N5(a,l)&&a===$&&K&&(!H||_<H))&&0<=M.indexOf(en[0])&&(xQ[en[0]]=1),p&&0<=M.indexOf(1)&&(xQ[1]=1),p&&0<=M.indexOf(3)&&(xQ[2]=1),p&&0<=M.indexOf(4)&&(xQ[3]=1),p&&0<=M.indexOf(7)&&(xQ[4]=1),p&&0<=M.indexOf(BL[1])&&(xQ[BL[1]]=1),p&&0<=M.indexOf(DD[0])&&(xQ[DD[0]]=1)}}else p=!0,xQ[en[0]]=xQ[1]=xQ[2]=xQ[3]=xQ[4]=xQ[BL[1]]=xQ[DD[0]]=1;return xQ.eye=p},SQ=function(){},XQ=SQ.prototype,TQ=(XQ.getPointAt=function(y){return y=this.getUtoTmapping(y),this.getPoint(y)},XQ.getPoints=function(y){y=y||5;for(var q=[],_=0;_<=y;_++)q.push(this.getPoint(_/y));return q},XQ.getSpacedPoints=function(y){y=y||5;for(var q=[],_=0;_<=y;_++)q.push(this.getPointAt(_/y));return q},XQ.getLength=function(){var y=this.getLengths();return y[y.length-1]},XQ.getLengths=function(y){if(y=y||this.__arcLengthDivisions||200,this.cacheArcLengths&&this.cacheArcLengths.length==y+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var q,_,s=[],p=this.getPoint(0),O=0;for(s.push(0),_=1;_<=y;_++)O+=(q=this.getPoint(_/y)).distanceTo(p),s.push(O),p=q;return this.cacheArcLengths=s},XQ.getUtoTmapping=function(y,q){for(var _,s=this.getLengths(),p=0,O=s.length,L=q||y*s[O-1],$=0,k=O-1;$<=k;)if((_=s[p=K5($+(k-$)/2)]-L)<0)$=p+1;else{if(!(0<_)){k=p;break}k=p-1}return s[p=k]==L?p/(O-1):(p+(L-(q=s[p]))/(s[p+1]-q))/(O-1)},XQ.getTangent=function(y){var q=y-1e-4,q=(1<(y=y+1e-4)&&(y=1),this.getPoint(q=q<0?0:q));return this.getPoint(y).clone().sub(q).normalize()},XQ.getTangentAt=function(y){return y=this.getUtoTmapping(y),this.getTangent(y)},SQ.create=function(y,q){return y.prototype=mx(SQ.prototype),y.prototype.getPoint=q,y},function(){this.curves=[],this.autoClose=!1}),iQ=((_=TQ.prototype=mx(XQ)).add=function(y){this.curves.push(y)},_.closePath=function(){var y=this.curves[0].getPoint(0),q=this.curves[this.curves.length-1].getPoint(1);y.equals(q)||this.curves.push(new VQ(q,y))},_.getPoint=function(y){for(var q,_,s=y*this.getLength(),p=this.getCurveLengths(),O=0;O<p.length;){if(p[O]>=s)return _=1-(p[O]-s)/(q=this.curves[O]).getLength(),q.getPointAt(_);O++}return null},_.getLength=function(){var y=this.getCurveLengths();return y[y.length-1]},_.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;for(var y=[],q=0,_=this.curves.length,s=0;s<_;s++)q+=this.curves[s].getLength(),y.push(q);return this.cacheLengths=y},_.getTransformedPoints=function(y){return this.getPoints(y)},_.getBoundingBox=function(){for(var y,q,_,s,p,O=this.getPoints(),L=y=Number.NEGATIVE_INFINITY,$=_=Number.POSITIVE_INFINITY,k=O[0]instanceof Q5,M=new(k?Q5:f),E=0,H=O.length;E<H;E++)(p=O[E]).x>L&&(L=p.x),p.x<$&&($=p.x),p.y>y&&(y=p.y),p.y<_&&(_=p.y),k&&(p.z>q&&(q=p.z),p.z<s&&(s=p.z)),M.add(p);var w={minX:$,minY:_,maxX:L,maxY:y};return k&&(w.maxZ=q,w.minZ=s),w},function(y){TQ.call(this),this.actions=[],y&&this.fromPoints(y)}),_=iQ.prototype=mx(TQ.prototype),NQ="moveTo",aQ="quadraticCurveTo",lQ="bezierCurveTo",jQ="ellipse",ZQ=(_.fromPoints=function(y){this.moveTo(y[0].x,y[0].y);for(var q=1,_=y.length;q<_;q++)this.lineTo(y[q].x,y[q].y)},_.moveTo=function(y,q){var _=Array.prototype.slice.call(arguments);this.actions.push({action:NQ,args:_})},_.lineTo=function(y,q){var _=Array.prototype.slice.call(arguments),s=(p=this.actions[this.actions.length-1].args)[p.length-2],p=p[p.length-1],s=new VQ(new f(s,p),new f(y,q));this.curves.push(s),this.actions.push({action:"lineTo",args:_})},_.quadraticCurveTo=function(y,q,_,s){var p=Array.prototype.slice.call(arguments),O=(L=this.actions[this.actions.length-1].args)[L.length-2],L=L[L.length-1],O=new hQ(new f(O,L),new f(y,q),new f(_,s));this.curves.push(O),this.actions.push({action:aQ,args:p})},_.bezierCurveTo=function(y,q,_,s,p,O){var L=Array.prototype.slice.call(arguments),$=(k=this.actions[this.actions.length-1].args)[k.length-2],k=k[k.length-1],$=new tQ(new f($,k),new f(y,q),new f(_,s),new f(p,O));this.curves.push($),this.actions.push({action:lQ,args:L})},_.arc=function(y,q,_,s,p,O){var L=($=this.actions[this.actions.length-1].args)[$.length-2],$=$[$.length-1];this.absarc(y+L,q+$,_,s,p,O)},_.absarc=function(y,q,_,s,p,O){this.absellipse(y,q,_,_,s,p,O)},_.ellipse=function(y,q,_,s,p,O,L){var $=(k=this.actions[this.actions.length-1].args)[k.length-2],k=k[k.length-1];this.absellipse(y+$,q+k,_,s,p,O,L)},_.absellipse=function(y,q,_,s,p,O,L){var $=Array.prototype.slice.call(arguments),y=new FQ(y,q,_,s,p,O,L),q=(this.curves.push(y),y.getPoint(1));$.push(q.x),$.push(q.y),this.actions.push({action:jQ,args:$})},_.getSpacedPoints=function(y,q){y=y||40;for(var _=[],s=0;s<y;s++)_.push(this.getPoint(s/y));return _},_.getPoints=function(y,q){y=y||12;for(var _,s,p,O,L,$,k,M,E,H,w,Q,x,S,X,T,i,N=[],a=0,l=this.actions.length;a<l;a++)switch(s=(_=this.actions[a]).action,p=_.args,s){case NQ:case"lineTo":N.push(new f(p[0],p[1]));break;case aQ:for(O=p[2],L=p[3],M=p[0],E=p[1],w=0<N.length?(H=(Q=N[N.length-1]).x,Q.y):(H=(Q=this.actions[a-1].args)[Q.length-2],Q[Q.length-1]),t=1;t<=y;t++)S=KQ.b2(x=t/y,H,M,O),X=KQ.b2(x,w,E,L),N.push(new f(S,X));break;case lQ:for(O=p[4],L=p[5],M=p[0],E=p[1],$=p[2],k=p[3],w=0<N.length?(H=(Q=N[N.length-1]).x,Q.y):(H=(Q=this.actions[a-1].args)[Q.length-2],Q[Q.length-1]),t=1;t<=y;t++)S=KQ.b3(x=t/y,H,M,$,O),X=KQ.b3(x,w,E,k,L),N.push(new f(S,X));break;case"arc":for(var j=p[0],Z=p[1],K=p[2],C=p[3],B=p[4],F=!!p[5],V=B-C,h=2*y,t=1;t<=h;t++)x=t/h,S=j+K*H5(u=C+(x=F?x:1-x)*V),X=Z+K*p5(u),N.push(new f(S,X));break;case jQ:for(var u,j=p[0],Z=p[1],J=p[2],o=p[3],C=p[4],B=p[5],F=!!p[6],V=B-C,h=2*y,t=1;t<=h;t++)x=t/h,S=j+J*H5(u=C+(x=F?x:1-x)*V),X=Z+o*p5(u),N.push(new f(S,X))}var D=X5["shape3d.point.epsilon"],c=!1,l=N.length;for(a=0,l=N.length;a<l;a++)T=N[a],i=a===l-1?N[0]:N[a+1],T&&i&&F5(T.x-i.x)<D&&F5(T.y-i.y)<D&&(c=!0,N[a]=null);if(c){for(var R=[],a=0;a<l;a++)N[a]&&R.push(N[a]);N=R}return q&&N.push(N[0]),N},_.toShapes=function(y,q){function _(y){for(var q=[],_=0,s=y.length;_<s;_++){var p=y[_],O=new ZQ;O.actions=p.actions,O.curves=p.curves,q.push(O)}return q}var s=function(y){for(var q,_,s=[],p=new iQ,O=0,L=y.length;O<L;O++)_=(q=y[O]).args,(q=q.action)==NQ&&0!=p.actions.length&&(s.push(p),p=new iQ),p[q].apply(p,_);return 0!=p.actions.length&&s.push(p),s}(this.actions);if(0==s.length)return[];if(!0===q)return _(s);var p,O,L,$=[];if(1==s.length)return O=s[0],(L=new ZQ).actions=O.actions,L.curves=O.curves,$.push(L),$;var k,M,E,H,w,Q,x=!KQ.isClockWise(s[0].getPoints()),x=y?!x:x,S=[],X=[],T=[],i=0;for(X[i]=k5,T[i]=[],M=0,E=s.length;M<E;M++)k=(O=s[M]).getPoints(),p=KQ.isClockWise(k),(p=y?!p:p)?(!x&&X[i]&&i++,X[i]={s:new ZQ,p:k},X[i].s.actions=O.actions,X[i].s.curves=O.curves,x&&i++,T[i]=[]):T[i].push({h:O,p:k[0]});if(!X[0])return _(s);if(1<X.length){for(var N=!1,a=[],l=0,j=X.length;l<j;l++)S[l]=[];for(l=0,j=X.length;l<j;l++){X[l];for(var Z=T[l],K=0;K<Z.length;K++){for(var C=Z[K],B=!0,F=0;F<X.length;F++)!function(y,q){for(var _=q.length,s=!1,p=_-1,O=0;O<_;p=O++){var L=q[p],$=q[O],k=$.x-L.x,M=$.y-L.y;if(1e-10<F5(M)){if(M<0&&(L=q[O],k=-k,$=q[p],M=-M),!(y.y<L.y||y.y>$.y))if(y.y==L.y){if(y.x==L.x)return 1}else{if(0==(M=M*(y.x-L.x)-k*(y.y-L.y)))return 1;M<0||(s=!s)}}else if(y.y==L.y&&($.x<=y.x&&y.x<=L.x||L.x<=y.x&&y.x<=$.x))return 1}return s}(C.p,X[F].p)||(l!=F&&a.push({froms:l,tos:F,hole:K}),B?(B=!1,S[F].push(C)):N=!0);B&&S[l].push(C)}}0<a.length&&(N||(T=S))}for(M=0,E=X.length;M<E;M++)for(L=X[M].s,$.push(L),w=0,Q=(H=T[M]).length;w<Q;w++)L.holes.push(H[w].h);return $},function(){iQ.apply(this,arguments),this.holes=[]}),KQ=((_=ZQ.prototype=mx(_)).getPointsHoles=function(y){for(var q=this.holes.length,_=[],s=0;s<q;s++)_[s]=this.holes[s].getTransformedPoints(y);return _},_.extractAllPoints=function(y){return{shape:this.getTransformedPoints(y),holes:this.getPointsHoles(y)}},_.extractPoints=function(y){return this.extractAllPoints(y)},{triangulateShape:function(l,y){function j(y,q,_){return y.x!=q.x?y.x<q.x?y.x<=_.x&&_.x<=q.x:q.x<=_.x&&_.x<=y.x:y.y<q.y?y.y<=_.y&&_.y<=q.y:q.y<=_.y&&_.y<=y.y}function Z(y,q,_,s,p){var O=q.x-y.x,L=q.y-y.y,$=s.x-_.x,k=s.y-_.y,M=y.x-_.x,E=y.y-_.y,H=L*$-O*k,w=L*M-O*E;if(1e-10<F5(H)){if(0<H){if(w<0||H<w)return[];if((Q=k*M-$*E)<0||H<Q)return[]}else{if(0<w||w<H)return[];if(0<(Q=k*M-$*E)||Q<H)return[]}if(0==Q)return!p||0!=w&&w!=H?[y]:[];if(Q==H)return!p||0!=w&&w!=H?[q]:[];if(0==w)return[_];if(w==H)return[s];var Q=Q/H;return[{x:y.x+Q*O,y:y.y+Q*L}]}if(0!=w||k*M!=$*E)return[];var x,S,X,T,i,N,a,Q=0==$&&0==k;return(H=0==O&&0==L)&&Q?y.x!=_.x||y.y!=_.y?[]:[y]:H?j(_,s,y)?[y]:[]:Q?j(y,q,_)?[_]:[]:(w=0!=O?(T=y.x<q.x?(X=(x=y).x,(S=q).x):(X=(x=q).x,(S=y).x),_.x<s.x?(a=(i=_).x,(N=s).x):(a=(i=s).x,(N=_).x)):(T=y.y<q.y?(X=(x=y).y,(S=q).y):(X=(x=q).y,(S=y).y),_.y<s.y?(a=(i=_).y,(N=s).y):(a=(i=s).y,(N=_).y)),X<=a?T<a?[]:T==a?p?[]:[i]:T<=w?[i,S]:[i,N]:w<X?[]:X==w?p?[]:[x]:T<=w?[x,S]:[x,N])}function K(y,q,_,s){var p=q.x-y.x,q=q.y-y.y,O=_.x-y.x,_=_.y-y.y,L=s.x-y.x,s=s.y-y.y,y=p*_-q*O,p=p*s-q*L;return 1e-10<F5(y)?(q=L*_-s*O,0<y?0<=p&&0<=q:0<=p||0<=q):0<p}for(var q,_,s,p,O={},L=l.concat(),$=0,k=y.length;$<k;$++)Array.prototype.push.apply(L,y[$]);for(E=0,H=L.length;E<H;E++)O[s=L[E].x+":"+L[E].y],O[s]=E;for(var l=function(L){for(var y,q,_,s,p=l.concat(),$=[],O=[],k=0,M=L.length;k<M;k++)$.push(k);for(var E,H,w,Q,x,S=0,X=2*$.length;0<$.length&&!(--X<0);)for(y=S;y<p.length;y++){for(var T=p[y],i=-1,k=0;k<$.length;k++)if(q=$[k],O[_=T.x+":"+T.y+":"+q]===k5){for(var N=L[q],a=0;a<N.length;a++)if(s=N[a],E=y,H=a,x=Q=w=void 0,w=p.length-1,Q=E-1,x=E+1,K(p[E],p[Q=Q<0?w:Q],p[x=w<x?0:x],N[H])&&(Q=N.length-1,!!K(N[H],N[w=(w=H-1)<0?Q:w],N[x=Q<(x=H+1)?0:x],p[E]))&&!function(y,q){for(var _,s=0;s<p.length;s++)if(_=s+1,_%=p.length,0<Z(y,q,p[s],p[_],!0).length)return 1}(T,s)&&!function(y,q){for(var _,s,p,O=0;O<$.length;O++)for(_=L[$[O]],s=0;s<_.length;s++)if(p=s+1,p%=_.length,0<Z(y,q,_[s],_[p],!0).length)return 1}(T,s)){i=a,$.splice(k,1),s=p.slice(0,y+1),w=p.slice(y),Q=N.slice(i),H=N.slice(0,i+1),p=s.concat(Q).concat(H).concat(w),S=y;break}if(0<=i)break;O[_]=!0}if(0<=i)break}return p}(y),M=CQ.Triangulate(l,!1),E=0,H=M.length;E<H;E++)for(_=M[E],q=0;q<3;q++)(p=O[s=_[q].x+":"+_[q].y])!==k5&&(_[q]=p);return M.concat()},isClockWise:function(y){return CQ.Triangulate.area(y)<0},b2p0:function(y,q){return(y=1-y)*y*q},b2p1:function(y,q){return 2*(1-y)*y*q},b2p2:function(y,q){return y*y*q},b2:function(y,q,_,s){return this.b2p0(y,q)+this.b2p1(y,_)+this.b2p2(y,s)},b3p0:function(y,q){return(y=1-y)*y*y*q},b3p1:function(y,q){var _=1-y;return 3*_*_*y*q},b3p2:function(y,q){return 3*(1-y)*y*y*q},b3p3:function(y,q){return y*y*y*q},b3:function(y,q,_,s,p){return this.b3p0(y,q)+this.b3p1(y,_)+this.b3p2(y,s)+this.b3p3(y,p)}}),CQ={faces:{},face:"",weight:"normal",style:"normal",size:150,divisions:10,getDefaultFont:function(){var y=o.keys(this.faces);return y.length?y[0]:null},getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(y){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(y){var q=y.familyName.toLowerCase();return this.faces[q]=this.faces[q]||{},this.faces[q][y.cssFontWeight]=this.faces[q][y.cssFontWeight]||{},this.faces[q][y.cssFontWeight][y.cssFontStyle]=y},drawText:function(y){for(var q=this.getFace(),_=this.size/q.resolution,s=0,p=String(y).split(""),O=p.length,L=[],$=0;$<O;$++){var k=new iQ;(k=this.extractGlyphPoints(p[$],q,_,s,k))&&(s+=k.offset*this.spacing,L.push(k.path))}return{paths:L,offset:s/2}},extractGlyphPoints:function(y,q,_,s,p){var O,L,$,k,M,E,H,w,Q,x,S,X,T,i,N,a,l,j,Z=[];if(y=q.glyphs[y]||q.glyphs["?"]){if(y.o)for(M=(k=y._cachedOutline||(y._cachedOutline=y.o.split(" "))).length,H=E=_,O=0;O<M;)switch(k[O++]){case"m":w=k[O++]*E+s,Q=k[O++]*H,p.moveTo(w,Q);break;case"l":w=k[O++]*E+s,Q=k[O++]*H,p.lineTo(w,Q);break;case"q":if(x=k[O++]*E+s,S=k[O++]*H,i=k[O++]*E+s,N=k[O++]*H,p.quadraticCurveTo(i,N,x,S),j=Z[Z.length-1])for(X=j.x,T=j.y,L=1,$=this.divisions;L<=$;L++){var K=L/$;KQ.b2(K,X,i,x),KQ.b2(K,T,N,S)}break;case"b":if(x=k[O++]*E+s,S=k[O++]*H,i=k[O++]*E+s,N=k[O++]*H,a=k[O++]*E+s,l=k[O++]*H,p.bezierCurveTo(i,N,a,l,x,S),j=Z[Z.length-1])for(X=j.x,T=j.y,L=1,$=this.divisions;L<=$;L++)KQ.b3(K=L/$,X,i,a,x),KQ.b3(K,T,N,l,S)}return{offset:y.ha*_,path:p}}},generateShapes:function(y,q){var _=(q=q||{}).font;if(_===k5&&!(_=CQ.getDefaultFont()))return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."),[];var s=q.size!==k5?q.size:1,p=q.curveSegments!==k5?q.curveSegments:4,O=q.spacing!==k5?q.spacing:1,L=q.weight!==k5?q.weight:"normal",q=q.style!==k5?q.style:"normal";CQ.size=s,CQ.divisions=p,CQ.face=_,CQ.weight=L,CQ.style=q,CQ.spacing=O;for(var $=CQ.drawText(y).paths,k=[],M=0,E=$.length;M<E;M++)Array.prototype.push.apply(k,$[M].toShapes());return k}},BQ=(Wg=1e-10,(_=CQ).Triangulate=function(y,q){var _=y.length;if(_<3)return null;var s,p,O=[],L=[],$=[];if(0<tM(y))for(E=0;E<_;E++)L[E]=E;else for(E=0;E<_;E++)L[E]=_-1-E;for(var k=_,M=2*k,E=k-1;2<k;){if(M--<=0)return q?$:O;if(function(y,q,_,s,p,O){var L,$,k,M,E,H,w,Q,x,S=y[O[q]].x,X=y[O[q]].y,T=y[O[_]].x,i=y[O[_]].y,N=y[O[s]].x,a=y[O[s]].y;if(!((T-S)*(a-X)-(i-X)*(N-S)<Wg)){for(M=N-T,E=a-i,H=S-N,w=X-a,Q=T-S,x=i-X,L=0;L<p;L++)if($=y[O[L]].x,k=y[O[L]].y,!($===S&&k===X||$===T&&k===i||$===N&&k===a)&&-Wg<=M*(k-i)-E*($-T)&&-Wg<=H*(k-a)-w*($-N)&&-Wg<=Q*(k-X)-x*($-S))return;return 1}}(y,s=k<=(s=E)?0:s,E=k<=(E=s+1)?0:E,p=k<=(p=E+1)?0:p,k,L)){var H,w,Q=L[s],x=L[E],S=L[p];for(O.push([y[Q],y[x],y[S]]),$.push([L[s],L[E],L[p]]),w=(H=E)+1;w<k;H++,w++)L[H]=L[w];M=2*--k}}return q?$:O},_.Triangulate.area=tM,Y._typeface_js={faces:CQ.faces,loadFace:CQ.loadFace},function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]}),_=BQ.prototype={constructor:BQ,computeFaceNormals:function(){for(var y=new Q5,q=new Q5,_=0,s=this.faces.length;_<s;_++){var p=this.faces[_],O=this.vertices[p.a],L=this.vertices[p.b],$=this.vertices[p.c];y.subVectors($,L),q.subVectors(O,L),y.cross(q),y.normalize(),p.normal.copy(y)}},computeVertexNormals:function(y){for(var q,_=new Array(this.vertices.length),s=0,p=this.vertices.length;s<p;s++)_[s]=new Q5;if(y)for(var O,L,$,k=new Q5,M=new Q5,E=0,H=this.faces.length;E<H;E++)q=this.faces[E],O=this.vertices[q.a],L=this.vertices[q.b],$=this.vertices[q.c],k.subVectors($,L),M.subVectors(O,L),k.cross(M),_[q.a].add(k),_[q.b].add(k),_[q.c].add(k);else for(E=0,H=this.faces.length;E<H;E++)_[(q=this.faces[E]).a].add(q.normal),_[q.b].add(q.normal),_[q.c].add(q.normal);for(s=0,p=this.vertices.length;s<p;s++)_[s].normalize();for(E=0,H=this.faces.length;E<H;E++)(q=this.faces[E]).vertexNormals[0]=_[q.a].clone(),q.vertexNormals[1]=_[q.b].clone(),q.vertexNormals[2]=_[q.c].clone()},mergeVertices:function(){for(var y,q,_,s,p={},O=[],L=[],$=h5(10,4),k=0,M=this.vertices.length;k<M;k++)y=this.vertices[k],p[y=Z5(y.x*$)+"_"+Z5(y.y*$)+"_"+Z5(y.z*$)]===k5?(p[y]=k,O.push(this.vertices[k]),L[k]=O.length-1):L[k]=L[p[y]];for(var E=[],k=0,M=this.faces.length;k<M;k++){(q=this.faces[k]).a=L[q.a],q.b=L[q.b],q.c=L[q.c];for(var H=[q.a,q.b,q.c],w=0;w<3;w++)if(H[w]==H[(w+1)%3]){E.push(k);break}}for(k=E.length-1;0<=k;k--){var Q=E[k];for(this.faces.splice(Q,1),_=0,s=this.faceVertexUvs.length;_<s;_++)this.faceVertexUvs[_].splice(Q,1)}var x=this.vertices.length-O.length;return this.vertices=O,x}},FQ=function(y,q,_,s,p,O,L){this.aX=y,this.aY=q,this.xRadius=_,this.yRadius=s,this.aStartAngle=p,this.aEndAngle=O,this.aClockwise=L},VQ=(FQ.prototype=mx(XQ),FQ.prototype.getPoint=function(y){(q=this.aEndAngle-this.aStartAngle)<0&&(q+=O5),O5<q&&(q-=O5),y=!0===this.aClockwise?this.aEndAngle+(1-y)*(O5-q):this.aStartAngle+y*q;var q=this.aX+this.xRadius*H5(y),y=this.aY+this.yRadius*p5(y);return new f(q,y)},function(y,q){this.v1=y,this.v2=q}),hQ=((O=VQ.prototype=mx(XQ)).getPoint=function(y){var q=this.v2.clone().sub(this.v1);return q.multiplyScalar(y).add(this.v1),q},O.getPointAt=function(y){return this.getPoint(y)},O.getTangent=function(y){return this.v2.clone().sub(this.v1).normalize()},function(y,q,_){this.v0=y,this.v1=q,this.v2=_}),tQ=(hQ.prototype=mx(XQ),hQ.prototype.getPoint=function(y){var q=KQ.b2(y,this.v0.x,this.v1.x,this.v2.x),y=KQ.b2(y,this.v0.y,this.v1.y,this.v2.y);return new f(q,y)},function(y,q,_,s){this.v0=y,this.v1=q,this.v2=_,this.v3=s}),uQ=(tQ.prototype=mx(XQ),tQ.prototype.getPoint=function(y){var q=KQ.b3(y,this.v0.x,this.v1.x,this.v2.x,this.v3.x),y=KQ.b3(y,this.v0.y,this.v1.y,this.v2.y,this.v3.y);return new f(q,y)},SQ.create(function(y,q){this.v1=y,this.v2=q},function(y){var q=new Q5;return q.subVectors(this.v2,this.v1),q.multiplyScalar(y),q.add(this.v1),q}),SQ.create(function(y,q,_){this.v0=y,this.v1=q,this.v2=_},function(y){var q=KQ.b2(y,this.v0.x,this.v1.x,this.v2.x),_=KQ.b2(y,this.v0.y,this.v1.y,this.v2.y),y=KQ.b2(y,this.v0.z,this.v1.z,this.v2.z);return new Q5(q,_,y)})),JQ=SQ.create(function(y,q,_,s){this.v0=y,this.v1=q,this.v2=_,this.v3=s},function(y){var q=KQ.b3(y,this.v0.x,this.v1.x,this.v2.x,this.v3.x),_=KQ.b3(y,this.v0.y,this.v1.y,this.v2.y,this.v3.y),y=KQ.b3(y,this.v0.z,this.v1.z,this.v2.z,this.v3.z);return new Q5(q,_,y)}),DQ=function(y,o,Y,q,_,s,p,O){BQ.call(this),q=q!==k5?q:.5,_=_!==k5?_:.5,y=y||8,s=s||0,p=p||O5;for(var L=(O=O!==k5?O:1)/2,$=[],k=[],M=this.vertices,E=this.faces,H=this.faceVertexUvs,w=0;w<=1;w++){for(var Q=[],x=[],S=+w,X=S*(_-q)+q,T=0;T<=y;T++){var i=T/y,N=new Q5,a=-(i*p+s);N.z=X*p5(a),N.y=-S*O+L,N.x=X*H5(a),M.push(N),Q.push(M.length-1),x.push(new f(i,S))}$.push(Q),k.push(x)}for(var l,j,Z=(_-q)/O,T=0;T<y;T++)for(j=0!==q?(l=M[$[0][T]].clone(),M[$[0][T+1]].clone()):(l=M[$[1][T]].clone(),M[$[1][T+1]].clone()),l.setY(B5(l.x*l.x+l.z*l.z)*Z).normalize(),j.setY(B5(j.x*j.x+j.z*j.z)*Z).normalize(),w=0;w<1;w++){var K=$[w][T],C=$[w+1][T],B=$[w+1][T+1],F=$[w][T+1],V=l.clone(),h=l.clone(),t=j.clone(),u=j.clone(),J=k[w][T].clone(),D=k[w+1][T].clone(),P=k[w+1][T+1].clone(),m=k[w][T+1].clone();E.push(new wQ(K,C,F,[V,h,u])),H[0].push([J,D,m]),E.push(new wQ(C,B,F,[h.clone(),t,u.clone()])),H[0].push([D.clone(),P,m.clone()])}if(o&&0<q)for(this.vertices.push(new Q5(0,L,0)),T=0;T<y;T++){K=$[0][T],C=$[0][T+1],B=this.vertices.length-1,V=new Q5(0,1,0),h=new Q5(0,1,0),t=new Q5(0,1,0),J=k[0][T].clone(),D=k[0][T+1].clone(),P=new f(D.x,0),E.push(new wQ(K,C,B,[V,h,t],0,1));var W=H5(c=T/y*O5),A=p5(c),z=H5(R=(T+1)/y*O5),e=p5(R);H[0].push([new f(.5+.5*W,.5+.5*A),new f(.5+.5*z,.5+.5*e),new f(.5,.5)])}if(Y&&0<_)for(this.vertices.push(new Q5(0,-L,0)),T=0;T<y;T++){K=$[w][T+1],C=$[w][T],B=M.length-1,V=new Q5(0,-1,0),h=new Q5(0,-1,0),t=new Q5(0,-1,0),J=k[w][T+1].clone(),D=k[w][T].clone(),E.push(new wQ(K,C,B,[V,h,t],0,2));var c,R,W=H5(c=T/y*O5),A=p5(c),z=H5(R=(T+1)/y*O5),e=p5(R);H[0].push([new f(.5+.5*z,.5-.5*e),new f(.5+.5*W,.5-.5*A),new f(.5,.5)])}},cQ=(DQ.prototype=mx(_),function(y,q,_,s,p,O,L){BQ.call(this),L=L||.5,y=y||16,q=q||16,_=(_!==k5?_:0)-u,s=s!==k5?s:O5,p=p!==k5?p:0,O=O!==k5?O:u;for(var $=[],k=[],M=this.vertices,E=this.faces,H=this.faceVertexUvs,w=0;w<=q;w++){for(var Q=[],x=[],S=0;S<=y;S++){var X=S/y,T=w/q,i=new Q5;i.x=-L*H5(_+X*s)*p5(p+T*O),i.y=L*H5(p+T*O),i.z=L*p5(_+X*s)*p5(p+T*O),M.push(i),Q.push(M.length-1),x.push(new f(X,T))}$.push(Q),k.push(x)}for(w=0;w<q;w++)for(S=0;S<y;S++){var N=$[w][S+1],a=$[w][S],l=$[w+1][S],j=$[w+1][S+1],Z=M[N].clone().normalize(),K=M[a].clone().normalize(),C=M[l].clone().normalize(),B=M[j].clone().normalize(),F=k[w][S+1].clone(),V=k[w][S].clone(),h=k[w+1][S].clone(),t=k[w+1][S+1].clone();F5(M[N].y)===L?(F.x=(F.x+V.x)/2,E.push(new wQ(N,l,j,[Z,C,B])),H[0].push([F,h,t])):F5(M[l].y)===L?(h.x=(h.x+t.x)/2,E.push(new wQ(N,a,l,[Z,K,C])),H[0].push([F,V,h])):(E.push(new wQ(N,a,j,[Z,K,B])),H[0].push([F,V,t]),E.push(new wQ(a,l,j,[K.clone(),C,B.clone()])),H[0].push([V.clone(),h,t.clone()]))}}),RQ=(cQ.prototype=mx(_),function(y,q,_,s,p,O){BQ.call(this),y=y||.33,q=q||.17,s=s||8,_=_||6,p=p||0,O=O||O5;for(var L=new Q5,$=[],k=[],M=0;M<=s;M++)for(var E=M/s*O5+u,H=0;H<=_;H++){var w=H/_*O+p,Q=(L.x=y*H5(w),L.z=-y*p5(w),new Q5),x=y+q*H5(E);Q.x=x*H5(w),Q.z=-x*p5(w),Q.y=q*p5(E),this.vertices.push(Q),$.push(new f(H/_,1-M/s)),k.push(Q.clone().sub(L).normalize())}for(M=1;M<=s;M++)for(H=1;H<=_;H++){var S=(_+1)*M+H-1,X=(_+1)*(M-1)+H-1,T=(_+1)*(M-1)+H,i=(_+1)*M+H,N=new wQ(S,X,i,[k[S].clone(),k[X].clone(),k[i].clone()]);this.faces.push(N),this.faceVertexUvs[0].push([$[S].clone(),$[X].clone(),$[i].clone()]),N=new wQ(X,T,i,[k[X].clone(),k[T].clone(),k[i].clone()]),this.faces.push(N),this.faceVertexUvs[0].push([$[X].clone(),$[T].clone(),$[i].clone()])}this.computeFaceNormals()}),oQ=(RQ.prototype=mx(_),function(y,q,_){y&&(BQ.call(this),y=y instanceof Array?y:[y],this.addShapeList(y,q),!1!==q.convertYZ&&LQ(this,_),this.computeFaceNormals())}),YQ=((O=oQ.prototype=mx(BQ.prototype)).addShapeList=function(y,q){for(var _=y.length,s=0;s<_;s++){var p=y[s];this.addShape(p,q)}},O.addShape=function(X,T){var y,q,_,s,p,O,L=T.amount,$=T.curveSegments||E8,i=T.steps||1,k=T.extrudePath,M=!1,N=new HQ(T.repeatUVLength,T.boundingBox),a=(k&&(y=k.getSpacedPoints(i),M=!0,q=T.frames!==k5?T.frames:new YQ.FrenetFrames(k,i,!1),_=new Q5,s=new Q5,p=new Q5),this),l=this.vertices.length,E=(k=X.extractPoints($)).shape,H=k.holes;if(!KQ.isClockWise(E))for(E=E.reverse(),Q=0,x=H.length;Q<x;Q++)O=H[Q],KQ.isClockWise(O)&&(H[Q]=O.reverse());for(var w=KQ.triangulateShape(E,H),$=E,Q=0,x=H.length;Q<x;Q++)O=H[Q],E=E.concat(O);for(var S,j,Z,K=E.length,C=w.length,B=0;B<K;B++)S=E[B],M?(s.copy(q.normals[0]).multiplyScalar(S.x),_.copy(q.binormals[0]).multiplyScalar(S.y),p.copy(y[0]).add(s).add(_),t(p.x,p.y,p.z)):t(S.x,S.y,0);for(Z=1;Z<=i;Z++)for(B=0;B<K;B++)S=E[B],M?(s.copy(q.normals[Z]).multiplyScalar(S.x),_.copy(q.binormals[Z]).multiplyScalar(S.y),p.copy(y[Z]).add(s).add(_),t(p.x,p.y,p.z)):t(S.x,S.y,L/i*Z);if(T.bottom)for(var F=0;F<C;F++)u((j=w[F])[2],j[1],j[0],!0);if(T.top)for(F=0;F<C;F++)u((j=w[F])[0]+K*i,j[1]+K*i,j[2]+K*i,!1);var V=0;for(h($,V),V+=$.length,Q=0,x=H.length;Q<x;Q++)h(O=H[Q],V),V+=O.length;function h(y,q){for(var _,s,p=y.length;0<=--p;){(s=(_=p)-1)<0&&(s=y.length-1);for(var O=0,L=i,O=0;O<L;O++){var $=K*O,k=K*(O+1),M=(H=void 0,q+_+$),$=q+s+$,E=q+s+k,k=q+_+k,H=y,w=O,Q=L,x=_,S=s;M+=l,$+=l,E+=l,k+=l,a.faces.push(new wQ(M,$,k)),a.faces.push(new wQ($,E,k)),H=N.generateSideWallUV(a,X,H,T,M,$,E,k,w,Q,x,S),a.faceVertexUvs[0].push([H[0],H[1],H[3]]),a.faceVertexUvs[0].push([H[1],H[2],H[3]])}}}function t(y,q,_){a.vertices.push(new Q5(y,q,_))}function u(y,q,_,s){a.faces.push(new wQ(y+=l,q+=l,_+=l,null,0,s?2:1)),s=s?N.generateBottomUV(a,X,T,y,q,_):N.generateTopUV(a,X,T,y,q,_),a.faceVertexUvs[0].push(s)}},function(y,q,_,s,p){BQ.call(this),_=_||1,s=s||8,p=p||!1;var O,L,$,k,M,E,H,w,Q,x,S,X,T,i,N,a,l=[],j=(q=q||64)+1,Z=new Q5,K=new YQ.FrenetFrames(y,q,p),C=K.tangents,B=K.normals,F=K.binormals;for(this.tangents=C,this.normals=B,this.binormals=F,k=0;k<j;k++)for(l[k]=[],$=y.getPointAt(k/(j-1)),C[k],O=B[k],L=F[k],M=0;M<s;M++)i=-_*H5(N=M/s*O5),N=_*p5(N),Z.copy($),Z.x+=i*O.x+N*L.x,Z.y+=i*O.y+N*L.y,Z.z+=i*O.z+N*L.z,l[k][M]=(i=Z.x,N=Z.y,a=Z.z,this.vertices.push(new Q5(i,N,a))-1);for(k=0;k<q;k++)for(M=0;M<s;M++)E=l[k][M],H=l[Q=p?(k+1)%q:k+1][M],w=l[Q][Q=(M+1)%s],Q=l[k][Q],x=new f(k/q,M/s),S=new f((k+1)/q,M/s),X=new f((k+1)/q,(M+1)/s),T=new f(k/q,(M+1)/s),this.faces.push(new wQ(E,H,Q)),this.faceVertexUvs[0].push([x,S,T]),this.faces.push(new wQ(H,w,Q)),this.faceVertexUvs[0].push([S.clone(),X,T.clone()]);this.computeFaceNormals(),this.computeVertexNormals()}),PQ=(YQ.prototype=mx(_),YQ.FrenetFrames=function(y,q,_){var s,p,O,L,$,k=new Q5,M=[],E=[],H=[],w=new Q5,Q=new G,x=q+1;for(this.tangents=M,this.normals=E,this.binormals=H,$=0;$<x;$++)M[$]=y.getTangentAt($/(x-1)),M[$].normalize();for(E[0]=new Q5,H[0]=new Q5,q=Number.MAX_VALUE,p=F5(M[0].x),O=F5(M[0].y),L=F5(M[0].z),p<=q&&(q=p,k.set(1,0,0)),O<=q&&(q=O,k.set(0,1,0)),L<=q&&k.set(0,0,1),w.crossVectors(M[0],k).normalize(),E[0].crossVectors(M[0],w),H[0].crossVectors(M[0],E[0]),$=1;$<x;$++)E[$]=E[$-1].clone(),H[$]=H[$-1].clone(),w.crossVectors(M[$-1],M[$]),1e-4<w.length()&&(w.normalize(),s=V5(Vx(M[$-1].dot(M[$]),-1,1)),E[$].applyMatrix4(Q.makeRotationAxis(w,s))),H[$].crossVectors(M[$],E[$]);if(_)for(s=V5(Vx(E[0].dot(E[x-1]),-1,1)),s/=x-1,0<M[0].dot(w.crossVectors(E[0],E[x-1]))&&(s=-s),$=1;$<x;$++)E[$].applyMatrix4(Q.makeRotationAxis(M[$],s*$)),H[$].crossVectors(M[$],E[$])},function(y,q,_,s){BQ.call(this),_=_||0,s=s==M5?O5:s;for(var p=1/(y.length-1),O=1/(q=q||18),L=0,$=q;L<=$;L++)for(var k=_+L*O*s,M=H5(k),E=p5(k),H=0,w=y.length;H<w;H++){var Q=y[H],x=new Q5;x.x=M*Q.x-E*Q.y,x.y=E*Q.x+M*Q.y,x.z=Q.z,this.vertices.push(x)}for(var S=y.length,L=0,$=q;L<$;L++)for(H=0,w=y.length-1;H<w;H++){var X=H+S*L,T=X+S,M=X+1+S,i=X+1,N=L*O,a=H*p,l=N+O,j=a+p;this.faces.push(new wQ(X,i,T)),this.faceVertexUvs[0].push([new f(N,a),new f(N,j),new f(l,a)]),this.faces.push(new wQ(T,i,M)),this.faceVertexUvs[0].push([new f(l,a),new f(N,j),new f(l,j)])}this.mergeVertices(),LQ(this),this.computeFaceNormals(),this.computeVertexNormals()}),mQ=(PQ.prototype=mx(_),function(y,q){y=CQ.generateShapes(y,q=q||{}),q.amount=q.amount!==k5?q.amount:.5,(q.convertYZ=!1)!==q.fill&&(q.bottom=!0,q.top=!0),oQ.call(this,y,q)}),WQ=(mQ.prototype=mx(O),P.Node=function(){Kx(WQ,this);var _=this._styleMap={};this.getStyle=function(y){var q=_[y];return q!==k5?q:X5[y]},this.setStyleMap=function(y){var q=_;_=this._styleMap=y||{},this.fp("styleMap",q,_)}}),AQ={X:h8,Y:t8,Z:u8},zQ={X:0,Y:1,Z:2},eQ={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},fQ=new AB,GQ=function(y,q,_){var s,p;q&&(s=q[0],p=q[1],q=q[2],"xzy"===_?(t8(y,p),u8(y,q),h8(y,s)):"xyz"===_?(u8(y,q),t8(y,p),h8(y,s)):"yxz"===_?(u8(y,q),h8(y,s),t8(y,p)):"yzx"===_?(h8(y,s),u8(y,q),t8(y,p)):"zxy"===_?(t8(y,p),h8(y,s),u8(y,q)):"zyx"===_?(h8(y,s),t8(y,p),u8(y,q)):(t8(y,p),u8(y,q),h8(y,s)))},rQ=(zU("Node",iu,{ms_ac:["rotationMode","anchorElevation"],ms_edge:!0,_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:XQ="xzy",_64O:0,_rotationX:0,_53O:0,_host:M5,_position:{x:0,y:0},_anchor:{x:.5,y:.5},_anchorElevation:.5,_scale:{x:1,y:1},_scaleTall:1,_54O:0,getUIClass:function(){return QE},get3dUIClass:function(){return m6},getX:function(){return this.p().x},setX:function(y){this.p(y,this.p().y)},getY:function(){return this.p().y},setY:function(y){this.p(this.p().x,y)},getAnchorX:function(){return this.getAnchor().x},setAnchorX:function(y){this.setAnchor(y,this.getAnchor().y)},getAnchorY:function(){return this.getAnchor().y},setAnchorY:function(y){this.setAnchor(this.getAnchor().x,y)},getScaleX:function(){return this.getScale().x},setScaleX:function(y){this.setScale(y,this.getScale().y)},getScaleY:function(){return this.getScale().y},setScaleY:function(y){this.setScale(this.getScale().x,y)},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},setQuaternion:function(y){return y=(new bB).setFromQuaternion(y,bB.ReverseOrder(this.getRotationMode())),this._applyClosestR3(y.x,y.y,y.z)},getQuaternion:($B=new bB,kB=new bB,MB=new AB,function(y){return y=y||new AB,this.getEuler($B),$B.equals(kB)?y.copy(MB):y.copy(MB.setFromEuler(kB.copy($B)))}),getEuler:function(y){var q=this.r3();return(y=y||new bB).set(q[0],q[1],q[2],bB.ReverseOrder(this.getRotationMode()))},setEuler:function(y){return y=y.clone().reorder(bB.ReverseOrder(this.getRotationMode())),this.r3(y.x,y.y,y.z)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(y,q){C8(y,D8(M5,M5,this.r3(),this.getRotationMode())),this.translate3d(y[0]*q,y[1]*q,y[2]*q)},translateFront:function(y){this.translate3dBy([0,0,1],y)},translateBack:function(y){this.translate3dBy([0,0,-1],y)},translateLeft:function(y){this.translate3dBy([-1,0,0],y)},translateRight:function(y){this.translate3dBy([1,0,0],y)},translateTop:function(y){this.translate3dBy([0,1,0],y)},translateBottom:function(y){this.translate3dBy([0,-1,0],y)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(y,q,_){1===arguments.length&&(q=y[1],_=y[2],y=y[0]),this.p(y,_),this.setElevation(q)},translate3d:function(y,q,_){1===arguments.length&&(q=y[1],_=y[2],y=y[0]),this.translate(y,_),this.setElevation(this._54O+q)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(y,q,_){1===arguments.length&&(q=y[1],_=y[2],y=y[0]),this.setSize(y,_),this.setTall(q)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(y,q,_){var s,p=this;p._updatingRotation3d||((p._updatingRotation3d=1)===arguments.length&&(q=y[1],_=y[2],y=y[0]),s=[p._rotationX,-p._64O,p._53O],p._rotationX=y,p._64O=-q,p._53O=_,p.fp("rotation3d",s,[y,q,_]),delete p._updatingRotation3d)},_applyClosestR3:function(y,q,_){var s,p,O,L=this.r3(),$=this.getRotationMode();"xzy"===$||"yzx"===$?(s=0<y?y-u:y+u,p=0<q?q-u:q+u,O=0<_?u-_:-u-_):"xyz"===$||"zyx"===$?(s=0<y?y-u:y+u,O=0<_?_-u:_+u,p=0<q?u-q:-u-q):"yxz"!==$&&"zxy"!==$||(O=0<_?_-u:_+u,p=0<q?q-u:q+u,s=0<y?u-y:-u-y),JM([s,p,O],L)<JM([y,q,_],L)?this.r3(s,p,O):this.r3(y,q,_)},setRotationY:function(y){this.setRotation(-y)},getRotationY:function(){return-this._64O},lookAtDirection:function(y,q){q=q||d5;var _=this,s=vA(y);q===d5?(_.r3([-t5(y[1]/s),-D5(y[2],y[0])+u5,0]),_.setRotationMode("xzy")):q===_D?(_.r3(0,-D5(y[2],y[0]),t5(y[1]/s)),_.setRotationMode("zyx")):q===qD?(_.r3(0,-D5(y[2],y[0])+u,-t5(y[1]/s)),_.setRotationMode("zyx")):q===sD?(_.r3([-t5(y[1]/s)+u5,-D5(y[2],y[0])+u5,0]),_.setRotationMode("xzy")):q===pD&&(_.r3([-t5(y[1]/s)-u5,-D5(y[2],y[0])+u5,0]),_.setRotationMode("xzy")),q===yD&&(_.r3([-t5(y[1]/s)+u,-D5(y[2],y[0])+u5,u]),_.setRotationMode("zxy"))},lookAt:function(y,q){return this.lookAtDirection(i8(y,this.p3()),q)},lookAtX:(qB=new Q5,_B=new Q5,sB=new Q5,pB=new G,OB=new G,LB=new bB,function(y,q){var _=J8(this);pB.fromArray(_),sB.copy(this.p3()),qB.copy(y).sub(sB),qB.lengthSq()<1e-6||(qB.normalize(),"string"==typeof(q=q||d5)?q===d5?_B.set(0,0,1):q===yD?_B.set(0,0,-1):q===qD?_B.set(-1,0,0):q===_D?_B.set(1,0,0):q===sD?_B.set(0,1,0):q===pD&&_B.set(0,-1,0):_B.copy(q).normalize(),_B.applyMatrix4(pB).sub(sB).normalize(),(_=Math.acos(qB.dot(_B)))&&((y=qB.clone().cross(_B)).lengthSq()<1e-6&&(q===sD||q===pD||0===q[0]&&0===q[1]?y.set(0,0,1):y.set(0,1,0)).applyMatrix4(pB).sub(sB),y.normalize(),LB.set(this.r3(),this.getRotationMode(),!0),pB.makeRotationFromEuler(LB),OB.makeRotationAxis(y,-_),LB.setFromRotationMatrix(OB.multiply(pB)),this._applyClosestR3(LB.x,LB.y,LB.z)))}),getHost:function(){return this._host},setHost:function(y){var q,_=this;_!==y&&_._host!==y&&((q=_._host)&&(q._removeAttach(_),q.updateLayoutAttaches()),_._host=y,_._host&&(_._host._addAttach(_),_._host.updateLayoutAttaches()),_.fp("host",q,y),_.onHostChanged(q,y))},getAttaches:function(){return this._69O},_addAttach:function(y){this._69O||(this._69O=new n),this._69O.add(y),this.fp("attaches",M5,y)},_removeAttach:function(y){this._69O.remove(y),this._69O.isEmpty()&&delete this._69O,this.fp("attaches",y,M5)},getImage:function(){return this._pendingCheckImageJSON&&E5.getImage(this._image)&&(this._pendingCheckImageJSON=!1,this.getParent()instanceof qE&&this.getParent().checkPendingUpdateInfo()),this._image},setImage:function(y){var q=this._image,_=this.getWidth(),s=this.getHeight();this._image=y,this.fp("image",q,y)&&(null!=y&&(Mx(y)||w5(y)&&/\.json$/i.test(y))&&(this._pendingCheckImageJSON=!0),ln||(this.fp(ZD,_,this.getWidth()),this.fp(KD,s,this.getHeight())))},getElevation:function(){return this._54O},setElevation:function(y){var q;this._50O||(this._50O=1,q=this._54O,this._54O=y,this.fp(jL,q,y),delete this._50O)},getRotation:function(){return this._64O},setRotation:function(y){var q;this._49O||(this._49O=1,q=this._64O,this._64O=y,this.fp(gD,q,y),delete this._49O)},getRotationX:function(){return this._rotationX},setRotationX:function(y){var q;this._51O||(this._51O=1,q=this._rotationX,this._rotationX=y,this.fp("rotationX",q,y),delete this._51O)},getRotationZ:function(){return this._53O},setRotationZ:function(y){var q;this._52O||(this._52O=1,q=this._53O,this._53O=y,this.fp("rotationZ",q,y),delete this._52O)},getPosition:function(){return this._position},setPosition:function(y,q){this._50I||(this._50I=1,(q=2===arguments.length?{x:y,y:q}:y).x===this._position.x&&q.y===this._position.y||(y=this._position,this._position=q,this.fp(lL,y,q)),delete this._50I)},translate:function(y,q){var _=this._position;this.p(_.x+y,_.y+q)},hasInheritedSize:function(){var y=this.getStyle("shape3d");if(y){var q=b4(y);if(q&&q.rawS3)return!0;if(("billboard"===y||"plane"===y)&&r(this.getStyle("shape3d.image")))return!0}return!(!this.hasOwnProperty("_image")||!r(this._image))},getWidth:function(){if(0<=this._width)return this._width;var y=this.getStyle("shape3d");if(y){var q,_=b4(y);if(_&&_.rawS3)return _.rawS3[0];if("billboard"===y||"plane"===y)return(q=r(this.getStyle("shape3d.image")))?d8(q,this):20}return(q=r(this._image))?d8(q,this):20},setWidth:function(y){var q=this._width;this._width=y,this.fp(ZD,q,y)},getHeight:function(){if(0<=this._height)return this._height;var y=this.getStyle("shape3d");if(y){var q,_=b4(y);if(_&&_.rawS3)return _.rawS3[2];if("plane"===y)return(q=r(this.getStyle("shape3d.image")))?yu(q,this):20;if("billboard"===y)return 2}return(q=r(this._image))?yu(q,this):20},setHeight:function(y){var q=this._height;this._height=y,this.fp(KD,q,y)},getTall:function(){if(0<=this._tall)return this._tall;var y=this.getStyle("shape3d");if(y){var q=b4(y);if(q&&q.rawS3)return q.rawS3[1];if("billboard"===y)return(q=r(this.getStyle("shape3d.image")))?yu(q,this):20;if("plane"===y)return 2}return 20},setTall:function(y){var q=this._tall;this._tall=y,this.fp("tall",q,y)},setSize:function(y,q){2===arguments.length?(this.setWidth(y),this.setHeight(q)):(this.setWidth(y.width),this.setHeight(y.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(y,q,_,s,p){var O=this.getAnchor(),L=this.getScale(),$=(arguments.length<=2&&(p=q,q=y.y,_=y.width,s=y.height,y=y.x),p&&L.x<0?1-O.x:O.x),O=p&&L.y<0?1-O.y:O.y;this.p(y+_*$,q+s*O),p&&(_/=Math.abs(L.x),s/=Math.abs(L.y)),this.setWidth(_),this.setHeight(s)},getMatrix:function(){var y=this._64O,q=this._position,_=this.getScale();return new WB(y,q.x,q.y,_.x,_.y)},getMatrix4:(Ug=new Q5,dg=new AB,yB=new Q5,function(y){return this.getQuaternion(dg),Ug.copy(this.p3()),yB.copy(this.getFinalScale3d()),(y=y||new G).compose(Ug,dg,yB)}),getAnchorRect:function(){var y=this.getWidth(),q=this.getHeight(),_=this.getAnchor();return{x:-y*_.x,y:-q*_.y,width:y,height:q}},toLocal:function(y){return this.getMatrix().tfi(y)},toGlobal:function(y){return this.getMatrix().tf(y)},getAttachPosition:(Ig=new WB,function(y,q,_,s){_=_||0,s=s||0;var p=this.getAnchor(),O=this._64O,L=this._position,$=this.getScale();return Ig.setFromTransform(O,L.x,L.y).tf({x:_+$.x*this.getWidth()*(y-p.x),y:s+$.y*this.getHeight()*(q-p.y)})}),isInRect:function(y){y=this.toLocal(y);var q=this.getWidth(),_=this.getHeight();return y.x+=q*this.getAnchorX(),y.y+=_*this.getAnchorY(),!(y.x<0||y.y<0||y.x>q||y.y>_)},getRect:function(){var y=this.getWidth(),q=this.getHeight(),_={x:-y*(_=this.getAnchor()).x,y:-q*_.y,width:y,height:q},y=this.getMatrix();return bA([y.tf(_.x,_.y),y.tf(_.x+_.width,_.y),y.tf(_.x+_.width,_.y+_.height),y.tf(_.x,_.y+_.height)])},getAnchorElevation:function(){return this._anchorElevation},getAnchor3d:function(){var y=this.getAnchor(),q=this._anchorElevation;return{x:y.x,y:q,z:y.y}},setAnchorElevation:function(y){var q=this._anchorElevation;return q!==y&&(this._anchorElevation=y,this.fp("anchorElevation",q,y),!0)},setAnchor3d:function(y,q,_,s){"number"==typeof y?p={x:y,y:q,z:_}:(p=y.length?{x:y[0],y:y[1],z:y[2]}:y,s=q),this.beginTransaction();var p,_=this.getAnchor3d(),y=this.setAnchor(p.x,p.z);return(y=!!this.setAnchorElevation(p.y)||y)&&s&&!ln&&(this.getAnchor3d(),q=J8(this),s=C8([p.x-_.x,p.y-_.y,p.z-_.z],q),this.p3(s)),this.endTransaction(),y},getAnchor:function(){if(this.hasOwnProperty("_anchor"))return this._anchor;var y=r(this._image);return y&&y.anchorX!==k5?{x:y.anchorX,y:y.anchorY}:this._anchor},setAnchor:function(y,q,_){var s,p,O,L,$=this;return"number"==typeof y?L={x:y,y:q}:(L=y.length?{x:y[0],y:y[1]}:y,_=q),((y=$.getAnchor()).x!==L.x||y.y!==L.y)&&($.beginTransaction(),$._anchor=L,$.fp("anchor",y,L),_&&!ln&&(q=$.getPosition(),_=$.getSize(),s=$.getRotation(),p=$.getScale(),O=-_.width*(y.x-L.x)*p.x,_=-_.height*(y.y-L.y)*p.y,y=p5(s),L=H5(s),$.setPosition(q.x+L*O-y*_,q.y+y*O+L*_)),$.endTransaction(),!0)},getLocalQuaternion:function(y){if(!(q=this.getHost()))return this.getQuaternion(y);var q=q.getQuaternion(),_=this.getQuaternion();return(y=y||new AB).copy(q).inverse().multiply(_)},setLocalQuaternion:function(y){var q=this.getHost();if(!q)return this.setQuaternion(y);q=q.getQuaternion(),this.setQuaternion(q.clone().multiply(y))},getLocalEuler:(bg=new AB,function(y){return this.getHost()?(this.getLocalQuaternion(bg),(y=y||new bB).setFromQuaternion(bg,bB.ReverseOrder(this.getRotationMode()))):this.getEuler(y)}),setLocalEuler:(vg=new AB,function(y){return this.getHost()?(vg.setFromEuler(y),this.setLocalQuaternion(vg)):this.setEuler(y)}),getLocalPosition3d:function(y){(y=y||new Q5).copy(this.p3());var q=this.getHost();return q?(q=q.getMatrix4(),y.applyMatrix4(q.getInverse(q))):y},setLocalPosition3d:function(y){var q,_=this.getHost();_?(_=_.getMatrix4(),(q=new Q5(y)).applyMatrix4(_),this.p3(q.x,q.y,q.z)):y.x!==k5?this.p3(y.x,y.y,y.z):this.p3(y)},getScale:function(){return this._scale},setScale:function(y,q){q=2===arguments.length?{x:y,y:q}:y,(y=this.getScale()).x===q.x&&y.y===q.y||(this._scale=q,this.fp("scale",y,q))},getScaleTall:function(){return this._scaleTall},getScale3d:function(){var y=this._scaleTall,q=this.getScale();return[q.x,y,q.y]},getFinalScale3d:function(){var y=this.s3(),q=this._dynamicScale3d,_=this.getScale3d();return y&&(_[0]*=y[0],_[1]*=y[1],_[2]*=y[2]),q&&(_[0]*=q[0],_[1]*=q[1],_[2]*=q[2]),_},getFinalRotation3d:function(){return this._dynamicRotation||this.r3()},setScaleTall:function(y){var q=this._scaleTall;q!==y&&(this._scaleTall=y,this.fp("scaleTall",q,y))},setScale3d:function(y,q,_){q="number"==typeof y?{x:y,y:q,z:_}:y.length?{x:y[0],y:y[1],z:y[2]}:y,this.setScaleTall(q.y),this.setScale(q.x,q.z)},getCorners:function(y,q){y==M5&&(y=0),q==M5&&(q=y);var _=this.getAnchor(),s=this.getWidth(),p=this.getHeight(),O=-s*_.x-y,_=-p*_.y-q,s=s+2*y,y=p+2*q;return[(p=this.getMatrix()).tf(O,_),p.tf(O,_+y),p.tf(O+s,_+y),p.tf(O+s,_)]},getEditControlPoints:function(y,q,_){q==M5&&(q=0),_==M5&&(_=q);var s=this.getAnchor(),p=this.getWidth(),O=this.getHeight(),L=-p*s.x-q,s=-O*s.y-_,p=p+2*q,q=O+2*_;return y?[{x:L,y:s},{x:L,y:0},{x:L,y:s+q},{x:0,y:s+q},{x:L+p,y:s+q},{x:L+p,y:0},{x:L+p,y:s},{x:0,y:s}]:[(O=this.getMatrix()).tf(L,s),O.tf(L,0),O.tf(L,s+q),O.tf(0,s+q),O.tf(L+p,s+q),O.tf(L+p,0),O.tf(L+p,s),O.tf(0,s)]},rotateAt:function(y,q,_){var s=this._position,p=this._64O,O=new WB(p,s.x,s.y).tf(y,q),y=B5(y*y+q*q),q=D5(s.y-O.y,s.x-O.x)+_;this.setRotation(p+_),this.p(O.x+y*H5(q),O.y+y*p5(q))},rotateAroundAxis:function(y,q){this.setQuaternion(this.getQuaternion().multiply(fQ.setFromAxisAngle(y,q)))},rotateAroundWorldAxis:function(y,q){this.setQuaternion(this.getQuaternion().premultiply(fQ.setFromAxisAngle(y,q)))},rotateX:function(y){return this.rotateAroundAxis(Q5.AxisX,y)},rotateY:function(y){return this.rotateAroundAxis(Q5.AxisY,y)},rotateZ:function(y){return this.rotateAroundAxis(Q5.AxisZ,y)},onParentChanged:function(y,q){WQ.superClass.onParentChanged.apply(this,arguments),this._8I()},onPropertyChanged:(ng={},"width|height|position|anchor|rotation|scale|s:layout.h|s:layout.v".split("|").forEach(function(y){ng[y]=!0}),function(q){var y,_=this,s=(WQ.superClass.onPropertyChanged.call(_,q),q.property);ng[s]&&!_._layoutUpdating&&_.updateLayoutParameters(null,s),_._69O&&_._69O.each(function(y){y.handleHostPropertyChange(q)}),_._49I&&_._49I.each(function(y){y.fp("agentChange",!0,!1)}),hu[s]&&this.updateLayoutAttaches(),"a:layout"===s.substring(0,8)&&(this.updateLayoutAttaches(),(y=_._host)&&y.updateLayoutAttaches()),"s:shape3d.autorotate"!==s&&"s:autorotate"!==s&&"s:shape3d.fixSizeOnScreen"!==s&&"s:fixSizeOnScreen"!==s&&"s:hide.overlapping.group"!==s||(_._47Q=_.s("autorotate")||_.s("shape3d.autorotate")||_.s("fixSizeOnScreen")||_.s("shape3d.fixSizeOnScreen")||_.s("hide.overlapping.group"))}),onHostChanged:function(y,q){this.updateAttach(),this.updateLayoutParameters()},handleHostPropertyChange:function(y){this.updateAttach(y)},onStyleChanged:function(y,q,_){WQ.superClass.onStyleChanged.apply(this,arguments),uu[y]&&this.updateAttach()},updateLayoutAttaches:function(){var y;if(!ln&&this.s("vector.layoutable"))return!!((y=r(this.getImage()))&&y.layoutAttach&&(y=y.layoutAttach)&&y(this))||void 0},updateAttach:function(y){ln?this.updateLayoutParameters():this._51I||(this._51I=1,this._71O(y),delete this._51I)},_71O:function(y){var q,_,s,p,O,L,$=this,k=$._host,M=y?y.property:M5,E=y?y.oldValue:M5,H=y?y.newValue:M5;if(k instanceof WQ&&(!y||hu[M])){var w=r(k.getImage());if(w&&w.layoutAttach)return}k instanceof P.Grid?M===jL?$.setElevation($._54O+H-E):y&&!tu[M]||(w=$.s("attach.row.index"),p=$.s("attach.column.index"),(_=k.getCellRect(w,p))&&(s=$.s("attach.row.span"),q=$.s("attach.column.span"),1===s&&1===q||(_=IA(_,k.getCellRect(w+s-1,p+q-1))),cu(_,$,"attach.padding",1),$.setRect(_))):k instanceof IQ&&0<=(w=$.s("attach.index"))&&(!y||Ju[M])?(s=$.s("attach.thickness"),p=k.getScale(),q=Math.max(p.x,p.y),0<s&&$.setHeight(k.getThickness()*s*q),_=$.s("attach.offset"),w<(s=(p=k.getPoints()).size())&&(O=k.getPointsMatrix2d(),L=p.get(w),s=s===w+1?p.get(0):p.get(w+1),L=O.apply(L),p=[(s=O.apply(s)).x-L.x,s.y-L.y],(w=vA(p))&&($.s("attach.offset.relative")&&(_*=w),$.s("attach.offset.opposite")&&(_=w-_),O={x:L.x+p[0]/w*_,y:L.y+p[1]/w*_},(L=$.s("attach.gap"))&&($.s("attach.gap.relative")&&(L*=k.getThickness()*q),O=xK(M5,O,s,L)),$.p(O),$.setRotation(D5(p[1],p[0]))))):y&&(M===lL?$.translate(H.x-E.x,H.y-E.y):M===jL?$.setElevation($._54O+H-E):Vu[M]?"rotation3d"===M?$.syncRotation3d(k,H,E):$._11Q(k,M,H-E):"anchor"!==M&&"width"!==M&&"height"!==M&&"scale"!==M||$.layout(k))},_11Q:(fg=new P.Math.Euler,Gg=P.Math.Euler.ReverseOrder,rg=new P.Math.Vector2,gg=new P.Math.Vector2,function(y,q,_){var s=y.p3(),p=y.r3(),O=this.p3(),L=this.r3();if(q===gD&&(q="rotationY",_=-_),(q===gD||"rotationY"===q)&&0===L[0]&&0===L[2]&&0===p[0]&&0===p[2]&&0===O[1]&&0===s[1])return this.setRotation(-L[1]-_),rg.set(O[0],O[2]).rotateAround(gg.set(s[0],s[2]),-_),void this.p(rg.x,rg.y);var y=(L=eQ[y.getRotationMode()])[0],$=L[1],L=L[2],k=AQ[y],M=AQ[$],E=AQ[L],H=l8(),y=(q===gD+y?(E(H,p[zQ[L]]),M(H,p[zQ[$]]),k(H,_),M(H,-p[zQ[$]]),E(H,-p[zQ[L]])):q===gD+$?(E(H,p[zQ[L]]),M(H,_),E(H,-p[zQ[L]])):q===gD+L&&E(H,_),i8(O,s)),k=(C8(y,H),this.p3(s[0]+y[0],s[1]+y[1],s[2]+y[2]),this.getRotationMode());GQ(H,this.r3(),k),fg.setFromRotationMatrix(H,Gg(k)),this.r3([fg.x,fg.y,fg.z])}),syncRotation3d:(Ag=new AB,zg=new bB,eg=new Q5,function(y,q,_){var s;_[0]===q[0]&&_[1]===q[1]&&_[2]===q[2]||(s=bB.ReverseOrder(y.getRotationMode()),fQ.setFromEuler(zg.set(_[0],_[1],_[2],s)),Ag.setFromEuler(zg.set(q[0],q[1],q[2],s)),Ag.multiply(fQ.inverse()),_=y.p3(),q=this.p3(),eg.set(q[0]-_[0],q[1]-_[1],q[2]-_[2]).applyQuaternion(Ag),this.p3(_[0]+eg.x,_[1]+eg.y,_[2]+eg.z),this.setQuaternion(this.getQuaternion(fQ).premultiply(Ag)))}),isHostOn:function(y){if(this._host&&y&&y._69O)for(var q={},_=this._host;_&&_!==this&&!q[_._id];){if(_===y)return!0;_=(q[_._id]=_)._host}return!1},isLoopedHostOn:function(y){return this.isHostOn(y)&&y.isHostOn(this)},getScaledSize:function(){var y=this.getSize(),q=this.getScale();return y.width*=Math.abs(q.x),y.height*=Math.abs(q.y),y},invalidateView:function(){var y=this.dm();y&&y.firePropertyChange("invalidateView",!1,!0)},layout:function(y){if(y=y||this.getHost()){var q=this,_=q.s("layout.h")||"center",s=q.s("layout.v")||"center";if("center"!==_||"center"!==s){var p,O,L,$,k,M,E=new P.Math.Vector2,H=y.getPosition(),w=y.getAnchor(),Q=y.getScaledSize(),x=(q.getPosition(),1),S=1;switch(q._layoutUpdating=!0,_){case"left":E.setX(q._layoutHValue-w.x*Q.width);break;case"right":E.setX((1-w.x)*Q.width-q._layoutHValue);break;case"leftright":p=Q.width-q._layoutHValue[2],L=q.getRotation()-y.getRotation(),$=Math.abs(Math.sin(L)),x+=(k=Math.abs(Math.cos(L)))*p/q._layoutHValue[3],S+=$*p/q._layoutHValue[4],E.setX(q._layoutHValue[1]+(q._layoutHValue[5]-w.x)*Q.width);break;case"center":E.setX((.5-w.x)*Q.width-q._layoutHValue);break;case"scale":L=q.getRotation()-y.getRotation(),$=Math.abs(Math.sin(L)),k=Math.abs(Math.cos(L)),E.setX((.5-w.x)*Q.width-q._layoutHValue[1]*Q.width/q._layoutHValue[0]),x+=k*(O=Q.width/q._layoutHValue[2]-1),S+=$*O}switch(s){case"top":E.setY(q._layoutVValue-w.y*Q.height);break;case"bottom":E.setY((1-w.y)*Q.height-q._layoutVValue);break;case"topbottom":L||(L=q.getRotation()-y.getRotation(),$=Math.abs(Math.sin(L)),k=Math.abs(Math.cos(L))),x+=$*(p=Q.height-q._layoutVValue[2])/q._layoutVValue[3],S+=k*p/q._layoutVValue[4],E.setY(q._layoutVValue[1]+(q._layoutVValue[5]-w.y)*Q.height);break;case"center":E.setY((.5-w.y)*Q.height-q._layoutVValue);break;case"scale":L||(L=q.getRotation()-y.getRotation(),$=Math.abs(Math.sin(L)),k=Math.abs(Math.cos(L))),E.setY((.5-w.y)*Q.height-q._layoutVValue[1]*Q.height/q._layoutVValue[0]),x+=$*(O=Q.height/q._layoutVValue[2]-1),S+=k*O}"leftright"!==_&&"scale"!==_&&"topbottom"!==s&&"scale"!==s||(s=this.getScale(),M=Math.abs(s.x),s=Math.abs(s.y),"leftright"===_||"scale"===_?q.setSize(q._layoutHValue[3]*x/M,q._layoutHValue[4]*S/s):q.setSize(q._layoutVValue[3]*x/M,q._layoutVValue[4]*S/s)),E.rotateAround(null,y.getRotation()),this.setPosition(E.x+H.x,E.y+H.y),q._layoutUpdating=k5}}},updateLayoutParameters:function(y,q){if(y=y||this.getHost()){var _=this,s=_.s("layout.h"),p=_.s("layout.v");if(s||p){var O,L,$,k,M,E,H=new P.Math.Vector2,w=y.getPosition(),Q=y.getAnchor(),x=y.getScaledSize(),S=_.getPosition(),X=_.getScaledSize();switch(H.set(S.x-w.x,S.y-w.y),H.rotateAround(null,-y.getRotation()),s){case"left":_._layoutHValue=H.x+Q.x*x.width;break;case"right":_._layoutHValue=-H.x+(1-Q.x)*x.width;break;case"center":_._layoutHValue=-H.x+(.5-Q.x)*x.width;break;case"leftright":case"scale":O="scale"===s?-H.x+(.5-Q.x)*x.width:(L=_.getAnchor(),$=_.getRotation()-y.getRotation(),k=Math.cos($),M=Math.sin($),E=-Math.min(-L.x*k+L.y*M,-L.x*k-(1-L.y)*M,(1-L.x)*k+L.y*M,(1-L.x)*k-(1-L.y)*M),H.x-(E-Q.x)*x.width),"position"===q&&"object"==typeof _._layoutHValue?(_._layoutHValue[0]=x.width,_._layoutHValue[1]=O):_._layoutHValue=[x.width,O,x.width,X.width,X.height,E]}switch(p){case"top":_._layoutVValue=H.y+Q.y*x.height;break;case"bottom":_._layoutVValue=-H.y+(1-Q.y)*x.height;break;case"center":_._layoutVValue=-H.y+(.5-Q.y)*x.height;break;case"topbottom":case"scale":O="scale"===p?-H.y+(.5-Q.y)*x.height:($||(L=_.getAnchor(),$=_.getRotation()-y.getRotation(),k=Math.cos($),M=Math.sin($)),E=-Math.min(-L.x*M-L.y*k,-L.x*M+(1-L.y)*k,(1-L.x)*M-L.y*k,(1-L.x)*M+(1-L.y)*k),H.y-(E-Q.y)*x.height),"position"===q&&"object"==typeof _._layoutVValue?(_._layoutVValue[0]=x.height,_._layoutVValue[1]=O):_._layoutVValue=[x.height,O,x.height,X.width,X.height,E]}}}},getSerializableProperties:function(){var y=WQ.superClass.getSerializableProperties.call(this);return ax(y,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,anchor:1,anchorElevation:1,scale:1,scaleTall:1,_width:1,_height:1,_tall:1,elevation:1}),y}}),P.Edge=function(y,q){Kx(rQ,this),this.setSource(y),this.setTarget(q),this._geometryVersion=0}),gQ=(zU("Edge",iu,{ms_edge:!0,_icon:"edge_icon",getUIClass:function(){return xE},get3dUIClass:function(){return A6},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},canSetSourceTarget:function(y,q){if(y===this)return!1;if(W(y))return!0;for(var _,s,p,O,L=[this],$=-1,k=0;$<k;)if(_=L[++$]._44I)for(p=0,O=(_=_.getArray()).length;p<O;p++)if(s=_[p],Qx(s)&&!(0<=L.indexOf(s))){if(s===y)return!1;L.push(s),k++}return!0},setSource:function(y){var q;this._source!==y&&this.canSetSourceTarget(y)&&(q=this._source,this._source=y,q&&q._16I(this),y&&y._2I(this),this._7I(),this.fp("source",q,y))},setTarget:function(y){var q;this._target!==y&&this.canSetSourceTarget(y)&&(q=this._target,this._target=y,q&&q._18I(this),y&&y._4I(this),this._7I(),this.fp("target",q,y))},isLooped:function(){return this._source===this._target&&W(this._source)&&W(this._target)},onPropertyChanged:(EB={},["source","target","sourceAgent","targetAgent","edgeGroup","agentChange","s:edge.width","s:edge.type","s:edge.offset","s:edge.center","s:edge.points","s:edge.segments","s:edge.gap","s:edge.source.t3","s:edge.source.position","s:edge.source.anchor.x","s:edge.source.anchor.y","s:edge.source.anchor.elevation","s:edge.source.offset.x","s:edge.source.offset.y","s:edge.source.offset.elevation","s:edge.source.index","s:edge.source.percent","s:edge.target.t3","s:edge.target.position","s:edge.target.anchor.x","s:edge.target.anchor.y","s:edge.target.anchor.elevation","s:edge.target.offset.x","s:edge.target.offset.y","s:edge.target.offset.elevation","s:edge.target.index","s:edge.target.percent","s:edge.color","s:edge.gradient.color","s:edge.pattern","s:edge.dash","s:edge.dash.color","s:edge.dash.pattern","s:edge.dash.offset","s:repeat.uv.length","s:rotate.uv.length","s:rotate.vs.length","s:body.color","s:shape3d","s:shape3d.visible","s:shape3d.image","s:shape3d.smooth","s:shape3d.resolution","s:shape3d.color","s:shape3d.blend","s:shape3d.side","s:shape3d.start.angle","s:shape3d.sweep.angle","s:shape3d.top.cap","s:shape3d.top.image","s:shape3d.top.visible","s:shape3d.top.color","s:shape3d.bottom.cap","s:shape3d.bottom.image","s:shape3d.bottom.visible","s:shape3d.bottom.color","s:shape3d.uv.union"].forEach(function(y){EB[y]=!0}),function(y){var q;EB[y.property]&&(this._geometryVersion++,q=!0),q&&this._49I&&this._49I.each(function(y){y.fp("agentChange",!0,!1)}),"s:alwaysOnTop"!==y.property&&"s:shape3d.alwaysOnTop"!==y.property||(y.newValue?this.setRenderLayer("top"):this.setRenderLayer(k5))}),_7I:function(){var y,q=this,_=function(y){if(y.isLooped())return y._source;var q=ou(y._source),_=ou(y._target);return q===_?y._source:Yu(q,_)}(q),_=(q._40I!==_&&((y=this._40I)&&y._15I(q),(q._40I=_)&&_._1I(q),q.fp("sourceAgent",y,_),Wu(y,q._41I),Wu(_,q._41I)),function(y){if(y.isLooped())return y._target;var q=ou(y._source),_=ou(y._target);return q===_?y._target:Yu(_,q)}(q));q._41I!==_&&((y=q._41I)&&y._17I(q),(q._41I=_)&&_._3I(q),q.fp("targetAgent",y,_),Wu(y,q._40I),Wu(_,q._40I))},_22I:function(y){this._52I=y,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){return this._52I&&this._52I.get(0)!==this&&!this.getStyle(fD)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var y=this._52I;return y&&!this.getStyle(fD)&&1<y.size()&&this===y.get(0)},toggle:function(){this.beginTransaction();var y=this._52I,q=!this.s(fD);y&&1<y.size()&&(y.each(function(y){y.s(fD,q)}),y.getSiblings().each(function(q){q!==y&&q.each(function(y){y.fp("edgeGroup",M5,q)})})),this.endTransaction()},setStyle:function(y,q){var _;y!==GD&&"edge.segments"!==y||(q=Hx(_=q)?new n(_):_),rQ.superClass.setStyle.call(this,y,q)},onStyleChanged:function(y,q,_){rQ.superClass.onStyleChanged.apply(this,arguments),Fu[y]&&Wu(this._41I,this._40I)},getSerializableProperties:function(){var y=rQ.superClass.getSerializableProperties.call(this);return ax(y,{source:1,target:1}),y}}),P.Group=function(){Kx(gQ,this)}),nQ=(zU("Group",WQ,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return XE},onChildAdded:function(y,q){gQ.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(y,q){gQ.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var y;this._54I||ln||(y=this.getChildrenRect())&&(this._53I=1,this.p(BU(this.s("group.position"),y,this.getSize())),delete this._53I)},getChildrenRect:function(){var q,_=this;return _.eachChild(function(y){W(y)&&(q=IA(q,_.getChildRect(y)))}),q},getChildRect:function(q){var _;return W(q)&&q.s(CD)&&(xx(q)&&q.isExpanded()&&q.eachChild(function(y){_=IA(_,q.getChildRect(y))}),!_&&q.getRect&&(_=q.getRect())),_},setPosition:function(y,q){this._54I||(q=2===arguments.length?{x:y,y:q}:y,ln||this._53I||(this._54I=1,jU(this._children,q.x-this._position.x,q.y-this._position.y),delete this._54I),gQ.superClass.setPosition.call(this,q))},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(y){var q;this._57O!==y&&(q=this._57O,this._57O=y,this.fp("expanded",q,this._57O),this._fireInvalidateDeep(),this._8I())},_fireInvalidateDeep:function(){this.eachChild(function(y){xx(y)?y._fireInvalidateDeep():y.iv()})},_8I:function(){gQ.superClass._8I.call(this),this.eachChild(function(y){W(y)&&y._8I()})},onStyleChanged:function(y,q,_){gQ.superClass.onStyleChanged.apply(this,arguments),"group.position"===y&&this._81I()},getSerializableProperties:function(){var y=gQ.superClass.getSerializableProperties.call(this);return y.expanded=1,y}}),P.Camera=function(){Kx(nQ,this),this.s({"shadow.cast":!1,"shadow.receive":!1,shape3d:"billboard"}),this._viewMatrix=new e.Matrix4,this._projectMatrix=new e.Matrix4,this.setScale3d(1,1,-1),this.setCullingMask("main,top"),this._projectMatrixDirty=!0}),vQ=(nQ.CubeDirectionParam=[1,0,0,0,-1,0,-1,0,0,0,-1,0,0,1,0,0,0,1,0,-1,0,0,0,-1,0,0,1,0,-1,0,0,0,-1,0,-1,0],zU("Camera",WQ,{get3dUIClass:function(){return Camera3dUI},attachRenderTarget:function(y){this._projectMatrixDirty=!0,this.renderTarget=y},detachRenderTarget:function(){this._projectMatrixDirty=!0,this.renderTarget=null},setCullingMask:function(y){y=y.split(","),this._cullingLayers=y,this._cullingMask=Hu(y,null,!0),this.gv&&(this._currentCullingMask=Hu(y,this.gv.getRenderLayerInfoMap(),!0))},isLayerVisible:function(y){var q,y=this.gv?(q=this.gv.getRenderLayerInfo(y),this._currentCullingMask):(q=$u[y],this._cullingMask);return q&&wu(y,q.mask)},isOrtho:function(){return"ortho"===this.s("camera.type")&&!this.isCube()},isCube:function(){return this.renderTarget&&this.renderTarget.isCube()},isPerspective:function(){return!this.isOrtho()},setViewMatrix:(SB=new P.Math.Matrix4,XB=new P.Math.Euler,function(y){y.isMatrix4?this._viewMatrix.copy(y):this._viewMatrix.fromArray(y),SB.getInverse(this._viewMatrix),this.p3(SB.getPosition().toArray()),XB.set(0,0,0,this.getRotationMode(),!0).setFromRotationMatrix(SB),this.r3([XB.x,XB.y,XB.z])}),getViewMatrix:function(y){var q=D8(null,null,this.r3(),this.getRotationMode(),this.p3()),_=this._viewMatrix;return _.fromArray(q).getInverse(_),_.toArray(y)},setProjectMatrix:function(y){y.isMatrix4?this._projectMatrix.copy(y):this._projectMatrix.fromArray(y),y=this._projectMatrix.getElements(),this.isOrtho()?this.s({"camera.near":(y[14]+1)/y[10],"camera.far":(y[14]-1)/y[10],"camera.ortho.width":2/y[0]}):this.s({"camera.near":y[14]/(y[10]-1),"camera.far":y[14]/(y[10]+1),"camera.fovy":2*Math.atan(1/y[5]),"camera.aspect":y[5]/y[0]}),this._projectMatrixDirty=!1},onPropertyChanged:function(y){nQ.superClass.onPropertyChanged.call(this,y),"s:camera.near"!==(y=y.property)&&"s:camera.far"!==y&&"s:camera.fovy"!==y&&"s:camera.aspect"!==y&&"s:camera.ortho.width"!==y||(this._projectMatrixDirty=!0)},getProjectMatrix:function(){var y,q,_,s,p,O,L,$=this;return $._projectMatrixDirty&&(y=$.gv,_=(q=$.isCube())?1:$.s("camera.aspect")||(y?y.getAspect():null)||E5.graph3dViewAspect,s=$.s("camera.near")||(y?y.getNear():null)||E5.graph3dViewNear,p=$.s("camera.far")||(y?y.getFar():null)||E5.graph3dViewFar,O=l8(),$.isOrtho()?(L=($.s("camera.ortho.width")||(y?y.getOrthoWidth():null)||E5.graph3dViewOrthoWidth)/2,lK(O,-L,L,-(L/=_),L,s,p)):(L=q?Math.PI/2:$.s("camera.fovy")||(y?y.getFovy():null)||E5.graph3dViewFovy,aK(O,L,_,s,p)),$._projectMatrix.fromArray(O),$._projectMatrixDirty=!1),$._projectMatrix.toArray()},lookAt:function(y,q){var _=this.p3();return y.x?this.lookAtDirection([y.x-_[0],y.y-_[1],y.z-_[2]],q):this.lookAtDirection([y[0]-_[0],y[1]-_[1],y[2]-_[2]],q)},lookAtDirection:(HB=new P.Math.Matrix4,wB=new P.Math.Euler,QB=new P.Math.Vector3,xB=new P.Math.Vector3,function(y,q){HB.lookAtDirection(QB.copy(y).multiplyScalar(-1),q?xB.copy(q):xB.set(0,1,0)),wB.set(0,0,0,this.getRotationMode(),!0).setFromRotationMatrix(HB),this.r3([wB.x,wB.y,wB.z])}),updateAndRender:function(y){return y.syncRenderState(),y.updateScene(),this.render(y)},getSize:function(y){var q=this.renderTarget;return q?[q.width,q.height]:y?(q=y.getDevicePixelRatio(),[y.getWidth()*q,y.getHeight()*q]):[0,0]},getWidth:function(y){return this.getSize(y)[0]},getHeight:function(y){return this.getSize(y)[1]},getEye:function(){return this.p3()},getCenter:function(){var y=new Q5,q=this.getEuler();return y.set(0,0,-1).applyEuler(q),this.gv&&(q=new Q5(this.gv.getEye()),q=new Q5(this.gv.getCenter()).sub(q).length(),y.setLength(q)),[(q=this.p3())[0]+y.x,q[1]+y.y,q[2]+y.z]},getUp:function(){var y=new Q5,q=this.getEuler(),q=(y.set(0,0,-1).applyEuler(q),(new Q5).set(0,1,0).applyEuler(q)),_=(new Q5).set(0,1,0);return(Math.abs(y.cross(q).dot(_))<1e-5?_:q).toArray()},render:function(y){var q=this,_=y.getGL();if(!_)return!1;this._currentCullingMask=Hu(this._cullingLayers,y.getRenderLayerInfoMap(),!0);var s=q.renderTarget,p=q.getSize(y),O=((q.gv=y)._camera=q,y._frameState.renderState.glState.color.clear.slice(0)),L=(oK(_,q.s("camera.background")),y.getEye);if(y.getEye=function(){return q.p3()},y.syncRenderState(),q.isCube())for(var $=nQ.CubeDirectionParam,k=0;k<6;k++)s&&s.bind(_,k),y._18Q=null,q.lookAtDirection([$[6*k+0],$[6*k+1],$[6*k+2]],[$[6*k+3],$[6*k+4],$[6*k+5]]),!1!==q.s("camera.clear")&&_.clear(16384),y.setViewport(_,0,0,p[0],p[1]),q.s("camera.onlySky")?y.renderSky():y.renderScene({renderAxis:q.s("camera.renderAxis"),renderGrid:q.s("camera.renderGrid"),renderEdit:q.s("camera.renderEdit"),renderShadowMap:q.s("camera.renderShadowMap"),renderReflector:!1}),y._18Q=null,s&&s.unbind(_);else s&&s.bind(_),y._18Q=null,!1!==q.s("camera.clear")&&_.clear(16384),y.overlappingBox.clear(),y.setViewport(_,0,0,p[0],p[1]),q.s("camera.onlySky")?y.renderSky():y.renderScene({renderAxis:q.s("camera.renderAxis"),renderGrid:q.s("camera.renderGrid"),renderEdit:q.s("camera.renderEdit"),renderShadowMap:q.s("camera.renderShadowMap")}),y._18Q=null,s&&s.unbind(_);return y.getEye=L,oK(_,O),y._camera=null,!(q.gv=null)}}),P.Block=function(){Kx(vQ,this),this.s({"shadow.cast":!1,"shadow.receive":!1})}),_=(zU("Block",WQ,{_icon:"block_icon",_clickThroughEnabled:!1,_syncSize:!0,_scaleMode:"2d",ms_ac:["clickThroughEnabled","syncSize","scaleMode"],getUIClass:function(){return TE},get3dUIClass:function(){return W6},onChildAdded:function(y,q){vQ.superClass.onChildAdded.apply(this,arguments),this.updateFromChildren()},onChildRemoved:function(y,q){vQ.superClass.onChildRemoved.apply(this,arguments),this.updateFromChildren()},_getBoundingBox:(ZB=new G,function(y,q){if(!(y=y instanceof WQ?[y]:y)||0===y.length)return M5;var q=[],_=(function(y,s){var p=(new G).makeRotationFromEuler(this.getEuler()).setPosition((new Q5).fromArray(this.p3()));p.getInverse(p),y.forEach(function(y){var q,_;W(y)&&(q=s,_=p,ZB.fromArray(J8(y)),y=y.getAnchor3d(),q.push((new Q5).set(0-y.x,0-y.y,0-y.z).applyMatrix4(ZB).applyMatrix4(_)),q.push((new Q5).set(0-y.x,0-y.y,1-y.z).applyMatrix4(ZB).applyMatrix4(_)),q.push((new Q5).set(0-y.x,1-y.y,0-y.z).applyMatrix4(ZB).applyMatrix4(_)),q.push((new Q5).set(0-y.x,1-y.y,1-y.z).applyMatrix4(ZB).applyMatrix4(_)),q.push((new Q5).set(1-y.x,0-y.y,0-y.z).applyMatrix4(ZB).applyMatrix4(_)),q.push((new Q5).set(1-y.x,0-y.y,1-y.z).applyMatrix4(ZB).applyMatrix4(_)),q.push((new Q5).set(1-y.x,1-y.y,0-y.z).applyMatrix4(ZB).applyMatrix4(_)),q.push((new Q5).set(1-y.x,1-y.y,1-y.z).applyMatrix4(ZB).applyMatrix4(_)))})}.call(this,y,q),[1/0,1/0,1/0]),s=[-1/0,-1/0,-1/0];return q.forEach(function(y){_[0]=Math.min(y.x,_[0]),_[1]=Math.min(y.y,_[1]),_[2]=Math.min(y.z,_[2]),s[0]=Math.max(y.x,s[0]),s[1]=Math.max(y.y,s[1]),s[2]=Math.max(y.z,s[2])}),{min:_,max:s}}),updateFromChildren:function(){var y,q,_,s,p,O,L,$,k;ln||this._updatingToChildren||!this._syncSize||0===this.size()||this._freezeSyncFromChildren||(_=this._getBoundingBox(this.toChildren(W)))&&(this._updatingFromChildren=1,y=(new Q5).fromArray(this.getScale3d()),q=(new Q5).fromArray(_.min),_=(new Q5).fromArray(_.max),L=E5.blockMinSize,k=new Q5,0===(_=_.clone().sub(q)).x&&k.setX(.5),0===_.y&&k.setY(.5),0===_.z&&k.setZ(.5),s=this._width==M5||-1===this._width,p=new Q5(this.getAnchor3d()),O=y.clone().multiply((new Q5).fromArray(this.s3())),0===($=_.clone()).x&&$.setX(L),0===$.y&&$.setY(L),0===$.z&&$.setZ(L),O=(L=p.clone().multiply(O)).clone().multiplyScalar(-1).sub(q).divide($).add(L.divide($)).add(k),L=this.s("keepPosition"),s||this._anchorChanged||this._scaleChanged||!L?($=(p=!s&&L?O:p).clone().multiply(_).add(q).applyEuler(this.getEuler()).add((new Q5).fromArray(this.p3())),this.p3([$.x,$.y,$.z])):this.setAnchor3d(O.x,O.y,O.z),k=new Q5(1,1,1).divide(y).multiply(_),this.s3(Math.abs(k.x),Math.abs(k.y),Math.abs(k.z)),delete this._updatingFromChildren)},setPosition:function(y,q){this._updatingToChildren||(q=2===arguments.length?{x:y,y:q}:y,ln||this._updatingFromChildren||(this._updatingToChildren=1,jU(this._children,q.x-this._position.x,q.y-this._position.y),delete this._updatingToChildren),vQ.superClass.setPosition.call(this,q))},setSize3d:function(){this.beginTransaction(),vQ.superClass.setSize3d.apply(this,arguments),this.endTransaction()},setTall:function(y){var q;this._updatingToChildren||(this.beginTransaction(),(y=_5(y,E5.blockMinSize))!==(q=this.getTall())&&vQ.superClass.setTall.call(this,y),ln||this._updatingFromChildren||(this._updatingToChildren=1,this._adjustChildTallOrScale(y/q,"size"),delete this._updatingToChildren,this.updateFromChildren()),this.endTransaction())},setWidth:function(y){return this.setSize(y,this.getHeight())},setHeight:function(y){return this.setSize(this.getWidth(),y)},setSize:function(y,q){var _,s,p=E5.blockMinSize;y=_5(y,p),q=_5(q,p),(p=this)._updatingToChildren||(2!==arguments.length&&(q=y.height,y=y.width),this.beginTransaction(),_=p.getWidth(),s=p.getHeight(),y!==_&&vQ.superClass.setWidth.call(p,y),q!==s&&vQ.superClass.setHeight.call(p,q),ln||p._updatingFromChildren||(p._updatingToChildren=1,p._adjustChildScaleOrSize(y/_,q/s,"size"),delete p._updatingToChildren,p.updateFromChildren()),this.endTransaction())},_adjustChildScaleOrSize:function(M,E,H){var w,Q;this._syncSize&&(w=this.getPosition(),Q=this.getRotation(),this.eachChild(function(y){var q,_,s,p,O,L,$,k;W(y)&&(p=y.getPosition(),k=y.getRotation(),q=y.getWidth(),_=y.getHeight(),L=(s=y.getScale()).x*q,$=s.y*_,0!=L&&0!=$&&(M*E<0&&y.setRotation(-1*k),(p=new WB(k,p.x,p.y,L,$)).translate(-w.x,-w.y),p.rotate(-Q),k=D5(p.b*Math.sign(L),p.a*Math.sign(L)),p.scale(M,E),$=H5(k),k=Math.abs($)<.001?(L=p5(k),O=p.b/L,-p.c/L):(O=p.a/$,p.d/$),"scale"===H?y.setScale(O/q,k/_):"size"===H&&(L=O/s.x,$=k/s.y,y.setScale(hx(O)*Math.abs(s.x),hx(k)*Math.abs(s.y)),y instanceof P.Shape?(y.setWidthForce(Math.max(Math.abs(L),1e-5)),y.setHeightForce(Math.max(Math.abs($),1e-5))):y.setSize(Math.max(.01,Math.abs(L)),Math.max(.01,Math.abs($)))),p.rotate(Q),p.translate(w.x,w.y),y.setPosition(p.tx,p.ty)))}))},_calcChangeFactor:function(y,q,_,s){var y=F5(y),p=(_=F5(_))<y?y/_:_/y;return y=F5(q),_=F5(s),_5(p,_<y?y/_:_/y)},setElevation:function(y){this._updatingToChildren||0!=(y-=this.getElevation())&&(ln||this._updatingFromChildren||(this._updatingToChildren=1,jU(this._children,0,y,0),delete this._updatingToChildren),vQ.superClass.setElevation.apply(this,arguments))},setScaleTall:function(y){var q=this;if(!q._updatingToChildren){var _,s=q.getScaleTall();if(F5(y)<.01&&(y=.01*(hx(y)||hx(s))),"3d"===q._scaleMode)return _=q.getScale(),void q.setScale3d(_.x,y,_.y);vQ.superClass.setScaleTall.call(q,y),ln||q._updatingFromChildren||(q._updatingToChildren=1,q._adjustChildTallOrScale(y/s,"scale"),delete q._updatingToChildren,q._scaleChanged=1,this.updateFromChildren(),delete q._scaleChanged)}},_adjustChildTallOrScale:function(_,s){var p;this._syncSize&&(p=this.getElevation(),this.eachChild(function(y){var q;W(y)&&("size"===s?(q=y.getTall(),_<0&&y.setScaleTall(-1*y.getScaleTall()),y.setTall(Math.max(.01,Math.abs(q*_)))):(q=y.getScaleTall(),y.setScaleTall(q*_)),y.setElevation(p+(y.getElevation()-p)*_))}))},setAnchor3d:function(){var y;if(!this._updatingToChildren)return this.beginTransaction(),(y=vQ.superClass.setAnchor3d.apply(this,arguments))&&!ln&&!this._updatingFromChildren&&this._syncSize&&(this._anchorChanged=1,this.updateFromChildren(),delete this._anchorChanged),this.endTransaction(),y},setAnchor:function(y,q,_){var s=this;if(!s._updatingToChildren){var p=s.getAnchor(),O=vQ.superClass.setAnchor.apply(s,arguments);if(ln||s._updatingFromChildren||!s._syncSize)return O;s._updatingToChildren=1;var L=s.getAnchor(),$=(k=s.getSize()).width*(p.x-L.x),k=k.height*(p.y-L.y),p=(new G).compose(new Q5,this.getQuaternion(),new Q5(this.getScale3d())),M=new Q5($,0,k).applyMatrix4(p);return s.eachChild(function(y){var q;W(y)&&(q=new Q5(y.p3()),y.p3(q.add(M).toArray()))}),delete s._updatingToChildren,O}},setAnchorElevation:function(y){var q=this;if(!q._updatingToChildren){var _=q.getAnchorElevation(),s=vQ.superClass.setAnchorElevation.apply(q,arguments);if(ln||q._updatingFromChildren||!q._syncSize)return s;q._updatingToChildren=1;var p=q.getAnchorElevation(),_=q.getTall()*(_-p),p=(new G).compose(new Q5,this.getQuaternion(),new Q5(this.getScale3d())),O=new Q5(0,_,0).applyMatrix4(p);return q.eachChild(function(y){var q;W(y)&&(q=new Q5(y.p3()),y.p3(q.add(O).toArray()))}),delete q._updatingToChildren,s}},setRotation:function(y){this._updateChildrenRotation3d("rotation",y)},setRotationX:function(y){this._updateChildrenRotation3d("rotationX",y)},setRotationZ:function(y){this._updateChildrenRotation3d("rotationZ",y)},setRotation3d:function(y,q,_){var s,p,O=this;O._updatingToChildren||(s=O.r3(),vQ.superClass.setRotation3d.apply(O,arguments),p=O.r3(),ln||O._updatingFromChildren||(O._updatingToChildren=1,O.eachChild(function(y){W(y)&&y.syncRotation3d(O,p,s)}),delete O._updatingToChildren))},_updateChildrenRotation3d:function(y,q){var _;this._updatingToChildren||(_=this[Ox(y)](),vQ.superClass[Lx(y)].call(this,q),ln||this._updatingFromChildren||this._updateRotationToChildren(y,q-_))},_updateRotationToChildren:function(q,_){var s=this;s._updatingToChildren=1,s.eachChild(function(y){W(y)&&y._11Q(s,q,_)}),delete s._updatingToChildren},setScale:function(y,q){var _,s=this;s._updatingToChildren||(null==q&&(q=y.y,y=y.x),_=s.getScale(),F5(y)<.01&&(y=.01*(hx(y)||hx(_.x))),F5(q)<.01&&(q=.01*(hx(q)||hx(_.y))),"3d"===s._scaleMode?s.setScale3d(y,s.getScaleTall(),q):(vQ.superClass.setScale.call(s,y,q),ln||s._updatingFromChildren||(s._updatingToChildren=1,y/=_.x,q/=_.y,s._adjustChildScaleOrSize(y,q,"scale"),delete s._updatingToChildren,s._scaleChanged=1,s.updateFromChildren(),delete s._scaleChanged)))},onPropertyChanged:function(y){vQ.superClass.onPropertyChanged.call(this,y),"s:3d.visible"===y.property&&this._invalidateChildrenBatch()},_invalidateChildrenBatch:function(){this.eachChild(function(y){(y.s("batch")||y.s("wf.geometry")||y.s("wf.visible"))&&y.iv(),y instanceof vQ&&y._invalidateChildrenBatch()})},getSerializableProperties:function(){var y=vQ.superClass.getSerializableProperties.call(this);return y.clickThroughEnabled=1,y.syncSize=1,y.scaleMode=1,y},setScale3d:(TB=new Q5,iB=new Q5,NB=new Q5,aB=new G,lB=new AB,jB=new Q5,function(y,q,_){var s,p,O=this,q="number"==typeof y?{x:y,y:q,z:_}:y.length?{x:y[0],y:y[1],z:y[2]}:y;"3d"!==O._scaleMode?vQ.superClass.setScale3d.apply(O,arguments):O._syncSize&&0!==O.size()&&((s=O.getMatrix4()).getInverse(s),vQ.superClass.setScaleTall.call(O,q.y),vQ.superClass.setScale.call(O,q.x,q.z),p=O.getMatrix4(),ln||O._updatingFromChildren||(O._updatingToChildren=1,O.eachChild(function(y){var q;W(y)&&(iB.fromArray(y.s3()),y instanceof P.Polyline?(q=y.getThickness(),iB.x=iB.x||q,iB.y=iB.y||q,iB.z=iB.z||q,jB.copy(y.getScale3d()).multiplyScalar(q),y.getQuaternion(lB),TB.copy(y.p3()),NB.copy(y.getFinalScale3d()),NB.x=NB.x||jB.x,NB.y=NB.y||jB.y,NB.z=NB.z||jB.z,aB.compose(TB,lB,NB)):y.getMatrix4(aB),aB.premultiply(s).premultiply(p),aB.decompose(TB,lB,NB),NB.divide(iB),y.setQuaternion(lB),y.p3(TB.toArray()),y.setScale3d(NB.toArray()))}),delete O._updatingToChildren,O._scaleChanged=1,O.updateFromChildren(),delete O._scaleChanged))})}),P.Grid=function(){Kx(P.Grid,this)}),bQ=(zU("Grid",WQ,{IRotatable:!1,_icon:"grid_icon",_image:M5,getUIClass:function(){return aE},setRotation:function(){},getCellRect:function(y,q){var _=this.s("grid.row.count"),s=this.s("grid.column.count");if(_<=0||s<=0||y<0||_<=y||q<0||s<=q)return M5;var p,O,L,$=this.getRect(),k=this.s("grid.row.percents"),M=this.s("grid.column.percents");if(cu($,this,"grid.border",-1),k&&k._as&&(k=k._as),M&&M._as&&(M=M._as),k&&k.length===_){for(p=L=0;p<y;p++)L+=$.height*k[p];$.y+=L,$.height=$.height*k[y]}else $.height=$.height/_,$.y+=$.height*y;if(M&&M.length===s){for(p=O=0;p<q;p++)O+=$.width*M[p];$.x+=O,$.width=$.width*M[q]}else $.width=$.width/s,$.x+=$.width*q;return s8($,-this.s("grid.gap")),$}}),P.Text=function(){Kx(bQ,this),this.setSize(100,50),this.s("text","TEXT")}),IQ=(zU("Text",WQ,{_icon:"text_icon",_image:"__text__",getUIClass:function(){return lE},setWidth:function(y){bQ.superClass.setWidth.call(this,y=y||.001)},setHeight:function(y){bQ.superClass.setHeight.call(this,y=y||.001)},toLabel:function(){return this._displayName||this._name||this.s("text")}}),r5("__text__",{width:{value:100,isSafeFunc:!0,func:function(y){return y?y._width:100}},height:{value:50,isSafeFunc:!0,func:function(y){return y?y._height:50}},comps:[{type:"text",relative:!0,rect:[0,0,1,1],text:{func:"style@text"},align:{func:"style@text.align"},vAlign:{func:"style@text.vAlign"},color:{func:"style@text.color"},font:{func:"style@text.font"},shadow:{func:"style@text.shadow"},shadowColor:{func:"style@text.shadow.color"},shadowBlur:{func:"style@text.shadow.blur"},shadowOffsetX:{func:"style@text.shadow.offset.x"},shadowOffsetY:{func:"style@text.shadow.offset.y"},scaleX:{func:"style@text.scale.x"},scaleY:{func:"style@text.scale.y"},gradient:{func:"style@text.gradient"},gradientColor:{func:"style@text.gradient.color"},gradientPack:{func:"style@text.gradient.pack"},decoration:{func:"style@text.decoration"},vertical:{func:"style@text.vertical"},verticalGap:{func:"style@text.vertical.gap"},wrap:{func:"style@text.wrap"},letterGap:{func:"style@text.letter.gap"},borderWidth:{func:"style@text.border.width"},borderColor:{func:"style@text.border.color"}}]}),P.Shape=function(){Kx(IQ,this),this._59O=new n}),UQ=(IQ.__de__=q,zU("Shape",WQ,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return iE},get3dUIClass:function(){return z6},getLength:function(y){return Px(bl(this._59O,this._58O,y,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var y=this._58O;return y&&new n(y._as.slice(0))},setSegments:function(y){var q=this._58O;y=y?Hx(y)?new n(y.slice(0)):new n(y._as.slice(0)):null,(q&&y&&q._as.join(",")!==y._as.join(",")||q!==y)&&(this._58O=y,this.fp("segments",q,y))},getPoints:function(){return this._59O},toPoints:function(){var y=this._59O;return new n(y._as.slice(0))},getPointsMatrix2d:function(){var y=new e.Matrix2d,q=this.getPosition(),_=this.getScale(),s=this.getRotation();return y.translate(-q.x,-q.y).scale(_.x,_.y).rotate(s).translate(q.x,q.y),y},getPointsMatrix3d:function(){var y=new e.Matrix4,q=y.getElements(),_=this.p3(),s=(XK(q,_),GQ(q,this.getFinalRotation3d(),this.getRotationMode()),this.getScale3d()),p=this._dynamicScale3d;return p&&(s[0]*=p[0],s[1]*=p[1],s[2]*=p[2]),TK(q,s),XK(q,N8(_)),y},setPoints:function(y,q){var _,s,p=this,O=p._59O;y=y?Hx(y)?new n(y.slice(0)):new n(y._as.slice(0)):new n,q&&(_=p.getPosition(),s=new WB(p.getRotation(),0,0,p.getScale().x,p.getScale().y)),(O&&y&&O._as.join(",")!==y._as.join(",")||O!==y)&&(p._59O=y,p.fs(),p.fp("points",O,y)),q&&(y=(O=p.getPosition()).x-_.x,q=O.y-_.y,_=s.tf(y,q),p.setPosition(O.x-y+_.x,O.y-q+_.y))},setPoints3d:function(y,q){var _=new Q5(this.p3()),s=this.getPointsMatrix3d();s.setPosition(new Q5),dQ.superClass.setPoints.call(this,y),q&&(y=new Q5(this.p3()).clone().sub(_).applyMatrix4(s),_.add(y),this.p3(_.x,_.y,_.z))},addPoint:function(y,q,_){var s=this.toPoints();s.add(y,q),this.setPoints(s,_)},setPoint:function(y,q,_){var s=this.toPoints();s.set(y,q),this.setPoints(s,_)},removePointAt:function(y){var q=this.toPoints();q.removeAt(y),this.setPoints(q)},setWidthForce:function(y){var q,_,s,p,O=this;O._55I||ln||!O.getWidth()||(O._55I=1,q=O._position.x,_=y/O.getWidth(),s=O.toPoints(),p=new n,1!=_&&(s.each(function(y){p.add({x:(y.x-q)*_+q,y:y.y,e:y.e})}),O.setPoints(p),nl(O,[_,0,0,1,q*(1-_),0]),O.fs()),delete O._55I),IQ.superClass.setWidth.call(O,y)},setWidth:function(y){return this.setWidthForce(y<x8?x8:y)},setHeightForce:function(y){var q,_,s,p,O=this;O._55I||ln||!O.getHeight()||(O._55I=1,q=O._position.y,_=y/O.getHeight(),s=O.toPoints(),p=new n,1!=_&&(s.each(function(y){p.add({x:y.x,y:(y.y-q)*_+q,e:y.e})}),O.setPoints(p),nl(O,[1,0,0,_,0,q*(1-_)]),O.fs()),delete O._55I),IQ.superClass.setHeight.call(O,y)},setHeight:function(y){return this.setHeightForce(y<x8?x8:y)},setAnchorElevation:function(y){this._55I=!0;var q,_=this._updatingAnchor3d,y=(ln||_||(q=this.getAnchorElevation(),0!=(q=this.getTall()*(q-y))&&this.shiftPointsElevation(q)),IQ.superClass.setAnchorElevation.apply(this,arguments));return _||delete this._55I,y},getShapeElevation:function(y){return this._54O-(this.getTall()||0)*(this._anchorElevation-.5)},setAnchor3d:function(y,q,_,s){var p,O,L,$,k,M=this,y=("number"==typeof y?p={x:y,y:q,z:_}:(p=y.length?{x:y[0],y:y[1],z:y[2]}:y,s=q),M._55I=!0,M._updatingAnchor3d=!0,M.beginTransaction(),ln||(_=M.getAnchor3d(),y=M.getSize(),q=M.getTall(),O=y.width*(_.x-p.x),L=y.height*(_.z-p.z),$=q*(_.y-p.y),s||M.shiftPoints(O,L,$),k=M.p3()),IQ.superClass.setAnchor3d.apply(M,arguments));return ln||s&&(q=M.p3(),M.shiftPoints(q[0]-k[0]+O,q[2]-k[2]+L,q[1]-k[1]+$)),M.endTransaction(),delete M._updatingAnchor3d,delete M._55I,y},setAnchor:function(y,q,_){var s,p,O,L=this,$=(L._55I=!0,L._updatingAnchor3d),k=!ln&&!$,q=(k&&("number"==typeof y?p={x:y,y:q}:(p=y.length?{x:y[0],y:y[1]}:y,_=q),y=L.getAnchor(),s=(q=L.getSize()).width*(y.x-p.x),p=q.height*(y.y-p.y),_||L.shiftPoints(s,p),O=L.getPosition()),IQ.superClass.setAnchor.apply(L,arguments));return k&&(y=L.getPosition(),_&&L.shiftPoints(y.x-O.x+s,y.y-O.y+p)),$||delete L._55I,q},shiftPoints:function(_,s,p){var O,y,L;(_||s||p)&&(O=this.getElevation()||0,y=this.toPoints(),L=new n,y.each(function(y){var q=y.e;L.add({x:y.x+_,y:y.y+s,e:q=p?(q==M5?O:q)+p:q})}),this.setPoints(L),this.fs())},shiftPointsElevation:function(y){return this.shiftPoints(0,0,y)},setPosition:function(y,q){var _=this;if(!_._28Q){if(_._28Q=1,!_._55I&&!ln){if(y=(q=2===arguments.length?{x:y,y:q}:y).x-_._position.x,q=q.y-_._position.y,0==y&&0==q)return void delete _._28Q;_._55I=1,_.shiftPoints(y,q),nl(_,[1,0,0,1,y,q]),delete _._55I}IQ.superClass.setPosition.apply(_,arguments),delete _._28Q}},fs:function(){this.fireShapeChange()},_70I:function(){if(2!==this._59O.size())return!1;var y=this._58O;return!y||2===y.size()&&1===y.get(0)&&2===y.get(1)},fireShapeChange:function(){var y;this._55I||ln||(y=bA(this._59O))&&(this._55I=1,this.setRect(y),delete this._55I),this.fp(iD,!1,!0)},getSerializableProperties:function(){var y=IQ.superClass.getSerializableProperties.call(this);return y.segments=1,y.points=1,y.thickness=1,y.closePath=1,y}}),P.Points=function(){Kx(UQ,this)}),dQ=(zU("Points",WQ,{_59O:[],_colors:[],_sizes:[],_uvoffsets:[],get3dUIClass:function(){return e6},getPoints:function(){return this._59O},setPoints:function(y){var q=this._59O,_=(y=y?y.slice(0):[])[0];if($x(_)){var s=y;y=[];for(var p=0,O=s.length;p<O;p+=3)y.push({x:s[p],e:s[p+1],y:s[p+2]})}this._59O=y,this._pointsDirty=!0,this.fp("points",q,this._59O)},setPoint:function(y,q){var _=this._59O.slice(0);_[y]=q,this.setPoints(_)},addPoint:function(y){this.setPoint(this._59O.length,y)},getColors:function(){return this._colors},setColors:function(y){var q=this._colors;y=y?y.slice(0):[],this._colors=y,this._colorsDirty=!0,this.fp("colors",q,y)},setPointColor:function(y,q){var _=this._colors.slice(0);_[y]=q,this.setColors(_)},getSizes:function(){return this._sizes},setSizes:function(y){var q=this._sizes;y=y?y.slice(0):[],this._sizes=y,this._sizesDirty=!0,this.fp("sizes",q,this._sizes)},setPointSize:function(y,q){var _=this._sizes.slice(0);_[y]=q,this.setSizes(_)},getUvoffsets:function(){return this._uvoffsets},setUvoffsets:function(y){var q=this._uvoffsets;y=y?y.slice(0):[],this._uvoffsets=y,this._offsetsDirty=!0,this.fp("uvoffsets",q,this._uvoffsets)},setPointUvoffset:function(y,q,_){var s;"object"==typeof q?(s=q[0],_=q[1]):s=q,(q=this._uvoffsets.slice(0))[2*y+0]=s,q[2*y+1]=_,this.setUvoffsets(q)},getPointInfo:function(y){if(!(q=this.getPoints())||q[y]==M5)return M5;var q=[(q=q[y]).x,q.e,q.y],_=this.mat||J8(this),s=[q[0],q[1],q[2]];return C8(s,_),_=this.getColors()[y]||this.s("points.color"),{size:(y=this.getSizes()[y])==M5?this.s("points.size"):y,color:_,local:q,world:s}},getSerializableProperties:function(){var y=UQ.superClass.getSerializableProperties.call(this);return y.points=1,y.colors=1,y.sizes=1,y.uvoffsets=1,y},onPropertyChanged:function(y){UQ.superClass.onPropertyChanged.call(this,y),"s:points.color"===(y=y.property)?this._colorsDirty=!0:"s:points.size"===y?this._sizesDirty=!0:"s:points.model"===y&&(this._modelDirty=!0)},getWidth:function(){if(0<=this._width)return this._width;var y=this.getStyle("points.model");return(y=y&&b4(y))&&y.rawS3?y.rawS3[0]:1},getHeight:function(){if(0<=this._height)return this._height;var y=this.getStyle("points.model");return(y=y&&b4(y))&&y.rawS3?y.rawS3[2]:1},getTall:function(){if(0<=this._tall)return this._tall;var y=this.getStyle("points.model");return(y=y&&b4(y))&&y.rawS3?y.rawS3[1]:1}}),P.Polyline=function(){Kx(dQ,this),this.s({"shape.background":null,"shape.border.width":2}),this._geometryVersion=0}),yE=(zU("Polyline",IQ,{_icon:"polyline_icon",get3dUIClass:function(){return G6},getUIClass:function(){return NE},setClosePath:function(y){},setTall:function(y){var q,_,s,p,O=this;O.beginTransaction(),O._55I||O._24Q||ln||!O.getTall()||(O._24Q=1,q=O._54O,1!=(_=y/O.getTall())&&(s=O.toPoints(),p=new n,s.each(function(y){p.add({x:y.x,y:y.y,e:y.e==M5?y.e:(y.e-q)*_+q})}),O.setPoints(p),O.fs()),delete O._24Q),dQ.superClass.setTall.call(O,y),O.endTransaction()},setElevation:function(y){this.beginTransaction(),this._55I||this._24Q||ln||(this._24Q=1,0!=(y-=this._54O)&&this.shiftPointsElevation(y),delete this._24Q),dQ.superClass.setElevation.apply(this,arguments),this.endTransaction()},fireShapeChange:function(){var y=this,q=y._59O;if(!y._55I&&!y._24Q&&!ln){var _=q.size();if(_){for(var s=1,p=q.get(0),O=y._54O,L=(p.e==M5&&(p.e=O),p.e),$=0;s<_;s++){(p=q.get(s)).e==M5&&(p.e=O);var k=s5(L,p.e),M=_5(L+$,p.e),L=k,$=M-k}y._24Q=1,y.setTall($),y.setElevation(L+$*y._anchorElevation),delete y._24Q}}dQ.superClass.fireShapeChange.apply(y,arguments)},onPropertyChanged:(KB={},["points","segments","thickness","position","elevation","rotation","rotationX","rotationZ","rotationMode","scale","scaleTall","s:shape.border.color","s:shape.border.gradient.color","s:shape.border.pattern","s:shape.dash","s:shape.dash.color","s:shape.dash.pattern","s:shape.dash.offset","s:3d.clip.direction","s:repeat.uv.length","s:rotate.vs.length","s:rotate.uv.length","s:body.color","s:shape3d","s:shape3d.visible","s:shape3d.image","s:shape3d.smooth","s:shape3d.resolution","s:shape3d.color","s:shape3d.blend","s:shape3d.side","s:shape3d.start.angle","s:shape3d.sweep.angle","s:shape3d.top.cap","s:shape3d.top.image","s:shape3d.top.visible","s:shape3d.top.color","s:shape3d.bottom.cap","s:shape3d.bottom.image","s:shape3d.bottom.visible","s:shape3d.bottom.color","s:shape3d.uv.union"].forEach(function(y){KB[y]=!0}),function(y){dQ.superClass.onPropertyChanged.call(this,y),KB[y.property]&&this._geometryVersion++})}),P.SubGraph=function(){Kx(yE,this)}),qE=(zU("SubGraph",WQ,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){yE.superClass._8I.call(this),this.eachChild(function(y){W(y)&&y._8I()})}}),E5.loadingRefGraph=0,P.RefGraph=function(){Kx(qE,this)}),_E=(zU("RefGraph",vQ,{_icon:"refGraph_icon",getRef:function(){return this._ref},setRef:function(y){var q=this._ref;this._ref=y,this.fp("ref",q,y),this.updateRef()},_21I:function(y){qE.superClass._21I.apply(this,arguments),this.updateRef()},updateRef:function(){var _,q,s=this;E5.loadingRefGraph++,s.clearChildrenFromDataModel(),E5.loadingRefGraph--,s._ref&&s._dataModel&&(s._xhrLoadHandler&&(s._xhrLoadHandler.cancel=!0),_=ln,(q=s._xhrLoadHandler=function(y){var q;y&&s._dataModel&&(E5.loadingRefGraph++,q=s._pendingUpdateInfo={needToRestore:_},_&&(q.p3=s.p3(),q.s3=s.s3(),q.r3=s.r3(),q.anchor3d=s.getAnchor3d(),q.scale3d=s.getScale3d()),s.r3(0,0,0),s.setScale3d(1,1,1),s.setAnchor3d(.5,.5,.5),s.p3(0,0,0),q=E5.parse(y),(y=s._dataModel.deserialize(q,s,{justDatas:!0})).each(function(y){y._refGraph=s}),s.checkPendingUpdateInfo(),E5.loadingRefGraph--,E5.handleRefGraphLoaded(s,y,q))}).xhrLoadCalled=!1,E5.load(s._ref,function(y){q.cancel||(q.xhrLoadCalled?q(y):tA(function(){q(y)}))}),q.xhrLoadCalled=!0)},checkPendingUpdateInfo:function(){var q,y=this,_=y._pendingUpdateInfo;_?(q=!0,this.eachChild(function(y){(y._pendingCheckImageJSON||y._pendingUpdateInfo)&&(q=!1)}),q&&(E5.loadingRefGraph++,y._pendingUpdateInfo=null,y.updateFromChildren(),_.needToRestore&&(y.setAnchor3d(_.anchor3d),y.setScale3d(_.scale3d),y.r3(_.r3),y.p3(_.p3)),this.getParent()instanceof qE&&this.getParent().checkPendingUpdateInfo(),y.onPendingUpdated&&y.onPendingUpdated(),E5.loadingRefGraph--)):y.onPendingUpdated&&(E5.loadingRefGraph++,y.onPendingUpdated(),E5.loadingRefGraph--)},getSerializableProperties:function(){var y=qE.superClass.getSerializableProperties.call(this);return y.ref=1,y}}),P.EdgeGroup=function(y,q){this._70O=y,this._siblings=q;for(var _,s=0,p=y.size(),O=X5[fD];s<p;s++)if((_=y.get(s).getOwnStyle(fD))!=M5){O=_;break}for(O==M5&&(O=!0),(q=(q=E5.edgeGroupAgentFunc)&&q(y))&&q!==y.get(0)&&(y.remove(q),y.add(q,0)),s=0;s<p;s++)y.get(s).s(fD,O)},zU("EdgeGroup",o,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(y){return this._70O.get(y)},indexOf:function(y){return this._70O.indexOf(y)},each:function(y,q){this._70O.each(y,q)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(q,_){this._siblings.each(function(y){y._70O.each(q,_)})}}),ax(E5,{setConnectAction:function(y,q,_){var s=Dn[y]={type:y,action:q};if(_)for(var p in _)s[p]=_[p]},getConnectAction:function(y,q){if(!q){if(!y)return null;q=y.getCurrentConnectActionType()}return Dn[q]},doConnectAction:function(q,y,_,s){if(s=s||q.getCurrentConnectActionType(),!(s=Dn[s]))return!1;var p=s.action;return!!p&&(y instanceof v.Group?q.sm().getSelection().each(function(y){p.call(null,q,y,_)}):p.call(null,q,y,_),!0)},doDeleteConnectionAction:function(q,y,_){if(_=_||q.getCurrentConnectActionType(),!(_=Dn[_])||!_.delete)return!1;var s=_.delete.action;return!!s&&(y instanceof v.Group?q.sm().getSelection().each(function(y){s.call(null,q,y)}):s.call(null,q,y),!0)}}),P.JSONSerializer=function(y,q){this.dm=this._dataModel=y,E5.forceHierarchicalSerialization?this._hierarchical=!0:this._hierarchical=q==M5?y.isHierarchicalRendering():q}),sE=(zU("JSONSerializer",o,{ms_ac:["hierarchical"],serialize:function(y){return E5.stringify(this.toJSON(),y)},toJSON:function(){var y,q,_=this,s=_.dm,p=s.getRoots(),O=_.json={v:E5.getVersion(),p:{},a:{},d:[]},L=s.getSerializableAttrs();for(q in(y=s.getInit())&&(O.init=y),(y=s.getName())&&(O.p.name=y),(y=s.getBackground())&&(O.p.background=y),(y=s.getLayers())&&(O.p.layers=y),(y=s.getEnvmap())&&(O.p.envmap=y),(y=s.getEnvmapType())&&(O.p.envmapType=y),O.p.autoAdjustIndex=s.isAutoAdjustIndex(),O.p.hierarchicalRendering=s.isHierarchicalRendering(),L){var $=s.a(q);$!==k5&&_[YL](q,$,O.a)}return Cx(O.a)&&delete O.a,_._hierarchical?p.each(_.serializeData,this):s.each(function(y){_.serializeData(y)}),s.fireSerializeEvent({type:"serialize",json:O}),s.getPostProcessingData()&&(O.p.postProcessingData=s.getPostProcessingData()),O},isSerializable:function(y){return!0},getProperties:function(y){return y.getSerializableProperties()},getStyles:function(y){return y.getSerializableStyles()},getAttrs:function(y){return y.getSerializableAttrs()},serializeData:function(y){var q=this;if(q.isSerializable(y)&&!y._refGraph){var _,s,p,O,L,$=new(cA(y.getClassName())||y.getClass()),k={c:y.getClassName(),i:y.getId(),p:{},s:{},a:{}};for(_ in q.json.d.push(k),q.getProperties(y))/^_/.test(_)?(L=y[_],"_width"!==_&&"_height"!==_||L!=M5&&-1!==L||(O==k5&&(p=(y.s("layout.h")||y.s("layout.v"))&&y.getHost()||y instanceof P.Node&&(p=y.getParent())&&p instanceof P.Block||y.s("fullscreen"),O=y.hasInheritedSize()),p&&O&&(L=y[_]="_width"===_?y.getWidth():y.getHeight())),L!==$[_]&&q[YL](_.substr(1),L,k.p)):y[s=Ox(_)]&&(L=y[s]())!==$[s]()&&q[YL](_,L,k.p);for(_ in q.getStyles(y))(L=y.s(_))!==$.s(_)&&q[YL](_,L,k.s);for(_ in q.getAttrs(y))(L=y.a(_))!==$.a(_)&&q[YL](_,L,k.a);Cx(k.p)&&delete k.p,Cx(k.s)&&delete k.s,Cx(k.a)&&delete k.a}q._hierarchical&&y.getChildren().each(q.serializeData,q)},serializeValue:function(y,q,_){wx(q)?q={__a:q._as}:q instanceof iu?q={__i:q.getId()}:q instanceof Nu&&(q={__dm:q.serialize(0)}),_[y]=q},deserialize:function(y,q,_){var s=this;if(!w5(y)||!/.json$/.test(y))return s.deserializeImpl(y,q,_);E5.xhrLoad(y,function(y){s.deserializeImpl(y,q,_)})},deserializeImpl:function(y,q,_){var s=this.dm,p=(s.setDeserializing(!0),_=kx(_)?{setId:_}:Ex(_)?{finishFunc:_}:_||{},y=this.json=w5(y)?E5.parse(y):y,!_.justDatas&&y.a&&y.a.onPreDeserialize&&!_.disableOnPreDeserialize&&y.a.onPreDeserialize(y,s,_.view),s.beginTransaction(),ln++,this._82I={},new n),O=new n,L=0,$=y.d.length;if(_.justDatas||(!_.disableInit&&Ex(y.init)&&y.init(s),s.setInit(y.init)),!_.justDatas){for(var k in y.a)s.a(k,this[PL](y.a[k]));for(var M in y.p)s[Lx(M)](y.p[M])}for(;L<$;L++){var E=y.d[L],H=new(cA(E.c)),w=E.i;_.setId&&w!=M5&&(H._id=w),this._82I[w]=H,p.add(H),O.add(E)}for(L=0;L<$;L++)this.deserializeData(p.get(L),O.get(L));return p.each(function(y){q&&!y.getParent()&&y.setParent(q),s.add(y)}),_.__innerHandler__&&_.__innerHandler__(y,s,_.view,p),s.fireSerializeEvent({type:"deserialize",json:y}),ln--,s.endTransaction(),!_.justDatas&&y.a&&y.a.onPostDeserialize&&!_.disableOnPostDeserialize&&y.a.onPostDeserialize(y,s,_.view,p),_.finishFunc&&_.finishFunc(y,s,_.view,p),s.setDeserializing(!1),p},deserializeData:function(y,q){for(var _ in q.p)y[Lx(_)](this[PL](q.p[_]));for(_ in q.s)y.s(_,this[PL](q.s[_]));for(_ in q.a)y.a(_,this[PL](q.a[_]))},deserializeValue:function(y){if(Mx(y)){var q,_=y.__i;if(_!=M5)return this._82I[_];if((_=y.__dm)!=M5)return(q=new P.DataModel).deserialize(_),q;if(_=y.__a,Hx(_))return new n(_)}return y}}),ax(Nu,{serialize:function(y,q){return new _E(this,q).serialize(y)},toJSON:function(y){return new _E(this,y).toJSON()},deserialize:function(y,q,_){return new _E(this).deserialize(y,q,_)}}),P.OverlappingBox=function(y){this.gv=y,this.boxes={}}),pE=(zU("OverlappingBox",o,{clear:function(){var y,q=this.boxes;for(y in q)q[y].length=0},isOverlapping:function(y,q){var _,s,p,O,L=this.boxes,$=L[y];for($?(_=$.rects,s=$.length):$=L[y]={rects:_=[],length:s=0},p=0;p<s;p++)if((O=_[p]).x<q.x+q.w&&O.x+O.w>q.x&&O.y<q.y+q.h&&O.h+O.y>q.y)return!0;return _.length<=s?(_.push(q),$.length++):_[$.length++]=q,!1}}),ax(E5,{fetch:function(y,q){y.open((q=q||{}).method||"GET",q.url||"",!(null!=q.sync&&q.sync)),"json"===q.dataType&&y.setRequestHeader("Content-Type","application/json"),q.responseType&&(y.responseType=q.responseType),y.send(q.data)},convertImageSrc:function(y,q){(q=q&&"function"==typeof q?q:function(){})(y)}}),P.Request=function(){}),OE=(zU("Request",o,{_mimeType:k5,getXhr:function(){return this._xhr||(this._xhr=new XMLHttpRequest,this.overrideMimeType("text/plain")),this._xhr},send:function(y){var q=this.getXhr();y.mimeType&&this.overrideMimeType(y.mimeType),q.onload=this.onload,q.onerror=this.onerror,E5.fetch(q,y)},onload:function(){},onerror:function(){},getResponseType:function(){return this.getXhr().responseType},setOverrideMimeType:function(y){this.overrideMimeType(y)},getMimeType:function(){return this._mimeType},overrideMimeType:function(y){this.getXhr().overrideMimeType(this._mimeType=y)},getResponseHeader:function(y){return this.getXhr().getResponseHeader(y)},getResponseText:function(){var y=this.getXhr();return y.response||y.responseText},getStatus:function(){return this.getXhr().status}}),{}),LE={},$E={},kE={},ME=function(y){for(var q in $E)$E[q]&&!y["_loading_"+q+"_"]&&(kE[q][y["_loading_"+q+"_"]=hA()]=y)},EE=function($,k){function M(y,q){var _,s;if((_=L(y,q))&&(q=_),Q[y]=q,delete w[y],Cx(w)&&(w=$E[$]=M5,O)){for(var p in O)(s=O[p]).invalidateAll&&s.invalidateAll(k5,$+"Loaded",y),s.redraw&&s.redraw(),s.iv(),delete s["_loading_"+$+"_"];O=kE[$]={}}else if(q&&!Cx(O))for(var p in O)(s=O[p]).invalidateAll&&s.invalidateAll(k5,$+"Loading",y),s.redraw&&s.redraw(),s.iv()}function E(y,q){M(y,q),q&&E5[_](y,q)}var H,w=M5,Q=OE[$]={},O=kE[$]={},x=$.charAt(0).toUpperCase()+$.substr(1),L=(k=k||mn).handleLoaded||An,s="load"+x+"ByURL",_="handle"+x+"Loaded";LE[s]=function(_,s){if((s=s||_)&&!(w=w||($E[$]={}))[_]){var p=new pE,O=!(w[_]={request:p,url:s});if("string"==typeof s&&(O=Rn.test(s),s=E5.beforeLoadURL(s,_)),s.data){var y=s.data;O&&y&&(y=E5.parse(y)),k.delayToNextFrame?tA(function(){E(_,y)}):E(_,y)}else{p.onload=function(y){var q;200===this.status||0===this.status?(q=p.getResponseText(),O&&(q=E5.parse(q)),E(_,q)):M(_,E5["handleUnfound"+x](_,s)||M5)},p.onerror=function(y){M(_,E5["handleUnfound"+x](_,s)||M5)};var q={};if(q.url=encodeURI(s),q.sync=!1,k.loadingParam)for(var L in k.loadingParam)q[L]=k.loadingParam[L];p.send(q)}}},E5["get"+x]=function(y){var q=Q[y];return q===k5&&(LE[s](y),q=Q[y]),q},E5["get"+x+"Map"]=function(){return Q},"shader"==$?(H=function(y,q){q&&null!==q.data&&(Q[y]=null,n4[y]=null),LE[s](y,q)},E5.setShader=function(y,q,_){var s,p,O,L;w5(q)&&q.match(/\/\/ *FS/i)?(n4[y]=null,Q[y]=q):w5(q)&&w5(_)?(O=0,L=function(){0<O||(w&&(delete w[y],Cx(w)&&(w=$E[$]=M5)),H(y,s&&p?{data:s+"\n// FS\n"+p}:{data:null}))},q.match(/void\s+main/i)?s=q:(O++,E5.xhrLoad(q,function(y){s=y,O--,L()})),_.match(/void\s+main/i)?p=_:(O++,E5.xhrLoad(_,function(y){p=y,O--,L()})),O&&((w=w||($E[$]={}))[y]={}),L()):H(y,q)}):"shaderChunk"===$?E5.setShaderChunk=function(y,q,_){w5(q)&&(_==k5&&(q.match(/\n/i)?_=!1:q.match(/\.(glsl|fs|vs|shader|txt|js)$/)&&(_=!0)),_?LE[s](y,q):Q[y]=q)}:E5["set"+x]=function(y,q){w5(q)&&q.substr(0,12)==kn&&(q=E5.parse(q)),Ex(q)||Mx(q)?Q[y]=q:LE[s](y)},E5[_]=function(y,q){},E5["handleUnfound"+x]=function(y,q){}},HE=(E5.registerResourceLoader=function(y,q){EE(y,q)},vu.GraphView=function(y){var q=this;q._24I={},q._34I=new n,q.enableDirtyRect(),q._25I={},q._56I={},q._view=Ax(1,q),q._canvas=ex(q._view),q.dm(y||new Nu),this._coreInteractor=new VE(this),q.setEditable(!1),q.setScrollBarVisible(E5.graphViewScrollBarVisible),q._initView()},y("GraphView",o,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:[sL,pL,qL,_L,"resettable","editInteractor",yL,"zoomable","pannable","rectSelectable","autoScrollZone",HL,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","anchorEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_zoomable:E5.graphViewZoomable,_resettable:E5.graphViewResettable,_pannable:E5.graphViewPannable,_rectSelectable:E5.graphViewRectSelectable,_autoScrollZone:E5.graphViewAutoScrollZone,_rectSelectBackground:E5.graphViewRectSelectBackground,_rectSelectBorderColor:E5.graphViewRectSelectBorderColor,_editPointSize:E5.graphViewEditPointSize,_editPointBorderColor:E5.graphViewEditPointBorderColor,_editPointBackground:E5.graphViewEditPointBackground,_scrollBarColor:AU,_scrollBarSize:X,_autoHideScrollBar:pA,_autoMakeVisible:fU,_currentActionType:null,getCoreInteractor:function(){return this._coreInteractor},getLayers:function(){return this._dataModel.getLayers()},setLayers:function(y){this._dataModel.setLayers(y)},setEditable:function(y){var q,_=this,s=_.__interactorMap__;s||(q=vu.XEditInteractor,s=_.__interactorMap__={scrollBar:new DE(_),select:new tE(_),edit:new(q||YE)(_),text:new JE(_),move:new uE(_),default:new hE(_),touch:new cE(_,{editable:!1})}),y?(_._uieditable=!0,_.setInteractors([s.scrollBar,s.select,s.text,s.edit,s.move,s.default,s.touch])):(_._uieditable=!1,_.setInteractors([s.scrollBar,s.select,s.move,s.default,s.touch]))},getCanvas:function(){return this._canvas},_33I:function(y){var q=y.getUIClass();return q?new q(this,y):M5},getDataUI:function(y){var q=this._25I[y._id];return q===k5&&(q=this._33I(y),this._25I[y._id]=q),q},getNodeRect:function(y){return E5.getNodeRect(this,y)},getFullscreenDatas:function(){return this._dataModel.getFullscreenDatas()},getEdgeInfo:function(y){return(y=this.getDataUI(y))?(y._79o(),y._78o):null},getEdgeSourcePosition:function(y){var q=(y=this.getDataUI(y)).s,y=y._data._40I;return mu(this,y,q("edge.source.position"),q("edge.source.offset.x"),q("edge.source.offset.y"),q("edge.source.anchor.x"),q("edge.source.anchor.y"))},getEdgeTargetPosition:function(y){var q=(y=this.getDataUI(y)).s,y=y._data._41I;return mu(this,y,q("edge.target.position"),q("edge.target.offset.x"),q("edge.target.offset.y"),q("edge.target.anchor.x"),q("edge.target.anchor.y"))},dispose:function(){},invalidateAll:function(y){var q=this;if(y){for(var _ in q._25I)(_=q._25I[_])&&_.dispose();q._25I={},q._56I={},q._24I={},q._34I.clear(),q.redraw()}else q.dm().each(function(y){q.invalidateData(y)})},invalidateSelection:function(){var q=this;q.sm().each(function(y){q.invalidateData(y)})},invalidateData:function(y){this._24I[y._id]=y,this._21Q(y),this.iv()},_21Q:function(y){var q,_=this._24I;Qx(y)&&cn[y.s(rD)]&&((q=y.getSourceAgent())&&q.getAgentEdges().each(function(y){_[y._id]=y}),(q=y.getTargetAgent())&&q.getAgentEdges().each(function(y){_[y._id]=y}),this.iv())},redraw:function(y){this._32I||(y?this._34I.add(y):(this._32I=1,this._34I.clear()),this.iv())},each:function(y,q){var _=0,s=this.getLayers(),p=this._dataModel,O=p._datas._as,L=O.length;if(s)for(var $={},k=(p.isHierarchicalRendering()&&p.eachByHierarchical(function(y){w=y._layer,(H=(H=$[w])||($[w]=[])).push(y)}),s.length);_<k;_++){var M,E,H,w=s[_];if(Mx(w)&&(w=w.name),p.isHierarchicalRendering()){if((H=$[w])&&0<(M=H.length))for(var Q=0;Q<M;Q++)if(E=H[Q],!1===(q?y.call(q,E):y(E)))return}else for(Q=0;Q<L;Q++)if((E=O[Q])._layer===w&&!1===(q?y.call(q,E):y(E)))return}else if(p.isHierarchicalRendering())this._dataModel.eachByHierarchical(y,null,q);else for(;_<L;_++)if(E=O[_],!1===(q?y.call(q,E):y(E)))return},reverseEach:function(y,q){var _,s=this._dataModel,p=s._layers,O=s._datas._as,L=O.length;if(p){var $={};for(s.isHierarchicalRendering()&&s.reverseEachByHierarchical(function(y){H=y._layer,(E=(E=$[H])||($[H]=[])).push(y)}),_=p.length-1;0<=_;_--){var k,M,E,H=p[_];if(Mx(H)&&(H=H.name),s.isHierarchicalRendering()){if((E=$[H])&&0<(k=E.length))for(var w=0;w<k;w++)if(M=E[w],!1===(q?y.call(q,M):y(M)))return}else for(w=L-1;0<=w;w--)if((M=O[w])._layer===H&&!1===(q?y.call(q,M):y(M)))return}}else if(s.isHierarchicalRendering())s.reverseEachByHierarchical(y,null,q);else for(_=L-1;0<=_;_--)if(M=O[_],!1===(q?y.call(q,M):y(M)))return},getViewRect:function(){return this._29I},getContentRect:function(){var y,q,_=this,s=_._84I;return s||(y=this.dm().a("width"),q=this.dm().a("height"),0<y&&0<q?_._84I={x:0,y:0,width:y,height:q}:(_.each(function(y){_.isVisible(y)&&(s=IA(s,_.getDataUIBounds(y)))}),_._84I=s||fn)),_._84I},getScrollRect:function(){return IA(this.getContentRect(),this._29I)},makeCenter:function(y,q,_){var s,p,O,L,$=this;$.getWidth()&&$.getHeight()?($.makeVisible(y),$.validate(),(p=$.getDataUIBounds(y))&&(L=$.getWidth(),s=$.getHeight(),O=p.x+p.width/2,p=p.y+p.height/2,O=-O*$._zoom+L/2,L=-p*$._zoom+s/2,$.setTranslate(O,L,q))):_||tA($.makeCenter,$,[y,q,!0],500)},fitData:function(q,_,s,p,y){var O,L=this;L.getWidth()&&L.getHeight()?(O=function(){L.makeVisible(q),L.validate();var y=L.getDataUIBounds(q);y&&(y=DA(y),s8(y,s==M5?20:s),L.fitRect(y,_,p))},_?E5.callWhenLoaded(O):O()):y||tA(L.fitData,L,[q,_,s,p,!0],500)},fitContent:function(q,_,s,y){var p,O=this;O.getWidth()&&O.getHeight()?(p=function(){O.validate();var y=DA(O.getContentRect());s8(y,_==M5?20:_),O.fitRect(y,q,s)},q?E5.callWhenLoaded(p):p()):y||tA(O.fitContent,O,[q,_,s,!0],500)},fitRect:function(y,q,_){var s=this,p=s.getWidth(),O=s.getHeight(),L=y.x+y.width/2,$=y.y+y.height/2,k=s5(p/y.width,O/y.height),L=-L*(y=s._zoom)+p/2,p=-$*y+O/2;0===k||isNaN(k)||(_&&(k=s5(1,k)),q?(s._65I&&(delete s._65I.finishFunc,s._65I.stop(!0)),s._14o&&s._14o.stop(!0),s.setTranslate(L,p,{finishFunc:function(){s.setZoom(k,q)}})):(s.setTranslate(L,p),s.setZoom(k)))},fitSelection:function(y,q,_){var s=this,p=s.sm(),O=null;p.size()&&(p.each(function(y){O=IA(s.getDataUIBounds(y),O)}),y&&s8(O,y),s.fitRect(O,q,_))},toCanvas:function(y,q,_){q=q||this._zoom,this.validateImpl();var s=this.getContentRect(),_=(_&&s8(s,_),s.width||(s.width=10),s.height||(s.height=10),ex()),p=s.x*q,O=s.y*q,L=Math.ceil(s.width*q),s=Math.ceil(s.height*q),$=(rx(_,L,s,1),pl(_)),L=((y=y||this._dataModel.getBackground())&&dl($,0,0,L,s,y),Ll($,-p,-O),$.scale(q,q),this._zoom);return this._zoom=q,this._42($),this._zoom=L,$.restore(),this.redraw(),_},toDataURL:function(y,q,_,s){return this.toCanvas(y,_,s).toDataURL(q||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(L,$){var y,q,k=this,_=k.dm().getBackground(),s=(_&&(y=k.dm().a("width"),q=k.dm().a("height"),0<y&&0<q&&dl(L,0,0,y,q,_)),k.__htmlOrderList),M=[],E=k._forcedLayoutHTML;if(k._93db(L,$),k.each(function(y){var q,_,s,p,O=k.getDataUI(y);O&&(q=k._56I[y._id],p=O._htmlView,q&&(_=O._79o(),p=O._htmlView,P.HtmlNode&&y instanceof P.HtmlNode?O._42(L):(y=k.getViewRect(),s=p&&p.layoutHTML,!$||y8($,_)?(s&&(p.layoutHTML(),O.__outerLayout&&delete O.__outerLayout),O._42(L)):y8(y,_)||!s||O.__outerLayout&&!E||(p.layoutHTML(),O.__outerLayout=!0))),p&&(M.push(p),(p=p.getView?p.getView():p).style.display=q?"block":HD))}),s&&0<M.length){var p=!1;if(s.length!==M.length)p=!0;else for(var O=0;O<M.length;O++)if(M[O]!==s[O]){p=!0;break}p&&(M.forEach(function(y){!1!==y.autoAdjustIndex&&k.appendHTML(y,!0)}),this.__htmlOrderList=M)}else this.__htmlOrderList=M;k._92db(L,$)},disableDirtyRect:function(){this._shouldRedrawAll=i},enableDirtyRect:function(){var y=this;y._shouldRedrawAll=function(){return y._32I}},validateImpl:function(){this.tryUpdateRootData();var _,q,s,y,p,O,L,$=this,k=$.tx(),M=$.ty(),E=$._zoom,H=$._canvas,w=this.getWidth(),Q=this.getHeight(),x=$._29I,S={x:-k/E,y:-M/E,width:w/E,height:Q/E},X={},T=$._34I,i=$._24I,N=$._shouldRedrawAll(),a=$._23I;for(_ in $._24I={},w===H.clientWidth&&Q===H.clientHeight||(rx(H,w,Q),$._forcedLayoutHTML=N=1),N||Fx(S,x)||($._forcedLayoutHTML=N=1),$._29I=S,$.each(function(y){_=y._id;var q=X[_]=$.isVisible(y);q!==$._56I[_]&&(i[_]=y,(s=$.getDataUI(i[_]))&&s._84o(q),$._84o(y,q))},$),i)(s=$.getDataUI(i[_]))&&(!N&&$._56I[_]&&(y=s._79o())&&T.add(y),s.invalidate()),$._83I=1;if($._56I=X,!N)for(_ in i)X[_]&&(s=$.getDataUI(i[_]))&&(y=s._79o())&&T.add(y);N?q=S:(T.each(function(y){y8(S,y)&&(q=IA(q,y))}),q&&(s8(q,_5(1,1/E)),q.x=K5(q.x*E)/E,q.y=K5(q.y*E)/E,q.width=C5(q.width*E)/E,q.height=C5(q.height*E)/E,q=q8(S,q))),($._74O=q)&&0!==q.width&&0!==q.height&&(x=pl(H),H=q.x,p=q.y,O=q.width,L=q.height,H=Math.floor((H*E+k)*sA),p=Math.floor((p*E+M)*sA),O=Math.ceil(O*E*sA)+1,L=Math.ceil(L*E*sA)+1,N||(q.x=(H/sA-k)/E,q.y=(p/sA-M)/E,q.width=O/sA/E,q.height=L/sA/E),x.beginPath(),x.rect(H,p,O,L),x.clip(),x.clearRect(H,p,O,L),Ol(x,k,M,E),$._42(x,q),x.restore(),delete $._74O),T.clear(),delete $._32I,delete $._forcedLayoutHTML,a&&0<w&&0<Q&&((s=$.getDataUI(a))&&(y=s._79o(),p=(H=$._29I).x,O=H.y,L=H.width,k=H.height,E=$._zoom,y&&!y8(y,H)&&(y.x+y.width<p&&$.tx(-y.x*E),y.x>p+L&&$.tx(-(y.x+y.width-L)*E),y.y+y.height<O&&$.ty(-y.y*E),y.y>O+k&&$.ty(-(y.y+y.height-k)*E))),delete $._23I),$._83I&&(delete $._83I,delete $._84I),$._98O(),$.countFrame(),Cx($._24I)||tA($.iv,$)},isValidGuideLineSource:function(y){return!0},tryUpdateRootData:function(){if(!this._rootDataUpdating){this._rootDataUpdating=!0;var y,q,_=this.getFullscreenDatas();for(q in _)y=_[q],this.scaleRootData(y);this.onRootDataUpdated&&this.onRootDataUpdated(),this._rootDataUpdating=!1}},scaleRootData:function(y){if("uniform"===(H=y.s("fullscreen"))||"fill"===H){y.getRotation()&&y.setRotation(0);var q=y.s("fullscreen.gap")||0,_=this.getWidth(),s=this.getHeight();if(_&&s){var _=_-2*q,s=s-2*q,p=y.getAnchor(),O=(L=y.getScaledSize()).width,L=L.height;if(M=y.s("fullscreen.lock"))return"uniform"===H?O/L<_/s?(E=s/L,O=L*_/s):(E=_/O,L=O*s/_):"v"===M?(O=_/(E=s/L),y.getWidth()!==O&&y.setWidth(O)):(L=s/(E=_/O),y.getHeight()!==L&&y.setHeight(L)),this.setZoom(E),$=q-(y.getX()-p.x*O)*E,k=q-(y.getY()-p.y*L)*E,$!==this.tx()&&this.tx($),void(k!==this.ty()&&this.ty(k));var $=this.tx(),k=this.ty(),M={x:(-$+q)/(E=this._zoom),y:(-k+q)/E,width:_/E,height:s/E},E=("uniform"===H&&($=O/L,q=(k=Math.min(M.width,M.height*$))/$,M.x+=.5*(M.width-k),M.y+=.5*(M.height-q),M.width=k,M.height=q),_=M.width/y.getScaleX(),s=M.height/y.getScaleY(),y.getWidth()==_&&y.getHeight()===s||y.setSize(_,s),M.x+p.x*M.width),H=M.y+p.y*M.height;E===(O=y.getPosition()).x&&H===O.y||y.setPosition(E,H)}}},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(y){var q=this;y!==q.isScrollBarVisible()&&(y?(gx(q._view,q._79O=zx()),gx(q._79O,q._27I=zx()),gx(q._79O,q._28I=zx())):($8(q._79O),delete q._79O,delete q._27I,delete q._28I),q.fp("scrollBarVisible",!y,y))},getDebugTip:function(){return""},showScrollBar:function(){var y=this;y._79O&&(y._85I||(m5(function(){y._86I()},XA),y.iv()),y._85I=new Date)},_86I:function(){var y=this;y._85I&&((new Date).getTime()-y._85I.getTime()>=XA?(delete y._85I,y.iv()):m5(function(){y._86I()},XA))},getVScrollBar:function(){return this._27I},getHScrollBar:function(){return this._28I},_98O:function(){var y=this._27I,q=this._28I;if(this._79O){if(this._autoHideScrollBar&&!this._85I)return y.style.visibility=nD,void(q.style.visibility=nD);var _=this.getScrollBarColor(),s=this._zoom,p=this.getScrollBarSize(),O=this.getViewRect(),L=this.getScrollRect(),$=O.height*s,k=L.height*s,M=O.width*s-p-2,E=$*((O.y-L.y)*s/k),H=$/k*$,w=y.style,k=($<k-.5?(H<TA&&($<(E=(E=E+H/2-TA/2)<0?0:E)+TA&&(E=$-TA),H=TA),h(y,M,E,p,H),w.visibility=vD,w.background=_,w.borderRadius=p/2+wD):w.visibility=nD,O.width*s),$=L.width*s,E=O.height*s-p-2,M=k*((O.x-L.x)*s/$),y=k/$*k,w=q.style;k<$-.5?(y<TA&&(k<(M=(M=M+y/2-TA/2)<0?0:M)+TA&&(M=k-TA),y=TA),h(q,M,E,y,p),w.visibility=vD,w.background=_,w.borderRadius=p/2+wD):w.visibility=nD}},setDataModel:function(y){var q=this,_=q._dataModel,s=q._selectionModel;_!==y&&(_&&(_.ump(q.handleDataModelPropertyChange,q),_.umm(q.handleDataModelChange,q),_.umd(q.handleDataPropertyChange,q),_.removeIndexChangeListener(q._75O,q),_.removeHierarchyChangeListener(q.handleHierarchyChange,q),s||_.sm().ums(q.handleSelectionChange,q)),(q._dataModel=y).mp(q.handleDataModelPropertyChange,q),y.mm(q.handleDataModelChange,q),y.md(q.handleDataPropertyChange,q),y.addIndexChangeListener(q._75O,q),y.addHierarchyChangeListener(q.handleHierarchyChange,q),s?s._21I(y):y.sm().ms(q.handleSelectionChange,q),q.invalidateAll(!0),q.fp(BL,_,y),q.updateBackground())},getLayersInfo:function(){var y;return this._layersInfo===k5&&((y=this.getLayers())?(this._layersInfo={},y.forEach(function(y){var q=Mx(y)?y.name:y;this._layersInfo[q]=y},this)):this._layersInfo=null),this._layersInfo},calculateEdgePosition:function(y,q,_){y instanceof P.Data?(s=this.getDataUI(y),$=yQ(s)):($=yQ(null,y,arguments[1]),q=arguments[2],_=arguments[3]);var $,s,p=function(_){var s=1/0,p=0,O=new f;function y(y){var q;return 0<=y&&y<=1&&(O=pQ($,100*y),(q=(_.x-O.x)*(_.x-O.x)+(_.y-O.y)*(_.y-O.y))<s&&(s=q,p=y,1))}for(var q=0;q<100;++q)y(q/100);for(var L=.005;.001<L;)y(p-L)||y(p+L)||(L/=2);return p}(q=2===q.length?new f(q[0],q[1]):q),O=pQ($,100*p);if(!_)for(var L=s?OQ(s):OQ(y,arguments[1]),k=new f(O.x,O.y),M=49/(this._zoom*this._zoom),E=0,H=L.length;E<H;E++)if(k.distanceToSquared(L[E])<M)return{index:E,point:L[E],distance:Math.sqrt((L[E].x-q.x)*(L[E].x-q.x)+(L[E].y-q.y)*(L[E].y-q.y))};return{percent:p,point:O,distance:Math.sqrt((O.x-q.x)*(O.x-q.x)+(O.y-q.y)*(O.y-q.y))}},getPercentPositionOfPath:function(y,q){var _;return y instanceof P.Data?(_=this.getDataUI(y),_=yQ(_)):(_=yQ(null,y,arguments[1]),q=arguments[2]),pQ(_,q)},getNeareastPositionOfPath:function(){return this.calculateEdgePosition.apply(this,arguments)},getPointsOfPath:function(y){for(var q,_,s,p,s=y instanceof P.Data?(q=this.getDataUI(y),_=(q=du(q)).points,q.segments):(_=y,arguments[1]),O=y instanceof P.Shape?y.getPointsMatrix2d():new e.Matrix2d,L=[],$=-1,k=-1,M=0,E=(s||_).length;M<E;M++)5!==(p=s?s.get(M):1)&&(k++,3===p?(DM(L,_,$+1,k,"C",O),DM(L,_,$+2,k,"M",O),$+=2):4===p?(DM(L,_,$+1,k-1,"R",O),DM(L,_,$+2,k,"L",O),DM(L,_,$+3,k,"M",O),$+=3):(DM(L,_,$+1,k,"M",O),$+=1));return L},calculateAttachPoint:(CB=new f,BB=new f,FB=new f,function(y,q){var _=this.getAttachPoints(y);if(!_||!_.length)return null;FB.set(q.x,q.y);for(var s,p,O,L,$=1/0,k=0,M=_.length;k<M;k++)O=_[k],BB.x=O.x,BB.y=O.y,CB.x=O.offsetX||0,CB.y=O.offsetY||0,O=mu(this,y,0,CB.x,CB.y,BB.x,BB.y),(p=FB.distanceToSquared(O))<$&&(s=k,$=p,L=O);return $=Math.sqrt($),"close"===(q=this.getAttachStyle(y))&&y.s("attach.close.threshold")/this._zoom<$?null:{index:s,distance:$,info:_[s],point:L}}),getAttachPoints:function(y){var q=y.s("attach.points");return q||((q=r(y._image))?g(q.attachPoints,y,this)||null:void 0)},getAttachStyle:function(y){var q=y.s("attach.style");return q||((q=r(y._image))?g(q.attachStyle,y,this)||"close":void 0)},updateLayers:function(){this._layersInfo=k5,this.invalidateSelection(),this.redraw()},updateBackground:function(){var y=this.dm().a("width"),q=this.dm().a("height");this._canvas.style.background=!(0<y&&0<q)&&this.dm().getBackground()||""},handleDataModelPropertyChange:function(y){var q,_;"background"===y.property?(q=this._canvas.style.background,_=y.newValue||"",this.updateBackground(),this.fp("canvasBackground",q,_),this.redraw()):"a:width"===y.property||"a:height"===y.property?(this._83I=1,this.updateBackground(),this.redraw()):"layers"===y.property?this.updateLayers():"hierarchicalRendering"===y.property&&this.redraw()},handleDataPropertyChange:function(y){this.dm().isHierarchicalRendering()&&"parent"===y.property&&y.data.hasChildren()&&this.redraw(),this.invalidateData(y.data)},onPropertyChanged:function(y){var q,_=y.property;this.redraw(),"zoom"===_?(q=this.sm().getSelection()).size()&&q.each(function(y){y.invalidate()}):"dataModel"===_&&(this._83I=1),Ku[_]?this.showScrollBar():_===yL&&this.onCurrentSubGraphChanged(y)},onCurrentSubGraphChanged:function(y){this.sm().cs(),this.reset()},handleDataModelChange:function(y){var q,_,s,p=this,O=y.kind,y=y.data;p._83I=1,"add"===O?(p.invalidateData(y),Qx(y)&&y.getEdgeGroup()&&y.getEdgeGroup().eachSiblingEdge(p.invalidateData,p),y.getHost&&y.getHost()&&y.getHost().updateLayoutAttaches()):O===lD?(p._21Q(y),q=y._id,(_=p._25I[q])&&(p._56I[q]&&(s=_._79o())&&p.redraw(s),_.dispose(),delete p._25I[q],delete p._24I[q],delete p._56I[q]),y===p._currentSubGraph&&p.setCurrentSubGraph(M5)):O===jD&&(p.invalidateAll(!0),p.setCurrentSubGraph(M5))},_75O:function(y){this.invalidateData(y.data)},handleHierarchyChange:function(y){this.dm().isHierarchicalRendering()&&y.data.hasChildren()&&this.redraw(),this.invalidateData(y.data)},adjustIndex:function(y){if(this.isVisible(y)){this.dm().beginTransaction();for(var q=y;q._parent&&this.isVisible(q._parent);)q=q._parent;q&&q!==y&&this._dataModel.adjustIndex(q),this._dataModel.adjustIndex(y),this.dm().endTransaction()}},getImage:function(y){return y.getImage?y.getImage():k5},getSelectWidth:function(y){var q=r(this.getImage(y));return q&&g(q.disableSelectedBorder,y,this)?0:y.s("select.width")},getSelectColor:function(y){return y.s("select.color")},isSelectable:function(y,q){return!!this.isSelected(y)||!(!q&&y.getParent()instanceof vQ&&this.isSelectable(y.getParent(),!0)&&y.getParent().isSyncSize())&&((!(q=(q=this.getLayersInfo())&&q[y._layer])||!1!==q.selectable)&&(y.s("2d.selectable")&&this.sm().isSelectable(y)))},isMovable:function(y){if(Qx(y)&&y.getStyle(rD)!==tD)return!1;var q=this.getLayersInfo();return(!(q=q&&q[y._layer])||!1!==q.movable)&&(!!y.s("2d.movable")&&(!this._movableFunc||this._movableFunc(y)))},isEditable:function(y){if(P._uiSerializing)return this._uieditable;if(!this._editInteractor||!this.isSelected(y))return!1;if(xx(y)){var q=this.getDataUI(y);if(!q||q._88I)return!1}return(!Qx(y)||y.getStyle(rD)===tD)&&((!(q=(q=this.getLayersInfo())&&q[y._layer])||!1!==q.editable)&&(!!y.s("2d.editable")&&(!this._editableFunc||this._editableFunc(y))))},handleDelete:function(y){this._editInteractor&&(this._editInteractor.handleDelete?this._editInteractor.handleDelete():this.removeSelection())},isPointEditable:function(y){return(!W(y)||0===y.getRotation())&&(!this._pointEditableFunc||this._pointEditableFunc(y))},isRectEditable:function(y){return!this._rectEditableFunc||this._rectEditableFunc(y)},isAnchorEditable:function(y){return!this._anchorEditableFunc||this._anchorEditableFunc(y)},isRotationEditable:function(y){return!(!y.setRotation||!1===y.IRotatable)&&(!this._rotationEditableFunc||this._rotationEditableFunc(y))},isSourceTargetEditable:function(y,q,_){return!0},getRotationPoint:function(y){var q=y.getAnchor(),_=y.getScale(),s=this._zoom,q=XU(y.getRotation(),0,-y.getHeight()*_.y*q.y-(_.y<0?-1:1)*(v5?32:16)/s),_=y.p();return q.x+=_.x,q.y+=_.y,q},getLogicalPoint:function(y){return p8(y,this._canvas,this.tx(),this.ty(),this._zoom,this._zoom)},getScreenPoint:function(y,q){var _;return"object"==typeof y?q=y.x!==k5?(_=y.x,y.y):(_=y[0],y[1]):_=y,O8(_,q,this._canvas,this.tx(),this.ty(),this._zoom,this._zoom)},getSelectedDataAt:function(y){var q=this;return this.getDataAt(y,function(y){return q.isSelected(y)})},getDataInfoAt:function(y,q,_){var s=this.lp(y),p=this.getDataAt(s,q,_);if(p){var O={data:p,ui:y=this.getDataUI(p),point:s},L=y._38o;if(L){var $,k=L.icons;for($ in k){var M=k[$],E=L.rects[$];if(E)for(var H=g(M.names,p,this),M=H?H.length:0,w=E.rotation,Q=M-1;0<=Q;Q--){var x=H[Q],S=E[Q];if(UA(S,s,w))return O.part="icons",O.name=$,O.icon=x,O.rect=S,O.index=Q,O.rotation=w,O}}}if(this.isNoteVisible(p)){if(y.note2Info&&UA(y.note2Info.clickRect,s,M5,y.note2Info.scale))return O.part="note2",O;if(y.noteInfo&&UA(y.noteInfo.clickRect,s,M5,y.noteInfo.scale))return O.part="note",O}if(this.isLabelVisible(p)){if(y.label2Info&&UA(y.label2Info.rect,s,y.label2Info.rotation,y.label2Info.scale))return O.part="label2",O;if(y.labelInfo&&UA(y.labelInfo.rect,s,y.labelInfo.rotation,y.labelInfo.scale))return O.part="label",O}if(p.isInRect&&p.isInRect(s))return O.part="body",O}return O},getDataAt:function(q,_,s){q.target&&(q=this.lp(q));var p,O=this._zoom;return this.reverseEach(function(y){if((_?_(y):this.isSelectable(y))&&this.rectIntersects(y,px(q.x,q.y,s,O)))return p=y,!1},this),p},getIconInfoAt:function(y,q){if(y.target&&(y=this.lp(y)),q=q||this.getDataAt(y)){var _=this.getDataUI(q);if(_&&_._38o){var s=_._38o,p=new n;for(L in s.icons)p.add(L);for(var O=p.size()-1;0<=O;O--)for(var L=p.get(O),$=s.rects[L],k=$.rotation,M=$.length-1;0<=M;M--){var E=$[M],H=E.width,w=E.height,Q={x:y.x-E.x-H/2,y:y.y-E.y-w/2};if(k!=M5&&(Q=XU(-k,Q.x,Q.y)),UA(E={x:-H/2,y:-w/2,width:H,height:w},Q))return{key:L,index:M,name:s.icons[L].names[M],rect:$[M],point:y,rotation:k,relativeRect:E,relativePoint:Q,data:q}}}}return M5},getDatasInRect:function(q,_,s){s===k5&&(s=1);var p=this,O=new n;return p.reverseEach(function(y){s&&!p.isSelectable(y)||(_?p.rectIntersects(y,q):p.rectContains(y,q))&&O.add(y)}),O},moveSelection:function(y,q){this.dm().beginTransaction(),jU(this.sm().toSelection(this.isMovable,this),y,q),this.dm().endTransaction()},moveDatas:function(y,q,_){this.dm().beginTransaction(),y instanceof n||(y=new n(y)),jU(y,q,_),this.dm().endTransaction()},getDataUIBounds:function(y){return(y=this.getDataUI(y))?y._79o():M5},drawData:function(q,y,_){var s,p=this.getDataUI(y);p&&(s=p._79o(),_&&!y8(_,s)||(p._42(q),y instanceof P.Block&&y.eachChild(function(y){this.isVisible(y)&&this.drawData(q,y,_)},this)))},getBoundsForGroup:function(y){return y.s(CD)?this.getDataUIBounds(y):M5},isPixelPerfect:function(y){return y.s("pixelPerfect")},rectIntersects:function(y,q){this.validate();var _=M5;if(this._56I[y._id]&&(p=this._25I[y._id])){var s=p._79o();if(dA(q,s))_=!0;else if((q=q8(q,s))&&(_=p.rectIntersects?p.rectIntersects(q):_)==M5){if(!this.isPixelPerfect(y))return!0;var s=q.x,p=q.y,O=q.width,L=q.height,$=this._zoom,k=O*L*$*$,M=((M=E5.hitMaxArea)<k&&($*=Math.sqrt(M/k)),s*=$,p*=$,Al(O=(O*=$)<2?2:O,L=(L*=$)<2?2:L));Ll(M,-s,-p),M.scale($,$),this._drawForChecking=!0,this.drawData(M,y,q),this._drawForChecking=!1;try{for(var E=0,H=M.getImageData(0,0,O,L).data;E<H.length;E+=4)if(0!==H[E+3]){_=!0;break}M.restore()}catch(y){Pl=M5,_=!1}}}return!!_},rectContains:function(y,q){return!(!this._56I[y._id]||!(y=this._25I[y._id]))&&dA(q,y._79o())},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(y){var q,_,s,p,O;E5.isInput(y.target)||(_=(O=(q=this)._focusData)&&q._25I[O._id],p=0,s=q._dataModel._datas,O&&O._enabled&&O._editable&&_&&_.onKeyDown&&!0===_.onKeyDown(y)||(9===y.keyCode&&(O&&(p=s.indexOf(O),GA(y)?-1==--p&&(p=0):++p===s.size()&&(p=0)),q._focusData=O=s.get(p),q.sm().setSelection(O)),Zl(y)?q.selectAll():Dl(y)&&q.isResettable()&&q.reset(),q.sm().isEmpty()?q._editing||(_=q.tx(),s=q.ty(),p=!1,O=GA()?100:10,hl(y)&&(_-=O,p=!0),tl(y)&&(s-=O,p=!0),ul(y)&&(_+=O,p=!0),Jl(y)&&(s+=O,p=!0),p&&q.setTranslate(_,s)):(Kl(y)&&q.handleDelete(y),O=GA()?10:1,hl(y)&&(q.moveSelection(-O,0),q.fi({kind:"moveLeft"})),tl(y)&&(q.moveSelection(0,-O),q.fi({kind:"moveUp"})),ul(y)&&(q.moveSelection(O,0),q.fi({kind:"moveRight"})),Jl(y)&&(q.moveSelection(0,O),q.fi({kind:"moveDown"})))))},handleScroll:function(y,q){if(CA(y),this.isZoomable()){if(!this.getEditInteractor()){var _=this.getDataAt(y);if(_){var s=r(this.getImage(_));if(s&&g(s.scrollable,_,this))return}}var p,O=this.getFullscreenDatas();for(p in O)if(O[p].s("fullscreen.lock"))return;s=this.lp(y),0<q?this.scrollZoomIn(s):q<0&&this.scrollZoomOut(s)}},handlePinch:function(y,q,_){!this.isZoomable()||Math.abs(q-_)<E5.pinchZoomThreshold||(_<q?this.pinchZoomIn(y):this.pinchZoomOut(y))},checkDoubleClickOnNote:function(y,q){var _=this.lp(y),s=this.getDataUI(q),p=s.note2Info;return p&&q.s("note2.toggleable")&&UA(p.clickRect,_)?(q.s(eD,!q.s(eD)),this.fi({kind:"toggleNote2",event:y,data:q}),!0):!!((p=s.noteInfo)&&q.s("note.toggleable")&&UA(p.clickRect,_))&&(q.s(zD,!q.s(zD)),this.fi({kind:"toggleNote",event:y,data:q}),!0)},_84o:function(y,q){},isNoteVisible:function(y){return.15<this._zoom},isLabelVisible:function(y){return.15<this._zoom},isEditVisible:function(y){return.15<this._zoom},autoScroll:function(y,q){var _=this,s=_.getAutoScrollZone(),p=s/_.getZoom(),O=s/4,L=_._29I,y=_.lp(y),$={x:_.tx(),y:_.ty()};return y&&0<s&&L&&(y.x-L.x<p?_.translate(O,0):L.x+L.width-y.x<p&&_.translate(-O,0),y.y-L.y<p?_.translate(0,O):L.y+L.height-y.y<p&&_.translate(0,-O)),$.x=_.tx()-$.x,$.y=_.ty()-$.y,q&&(q.x+=$.x,q.y+=$.y),$},getMoveMode:function(y,q){return(q=q.s("2d.move.mode"))||(tn[88]?"x":tn[89]?"y":"xy")},getSerializableProperties:function(){return{scrollBarColor:1,scrollBarSize:1,autoMakeVisible:1,autoHideScrollBar:1,editable:1,resettable:1,pannable:1,rectSelectable:1,autoScrollZone:1,visibleFunc:1,movableFunc:1,editableFunc:1,pointEditableFunc:1,rectEditableFunc:1,anchorEditableFunc:1,rotationEditableFunc:1,rectSelectBackground:1,rectSelectBorderColor:1,editPointSize:1,editPointBorderColor:1,editPointBackground:1,hoverDelay:1,dataModel:1,selectionModel:1,currentSubGraph:1,zoom:1,translateX:1,translateY:1}},serializeProperty:function(y,q,_){return"currentSubGraph"===q?{__i:y.getId()}:_.serializeProperty(y,q,this)},deserializeProperty:function(y,q,_){return"currentSubGraph"===q?this.dm().__idMap[y.__i]:_.deserializeProperty(y,q,this)},setDefaultCursor:function(y,q){this._defaultCursor=y,!1!==q&&this.setCursor(y)},getCurrentConnectActionType:function(){return this._currentActionType},setCurrentConnectActionType:function(y){return!(y!==M5&&!E5.getConnectAction(null,y)||(this._currentActionType=y,this.redraw(),0))},getEditStyle:function(y){var q=this.getEditInteractor();return q?q.getStyle(y):k5},setEditStyle:function(y,q,_){var s=this.getEditInteractor();return!!s&&(s.setStyle(y,q,_),!0)},isConnectActionVisible:function(y){var q=E5.getConnectAction(this);return!!q&&(q=q.visible,Ex(q)?q(this,y):q)},isInteractive:function(y){if(this._drawForChecking)return!1;var q=r(this.getImage(y));return!(!q||!g(q.interactive,y,this))||y.s("interactive")},getRenderingStyleIconName:function(){return wE},appendHTML:function(y,q){var _=this.getView();if(!(q||y&&y.parentNode!==_))return!1;var s=y.getView&&y.getView(),p=y.beforeCanvas;return!(!q&&s&&s.parentNode===_)&&((y.getView||y.isSelfViewEvent)&&(y=y.getView()),q=this.getEditInteractor(),p?_.insertBefore(y,this.getCanvas()):q&&q._canvas?_.insertBefore(y,q._canvas):this.isScrollBarVisible()?_.insertBefore(y,this.getView().lastChild):gx(_,y),!0)},_layoutHTMLImpl:function(y,q,_){var s,p,O,L,$,k;1<arguments.length?(p=this._zoom,(q=q.getView?(s=q).getView():q).style.position="absolute",_?(O=y.getRect(),h(s||q,this.tx()+O.x*p,this.ty()+O.y*p,O.width*p,O.height*p)):(_=new mB,O=y.getAnchorRect(),L=y.getPosition(),$=y.getScale(),k=q.style,h(s||q,O),_.appendTranslate(this.tx(),this.ty()),_.appendScale(p,p),_.append(new mB(y.getRotation(),L.x,L.y,$.x,$.y)),_l(k,"transform","matrix("+_.a.toFixed(5)+", "+_.b.toFixed(5)+", "+_.c.toFixed(5)+",\n    "+_.d.toFixed(5)+", "+_.tx.toFixed(5)+", "+_.ty.toFixed(5)+")"),_l(k,"transformOrigin",(-O.x).toFixed(5)+"px "+(-O.y).toFixed(5)+"px"),q.updateAppendMatrix=!0)):this._layoutHTML&&this._layoutHTML()},getTextEditInfo:function(y){if(y instanceof bQ)return{name:"text",accessType:"s",font:y.s("text.font"),isMultiline:!0}},getState:function(y){var q=y.s("state");return q||((q=r(y._image))?g(q.state,y,this)||null:void 0)},getShape:function(y){return y.getStyle(iD)}}),o.defineProperties(vu.GraphView.prototype,{layoutHTML:{get:function(){return this._layoutHTMLImplBind||(this._layoutHTMLImplBind=this._layoutHTMLImpl.bind(this)),this._layoutHTMLImplBind},set:function(y){this._layoutHTML=y}}}),function(y,q){this.gv=y,this.s=function(y){return q.getStyle(y)},this._data=q,this._87I=new n}),wE=M5,QE=(w8(HE,o,{_6I:M5,ms_icons:1,_84o:function(y){},dispose:function(){},isShadowed:function(){return this.s("shadow")||this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},getSelectWidth:function(){return!this.gv.isSelected(this._data)||this.isShadowed()?0:this.gv.getSelectWidth(this._data)},getSelectColor:function(){return this.gv.getSelectColor(this._data)},getBodyColor:function(y){var q=this._data;return this.gv.getBodyColor(q)||(y?q.getStyle(y):M5)},_2Q:function(y){return this.s(y)},_1Q:function(y,q,_,s){var p,O=this.s,L=O("2d.gray"),$=O(q+".dash.color");L&&($=E5.toGrayColor($)),y.strokeStyle=$,y.lineWidth=_,y.stroke(),O(q+".dash.3d")&&(p=O(q+".dash.3d.color"),Il(y,$,L?E5.toGrayColor(p):p,_,this.gv._zoom,O(q+".dash.3d.accuracy"))),P8(y,s)},invalidate:function(){this._6I=M5},_79o:function(){var y,q,_=this;return _._6I||(y=_._data,q=_.gv,_.labelInfo=_.label2Info=_.noteInfo=_.note2Info=_._38o=M5,_._87I.clear(),_.interactiveInfo=q.isInteractive(y)?{}:M5,_._3O(),_._55O=q.isEditable(y)?{_42O:q.isRectEditable(y),_43O:q.isPointEditable(y),_56O:q.isRotationEditable(y)}:M5,_._6I=_._81o()),_._6I},_3O:function(){},getPosition:function(y,q,_,s){return fn},_68o:function(y,q){var _,s;y&&this._87I.add(q?(q=new WB(q),_=y.width/2,s=y.height/2,(q=bA([q.tf(-_,-s),q.tf(_,-s),q.tf(_,s),q.tf(-_,s)])).x+=y.x+_,q.y+=y.y+s,q):y)},_81o:function(){var q,y,_,s,p=this,O=p.s;return p._24O(cD,"getLabel"),p._24O(RD,"getLabel2"),p._26O(oD,"getNote"),p._26O(YD,"getNote2"),p._15O(),p._55O&&p._48O(),p._87I.each(function(y){q=IA(q,y)}),q&&O("shadow.interactable")&&(y=p.isShadowed(),_=O("shadow2"),s=DA(q),_?(s.x+=O("shadow2.offset.x"),s.y+=O("shadow2.offset.y"),s8(s,O("shadow2.blur"))):y&&(s.x+=O("shadow.offset.x"),s.y+=O("shadow.offset.y"),s8(s,O("shadow.blur"))),q=IA(q,s)),p._87I.clear(),q},_42:function(y){var q,_,s,p,O,L,$,k=this,M=k._data,E=k.gv,H=k.s,w=H("opacity"),Q=this.isShadowed(),x=H("shadow2");(Q||x)&&(q=y.shadowOffsetX,_=y.shadowOffsetY,s=y.shadowBlur,p=y.shadowColor,O=E.getZoom()*E5.devicePixelRatio,y.shadowOffsetX=H((L=Q?"shadow":"shadow2")+".offset.x")*O,y.shadowOffsetY=H(L+".offset.y")*O,y.shadowBlur=H(L+".blur")*O,y.shadowColor=Q?k.getSelectColor():H(L+".color")),w!=M5&&($=y.globalAlpha,y.globalAlpha=w),k.drawBody(y),E.isLabelVisible(M)&&(E._drawForChecking&&!H("label.selectable")||zu(y,k.labelInfo),E._drawForChecking&&!H("label2.selectable")||zu(y,k.label2Info)),E.isNoteVisible(M)&&(eu(y,k.noteInfo),eu(y,k.note2Info)),k._99O(y),w!=M5&&(y.globalAlpha=$),(Q||x)&&(y.shadowOffsetX=q,y.shadowOffsetY=_,y.shadowBlur=s,y.shadowColor=p)},drawBody:function(y){},_47O:function(y){},_24O:function(y,q){var _,s,p,O=this._data,L=this.gv,$=this.s,k=L[q](O);k!=M5&&(_=$(y+".scale"),p=$(y+".max"),s=$(y+".position"),L=this[y+"Info"]={label:k,scale:_,color:L[q+"Color"](O),font:$(y+".font"),opacity:$(y+".opacity"),align:$(y+".align"),decoration:$(y+".decoration"),rotation:this.getRotation($(y+".rotation"),!1,s),background:L[q+"Background"](O)},q=nx(L,k),0<p&&p<q.width&&(L.labelWidth=q.width,q.width=p),1!==_&&(q.width*=_,q.height*=_),O=this.getPosition(s,$(y+".offset.x"),$(y+".offset.y"),q,$(y+".position.fixed")),q.x=O.x-q.width/2,q.y=O.y-q.height/2,this._68o(L.rect=q,L.rotation),1!==_&&(k=q.width/_,p=q.height/_,L.rect={x:O.x-k/2,y:O.y-p/2,width:k,height:p}))},_26O:function(y,q){var _,s,p,O,L,$=this.gv,k=this._data,M=this.s,E=$[q](k);E!=M5&&(_=M(y+".scale"),$=this[y+"Info"]={note:E,scale:_,data:k,view:$,expanded:M(y+".expanded"),font:M(y+".font"),color:M(y+".color"),opacity:M(y+".opacity"),align:M(y+".align"),icon:M(y+".icon"),backgroundImage:M(y+".backgroundImage"),borderWidth:M(y+".border.width"),borderColor:M(y+".border.color"),background:$[q+"Background"](k)},s=(q=this.getPosition(M(y+".position"),M(y+".offset.x"),M(y+".offset.y"))).x,q=q.y,$.expanded?(p=M(y+".max"),(L=(L=M(y+".backgroundImage"))?(L=r(L),{width:d8(L,k),height:yu(L,k)}):nx($,E)).width+=6,L.height+=2,0<p&&p<L.width&&($.labelWidth=L.width,L.width=p),p=L.width,O=L.height+8,$.clickRect={x:s-p*_/2,y:q-O*_,width:p*_,height:O*_*L.height/O}):(O=(E=M(y+".icon"))?(E=r(E),p=d8(E,k),yu(E,k)):(p=12,18),$.clickRect={x:s-p*_/2,y:q-O*_,width:p*_,height:O*_}),$.rect={x:s-p/2,y:q-O*_/2-O/2,width:p,height:O},L=C5($.borderWidth/2)*_,this._68o({x:s-p*_/2-L,y:q-O*_-L,width:p*_+2*L,height:O*_+2*L}))},_48O:function(){},_99O:function(y){var q=this._38o;if(q){var _,s=this.gv,p=this._data,O=q.icons,L=this.interactiveInfo;for(_ in L&&(L._38o={}),O){var $=O[_],k=q.rects[_];if(k){L&&(L._38o[_]=[]);var M,E=g($.opacity,p,s),H=g($.names,p,s),w=H?H.length:0,Q=k.rotation;E!=M5&&(M=y.globalAlpha,y.globalAlpha*=E);for(var x=0;x<w;x++){var S,X,T=H[x],T=r(T),i=k[x],N=(Q&&(S=i.x+i.width/2,X=i.y+i.height/2,y.save(),Ll(y,S,X),$l(y,Q),Ll(y,-S,-X)),L&&L._38o[_].push(y.interactiveInfo={compInfos:[],matrix:Q?new mB(Q,S,X).appendTranslate(-S,-X):new mB}),wE);wE=_,VA(y,T,g($.stretch,p,s),i.x,i.y,i.width,i.height,this._data,this.gv),wE=N,y.interactiveInfo=M5,Q&&y.restore()}E!=M5&&(y.globalAlpha=M)}}}}}),function(y,q){Kx(QE,this,[y,q])}),xE=(w8(QE,HE,{_checkEmptyRect:!0,_40O:function(y,q){var _,s=this.s,p=y.rect,O=((y.borderColor=this.gv.getBorderColor(this._data))&&(y.borderType=s("border.type"),y.borderWidth=s("border.width"),y.borderPadding=s("border.padding"),q=_5(q,y.borderPadding+y.borderWidth/2)),this._data.getScale()),O=_5(1,_5(F5(O.x),F5(O.y)));(y.selectWidth=this.getSelectWidth())&&(_=this.gv._zoom,y.selectType=s("select.type"),y._97o=this.getSelectColor(),y.selectPadding=s("select.padding"),q=_5(q,(y.selectPadding+y.selectWidth/2/_)/O)),0<q&&(q*=O,p=DA(p),s8(p,q)),this._68o(p)},_39O:function(y,q){var _,s,p,O,L,$=q.rect;0<q.borderWidth&&(L=q.borderPadding,y.strokeStyle=q.borderColor,y.lineWidth=q.borderWidth,yU(y,q.borderType,{x:$.x-L,y:$.y-L,width:$.width+2*L,height:$.height+2*L}),y.stroke()),0<q.selectWidth&&(s=this.gv._zoom,L=q.selectPadding,y.strokeStyle=q._97o,y.lineWidth=q.selectWidth/s,q.rotation!=M5&&(y.save(),y.translate(q.position.x,q.position.y),y.rotate(q.rotation),_=(s=this._data).getWidth(),s=s.getHeight(),p=q.scale,O=q.anchor,$={x:p.x*(-_*O.x),y:p.y*(-s*O.y),width:p.x*_,height:p.y*s}),yU(y,q.selectType,{x:$.x-L,y:$.y-L,width:$.width+2*L,height:$.height+2*L}),q.rotation!=M5&&y.restore(),y.stroke())},dispose:function(){var y=this._htmlView;QE.superClass.dispose.call(this),y&&(y.onHTMLRemoved&&y.onHTMLRemoved(),$8(y))},_3O:function(){var y,q=this,_=q.s,s=q._data,p=q.gv,O=p.getShape(s),L=q.getBodyColor(),$=_("shape.border.color"),k=((L=($=q._83o=O?{shape:O,_53o:q.getBodyColor("shape.background"),_27Q:r(_("shape.repeat.image"),L),shapeRepeatImageStretch:_("shape.repeat.image.stretch"),shapeRepeatImageRotation:_("shape.repeat.image.rotation"),shapeGradientPack:_("shape.gradient.pack"),shapeBorderGradientPack:_("shape.border.gradient.pack"),_54o:_("shape.border.width"),_55o:$,shapeBorderRepeatImage:r(_("shape.border.repeat.image"),$),shapeBorderRepeatImageStretch:_("shape.border.repeat.image.stretch"),shapeBorderRepeatImageRotation:_("shape.border.repeat.image.rotation"),_56o:_("shape.border.3d"),_57o:_("shape.border.3d.color"),_58o:_("shape.border.3d.accuracy"),shapeGradient:_("shape.gradient"),_59o:_("shape.gradient.color"),_60o:_("shape.border.pattern"),_61o:_("shape.border.cap"),_62o:_("shape.border.join"),shapeForeground:_("shape.foreground"),bodyColor:L,gray:_("2d.gray")}:{img:r(p.getImage(s),L),bodyColor:L,gray:_("2d.gray"),stretch:_("image.stretch")}).img)&&L.renderHTML?(q._htmlInfo&&q._htmlInfo.img!==L&&(q._htmlInfo=M5),q._htmlInfo||(q._htmlInfo={img:L,cache:{}}),k=L.renderHTML(s,p,q._htmlInfo.cache)):q._htmlInfo=M5,q._htmlView&&q._htmlView!==k&&(q._htmlView.onHTMLRemoved&&q._htmlView.onHTMLRemoved(),$8(q._htmlView.getView?q._htmlView.getView():q._htmlView)),(q._htmlView=k)&&p.appendHTML(k)&&(k.onHTMLAddedSync&&k.onHTMLAddedSync(),k.onHTMLAdded&&tA(k.onHTMLAdded)),$.rect=s.getRect(),$.position=s.p(),$.scale=s.getScale(),$.anchor=s.getAnchor(),$.rotation=s.getRotation(),O===m&&($._63o=_("shape.depth")),0);O?(k=Gl(M5,$._54o/2,$._62o),q.s("shape.dash")&&(k=_5(k,(q.s("shape.dash.width")||$._54o)/2))):L&&L.boundExtend&&(k=g(L.boundExtend,s,p),L.boundExtendAbsolute?(y=s.getScale(),k/=p._zoom*_5(1,_5(F5(y.x),F5(y.y)))):g(L.fitSize,s,p)||(y=g(L.width,s,p),L=g(L.height,s,p),k*=_5(s.getWidth()/y,s.getHeight()/L))),q._40O($,k),(p=_("clip.percentage"))!=k5&&($.clipRect=cx(s.getAnchorRect(),_("clip.direction"),p)),O&&((y=_("shape.fill.clip.percentage"))!=k5&&($.shapeClipRect=cx(s.getAnchorRect(),_("shape.fill.clip.direction"),y)),(L=_("shape.foreground.clip.percentage"))!=k5&&($.shapeForegroundClipRect=cx(s.getAnchorRect(),_("shape.foreground.clip.direction"),L))),_("clip.host")&&s.getHost()&&($.clipHost=!0)},getPosition:function(y,q,_,s){return(y=BU(y,this._83o.rect,s)).x+=q,y.y+=_,y},clipHost:function(_){var q,s,y,p,O,L,$,k,M,E,H,w,Q=this._data.getHost();return Q instanceof IQ?(y=Q.getPoints().toArray(),k=Q.getSegments().toArray(),q=Q.getMatrix(),s=Q.p(),y=y.map(function(y){return(y=DA(y)).x-=s.x,y.y-=s.y,q.apply(y)}),vl(_,y,k)):(y=this.gv.getShape(Q))?("roundRect"===y?p=Q.s("shape.corner.radius"):"polygon"===y?(p=Q.s("shape.polygon.side"),O=Q.s("shape.corner.radius"),L=Q.s("shape.regular")):"arc"===y&&(p=Q.s("shape.arc.from"),O=Q.s("shape.arc.to"),L=Q.s("shape.arc.close"),$=Q.s("shape.arc.oval")),k=Q.p(),M=Q.getRotation(),H=Q.getAnchor(),w=Q.getScale(),(E=Q.getSize()).x=-E.width*H.x,E.y=-E.height*H.y,_.save(),Ll(_,k.x,k.y),$l(_,M),kl(_,w.x,w.y),SU[y](_,E.x,E.y,E.width,E.height,p,O,L,$),_.restore()):(H=Q.s("host.clip.padding")||0,w=Q.getScale(),Q.getCorners(-H/Math.abs(w.x),-H/Math.abs(w.y)).forEach(function(y,q){q?_.lineTo(y.x,y.y):_.moveTo(y.x,y.y)})),!0},drawBody:function(y){var q,_,s,p,O,L,$,k,M,E,H,w,Q,x=this,S=x.s,X=x.gv,T=x._data,i=x._83o,N=i.rect,a=i.position,l=i.rotation,j=i.anchor,Z=i.scale,K=i.shape,C=i.clipHost,B=i.clipRect;(!x._checkEmptyRect||0<N.width&&0<N.height)&&(C&&(y.save(),y.beginPath(),x.clipHost(y)&&y.clip()),(N=T.getSize()).x=-N.width*j.x,N.y=-N.height*j.y,n5||Ll(y,N.width,N.height),y.save(),Ll(y,a.x,a.y),$l(y,l),kl(y,Z.x,Z.y),B&&(y.beginPath(),y.rect(B.x,B.y,B.width,B.height),y.clip()),X._drawForChecking&&i.img&&!1===g(i.img.pixelPerfect,T,X)?dl(y,N.x,N.y,N.width,N.height,"#888888"):x.freeDraw?x.freeDraw(y,N,i):K?(j=i._60o,B=Y8(y,j),H=i._27Q,q=i._54o,Q=i.shapeGradientPack,_=i.gray,s=y.lineJoin,p=y.lineCap,M=function(y){return _?E5.toGrayColor(y):y},"roundRect"===K?O=S("shape.corner.radius"):"polygon"===K?(O=S("shape.polygon.side"),L=S("shape.corner.radius"),$=S("shape.regular")):"arc"===K&&(O=S("shape.arc.from"),L=S("shape.arc.to"),$=S("shape.arc.close"),k=S("shape.arc.oval")),y.lineJoin=i._62o,y.lineCap=i._61o,(E=M(i._53o))||H||Q?((w=i.shapeClipRect)&&(y.save(),y.beginPath(),y.rect(w.x,w.y,w.width,w.height),y.clip()),yU(y,K,N,O,L,$,k),Q?gl(y,Q,function(y){return zl(y,i.bodyColor)},!1,N):H?_U(y,H,M(i.bodyColor),null,T,X,i.shapeRepeatImageStretch,N,i.shapeRepeatImageRotation):qU(y,E,i.shapeGradient,M(i._59o),N),y.fill(),Q&&y.restore(),w&&y.restore(),y!==B&&yU(B,K,N,O,L,$,k)):yU(B,K,N,O,L,$,k),(H=i.shapeForeground)&&(y.save(),(Q=i.shapeForegroundClipRect)&&(y.beginPath(),y.rect(Q.x,Q.y,Q.width,Q.height),y.clip()),yU(y,K,N,O,L,$,k),qU(y,H,S("shape.foreground.gradient"),M(S("shape.foreground.gradient.color")),N),y.fill(),y.restore()),0<q&&((w=S("shape.border.width.absolute"))&&(y.save(),y.setTransform(1,0,0,1,0,0)),y.lineWidth=q,Q=M(i._55o),(H=i.shapeBorderGradientPack)?gl(y,H,M,!0,N):i.shapeBorderRepeatImage?sU(y,i.shapeBorderRepeatImage,Q,null,T,X,i.shapeBorderRepeatImageStretch,N,i.shapeBorderRepeatImageRotation):y.strokeStyle=Q,y.stroke(),H&&y.restore(),w&&y.restore(),i._56o&&Il(y,Q,M(i._57o),q,X._zoom,i._58o)),P8(y,j),S("shape.dash")&&0<(H=S("shape.dash.width")||q)&&(j=S("shape.dash.pattern"),(B=Y8(y,j,x._2Q("shape.dash.offset")))!==y&&yU(B,K,N,O,L,$,k),x._1Q(y,"shape",H,j)),MU(y,E,i._63o,N),y.lineJoin=s,y.lineCap=p):((w=x.interactiveInfo)&&(y.interactiveInfo=w.bodyInfo={compInfos:[],matrix:new mB(l,a.x,a.y,Z.x,Z.y)}),i.gray&&(y.compGray=!0),(Q=i.img)&&Q.cacheRule!=M5&&(Q=Iu(y,Q,i.stretch,N.width,N.height,T,X,i.bodyColor)),VA(y,Q,i.stretch,N.x,N.y,N.width,N.height,T,X,i.bodyColor),y.compGray=!1,y.interactiveInfo=M5),y.restore(),C&&y.restore()),x._39O(y,i)},_48O:function(){},_47O:function(y){}}),function(y,q){Kx(xE,this,[y,q])}),SE=function(y,q,_,s){var p=vA(y,q);return _=(s?s5:fu)(_,p),p?_/=p:_=0,{x:y.x+(q.x-y.x)*_,y:y.y+(q.y-y.y)*_}},XE=(w8(xE,HE,{_3O:function(){var y,q,_,s,p,O,L,$,k,M=this,E=M._data,H=M.gv,w=M.s,Q=w(rD),x=E.isLooped(),S=w("edge.width"),X=M.getBodyColor("edge.color"),T=w("edge.center"),i=w("edge.offset"),N=H.getBorderColor(E),a=N?w("border.width"):0,l=M.getSelectWidth(),j=E._40I,Z=E._41I;(X=M._78o=j&&Z?{looped:x,type:Q,width:S,center:T,color:X,repeatImage:r(w("edge.repeat.image"),X),borderColor:N,borderWidth:a,_97o:l?M.getSelectColor():M5,selectWidth:l,pattern:w("edge.pattern"),cap:w("edge.cap"),join:w("edge.join"),is3d:w("edge.3d"),_67o:w("edge.3d.color"),_66o:w("edge.3d.accuracy"),gray:w("2d.gray")}:M5)&&((N=E5.getEdgeType(Q))?(N=N(E,gu(M,H,E,x,Q),H,M._19Q)).points&&1<N.points.size()?(X.edgeTypeInfo=N,y=bA(X.edgeTypeInfo.points)):N[UD]&&N.rect&&(y=(X.edgeTypeInfo=N).rect):(N=w("edge.source.anchor.x"),O=w("edge.source.anchor.y"),s=w("edge.target.anchor.x"),p=w("edge.target.anchor.y"),q=Pu(H,E,"source"),_=Pu(H,E,"target"),Q===tD?($=(L=X.points=w(GD)||Xu).size(),X.segments=w("edge.segments"),N=N!==k5||O!==k5||Qx(j),O=s!==k5||p!==k5||Qx(Z),T||(i?(N||(q=SE(q,$?L.get(0):_,i,$)),O||(_=SE(_,$?L.get($-1):q,i,$))):(N||(k=tx(q,$?L.get(0):_,lu(H,j)))&&(q={x:k[0],y:k[1]}),O||(k=tx($?L.get($-1):q,_,lu(H,Z)))&&(_={x:k[0],y:k[1]}))),y=IA(bA(X.points),bA(q,_))):(s=gu(M,H,E,x,Q),M._19Q||(s=-s),x?((q=DA(q)).x=H.getNodeRect(j).x,X.radius=s,y={x:q.x-s,y:q.y-s,width:2*s,height:2*s}):(p=vA(q,_),O={x:N=fu(i,p),y:s},L={x:p-N,y:s},$=D5(_.y-q.y,_.x-q.x),Z=X.mat=new WB($),X.orienAngle=$,X.angle=_.x<q.x?$+u:$,X.rect={x:O.x,y:O.y,width:L.x-O.x,height:0},X.origin=q,(O=Z.tf(O)).x+=q.x,O.y+=q.y,(L=Z.tf(L)).x+=q.x,L.y+=q.y,T?((k=Z.tf(k={x:p,y:0})).x+=q.x,k.y+=q.y,y=bA([q,O,L,k]),X.c1=q,X.c2=k):y=bA(O,L),q=O,_=L)),X.sourcePoint=q,X.targetPoint=_,E._lastSourcePoint=q,E._lastTargetPoint=_),Q=0,w("edge.dash")&&(Q=w("edge.dash.width")||S),x="square"===X.cap?.71:.5,Gl(y,_5(Q*x,S*x+a+l),X.join),M._68o(y))},getRotation:function(y,q,_){y=y||0;var s=this._78o;if(s){var p,O=s.angle,L=s.points,$=s.edgeTypeInfo;if(O!=M5)return q?s.orienAngle+y:O+y;if($&&$[UD])return $.getRotation?$.getRotation(this,y,q,_):0;if($&&$.points)return p=(O=$.points).size(),Zu[_]?p&&p%2==0?Gu(O.get(p/2-1),O.get(p/2),q,y):y:ju[_]?Gu(O.get(0),O.get(1),q,y):Gu(O.get(p-2),O.get(p-1),q,y);if(L)return p=L.size(),Zu[_]?p&&p%2==0?Gu(L.get(p/2-1),L.get(p/2),q,y):0===p?Gu(s.sourcePoint,s.targetPoint,q,y):y:ju[_]?Gu(s.sourcePoint,p?L.get(0):s.targetPoint,q,y):Gu(p?L.get(p-1):s.sourcePoint,s.targetPoint,q,y)}return y},getPosition:function(y,q,_,s,p){var O=this._78o;if(O){var L=O.type,$=O.points,k=O.edgeTypeInfo,M=O.sourcePoint,E=O.targetPoint;if(!L)return O.looped?{x:M.x-O.radius+q,y:M.y+_}:(p&&M&&E&&(M.x>E.x||M.x===E.x&&M.y>E.y)&&(y=CU[y],_=-_),(H=BU(y,O.rect,s)).x+=q,H.y+=_,(H=O.mat.tf(H)).x+=O.origin.x,H.y+=O.origin.y,H);if(k&&k[UD])return k.getPosition?k.getPosition(this,y,q,_,s,p):{x:(M.x+E.x)/2,y:(M.y+E.y)/2};if($){var H,w,Q=$.size();if(Zu[y]){if(Q){if(0==(w=Q%2))return ru($.get(Q/2-1),$.get(Q/2),y,q,_,s,p);H=$.get((Q-w)/2)}else H={x:(M.x+E.x)/2,y:(M.y+E.y)/2};return(H=BU(y,{x:H.x,y:H.y,width:0,height:0},s)).x+=q,H.y+=_,H}return ju[y]?ru(M,Q?$.get(0):E,y,q,_,s,p):ru(Q?$.get(Q-1):M,E,y,q,_,s,p)}if(k)return Q=(L=k.points).size(),Zu[y]?0==(w=Q%2)?ru(L.get(Q/2-1),L.get(Q/2),y,q,_,s,p):(H=L.get((Q-w)/2),(H=BU(y,{x:H.x,y:H.y,width:0,height:0},s)).x+=q,H.y+=_,H):ju[y]?ru(L.get(0),L.get(1),y,q,_,s,p):ru(L.get(Q-2),L.get(Q-1),y,q,_,s,p)}return fn},_42:function(y){this._78o&&xE.superClass._42.call(this,y)},drawPath:function(q,y){q.beginPath();var _,s,p,O,L=y.type,$=y.points,k=y.segments,M=y.edgeTypeInfo;!L||$?(_=(s=y.sourcePoint).x,s=s.y,p=(O=y.targetPoint).x,O=O.y,L?k?((L=new n({x:_,y:s})).addAll($),L.add({x:p,y:O}),vl(q,L,k)):(q.moveTo(_,s),$.each(function(y){q.lineTo(y.x,y.y)}),q.lineTo(p,O)):y.looped?q.arc(_,s,y.radius,0,O5,!0):y.center?(q.moveTo(y.c1.x,y.c1.y),q.lineTo(_,s),q.lineTo(p,O),q.lineTo(y.c2.x,y.c2.y)):(q.moveTo(_,s),q.lineTo(p,O))):M&&(M.points?vl(q,M.points,M.segments):M[UD]&&M[UD](q,M))},drawBody:function(y){var q=this.s,_=this._78o,s=_.width,p=_.selectWidth,O=_.borderWidth,L=_.repeatImage,$=y.lineJoin,k=y.lineCap,M=_.gray,E=_.pattern,H=(y.lineJoin=_.join,y.lineCap=_.cap,this.drawPath(Y8(y,E),_),q("edge.width.absolute")),p=(H&&(y.save(),y.setTransform(1,0,0,1,0,0)),p&&(y.strokeStyle=_._97o,y.lineWidth=s+2*(O+p),y.stroke()),O&&(y.strokeStyle=M?E5.toGrayColor(_.borderColor):_.borderColor,y.lineWidth=s+2*O,y.stroke()),M?E5.toGrayColor(_.color):_.color);L?sU(y,L,p,null,this._data,this.gv):y.strokeStyle=p,y.lineWidth=s,y.stroke(),_.is3d&&(O=M?E5.toGrayColor(_._67o):_._67o,Il(y,p,O,s,this.gv._zoom,_._66o)),q("edge.dash")&&(E=q("edge.dash.pattern"),(L=Y8(y,E,this._2Q("edge.dash.offset")))!==y&&this.drawPath(L,_),this._1Q(y,"edge",q("edge.dash.width")||s,E)),H&&y.restore(),P8(y,E),y.lineJoin=$,y.lineCap=k},_48O:function(){},_47O:function(y){}}),function(y,q){Kx(XE,this,[y,q])}),TE=(w8(XE,QE,{_3O:function(){var q,_,y,s,p,O,L,$,k,M,E,H,w,Q,x,S,X=this.s,T=this._data,i=this.gv;this._88I=M5,T.isExpanded()&&T.eachChild(function(y){W(y)&&(y=i.getBoundsForGroup(y))&&((_=_||[]).push(y),q=IA(q,y))}),q?(O=i.getLabel(T),p=X("group.type"),s=(y=X("group.border.width")||0)/2,X("group.border.width.absolute")&&(y/=i._zoom),k=_,M=q,q="oval"===($=p)?(E=0,w=M.height/M.width,H=w*w,x=M.x+M.width/2,S=M.y+M.height/2,KM(k).forEach(function(y){var q=y.x-x,y=y.y-S;E<(q=q*q+y*y/H)&&(E=q)}),w*=E=B5(E),{x:x-E,y:S-w,width:2*E,height:2*w}):"circle"===$?(Q=0,x=M.x+M.width/2,S=M.y+M.height/2,KM(k).forEach(function(y){var q=y.x-x,y=y.y-S;Q<(q=q*q+y*y)&&(Q=q)}),Q=B5(Q),{x:x-Q,y:S-Q,width:2*Q,height:2*Q}):("roundRect"===$&&s8(M,s5(M.width,M.height)/16),M),cu(q,T,"group.padding",1),s8(q,y),T=this._88I={type:p,rect:q,_64o:q},p||O==M5||(p=this.labelInfo={label:O,color:X("group.title.color"),font:X("group.title.font"),align:X("group.title.align")},w=(O=nx(p,O)).width+y,O=O.height+y,k=X("group.title.align"),($=X("group.title.orientation"))===sD||$===pD?(q.height+=y,w>q.width&&(q.width=w)):$!==qD&&$!==_D||(q.width+=y,w>q.height&&(q.height=w)),k=k===qD?q.x:k===_D?q.x+q.width-w:q.x+q.width/2-w/2,$===pD?(T.titleRect={x:q.x,y:q.y+q.height,width:q.width,height:O},T.rect={x:q.x,y:q.y,width:q.width,height:q.height+O},p.rect={x:k,y:q.y+q.height,width:w,height:O}):$===qD?(L=T.titleRect={x:q.x-O,y:q.y,width:O,height:q.height},T.rect={x:q.x-O,y:q.y,width:q.width+O,height:q.height},p.rect={x:L.x+O/2-q.height/2,y:L.y+q.height/2-O/2,width:q.height,height:O},p.rotation=-Math.PI/2):$===_D?(L=T.titleRect={x:q.x+q.width,y:q.y,width:O,height:q.height},T.rect={x:q.x,y:q.y,width:q.width+O,height:q.height},p.rect={x:L.x+O/2-q.height/2,y:L.y+q.height/2-O/2,width:q.height,height:O},p.rotation=Math.PI/2):(T.titleRect={x:q.x,y:q.y-O,width:q.width,height:O},T.rect={x:q.x,y:q.y-O,width:q.width,height:q.height+O},p.rect={x:k,y:q.y-O-s,width:w,height:O+y})),this._40O(T,X("group.border.width")/2)):XE.superClass._3O.call(this)},getPosition:function(y,q,_,s){var p=this._88I;return p?((y=BU(y,p.rect,s)).x+=q,y.y+=_,y):XE.superClass.getPosition.apply(this,arguments)},_24O:function(y,q){var _=this._88I;_&&!_.type&&"label2"!==y||XE.superClass._24O.call(this,y,q)},drawBody:function(y){var q=this._88I;if(q){var _=this._data,s=this.s,p=this.gv,O=q.type,L=q.rect,$=q._64o,k=q.titleRect,M=this.getBodyColor(),E=r(s("group.image"),M),H=s("group.image.stretch"),w=this.getBodyColor("group.background"),Q=r(s("group.repeat.image"),M),x=s("group.gradient.pack"),S=s("group.gradient"),X=s("group.gradient.color"),T=s("group.border.width"),i=s("group.border.color"),N=s("group.border.pattern"),a=s("group.title.orientation"),l=s("group.depth"),j=s("group.border.radius"),Z=s("group.border.join"),K=s("group.border.cap"),C=(s("group.border.width.absolute")&&(T/=p._zoom),i),B=s("group.border.repeat.image");if((B=B&&r(B,i))&&(C=pU(y,B,i,null,_,p,s("group.border.repeat.image.stretch"),L)),O)B=y.lineJoin,i=y.lineCap,y.lineJoin=Z,y.lineCap=K,E?(y.save(),yU(y,O,L,j),y.clip(),VA(y,E,H,L.x,L.y,L.width,L.height,_,p,M),y.restore(),0<T&&(F=Y8(y,N),yU(F,O,L,j),y.lineWidth=T,y.strokeStyle=C,y.stroke(),P8(y,N))):(F=Y8(y,N),w||Q||x?(yU(y,O,L,j),x?gl(y,x,function(y){return zl(y,M)},!1,L):Q?_U(y,Q,M,null,_,p,s("group.repeat.image.stretch"),L,s("group.repeat.image.rotation")):qU(y,w,S,X,L),y.fill(),x&&y.restore(),y!==F&&yU(F,O,L,j)):yU(F,O,L,j),0<T&&(y.lineWidth=T,y.strokeStyle=C,y.stroke()),P8(y,N),O===m&&MU(y,w,l,L)),y.lineJoin=B,y.lineCap=i;else{var F,x=s("group.title.background");if((!j||j<0)&&(j=0),E)VA(y,E,H,$.x,$.y,$.width,$.height,_,p,this.getBodyColor());else if(w||Q)if(Q?_U(y,Q,M,null,_,p,s("group.repeat.image.stretch"),L,s("group.repeat.image.rotation")):qU(y,w,S,X,$),0===T)yU(y,m,$),y.fill(),MU(y,w,l,$);else{switch(y.beginPath(),a){case pD:$U(y,$.x,$.y,$.width,$.height,j,j,0,0);break;case qD:$U(y,$.x,$.y,$.width,$.height,0,j,0,j);break;case _D:$U(y,$.x,$.y,$.width,$.height,j,0,j,0);break;case sD:$U(y,$.x,$.y,$.width,$.height,0,0,j,j)}y.fill()}if(k&&x)if(0===T)dl(y,k.x,k.y,k.width,k.height,x),MU(y,x,l,k);else{switch(y.beginPath(),y.fillStyle=x,a){case pD:$U(y,k.x,k.y,k.width,k.height,0,0,j,j);break;case qD:$U(y,k.x,k.y,k.width,k.height,j,0,j,0);break;case _D:$U(y,k.x,k.y,k.width,k.height,0,j,0,j);break;case sD:$U(y,k.x,k.y,k.width,k.height,j,j,0,0)}y.fill()}0<T&&(F=Y8(y,N),yU(F,"roundRect",L,j),y.save(),y.lineWidth=T,y.strokeStyle=C,y.lineJoin=Z,y.lineCap=K,y.closePath(),y.stroke(),k&&s("group.splitLine")&&(O=k.x,B=k.y,i=k.width,E=k.height,y.beginPath(),a===pD?(y.moveTo(O,B),y.lineTo(O+i,B)):a===qD?(y.moveTo(O+i,B),y.lineTo(O+i,B+E)):a===_D?(y.moveTo(O,B),y.lineTo(O,B+E)):(y.moveTo(O,B+E),y.lineTo(O+i,B+E))),y.stroke(),y.restore(),P8(F,N))}this._39O(y,q)}else XE.superClass.drawBody.call(this,y)}}),function(y,q){Kx(TE,this,[y,q])}),iE=(w8(TE,QE,{drawBody:function(y){this._39O(y,this._83o)}}),function(y,q){Kx(iE,this,[y,q])}),NE=(w8(iE,QE,{_3O:function(){var y=this._data,q=this.s,_=this.gv,s=y.getPoints(),p=_.getBorderColor(y),O=p?q("border.width"):0,L=this.getSelectWidth(),$=q("shape.border.width"),k=y.getRect(),M=y.getAnchorRect(),_=_.getBodyColor(y),E=q("shape.border.color");(s=this._99o=s.isEmpty()?M5:{rect:k,rotation:y.getRotation(),fillRule:q("shape.fill.rule"),scale:y.getScale(),position:y.p(),points:s,segments:y.getSegments(),bodyColor:_,borderColor:p,borderWidth:O,_94o:q("shape.border.3d"),_95o:q("shape.border.3d.color"),_96o:q("shape.border.3d.accuracy"),_97o:L?this.getSelectColor():M5,selectWidth:L,_53o:q("shape.background"),_27Q:r(q("shape.repeat.image"),_),shapeRepeatImageStretch:q("shape.repeat.image.stretch"),shapeRepeatImageRotation:q("shape.repeat.image.rotation"),shapeGradientPack:q("shape.gradient.pack"),shapeBorderGradientPack:q("shape.border.gradient.pack"),_54o:$,_55o:E,shapeBorderRepeatImage:r(q("shape.border.repeat.image"),E),shapeBorderRepeatImageStretch:q("shape.border.repeat.image.stretch"),shapeBorderRepeatImageRotation:q("shape.border.repeat.image.rotation"),shapeGradient:q("shape.gradient"),_59o:q("shape.gradient.color"),_60o:q("shape.border.pattern"),_61o:q("shape.border.cap"),_62o:q("shape.border.join"),shapeForeground:q("shape.foreground"),gray:q("2d.gray")})&&(M.x+=s.position.x,M.y+=s.position.y,s.gradientRect=M,p=y.getScale(),_=_5(1,_5(F5(p.x),F5(p.y))),q("shape.dash")&&q("shape.dash.width")>$&&($=q("shape.dash.width")),(E=q("shape.border.width.absolute")?($+O+L)/this.gv._zoom/_:$*("square"===s._61o?.71:.5)+O+L/this.gv._zoom/_)&&(E*=_,k=DA(k),Gl(k,E,s._62o)),this._68o(k),(M=q("clip.percentage"))!=k5&&(s.clipRect=cx(y.getAnchorRect(),q("clip.direction"),M)),(p=q("shape.fill.clip.percentage"))!=k5&&(s.shapeClipRect=cx(y.getAnchorRect(),q("shape.fill.clip.direction"),p)),($=q("shape.foreground.clip.percentage"))!=k5&&(s.shapeForegroundClipRect=cx(y.getAnchorRect(),q("shape.foreground.clip.direction"),$)))},getPosition:function(y,q,_,s){var p=this._99o;return p?((y=BU(y,p.rect,s)).x+=q,y.y+=_,y):fn},_42:function(y){this._99o&&iE.superClass._42.call(this,y)},drawBody:function(y){function q(y){return Z?E5.toGrayColor(y):y}var _,s,p,O=this,L=O.s,$=O._99o,k=$.position,M=$.scale,E=$.rotation,H=$.borderWidth,w=O.gv._zoom,Q=$.selectWidth/w,x=$._27Q,S=$.shapeGradientPack,X=$._54o,T=$.clipRect,i=$.shapeClipRect,N=$.points,a=$.segments,l=O._data.isClosePath(),j=$.fillRule,Z=$.gray,K=q($._53o),C=K||x||S,E=(y.save(),Ll(y,k.x,k.y),$l(y,E),kl(y,M.x,M.y),T&&(y.beginPath(),y.rect(T.x,T.y,T.width,T.height),y.clip()),C&&i&&(y.save(),y.beginPath(),y.rect(i.x,i.y,i.width,i.height),y.clip()),P.Default.extractShapeTranslation?((N=DA(N)).forEach(function(y){y.x-=k.x,y.y-=k.y}),$.gradientRect.x-=k.x,$.gradientRect.y-=k.y):Ll(y,-k.x,-k.y),L("shape.border.width.absolute")),M=$._60o,T=(E&&M&&(M=M.map(function(y){return y*w})),Y8(y,M)),B=y.lineJoin,F=y.lineCap,V=(y.lineJoin=$._62o,y.lineCap=$._61o,q($.bodyColor));C?(vl(y,N,a,l),S?gl(y,S,function(y){return zl(y,$.bodyColor)},!1,$.gradientRect):x?((p=$.shapeRepeatImageStretch)&&(_=bA(N)),_U(y,x,V,null,O._data,O.gv,p,_,$.shapeRepeatImageRotation)):qU(y,s=V||K,$.shapeGradient,q($._59o),$.gradientRect),y.fill(j),S&&y.restore(),i&&(y.restore(),Ll(y,-k.x,-k.y)),T!==y&&vl(T,N,a,l)):vl(T,N,a,l),(C=$.shapeForeground)&&(y.save(),(x=$.shapeForegroundClipRect)&&(Ll(y,k.x,k.y),y.beginPath(),y.rect(x.x,x.y,x.width,x.height),y.clip(),Ll(y,-k.x,-k.y)),vl(y,N,a,l),qU(y,C,L("shape.foreground.gradient"),q(L("shape.foreground.gradient.color")),$.gradientRect),y.fill(j),y.restore()),E&&(y.save(),y.setTransform(1,0,0,1,0,0)),Q&&(y.strokeStyle=$._97o,y.lineWidth=X+2*(H+Q),y.stroke()),H&&(y.strokeStyle=q($.borderColor),y.lineWidth=X+2*H,y.stroke()),X&&(s=q($._55o),(S=$.shapeBorderGradientPack)?gl(y,S,q,!0,$.gradientRect):$.shapeBorderRepeatImage?((p=$.shapeBorderRepeatImageStretch)&&!_&&(_=bA(N)),sU(y,$.shapeBorderRepeatImage,s,null,O._data,O.gv,p,_,$.shapeBorderRepeatImageRotation)):y.strokeStyle=s=!K&&V?V:s,y.lineWidth=X,y.stroke(),S&&y.restore(),$._94o&&Il(y,s,q($._95o),X,w,$._96o)),P8(y,M),L("shape.dash")&&0<(i=L("shape.dash.width")||X)&&(M=L("shape.dash.pattern"),E&&(M=M.map(function(y){return y*w})),(T=Y8(y,M,O._2Q("shape.dash.offset")))!==y&&vl(T,N,a,l),O._1Q(y,"shape",i,M)),E&&y.restore(),y.lineJoin=B,y.lineCap=F,y.restore()},_48O:function(){},_47O:function(y){}}),function(y,q){Kx(NE,this,[y,q])}),aE=(w8(NE,iE,{getRotation:(uB=new f,JB=new f,DB=new mB,function(y,q,_){y=y||0;var s,p,O=this._data,L=O.getPoints(),$=L.size();return 1<$?(p=O.p(),O=O.getScale(),DB.identity().translate(-p.x,-p.y).scale(O.x,O.y).translate(p.x,p.y),p=Zu[_]?(s=L.get((O=($-$%2)/2)-1),L.get(O)):ju[_]?(s=L.get(0),L.get(1)):(s=L.get($-2),L.get($-1)),DB.apply(s,uB),DB.apply(p,JB),Gu(uB,JB,q,y)):y}),getPosition:(VB=new f,hB=new f,tB=new f,function(y,q,_,s,p){var O=this._data,L=O.getPoints(),$=L.size();if(1<$){if(O=O.getPointsMatrix2d(),Zu[y]){var k=$%2,M=($-k)/2,E=L.get(M-1),M=L.get(M);if(0!=k)return(k=BU(y,fn,s)).x+=q,k.y+=_,O.apply(E,VB),O.apply(M,hB),O.identity().rotate(tB.copy(hB).sub(VB).angle()).apply(k,VB).add(hB)}else M=ju[y]?(E=L.get(0),L.get(1)):(E=L.get($-2),L.get($-1));return O.apply(E,VB),O.apply(M,hB),ru(VB,hB,y,q,_,s,p)}return fn})}),function(y,q){Kx(aE,this,[y,q])}),lE=(w8(aE,QE,{_3O:function(){aE.superClass._3O.call(this);var y=this.s,q=this._83o;this._82o=q.img||q.shape?M5:{background:this.getBodyColor("grid.background"),depth:y("grid.depth"),rect:q.rect,_88o:y("grid.cell.depth"),cellBorderColor:y("grid.cell.border.color"),_89o:y("grid.row.count"),_90o:y("grid.column.count"),block:y("grid.block"),_91o:y("grid.block.color"),_92o:y("grid.block.padding"),_93o:y("grid.block.width")}},drawBody:function(y){var q=this._82o;if(q){var _,s,p=this._data,O=q.background,L=q.rect,$=q.block,k=q._91o,M=q._92o,E=q._93o,H=q._88o,w=q.cellBorderColor,Q=q._89o,x=q._90o;if(O)if(dl(y,L.x,L.y,L.width,L.height,O),MU(y,O,q.depth,L),H)for(_=0;_<Q;_++)for(s=0;s<x;s++)(L=p.getCellRect(_,s))&&MU(y,O,H,L);else if(w){for(y.beginPath(),_=0;_<Q;_++)for(s=0;s<x;s++)(L=p.getCellRect(_,s))&&y.rect(L.x,L.y,L.width,L.height);y.strokeStyle=w,y.lineWidth=1,y.stroke()}if("h"===$)for(_=0;_<Q;_++)L=IA(p.getCellRect(_,0),p.getCellRect(_,x-1)),s8(L,M),kU(y,k,L.x,L.y,L.width,L.height,E);else if("v"===$)for(s=0;s<x;s++)L=IA(p.getCellRect(0,s),p.getCellRect(Q-1,s)),s8(L,M),kU(y,k,L.x,L.y,L.width,L.height,E);this._39O(y,this._83o)}else aE.superClass.drawBody.call(this,y)}}),function(y,q){Kx(lE,this,[y,q])}),jE=w?ex().getContext("2d"):M5,s=(w8(lE,QE,{_checkEmptyRect:!1,_81o:function(){var L,y,$,q,_,s,k,M,p,O,E,H,w,Q,x,S=this._data,X=lE.superClass._81o.call(this),T=S.s("text");return T!=M5&&(T+="",L=S.s("text.font"),Q=S.s("text.align"),y=S.s("text.vAlign"),H=S.s("text.wrap"),E=S.s("text.vertical"),$=S.s("text.vertical.gap"),x=S.s("text.letter.gap")||0,q=S.getWidth(),_=S.getHeight(),null==$&&($=1),E?(k=((w=H?vx(T,_,L,x,E,$):[T]).length-1)*x,M=0,jE.textBaseline=sD,jE.font=L,w.forEach(function(y){for(var q=y.length,_=0,s=(q-1)*$,p=0;p<q;p++){var O=jE.measureText(y[p]);s+=O.fontBoundingBoxDescent||mA(L,y[p]).height,_=_5(_,O.width)}k+=_,M=_5(s,M)}),w.length,w.forEach(function(y){}),s={width:k,height:M}):1<(H=(w=H?vx(T,q,L,x,E,$):T.split("\n")).length)?(E=mA(L,T).height,k=0,M=E*H+$*(H-1),w.forEach(function(y){k=_5(k,mA(L,y).width)}),s={width:k,height:M}):(s=mA(L,T),x&&(s.width+=(T.length-1)*x)),E=s.width,H=s.height,w=S.getAnchor(),"left"===Q?p=-q*w.x:"center"===Q?p=-q*w.x+(q-E)/2:"right"===Q&&(p=q*(1-w.x)-s.width),"top"===y?O=-_*w.y:"middle"===y?O=-_*w.y+(_-H)/2:"bottom"===y&&(O=_*(1-w.y)-s.height),T=S.getMatrix(),x=bA([T.tf(p,O),T.tf(p+E,O),T.tf(p+E,O+H),T.tf(p,O+H)]),(X=IA(X,x))&&S.s("text.shadow")&&((Q=DA(X)).x+=S.s("text.shadow.offset.x"),Q.y+=S.s("text.shadow.offset.y"),s8(Q,S.s("text.shadow.blur")),X=IA(X,Q))),X}}),vu.Interactor=function(y){this.gv=this._graphView=y}),ZE=(y("Interactor",o,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(y){this.gv.fi(y)},setCursor:function(y){v5||this.gv.setCursor(y)},startDragging:function(y){this._lastClientPoint=gA(y),this._lastLogicalPoint=this.gv.lp(y),L8(this,y)},clearDragging:function(y){this._lastClientPoint=this._lastLogicalPoint=this._logicalPoint=M5},autoScroll:function(y){return this.gv.autoScroll(y,this._lastClientPoint)}}),M5),KE=function(y){ZE.handleWindowTouchMove(y)},CE=function(y){ZE.handleWindowTouchEnd(y),q5(Y,sn,KE),q5(Y,pn,CE),ZE=M5},BE=function(y){ZE.handleWindowMouseMove(y)},FE=function(y){ZE.handleWindowMouseUp(y),q5(Y,dL,BE),q5(Y,yn,FE),ZE=M5},VE=function(y){var q=this;q.gv=y,q._is2d=y instanceof vu.GraphView,q._eventListeners={},["mousedown","mousemove","mouseleave","touchstart","touchmove","touchend","mouseup",$n,"wheel"].forEach(function(y){q.addListener(y)}),q.initImageResource()},hE=(w8(VE,s,{enableVR:function(y){!!this._vrEnable!==y&&((this._vrEnable=y)?this.gv.vr.mp(this.onVRControllerChange,this):this.gv.vr.ump(this.onVRControllerChange,this))},onVRControllerChange:function(y){var q=y.property,_=(y=y.newValue).id,s=this.gv.vr.getController(_).getRay();if(s)switch(s.controllerId=_,this.gv.vr.getRayEventType(s,q,y[FL])){case"down":this.handle_mousedown(s);break;case"up":ZE&&FE(s);break;case"move":this.handle_mousemove(s),ZE&&this.handleWindowMouseMove(s)}},setPreventEventDefault:function(y,q){var _=this._eventListeners[y];_?_._prevent=q:this._eventListeners[y]=_={_removal:k5,_prevent:q}},removeListener:function(y){(y=this._eventListeners[y])&&y._removal&&(y._removal(),y._removal=k5)},addListener:function(q){var y,_=this,s=_._eventListeners[q];s||(_._eventListeners[q]=s={_removal:k5,_prevent:!0}),s&&s._removal||(y=function(y){s._prevent&&E5.preventDefault(y),_.disabled||_.gv._48Q||("wheel"===q?lx(_,y):_["handle_"+q](y))},y5(_.gv.getView(),q,y),s._removal=function(){q5(_.gv.getView(),q,y)})},handleWindowTouchMove:function(y){this.handleWindowMouseMove(y)},handleWindowMouseMove:function(y){!this.downInfo||xl(y)&&1!==eA(y)?this.isDragging&&(this.handleDownInfo("onEndDrag",y),this.isDragging=!1):this.isDragging?this.handleDownInfo("onDrag",y):(this.handleDownInfo("onBeginDrag",y),this.isDragging=!0)},handleWindowTouchEnd:function(y){this.handleWindowMouseUp(y)},handleWindowMouseUp:function(y){if(this.isDragging&&(this.handleDownInfo("onEndDrag",y),this.isDragging=!1),this.downInfo){var q=this.handle("onUp",y);if(q&&q.data===this.downInfo.data){this.handleMissingUp(y);var _=this,s=2===y.button?"onContextMenu":"onClick";if(q.data.s("disableDoubleClick")||!_._dbclickTimer)return void(_._dbclickTimer=m5(function(){delete _._dbclickTimer,_.handleClick(y,s,q),_.downInfo=M5},E5.clickDelay));W5(_._dbclickTimer),delete _._dbclickTimer,s="onDoubleClick",_.handleClick(y,s,q)}else this.handleDownInfo("onUp",y);this.downInfo=M5,this.downComps=M5}},handle_mouseleave:function(y){var q=this,_=q.gv,s=(q._hoverTimer&&(W5(q._hoverTimer),delete q._hoverTimer),q.currentInfo?q.currentInfo.data:M5);if(s){if(s.s("onLeave")&&s.s("onLeave")(y,s,_),q.fire("data","onLeave",y,s),_=q.currentInfo?q.currentInfo.hits:M5)for(var p in _)q.handleLeave(y,p);q.currentInfo=M5}},handle_mousewheel:function(y){y.scrollDelta=y.wheelDelta/40,this.handle("onScroll",y)},handle_DOMMouseScroll:function(y){y.scrollDelta=2===y.axis?-y.detail:0,this.handle("onScroll",y)},handle_touchstart:function(y){this.handle_mousedown(y)},handle_touchmove:function(y){this.handle("onMove",y)},handle_mousedown:function(y){var q;this.isDragging&&(this.handleDownInfo("onEndDrag",y),this.isDragging=!1),this.downComps=[],this.downInfo=this.handle("onDown",y),this.downInfo&&this!==ZE&&(q=xl(y),ZE?q?ZE.handleWindowTouchEnd(y):ZE.handleWindowMouseUp(y):q?(y5(Y,sn,KE),y5(Y,pn,CE)):(y5(Y,dL,BE),y5(Y,yn,FE)),ZE=this)},handle_touchend:function(y){this.handle_mouseup(y)},handle_mouseup:function(y){this.downInfo||this.isDragging||this.handle("onUp",y)},handle_mousemove:function(y){var q=this,_=q.gv;if(q._hoverTimer&&(W5(q._hoverTimer),delete q._hoverTimer),!_._panning&&!_._moving){var s,p,O,L=q.handle("onMove",y),$=this.currentInfo?this.currentInfo.data:M5,k=this.currentInfo?this.currentInfo.hits:M5;if(L&&(p=L.data,O=L.hits,q._hoverTimer=m5(function(){W5(q._hoverTimer),delete q._hoverTimer,q.handle("onHover",y,L)},_.getHoverDelay()||E5.hoverDelay)),p!==$){if($&&($.s("onLeave")&&$.s("onLeave")(y,$,_),this.fire("data","onLeave",y,$)),p&&(p.s("onEnter")&&p.s("onEnter")(y,p,_),this.fire("data","onEnter",y,p)),k)for(s in k)this.handleLeave(y,s);if(O)for(s in O){var M,E,H=O[s];(E=(M=p._interactPrefix=H.prefix)&&p.a(M+"onEnter")||H.target.onEnter)&&E.call(H.target,y,p,_,H.point,H.width,H.height),this.fire(H.type,"onEnter",H.event,H.data,H.image,H.comp,H.point,H),p._interactPrefix=null}}else{if(k)for(s in k)O&&O[s]||this.handleLeave(y,s);if(O)for(s in O)k&&k[s]||(H=O[s],(E=(M=p._interactPrefix=H.prefix)&&p.a(M+"onEnter")||H.target.onEnter)&&E.call(H.target,y,p,_,H.point,H.width,H.height),this.fire(H.type,"onEnter",H.event,H.data,H.image,H.comp,H.point,H),p._interactPrefix=null)}this.currentInfo=L}},handle:function(y,q,_){var s,p=this.gv;if(this._is2d){if((_=_||p.getDataInfoAt(q,q.__ht_propagation_filter))&&p.isInteractive(_.data))return s=_.ui.interactiveInfo,L=_.data,s&&(L.s(y)&&L.s(y)(q,L,p),this.fire("data",y,q,L),"body"===_.part&&s.bodyInfo?_.hits=this.handleImage(O="body",p.getImage(L),y,q,L,_.point,s.bodyInfo):"icons"===_.part&&s._38o&&(E=s._38o[_.name])&&E[_.index]&&(O="icons|"+_.name+"|"+_.index,_.hits=this.handleImage(O,_.icon,y,q,L,_.point,E[_.index]))),q["ht.propagation.host"]&&L.getHost&&L.getHost()&&(q.__ht_propagation_filter=function(y){return y===L.getHost()},this.handle(y,q)),_}else{if(!_)if(q&&q instanceof P.Math.Ray&&p.isVREnabled()){var O=p.vr.intersectWorld(q),L=O.data,$=O.intersect;if(p.vr.renderRayDuringInteraction(q,L,$),!L)return;if(!(s=(k=p.getData3dUI(L)).interactiveInfo))return;_={data:L,part:$.part,ui:k}}else{if(!(_=p.getDataInfoDuringInteract(q)))return;_=_&&{data:_.data,part:_.part}}if(p.isInteractive(_.data)){if(!$){L=_.data;var k=p.getData3dUI(L);if(!(s=(_.ui=k).interactiveInfo))return _}if(L.s(y)&&L.s(y)(q,L,p),this.fire("data",y,q,L),!$&&!($=p.intersectObject(q,L)))return _;var M,E=$.part;return(M=(M="body"!==E?L.s(E+".image")||L.s("shape3d."+E+".image"):M)||L.s("all.image")||L.s("shape3d.image"))&&(s="object"==typeof M?s[M.uuid]:s[M])&&s.bodyInfo&&(_.part="body",_.interactiveInfo=s,_.point=this._convertUVToPoint($.uv,s,L,E,M),_.image=M,_.hits=this.handleImage("body",M,y,q,L,_.point,s.bodyInfo)),_}}},_handleLeaveOrMissing:function(y,q,_){var s,p,O,L,$,k="leave"===y?this.currentInfo:this.downInfo;k&&(s=k.interactiveInfo||k.ui.interactiveInfo)&&(p=k.data,this._is2d?(L=this.gv.lp(q),"body"===k.part&&s.bodyInfo?($="body","leave"===y?this.handleLeaveImage(_,$,this.gv.getImage(p),q,p,L,s.bodyInfo):this.handleMissingUpImage($,this.gv.getImage(p),q,p,L,s.bodyInfo)):"icons"===k.part&&s._38o&&(O=s._38o[k.name])&&O[k.index]&&($="icons|"+k.name+"|"+k.index,"leave"===y?this.handleLeaveImage(_,$,k.icon,q,p,L,O[k.index]):this.handleMissingUpImage($,k.icon,q,p,L,O[k.index]))):s.bodyInfo&&(L=($=this.gv.intersectObject(q,p))&&$.uv?this._convertUVToPoint($.uv,s,p,$.part,k.image):{x:1/0,y:1/0},"leave"===y?this.handleLeaveImage(_,"body",k.image,q,p,L,s.bodyInfo):this.handleMissingUpImage("body",k.image,q,p,L,s.bodyInfo)))},handleClick:function(y,q,_){var s,p,O,L,$=this.downInfo;$&&_&&(s=_.interactiveInfo||_.ui.interactiveInfo,p=_.data,L=this.gv,p.s(q)&&p.s(q)(y,p,L),this.fire("data",q,y,p),s&&(this._is2d?$.part===_.part&&(O=L.lp(y),"body"===_.part&&s.bodyInfo&&this.handleClickImage("body",L.getImage(p),q,y,p,O,s.bodyInfo,_)):s.bodyInfo&&(L=L.intersectObject(y,p))&&(O=this._convertUVToPoint(L.uv,s,p,L.part,$.image),this.handleClickImage("body",$.image,q,y,p,O,s.bodyInfo,_))))},handleDownInfo:function(y,q){var _,s,p,O,L,$,k,M;this.downInfo&&(_=this.downInfo,s=this.gv,(p=_.interactiveInfo||_.ui.interactiveInfo)&&((L=_.data).s(y)&&L.s(y)(q,L,s),this.fire("data",y,q,L),this._is2d?($=s.lp(q),"body"===_.part&&p.bodyInfo?this.handleDownInfoImage(O="body",s.getImage(L),y,q,L,$,p.bodyInfo):"icons"===_.part&&p._38o&&(k=p._38o[_.name])&&k[_.index]&&(O="icons|"+_.name+"|"+_.index,this.handleDownInfoImage(O,_.icon,y,q,L,$,k[_.index]))):p.bodyInfo&&("onBeginDrag"===y?(M=s._raycaster.intersectObjectAndRecordTriangle(q,L))&&(p.beginDragIntersectInfo=M.triangleInfo):M=s.intersectObject(q,L),(M=M||("onDrag"!==y&&"onEndDrag"!==y||!p.beginDragIntersectInfo?M:s._raycaster.intersectLastTriangle(q,p.beginDragIntersectInfo)))&&($=this._convertUVToPoint(M.uv,p,L,M.part,_.image),this.handleDownInfoImage("body",_.image,y,q,L,$,p.bodyInfo)))))},fire:function(y,q,_,s,p,O,L,$){this.gv.fi({kind:q,type:y,event:_,data:s,image:p,comp:O,view:this.gv,point:L,width:$?$.width:k5,height:$?$.height:k5})},handleImage:function(y,q,_,s,p,O,L){var $={};if(q=q&&r(q))for(var k,M=this.gv,E=L.rect,H=((x=this.convertPoint(O,L)).inRect&&(q[_]&&q[_](s,p,M,x,E.width,E.height),this.fire("image",_,s,p,q,k5,x,E),$[y+"|image"]={target:q,type:"image",image:q,data:p,event:s,point:x,width:E.width,height:E.height}),L.compInfos),w=q,Q=H.length-1;0<=Q;Q--){var x,S=(X=H[Q]).comp;if((x=this.convertPoint(O,X,w,S,M,p)).inRect){var X,E=X.rect,T=(X=p._interactPrefix=X.prefix)&&p.a(X+_)||S[_];if(T&&(k=T.call(S,s,p,M,x,E.width,E.height)),this.fire("comp",_,s,p,q,S,x,E),!0!==k&&(q=E.image)&&(q[_]&&(k=q[_](s,p,M,x,E.width,E.height)),this.fire("image",_,s,p,q,k5,x,E)),p._interactPrefix=null,$[y+"|"+Q]={target:S,type:"comp",comp:S,image:q,data:p,event:s,point:x,width:E.width,height:E.height,prefix:X},this.downComps&&this.downComps.push(S),q&&($[y+"|"+Q+"|image"]={target:q,type:"image",image:q,data:p,event:s,point:x,width:E.width,height:E.height,prefix:X}),!0===k)break}}return $},handleLeave:function(y,q){return this._handleLeaveOrMissing("leave",y,q)},handleMissingUp:function(y){return this._handleLeaveOrMissing("missing",y)},handleLeaveImage:function(y,q,_,s,p,O,L){if(_=_&&r(_))for(var $,k=this.gv,M=L.rect,E=this.convertPoint(O,L),H=(y===q+"|image"&&(_.onLeave&&_.onLeave(s,p,k,E,M.width,M.height),this.fire("image","onLeave",s,p,_,k5,E,M)),L.compInfos),w=_,Q=H.length-1;0<=Q;Q--){var x=(S=H[Q]).comp,E=this.convertPoint(O,S,w,x,k,p),M=S.rect,S=p._interactPrefix=S.prefix;if(y===q+"|"+Q&&((S=S&&p.a(S+"onLeave")||x.onLeave)&&($=S.call(x,s,p,k,E,M.width,M.height)),this.fire("comp","onLeave",s,p,_,x,E,M)),!0!==$&&(_=M.image)&&y===q+"|"+Q+"|image"&&(_.onLeave&&($=_.onLeave(s,p,k,E,M.width,M.height)),this.fire("image","onLeave",s,p,_,k5,E,M)),!(p._interactPrefix=null)===$)break}},handleMissingUpImage:function(y,q,_,s,p,O){var L="onUp",$=this.downInfo.hits;if($&&q&&(q=r(q)))for(var k,M=this.gv,E=O.rect,H=(!(x=this.convertPoint(p,O)).inRect&&$[y+"|image"]&&(q.onUp&&q.onUp(_,s,M,x,E.width,E.height),this.fire("image",L,_,s,q,k5,x,E)),O.compInfos),w=q,Q=H.length-1;0<=Q;Q--){var x,S=(X=H[Q]).comp;if(!(x=this.convertPoint(p,X,w,S,M,s)).inRect){var E=X.rect,X=s._interactPrefix=X.prefix;if($[y+"|"+Q]&&((X=X&&s.a(X+L)||S.onUp)&&(k=X.call(S,_,s,M,x,E.width,E.height)),this.fire("comp",L,_,s,q,S,x,E)),!0!==k&&(q=E.image)&&$[y+"|"+Q+"|image"]&&(q.onUp&&(k=q.onUp(_,s,M,x,E.width,E.height)),this.fire("image",L,_,s,q,k5,x,E)),!(s._interactPrefix=null)===k)break}}},handleDownInfoImage:function(y,q,_,s,p,O,L){var $=this.downInfo.hits;if($&&q&&(q=r(q)))for(var k,M=this.gv,E=L.rect,H=this.convertPoint(O,L),w=($[y+"|image"]&&(q[_]&&q[_](s,p,M,H,E.width,E.height),this.fire("image",_,s,p,q,k5,H,E)),L.compInfos),Q=q,x=w.length-1;0<=x;x--){var S=(X=w[x]).comp,H=this.convertPoint(O,X,Q,S,M,p),E=X.rect,X=p._interactPrefix=X.prefix,T=0<=["onDrag","onEndDrag"].indexOf(_);if((!T&&$[y+"|"+x]||T&&this.downComps&&0<=this.downComps.indexOf(S))&&((T=X&&p.a(X+_)||S[_])&&(k=T.call(S,s,p,M,H,E.width,E.height)),this.fire("comp",_,s,p,q,S,H,E)),!0!==k&&(q=E.image)&&$[y+"|"+x+"|image"]&&(q[_]&&(k=q[_](s,p,M,H,E.width,E.height)),this.fire("image",_,s,p,q,k5,H,E)),!(p._interactPrefix=null)===k)break}},handleClickImage:function(y,q,_,s,p,O,L,$){var k=this.downInfo.hits,M=$.hits;if(k&&q&&(q=r(q)))for(var E,H=this.gv,w=L.rect,Q=this.convertPoint(O,L),x=(k[y+"|image"]&&(q[_]&&q[_](s,p,H,Q,w.width,w.height),this.fire("image",_,s,p,q,k5,Q,w)),L.compInfos),S=q,X=x.length-1;0<=X;X--){var T=(i=x[X]).comp,Q=this.convertPoint(O,i,S,T,H,p),w=i.rect,i=p._interactPrefix=i.prefix;if(k[y+"|"+X]&&M[y+"|"+X]&&((i=i&&p.a(i+_)||T[_])&&(E=i.call(T,s,p,H,Q,w.width,w.height)),this.fire("comp",_,s,p,q,T,Q,w)),!0!==E&&(q=w.image)&&k[y+"|"+X+"|image"]&&(q[_]&&(E=q[_](s,p,H,Q,w.width,w.height)),this.fire("image",_,s,p,q,k5,Q,w)),!(p._interactPrefix=null)===E)break}},initImageResource:function(){E5.setImage("coreInteractorRayHitImage",{width:16,height:16,comps:[{type:"oval",background:"rgb(255,0,0)",borderWidth:1,borderColor:"rgb(250,120,120)",opacity:.3,rotation:-1.593,rect:[.73315,.6933,14.5337,14.61341]},{type:"oval",background:"rgb(255,0,0)",borderWidth:1,borderColor:"rgb(250,120,120)",rotation:-1.593,rect:[3.56695,3.75073,8.8661,8.49856]}]})},_convertUVToPoint:function(y,q,_,s,p){if(!y)return{x:1/0,y:1/0};var O,q=q.bodyInfo.rect,s=(_&&p&&(s="body"===s?(O=_.s("shape3d.uv.scale"),_.s("shape3d.uv.offset")):(O=_.s(s+".uv.scale")||_.s("all.uv.scale"),_.s(s+".uv.offset")||_.s("all.uv.offset")),(O||s)&&(p=E5.getImage(p),_=e.isPOT(p.width)&&e.isPOT(p.height),p=y.x*(O?O[0]:1)+(s?s[0]:0),O=y.y*(O?O[1]:1)+(s?s[1]:0),_&&(p=p%1+(0<p?0:1),O=O%1+(0<O?0:1)),y.set(p,O))),y.clone());return(_=y.multiply({x:q.width,y:q.height})).local=s,_},convertPoint:function(y,q,_,s,p,O){var L=q.rect,$=q.matrix.applyInverse(y).sub(L);if(!(0<=$.x&&0<=$.y&&$.x<=L.width&&$.y<=L.height))return $;if(s&&g(s.pixelPerfect,O,p)){var k=1,M=!1,y=(L=this._is2d?(k=p.getZoom(),px(y.x,y.y,k5,k)):px(y.x,y.y)).x,E=L.y,H=L.width,w=H*(L=L.height)*k*k,Q=((Q=E5.hitMaxArea)<w&&(k*=Math.sqrt(Q/w)),y*=k,E*=k,Al(H=(H*=k)<2?2:H,L=(L*=k)<2?2:L)),y=((w=new mB(0,-y,-E,k,k)).append(q.matrix),p._drawForChecking=!0,s.transform=w,_.fitSize),E=(q.refRect&&q.refRect.fitSize?(s.refRect=q.refRect,_.fitSize=!0):_.fitSize=!1,_.comps);_.comps=[s],qu(Q,_,0,0,H,L,O,self),_.comps=E,_.fitSize=y,delete s.refRect,delete s.unionRect,delete s.transform,p._drawForChecking=!1;try{for(var x=0,S=Q.getImageData(0,0,H,L).data;x<S.length;x+=4)if(0!==S[x+3]){M=!0;break}Q.restore()}catch(y){Pl=M5,M=!1}$.inRect=M}else $.inRect=!0;return $}}),vu.DefaultInteractor=function(y){Kx(hE,this,[y])}),tE=(y("DefaultInteractor",s,{handle_mousedown:function(y){CA(y);var q,_=this.gv,s=_.getDataAt(y);!_.setFocus(y)||_._editing||_._scrolling||(fA(y)?_.handleDoubleClick(y,s):_.handleClick(y,s),q=AA(y),!Dl()&&!q&&s&&(_.isMovable(s)||_._39Q(s))||!_.isPannable()||!WA(y)&&!q||rA(y)||(this._tx=_.tx(),this._ty=_.ty(),this.startDragging(y)))},handleWindowMouseUp:function(y){var q=this.gv;q._panning&&(delete q._panning,q.onPanEnded(),this.fi({kind:"endPan",event:y})),delete this._tx,delete this._ty,this.clearDragging()},handle_mousemove:function(y){var q=this,_=q.gv;q._hoverTimer&&(W5(q._hoverTimer),delete q._hoverTimer),q._hoverTimer=m5(function(){q.fi({kind:"hover",event:y}),W5(q._hoverTimer),delete q._hoverTimer},_.getHoverDelay()||E5.hoverDelay)},handle_mouseleave:function(y){this._hoverTimer&&(W5(this._hoverTimer),delete this._hoverTimer)},handleWindowMouseMove:function(y){var q=this.gv,y=(this.fi({kind:q._panning?"betweenPan":"beginPan",event:y}),q._panning=1,Au(q,y,this._lastClientPoint));q.setTranslate(this._tx+y.x,this._ty+y.y)},handle_mousewheel:function(y){this.gv.handleScroll(y,y.wheelDelta)},handle_DOMMouseScroll:function(y){2===y.axis&&this.gv.handleScroll(y,-y.detail)},handle_keydown:function(y){this.gv.handleKeyDown(y)}}),vu.SelectInteractor=function(y){Kx(tE,this,[y])}),uE=(y("SelectInteractor",s,{_42:function(){var y=this.gv,q=y.getZoom(),_=this.mark,s=this.div,p=(s||(s=this.div=zx(),gx(this.getView(),s)),{});p.x=_.x*q+y.tx(),p.y=_.y*q+y.ty(),p.width=_.width*q,p.height=_.height*q,h(s,p),this.intersects()?(s.style.border="",s.style.background=y.getRectSelectBackground()):(s.style.background="",s.style.border="1px solid "+y.getRectSelectBorderColor())},handle_mousedown:function(y){var q,_,s=this.gv;this._57I=M5,this.pendingClickThrough=M5,s._editing||s._scrolling||Dl()||AA(y)||(q=s.getDataAt(y),_=s.sm(),q?rA(y)?_.co(q)?_.rs(q):_.as(q):_.co(q)?q instanceof vQ&&q.isClickThroughEnabled()&&WA(y)&&(this.pendingClickThrough=gA(y)):_.ss(q):rA(y)||!s.isPannable()?WA(y)&&(rA(y)||_.cs(),s.isRectSelectable()&&(this.startDragging(y),s._77O=1)):WA(y)&&(this._57I=gA(y)))},handle_mouseup:function(y){var q,_=this.gv,s=this._57I;s&&(vA(s,gA(y))<=1&&_.sm().cs(),this._57I=M5),this.pendingClickThrough&&(vA(this.pendingClickThrough,gA(y))<=1&&(q=_.getDataAt(y))instanceof vQ&&q.isClickThroughEnabled()&&(s=_.getDataAt(y,function(y){return y.getParent()===q&&_.isSelectable(y,!0)}))&&(y.clickThrough=!0,_.sm().ss(s)),this.pendingClickThrough=M5)},handleWindowMouseUp:function(y){this.clear(y)},handleWindowMouseMove:function(y){var q=this,_=q.gv;q._logicalPoint=_.lp(y),q.mark?(q.fi({kind:"betweenRectSelect",event:y}),_.isPannable()&&q.autoScroll(y),q.redraw()):q.fi({kind:"beginRectSelect",event:y}),q.mark=bA(q._lastLogicalPoint,q._logicalPoint),q.redraw()},intersects:function(){var y=this._lastLogicalPoint,q=this._logicalPoint;return y.x>q.x||y.y>q.y},clear:function(y){var q,_,s,p,O=this,L=O.gv,$=O.mark;O._57I=M5,O.pendingClickThrough=M5,O._lastLogicalPoint&&($&&(0===$.width||0===$.height||($=L.getDatasInRect($,O.intersects())).isEmpty()||(q=L.sm(),_=q.toSelection(),s=GA(y),p=y.altKey,$.each(function(y){q.co(y)?s&&!p||_.remove(y):(!p||s&&p)&&_.add(y)}),q.ss(_)),$8(O.div),delete O.div,delete O.mark,O.redraw(),O.fi({kind:"endRectSelect",event:y}),L.onRectSelectEnded()),O.clearDragging(),delete L._77O)},redraw:function(){var y=this;y._draw||(y._draw=1,m5(function(){y.mark&&y._42(),delete y._draw},16))}}),vu.MoveInteractor=function(y){Kx(uE,this,[y])}),JE=(y("MoveInteractor",s,{handle_mousedown:function(y){var q,_=this.gv;!WA(y)||_._editing||_._scrolling||Dl()||(!(q=_.getSelectedDataAt(y))||_._39Q(q)&&!_.isMovable(q)?_._focusData=M5:(this._data=q,_.handleMouseDown&&_.handleMouseDown(y,q),this.startDragging(y),_.isMovable(q)&&(_._moving=1)))},handleWindowMouseUp:function(y){var q=this.gv;q.handleMouseUp&&q.handleMouseUp(y,this._data),this.clear(y)},handleWindowMouseMove:function(y){var q,_,s,p,O=this,L=O._data,$=O.gv;$._93O&&$._93O(y,L)||$._moving&&(O._logicalPoint||O.fi({kind:"prepareMove",event:y}),q={kind:p=O._logicalPoint?"betweenMove":"beginMove",event:y},_=O._logicalPoint=$.lp(y),"beginMove"!=p||O._alreadyBeginTransaction||(O._alreadyBeginTransaction=!0,$.getDataModel().beginTransaction()),s=(p=O._calcShift(p,y)).x,p=p.y,(L=O.gv.getMoveMode(y,L))&&("x"===L?p=0:"y"===L?s=0:"xy"!==L&&(s=p=0)),$.moveSelection(s,p),O._lastLogicalPoint=_,O.autoScroll(y),O.fi(q))},_calcShift:function(y,q){var _=this._logicalPoint,s=this._lastLogicalPoint;return{x:_.x-s.x,y:_.y-s.y}},clear:function(y){var q=this.gv;this._lastLogicalPoint&&(this._lastLogicalPoint=this._data=q._moving=M5,this._logicalPoint&&(this.fi({kind:"endMove",event:y}),q.onMoveEnded()),this.clearDragging()),this._alreadyBeginTransaction&&(this._alreadyBeginTransaction=!1,q.getDataModel().endTransaction())}}),vu.TextEditInteractor=function(y){Kx(JE,this,[y]),this.init()}),DE=(y("TextEditInteractor",s,{setUp:function(){JE.superClass.setUp.call(this),this.gv.mp(this.handleGvPropertyChange,this)},teatDown:function(){JE.superClass.teatDown.call(this),this.gv.ump(this.handleGvPropertyChange,this)},handleGvPropertyChange:function(y){this._editTarget&&this.endTextEdit()},init:function(){function y(y){y.stopPropagation()}var _=this,q=this.input=w.createElement("input"),s=q.style,p=(q.text="text",s.border="1px solid #d8d8d8",s.position="absolute",s.padding="2px 3px",s.outline="none",s.marginLeft="-90px",s.marginTop="-16px",s.backgroundColor="rgba(255,255,255, 1)",s.fontSize="14px",s.width="180px",s.height="32px",s.boxShadow="0 0 13px rgba(16,142,233, 0.5)",s.textAlign="center",s.boxSizing="border-box",y5(q,"keyup",function(y){cl(y)&&_.endTextEdit(),Rl(y)&&_.endTextEdit(!0)}),y5(q,"focus",function(y){q.select()}),this.textarea=w.createElement("textarea")),O=this.wrap=w.createElement("div");O.appendChild(p),(s=p.style).margin=0,s.padding="4px",s.overflow="hidden",s.boxSizing="border-box",s.position="absolute",s.outline="none",s.backgroundColor="transparent",s.resize="none",s.textAlign="center",s.fontSize="14px",s.borderWidth=0,s.width="100%",(s=O.style).boxSizing="border-box",s.margin=0,s.padding=0,s.position="absolute",s.boxShadow="0 0 13px rgba(16,142,233, 0.5)",s.border="1px solid #d8d8d8",s.backgroundColor="rgba(255,255,255, 1)",s.zIndex="10",y5(p,"keydown",function(y){(GA()||rA())&&cl(y)?_.endTextEdit():Rl(y)?_.endTextEdit(!0):_._editTarget instanceof bQ||_.calculateTextareaHeight(String.fromCharCode(y.keyCode))}),y5(p,"focus",function(y){p.select()}),y5(q,"mousedown",y),y5(q,"touchstart",y),y5(p,"mousedown",y),y5(p,"touchstart",y),y5(p,"click",y),_.SIZING_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],_.HIDDEN_TEXTAREA_STYLE="visibility:hidden; min-height:0 !important;max-height:none !important;height:0 !important;visibility:hidden !important;overflow:hidden !important;position:absolute !important;z-index:-1000 !important;top:0 !important;right:0 !important",_.handleWindowClick=function(y){var q=_._editingDOM;q&&(q=q.getBoundingClientRect(),y=gA(y),UA(q,y)||_.endTextEdit())}},handle_mousedown:function(y){var q,_=this.gv;fA(y)&&!_._editing&&(y=_.getDataAt(y))&&(q=_.getTextEditInfo(y))&&(this._editInfo=q,this._editTarget=y,_._editing=!0,q.isMultiline?this.handleMultilineEdit():this.handleTextEdit())},handleMultilineEdit:function(){var y=this,q=y.gv,_=y._editTarget,s=y.getTargetValue(),p=y.textarea,O=y.wrap,L=this._editInfo;this.hiddenTextarea||this.createHiddenTextarea(),p.value=s=null!==s&&s!==k5?s:"",L.font&&(p.style.font=L.font),y._editingDOM=p,q.appendHTML(O),this.layoutHTML(O,_),_ instanceof bQ?p.style.height="100%":(p.style.height="auto",this.calculateTextareaHeight()),m5(function(){p.focus(),y5(Y,"mousedown",y.handleWindowClick),y5(Y,"touchstart",y.handleWindowClick)},10)},handleTextEdit:function(){var y=this,q=y.gv,_=y._editTarget,s=y.getTargetValue(),p=y.input;p.value=s=null!==s&&s!==k5?s:"",y._editingDOM=p,q.getView().appendChild(p),this.layoutHTML(p,_),m5(function(){p.focus(),y5(Y,"mousedown",y.handleWindowClick),y5(Y,"touchstart",y.handleWindowClick)},10)},layoutHTML:function(y,q){var _,s,p,O,L=this.gv,$=L.getZoom();q instanceof bQ?(O=(p=L.getDataUI(q))._6I,s=q.getScale(),_=y.style,y.style.left=O.x*$+L.tx()+"px",y.style.top=O.y*$+L.ty()+"px",y.style.width=p._6I.width+"px",y.style.height=p._6I.height+"px",_l(_,"transform","scale("+$*s.x+","+$*s.y+")"),_l(_,"transformOrigin","0px 0px")):q instanceof WQ?(s=(O=q.getRect()).width*$,y.style.left=(O.x+O.width/2)*$+L.tx()+"px",y.style.top=(O.y+O.height/2)*$+L.ty()+"px",y.style.width=s+"px",y.style.marginLeft=-s/2+"px"):q instanceof P.Edge&&(O=(p=L.getDataUI(q))._6I,y.style.left=(O.x+O.width/2)*$+L.tx()+"px",y.style.top=(O.y+O.height/2)*$+L.ty()+"px")},endTextEdit:function(y){var q=this,_=q._editInfo.isMultiline?q.wrap:q.input,s=q._editInfo.isMultiline?q.textarea:q.input;y||q.setTargetValue(s.value),q.gv.getView().removeChild(_),q.gv._editing=!1,delete q._editingDOM,delete q._editTarget,q5(Y,"mousedown",q.handleWindowClick),q5(Y,"touchstart",q.handleWindowClick)},setTargetValue:function(y){var q=this._editTarget,_=this._editInfo,s=_.accessType;(_=_.name)&&s||(s="p",_="name"),"p"===s?q[P.Default.setter(_)](y):"a"===s?q.a(_,y):q.s(_,y)},getTargetValue:function(){var y=this._editTarget,q=this._editInfo,_=q.accessType;return(q=q.name)&&_||(_="p",q="name"),"p"===_?y[P.Default.getter(q)]():"a"===_?y.a(q):y.s(q)},createHiddenTextarea:function(){this.hiddenTextarea=w.createElement("textarea"),this.hiddenTextarea.setAttribute("style","margin:0; padding:0; position:absolute; overflowY:scroll; resize:none; box-sizing:border-box;pointer-events: none;opacity:0;"),this.hiddenTextarea.setAttribute("rows","1"),this.gv.getView().appendChild(this.hiddenTextarea)},calculateHTMLStyle:function(y,q){if(q&&this.computedStyleCache)return this.computedStyleCache;var _=Y.getComputedStyle(y),y=_.getPropertyValue("box-sizing")||_.getPropertyValue("-moz-box-sizing")||_.getPropertyValue("-webkit-box-sizing"),s=parseFloat(_.getPropertyValue("padding-bottom"))+parseFloat(_.getPropertyValue("padding-top")),p=parseFloat(_.getPropertyValue("border-bottom-width"))+parseFloat(_.getPropertyValue("border-top-width")),s={sizingStyle:this.SIZING_STYLE.map(function(y){return y+":"+_.getPropertyValue(y)}).join(";"),paddingSize:s,borderSize:p,boxSizing:y};return q&&(this.computedStyleCache=s),s},calculateTextareaHeight:function(y){y=y||"";var q=this.textarea,_=this.hiddenTextarea,s=this.wrap,p=($=this.calculateHTMLStyle(q,!1)).paddingSize,O=$.borderSize,L=$.boxSizing,$=$.sizingStyle,$=(_.setAttribute("style",$+";"+this.HIDDEN_TEXTAREA_STYLE),_.value=q.value+y,_.scrollHeight);"border-box"===L?$+=O:"content-box"===L&&($-=p),q.style.height=$+"px",s.style.height=Math.max($,32)+"px",s.style.marginTop=-.5*$+"px"}}),vu.ScrollBarInteractor=function(y){Kx(DE,this,[y])}),cE=(y("ScrollBarInteractor",s,{_41o:function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},_40o:function(){return this.gv.getViewRect().width<this.gv.getScrollRect().width},isV:function(y){var q=this.gv.getViewRect();return this._41o()&&(q.x+q.width-this.gv.lp(y).x)*this.gv.getZoom()<iA},isH:function(y){var q=this.gv.getViewRect();return this._40o()&&(q.y+q.height-this.gv.lp(y).y)*this.gv.getZoom()<iA},handle_mousemove:function(y){this.handle_touchmove(y)},handle_touchmove:function(y){var q;!Xl&&WA(y)&&this.gv.isScrollBarVisible()&&(q=this.isV(y),y=this.isH(y),(q||y)&&this.gv.showScrollBar(),this.gv._scrolling=q||y)},handleWindowMouseUp:function(y){this.handleWindowTouchEnd(y)},handleWindowTouchEnd:function(y){this._state=this._cp=this._tx=this._ty=this.gv._scrolling=M5,this.fi({kind:"endScroll",event:y})},handle_mousedown:function(y){this.handle_touchstart(y)},handle_touchstart:function(y){var q,_=this;_.gv.setFocus(y),CA(y),_.handle_touchmove(y),1<eA(y)||!_.gv._scrolling||!_.gv.isScrollBarVisible()||(_._cp=gA(y),_._tx=_.gv.tx(),_._ty=_.gv.ty(),q=_.isV(y),_._state=q?"vScroll":"hScroll",L8(_,y),_.fi({kind:"beginScroll",event:y}))},handleWindowMouseMove:function(y){this.handleWindowTouchMove(y)},handleWindowTouchMove:function(y){var q=gA(y),_=this.gv.getViewRect(),s=this.gv.getScrollRect();"vScroll"===this._state?this.gv.ty(this._ty+(this._cp.y-q.y)*s.height/_.height):"hScroll"===this._state&&this.gv.tx(this._tx+(this._cp.x-q.x)*s.width/_.width),this.fi({kind:"betweenScroll",event:y})}}),vu.TouchInteractor=function(y,q){(q=q||{}).selectable===k5&&(q.selectable=!0),q.movable===k5&&(q.movable=!0),q.pannable===k5&&(q.pannable=!0),q.pinchable===k5&&(q.pinchable=!0),q.editable===k5&&(q.editable=!0),this.params=q,Kx(cE,this,[y])});y("TouchInteractor",s,{ms_edit:1,setUp:function(){cE.superClass.setUp.call(this),v5&&this.params.editable&&this.gv.setEditInteractor(this)},tearDown:function(){cE.superClass.tearDown.call(this),v5&&this.params.editable&&this.gv.setEditInteractor(M5)},clear:function(y){var q=this,_=q.gv;_._moving&&(q.fi({kind:"endMove",event:y}),delete _._moving,_.onMoveEnded(),_.dm().endTransaction()),_._panning&&(q.fi({kind:"endPan",event:y}),delete _._panning,_.onPanEnded()),_._pinching&&(q.fi({kind:"endPinch",event:y}),delete _._pinching,_.onPinchEnded()),_._editing&&(q._46O(y),q._77I=q._node=q._edge=q._shape=q._rect=q._89I=q._index=_._editing=M5),q.pendingClickThrough=q._moving=q._panning=q._pinching=q._editing=q._57I=q._data=q._beginHistory=M5,q.clearDragging()},handle_touchstart:function(y){var q,_,s,p,O,L=this;L.gv._editing||(CA(y),L._57I=M5,L.pendingClickThrough=M5,q=L.params,s=(_=L.gv).sm(),p=_.getDataAt(y),1===(O=eA(y))?fA(y)?_.handleDoubleClick(y,p):(_.handleClick(y,p),p&&(_.handleMouseDown&&_.handleMouseDown(y,p),L._data=p),(p=q.selectable?p:M5)&&(s.co(p)?p instanceof vQ&&p.isClickThroughEnabled()&&(L.pendingClickThrough=gA(y)):s.ss(p),q.editable&&_.isEditable(p)&&L._79I(y,p,!0)?(L._editing=1,L.startDragging(y)):q.movable&&_.isMovable(p)&&(L._moving=1,L.startDragging(y))),p&&(_.isMovable(p)||_._39Q(p))||(L._57I=gA(y),q.pannable&&_.isPannable()&&(L._panning=1,L.startDragging(y),L._translate={x:_.tx(),y:_.ty()}))):!q.pinchable||2!==O||!_.getEditInteractor()&&p&&(s=r(_.getImage(p)))&&g(s.scrollable,p,this)||(L._pinching=1,L.startDragging(y),q=_.getView(),O=_.getZoom(),s=q.getBoundingClientRect(),p=y.touches[0],q=y.touches[1],(p={x:(p.clientX+q.clientX)/2-s.left,y:(p.clientY+q.clientY)/2-s.top}).x-=_.tx(),p.y-=_.ty(),p.x/=O,p.y/=O,L._p=p,L._d=TU(y)))},handle_touchend:function(y){var q=this.gv,_=this._57I,s=this._data;_&&(vA(_,gA(y))<=1&&!q.getDataAt(y)&&q.sm().cs(),this._57I=M5),s&&q.handleMouseUp&&q.handleMouseUp(y,s),this.pendingClickThrough&&(vA(this.pendingClickThrough,gA(y))<=1&&(s=q.getDataAt(y))instanceof vQ&&s.isClickThroughEnabled()&&(_=q.getDataAt(y,function(y){return y.getParent()===s&&q.isSelectable(y,!0)}))&&(y.clickThrough=!0,q.sm().ss(_)),this.pendingClickThrough=M5)},handleWindowTouchEnd:function(y){this.clear(y)},handleWindowTouchMove:function(y){var q,_,s=this,p=s.gv,O=eA(y);1===O?(q=gA(y),q=Au(p,q,s._lastClientPoint),_=vA({x:0,y:0},q),s._editing&&(s._beginHistory||(s._beginHistory=1,p.dm().beginTransaction()),p._editing=1,s._78I(y)),s._moving?!p._moving&&_<E5.touchMoveThreshold||(s._beginHistory||(s._beginHistory=1,p.dm().beginTransaction()),s.handleMove(y)):!s._panning||!p._panning&&_<E5.touchMoveThreshold||(p.setTranslate(s._translate.x+q.x,s._translate.y+q.y),s.fi({kind:p._panning?"betweenPan":"beginPan",event:y}),p._panning=1)):2===O&&s._pinching&&(_=TU(y),p.handlePinch(s._p,_,s._d),s._d=_,s.fi({kind:p._pinching?"betweenPinch":"beginPinch",event:y}),p._pinching=1)},handleMove:function(y){var q=this.gv,_=q.lp(y);q._93O&&q._93O(y,this._data)||(q.moveSelection(_.x-this._lastLogicalPoint.x,_.y-this._lastLogicalPoint.y),this._lastLogicalPoint=_,this.autoScroll(y),this.fi({kind:q._moving?"betweenMove":"beginMove",event:y}),q._moving=1)}});var RE,v=(P=Y.ht).graph._editor={Math:P.Math,Guide:{},getStyle:function(y){var q=v.StyleMap;return q&&(q=q[y])!==k5?q:v.DefaultStyleMap[y]},setStyle:function(y,q){(v.StyleMap||(v.StyleMap={}))[y]=q},inEdit:function(y){return!0===y._inXEdit},startEdit:function(y){y._inXEdit=!0,v.Inject.doInject(y)},_46O:function(y){y._inXEdit=!1,v.Inject.undoInject(y)},toScreenPosition:function(y,q){var _=y.tx(),s=y.ty(),y=y._zoom;return new v.Math.Vector2(q.x*y+_,q.y*y+s)},checkHit:function(y,q,_){return y.distanceTo(q)<_},toWorldPosition:function(y,q){var _=y.tx(),s=y.ty(),y=y._zoom;return{x:(q.x-_)/y,y:(q.y-s)/y}},setAntialias:function(y,q){for(var _,s=["imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","msImageSmoothingEnabled"],p=0,O=s.length;p<O&&!((_=s[p])in y);p++);y[_],y[_]=q},getTargetCornersOnScreen:function(q,y){if(!y)return null;var _=[];if(Sx(y,q))var s=[{x:(s=lu(q,y)).x,y:s.y},{x:s.x+s.width,y:s.y},{x:s.x+s.width,y:s.y+s.height},{x:s.x,y:s.y+s.height}];else{if(!y.getCorners)return null;s=y.getCorners()}return s.forEach(function(y){y=v.toScreenPosition(q,y),_.push(y.x,y.y)}),_},log:function(){},updateTipInfo:function(y,q,_){RE=_?((y=P.Default.getLogicalPoint(y,q._canvas)).x+=v.Icons.TipShiftX,y.y+=v.Icons.TipShiftY,{helperPos:y,text:_,size:_.length}):M5},drawTip:function(y,q){RE&&v.Icons.DrawIcon(q,y,v.Icons.TipHelper,RE)}},oE=v.Inject={_modules:[],registAsModule:function(_,s){var y,p={},q={};for(y in _){var O=s.prototype[y];p[y]=O}_.getBackup=function(y){return p[y]},_.getBackups=function(){return p},q.doInject=function(y){for(var q in _)"getBackup"!==q&&(s.prototype[q]=_[q])},q.undoInject=function(y){for(var q in _)"getBackup"!==q&&(s.prototype[q]=p[q])},oE._modules.push(q)},doInject:function(y){for(var q=oE._modules,_=0,s=q.length;_<s;_++)q[_].doInject(y)},undoInject:function(y){for(var q=oE._modules,_=0,s=q.length;_<s;_++)q[_].undoInject(y)}},YE=s=P.graph.EditInteractor=function(y){var q=this,_=w.createElement("canvas");_.className="editCanvas",_.style.position="absolute",q._uuid=P.Math.generateUUID(),q._styleMap={},q._canvas=_,q._context=_.getContext("2d"),s.superClass.constructor.call(q,y),this._editDetail=!1,v.setAntialias(q._context,!1),q._subModules=q.initSubModule(),q._gridGuide=new v.Guide.Grid(q),q._rectGuide=new v.Guide.Rect(q),q._hoverGuide=new v.Guide.Hover(q)};P.Default.def(s,P.graph.Interactor,{ms_edit:1,ms_fire:1}),o.defineProperties(s.prototype,{editDetail:{get:function(){return!!this._editDetail},set:function(y){var q=this._editDetail;q!==y&&(this._editDetail=y,this.gv._editing=y,this.fp("editDetail",q,y),this.fp("pointsEditingMode",q,y),this.fi({kind:y?"beginEditPoints":"endEditPoints"}))}},gvEditing:{get:function(){return this.gv._editing},set:function(y){this._editDetail&&!y||(this.gv._editing=y)||(this.editDetail=!1)}},editing:{get:function(){return this._editing},set:function(y){this._editing=y,this.gvEditing=y}},editingModule:{get:function(){return this._editMod}},pointsEditingMode:{get:function(){return this.editDetail},set:function(y){this.editDetail!==y&&(y?this._tryEnterEditDetailMode():this._tryQuitEditDetailMode())}},gridEnabled:{get:function(){return!!this._gridEnabled&&(this.gv,!0)},set:function(y){y!==this._gridEnabled&&(this._gridEnabled=y,this._42())}},alignmentGuideEnabled:{get:function(){return this._agEnabled},set:function(y){y!==this._agEnabled&&(this._agEnabled=y,this._42())}},gridGuide:{get:function(){return this._gridGuide}},rectGuide:{get:function(){return this._rectGuide}},hoverGuide:{get:function(){return this._hoverGuide}}}),s.prototype.initSubModule=function(){return[new v.Anchor(this),new v.RotateX(this),new v.MoveDummy(this),new v.Rect(this),new v.Curve(this),new v.MoveHelper(this)]},s.prototype.getSubModule=function(y){for(var q,_=this._subModules,s=0,p=_.length;s<p;s++)if((q=_[s]).catalog===y)return q},s.prototype.invokeSubModule=function(y,q){for(var _,s,p=this._subModules,O=Array.prototype.slice.call(arguments,2),L=0,$=p.length;L<$;L++)if((s=(_=p[L])[y])&&s.apply(_,O)!=k5&&q)return _},s.prototype.invokeSubModuleInverse=function(y,q){var _=this._subModules;if(_)for(var s,p,O=Array.prototype.slice.call(arguments,2),L=_.length-1;0<=L;L--)if((p=(s=_[L])[y])&&p.apply(s,O)!=k5&&q)return s},s.prototype.setUp=function(){v.log("setUp");var y=this.gv,q=y.getView(),_=this._canvas;s.superClass.setUp.call(this),y.setEditInteractor(this),y._79O?q.insertBefore(_,y._79O):q.appendChild(_),v.startEdit(y),this.invokeSubModule("setUp"),y.dm().mm(this._onDataModelChanged,this),y.dm().md(this._onDataPropertyChanged,this)},s.prototype.tearDown=function(){v.log("tearDown");var y=this,q=y.gv,_=q.getView();y._resetCustomCursorStyle(),s.superClass.tearDown.call(y),q.dm().umm(y._onDataModelChanged,y),q.dm().umd(y._onDataPropertyChanged,y),q.setEditInteractor(null),_.removeChild(y._canvas),y._drawTimer&&(W5(y._drawTimer),y._drawTimer=null),v._46O(q),y.invokeSubModule("tearDown")},s.prototype._onDataModelChanged=function(y){("clear"===y.kind||"remove"===y.kind&&this.editDetail&&y.data===this.getSubModule("Curve").target)&&(this.editDetail=!1,this._42())},s.prototype._onDataPropertyChanged=function(y){var q,_;this.editDetail&&(q=this.getSubModule("Curve"),(_=y.data)!==q.target||_._writing||q._handleDataChanged(y))},s.prototype.clear=function(){v.log("clear")},s.prototype.redraw=function(){this._42()},s.prototype._42=function(){var y=this;y._drawTimer||(y._drawTimer=m5(function(){y._drawTimer=null,y.drawImpl()},0))},s.prototype.drawImpl=function(){for(var $ in{_42:!0})break;return function(){var y=this._canvas,q=this.gv,_=q.getWidth(),s=q.getHeight(),p=this._context,O=P.Default.getInternal(),L=E5.devicePixelRatio,O=(y.width===_&&y.height===s||O.setCanvas(y,_,s,L),p.clearRect(0,0,y.width,y.height),this._getValidSelection());p.save(),p.scale(L,L),this._gridGuide._42(),this.invokeSubModuleInverse($,!1,p,q,O),this._rectGuide._42(),this._hoverGuide._42(),p.restore()}}(),s.prototype._getValidSelection=function(){var q=this.gv,y=q.sm().getSelection(),_=[];return y.each(function(y){q.isVisible(y)&&q.isEditable(y)&&_.push(y)}),_},s.prototype.handle_touchmove=function(y){return this.handle_mousemove(y)},s.prototype.handle_mousemove=function(y){if(!P.Default.isDragging()&&(this.editDetail||!Dl()&&!AA(y))&&!this.gv._externalEditing){if(this.gvEditing=!1,this._checkEdit(y))this.gvEditing=!0;else{if(!this.getStyle("hoverGuideVisible"))return;this.hoverData=this.gv.getDataAt(y)}this._42()}},s.prototype.handle_touchstart=function(y){return this.handle_mousedown(y)},s.prototype.handle_mousedown=function(y){CA(y);var q=this;if((q.editDetail||!Dl()&&!AA(y))&&!q.gv._externalEditing){if(fA(y)&&!y.clickThrough){if(q.editDetail){if(q._tryQuitEditDetailMode(y))return}else if(q._tryEnterEditDetailMode())return;q.gv.dm().beginTransaction();var _=q.invokeSubModule("handleDoubleClick",!0,y);if(q.gv.dm().endTransaction(),_)return}(_=q._checkEdit(y))&&(q._downPosition=q._getLogicalPoint(y),q.gv.dm().beginTransaction(),_.startEdit(q,y),q.editing=!0)}},s.prototype._checkEdit=function(y){var q=this.gv,_=this._getLogicalPoint(y),q=this.invokeSubModule("check",!0,q,y,_)||null;return this._editMod=q},s.prototype.handleWindowTouchMove=function(y){return this.handleWindowMouseMove(y)},s.prototype.handleWindowMouseMove=function(y){var q=this._downPosition;if(q){if(this._getLogicalPoint(y).distanceTo(q)<this.getStyle("moveSensitivity"))return;delete this._downPosition}(q=this._editMod)&&q.handleEdit(this.gv,y),this.redraw()},s.prototype._getLogicalPoint=function(y){return y=P.Default.getLogicalPoint(y,this._canvas),new v.Math.Vector2(y)},s.prototype.handleWindowTouchEnd=function(y){return this.handleWindowMouseUp(y)},s.prototype.handleWindowMouseUp=function(){for(var q in{_46O:!0})break;return function(y){this.editing=!1,this.setCursor("default"),this.invokeSubModule(q,!1,y),this._42(),this.gv.dm().endTransaction()}}(),s.prototype.handle_mousewheel=function(y){CA(y),this.invokeSubModule("preHandleScroll",!0)||this.gv.handleScroll(y,y.wheelDelta)},s.prototype.handleDelete=function(){var y;if(!this.editDetail)return this.gv.dm().beginTransaction(),y=this.invokeSubModule("handleNormalStateDelete",!0),this.gv.dm().endTransaction(),void(y||this.gv.removeSelection());this.gv.dm().beginTransaction(),this.invokeSubModule("handleDelete",!0),this.gv.dm().endTransaction(),this._42()},s.prototype.handle_keydown=function(y){var q,_=this;return(y.metaKey||y.ctrlKey)&&_._42(),Dl(y)&&!_.editing?(_.gvEditing=!1,_.setCursor("default"),void _._42()):(q=cl(y),_.editDetail?((q||Rl(y))&&(_.editDetail=!1,_._42()),_.gv.dm().beginTransaction(),_.invokeSubModule("handle_keydown",!0,y),void _.gv.dm().endTransaction()):(_.gv.dm().beginTransaction(),_.invokeSubModule("handleNormalStateKeyDown",!0,y),_.gv.dm().endTransaction(),void(q&&_._tryEnterEditDetailMode())))},s.prototype.handle_keyup=function(y){this.gv.dm().beginTransaction(),this.invokeSubModule("handle_keyup",!0,y),this.gv.dm().endTransaction()},s.prototype._tryEnterEditDetailMode=function(){if(!this.editDetail&&this.invokeSubModule("canEnterEditDetailMode",!0)&&1===this._getValidSelection().length)return this.editDetail=!0,this._42(),!0},s.prototype._tryQuitEditDetailMode=function(y){return!(!this.editDetail||y&&!this.invokeSubModule("canQuitEditDetailMode",!0,y)||(this.editDetail=!1,this._42(),0))},s.prototype.setStyle=function(y,q,_){_?v.setStyle(y,q):this._styleMap[y]=q,"baseColor"===y&&(AE=q),this.fp("styleChanged",null,{key:y,value:q,base:_}),this._42()},s.prototype.getStyle=function(y,q){var _=this._styleMap[y];return _!==k5?_:v.getStyle(y)},s.prototype.setCursor=function(y){this._resetCustomCursorStyle(),P.graph.EditInteractor.superClass.setCursor.call(this,y)},s.prototype._drawHostGuide=function(y){var q=this._context,_=this.gv,s=(v.Icons.DrawIcon(this,q,v.Icons.NodeHoverGuide,y.corners),y.host);if(s){var p=_.getAttachPoints(s);if(p&&p.length)for(var O=0,L=p.length;O<L;O++){var $=p[O],$=mu(_,s,0,$.offsetX||0,$.offsetY||0,$.x,$.y);($=v.toScreenPosition(_,$)).isAttach=y.attach===O,v.Icons.DrawIcon(this,q,v.Icons.AttachPoint,$)}}},s.prototype._resetCustomCursorStyle=function(){var y;this._customStyle&&((y=this.gv.getView()).classList&&y.classList.remove&&y.classList.remove(this._customStyle),this._customStyle=null)},s.prototype._setRotateCursor=function(y){var y=(this._cursorFactory||(this._cursorFactory=new v.CursorFactory(this))).getRotateCursor(y),q=this.gv.getView();this._resetCustomCursorStyle(),this._customStyle=y,q.classList&&q.classList.add&&q.classList.add(y)};((O=v.Group=function(y){this._entities=y,this._64O=0,this._position={x:0,y:0},this._scale={x:1,y:1},this._anchor={x:.5,y:.5},this._anchor2={x:.5,y:.5}}).prototype={}).constructor=O;var PE=null,mE=null;O.findOrCreateGroup=function(y,q){return mE===q&&PE&&PE.checkIsMe(y)?PE:(mE=q,(q=new v.Group(y)).getKeyOb()?PE=q:void 0)},O.prototype.checkIsMe=function(y){var q=this._entities;if(q.length!==y.length)return!1;for(var _={},s=y.length,p=0;p<s;p++)_[y[p]._id]=!0;for(p=0;p<s;p++)if(!_[q[p]._id])return!1;return!0},O.prototype.getRotation=function(){return this._64O},O.prototype.getPosition=function(){return this._position},O.prototype.getAnchor=function(){return this._anchor},O.prototype.getWidth=function(){return this._width},O.prototype.getScale=function(){return this._scale},O.prototype.getSize=function(){return{width:this._width,height:this._height}},O.prototype.getHeight=function(){return this._height},O.prototype.getKeyOb=function(){for(var y=this._entities,q=y.length-1;0<=q;q--){var _=y[q];if(this.isNode(_))return _}},O.prototype.getAnchor2=function(){var y=this.rotateCenter;if(y)return y;if(!(y=this.getKeyOb()))return this._anchor;var q=this._anchor2;return y.getMatrix().tf({x:y.getWidth()*(q.x-y.getAnchor().x),y:y.getHeight()*(q.y-y.getAnchor().y)})},O.prototype.setAnchor2=function(y,q){var _=this.getKeyOb();_&&(q="number"==typeof y?{x:y,y:q}:y,y=_.getMatrix().tfi(q),this._anchor2={x:_.getAnchor().x+y.x/_.getWidth(),y:_.getAnchor().y+y.y/_.getHeight()})},O.prototype.setRotation=function(y){},O.prototype.beginRotate=function(y){this.rotateCenter=y.pos,this.rotateMode=y.groupRotateMode},O.prototype.endRotate=function(){delete this.rotateCenter,delete this.rotateMode},O.prototype.addRotation=function(y,q,_){return"batch"===q?this._addRotationInBatchMode(y,_):"block"===q?this._addRotationInBlockMode(y,_):void 0},O.prototype._addRotationInBlockMode=function(s,p){var O=this,L=O.rotateCenter||O.getPosition();O._entities.forEach(function(y){var q,_;!O.isNode(y)||p&&!p(y)||((q=y.getMatrix()).translate(-L.x,-L.y),q.rotate(s),q.translate(L.x,L.y),_=Math.sign(y.getScale().x),y.setRotation(D5(q.b*_,q.a*_)),y.setPosition(q.tx,q.ty))})},O.prototype._addRotationInBatchMode=function(p,O){var L=this,$=L._anchor2;L._entities.forEach(function(y){var q,_,s;!L.isNode(y)||O&&!O(y)||(q=y.getAnchor(),q=(s=y.getMatrix()).tf({x:y.getWidth()*($.x-q.x),y:y.getHeight()*($.y-q.y)}),(_=new v.Math.Matrix2d).set(s.a,s.b,s.c,s.d,s.tx,s.ty),_.translate(-q.x,-q.y),_.rotate(p),_.translate(q.x,q.y),s=Math.sign(y.getScale().x),y.setRotation(D5(_.b*s,_.a*s)),y.setPosition(_.tx,_.ty))})},O.prototype.setPosition=function(y){for(var q,_,s=this._position,p=y.x-s.x,O=y.y-s.y,L=this._entities,$=0,k=L.length;$<k;$++)q=L[$],W(q)&&(_=q.getPosition(),q.setPosition(_.x+p,_.y+O));this._position=y},O.prototype.setScale=function(y,q){var _=y/this._scale.x,s=q/this._scale.y;this._adjustChildScaleOrSize(_,s,"size"),this._scale={x:y,y:q}},O.prototype.getRect=function(){var y=this._position,q=this._width,_=this._height;return{x:y.x-q/2,y:y.y-_/2,width:q,height:_}},O.prototype.setSize=function(y,q){var y=Math.max(1,y),q=Math.max(1,q),_=y/this._width,s=q/this._height;this._adjustChildScaleOrSize(_,s,"size"),this._width=y,this._height=q},O.prototype._adjustChildScaleOrSize=function(y,q,_){for(var s,p=this._position,O=this._entities,L=new v.Math.Matrix2d,$=0,k=O.length;$<k;$++){var M,E,H,w,Q,x,S,X=O[$];this.isNode(X)&&(M=X.getPosition(),E=X.getRotation(),H=X.getWidth(),w=X.getHeight(),x=(Q=X.getScale()).x*H,S=Q.y*w,L.identity().scale(x,S).rotate(E).translate(M.x,M.y).translate(-p.x,-p.y).rotate(-this._64O),E=D5(L.b*Math.sign(x),L.a*Math.sign(x)),L.scale(y,q),S=Math.cos(E),M=Math.sin(E),x=Math.abs(S)<.001?(s=L.b/M,-L.c/M):(s=L.a/S,L.d/S),"scale"===_?X.setScale(s/H,x/w):"size"===_&&(E=s/Q.x,M=x/Q.y,X.setScale(hx(s)*Math.abs(Q.x),hx(x)*Math.abs(Q.y)),X.setSize(Math.max(.1,Math.abs(E)),Math.max(.1,Math.abs(M)))),L.rotate(this._64O).translate(p.x,p.y),X.setPosition(L.tx,L.ty))}},O.prototype.getMatrix=function(){var y=this._position,q=P.Default.getInternal(),_=this._scale;return new q.Mat(this._64O,y.x,y.y,_.x,_.y)},O.prototype.toGlobal=function(y){return this.getMatrix().tf(y)},O.prototype.getCorners=function(){var y=this._width,q=this._height,_=-y*(s=this._anchor).x,s=-q*s.y,p=this.getMatrix();return[p.tf(_,s),p.tf(_,s+q),p.tf(_+y,s+q),p.tf(_+y,s)]},O.prototype.calcInfo=function(){for(var y,q,_=[],s=this._entities,p=this._64O,O=0,L=s.length;O<L;O++)q=s[O],this.isNode(q)&&q.getCorners&&_.push.apply(_,q.getCorners());if(_.length){for(var $=Math.cos(-p),k=Math.sin(-p),M=1/0,E=-1/0,H=1/0,w=-1/0,O=0,L=_.length;O<L;O++)Q=(y=_[O]).x,x=y.y,y.x=$*Q-k*x,y.y=k*Q+$*x,M=Math.min(M,y.x),E=Math.max(E,y.x),H=Math.min(H,y.y),w=Math.max(w,y.y);this._width=(E-M)/this._scale.x,this._height=(w-H)/this._scale.y;var $=Math.cos(p),k=Math.sin(p),Q=M+(E-M)*(p=this._anchor).x,x=H+(w-H)*p.y;this._position={x:$*Q-k*x,y:k*Q+$*x}}},O.prototype.isNode=function(y){return!(!W(y)||Sx(y)&&y.size())},O.prototype._42=function(y,q,_){var s,p,O,L,$,k=this._entities;for("batch"===this.rotateMode&&($=this.getKeyOb()),s=0,p=k.length;s<p;s++)O=k[s],this.isNode(O)&&(L=O.getRect(),L={min:v.toScreenPosition(_,{x:L.x,y:L.y}),max:v.toScreenPosition(_,{x:L.x+L.width,y:L.y+L.height})},O===$&&(L.isKeyOb=!0),v.Icons.DrawIcon(y,q,v.Icons.GroupSubEntityRect,L))},((q=v.CurveActiving=function(y,q){for(var _ in this._curve=y,this._interactor=y._interactor,this.silent=!0,q)this[_]=q[_];delete this.silent}).prototype={}).constructor=q,o.defineProperties(q.prototype,{point:{get:function(){return this._point},set:function(y){this._point=y,this.editingCtrl||this.silent||this._firePointChange()}},pairs:{get:function(){return this._pairs},set:function(y){this._pairs=y,this.editingCtrl&&!this.silent&&this._firePointChange()}}}),q.prototype._firePointChange=function(){var y,q,_=this.getCurrentEditingPoint(),s=this._interactor;_?(q=this._curve.target)&&(q=v.getDataMatrix(q).invert(),y=_.e,(_=q.apply(v.toWorldPosition(s.gv,_))).e=y,(q=this._lastFirePoint)&&Math.abs(_.x-q.x)<1e-5&&Math.abs(_.y-q.y)<1e-5&&(_.e==k5&&q.e==k5||Math.abs(_.e-q.e)<1e-5)||(this._lastFirePoint=_,s.fi({kind:"selectPoint",x:_.x,y:_.y,e:_.e}))):s.fi({kind:"selectPoint"})},q.prototype.dispose=function(){this._interactor.fi({kind:"selectPoint"})},q.prototype.getCurrentEditingPoint=function(){var y=this.editingCtrl;if(y){var q=this.pairs;if(q=(q=q&&q[y.pairId])&&q[y.type])return q}return this._point},(((y=v.CursorFactory=function(y){this._interactor=y,this._rotateCursorStyles={}}).prototype={}).constructor=y).prototype.getRotateCursor=function(y){y<0&&(y+=2*Math.PI);var q=(_=this._interactor).getStyle("rotateCursorSize"),_=_.getStyle("rotateCursorRound"),y=Math.round(y/Math.PI*180/_),s=this._rotateCursorStyles,p="htCustomRotateStyle_"+q+"_"+_+"_"+(y=360<=y*_?0:y);return s[p]||(this._produceRotateCursor(p,q,_,y),s[p]=!0),p},y.prototype._produceRotateCursor=function(y,q,_,s){this._interactor;var p=(p=this._canvas)||(this._canvas=w.createElement("canvas")),O=E5.devicePixelRatio,L=(p.width=p.height=q*O,p.style.width=p.style.height=q+" px",p.getContext("2d"));v.setAntialias(L,!1),L.scale(O,O);var $=($=Math.round(q/2))+" "+$+",auto !important;",s=Math.PI/180*s*_;L.clearRect(0,0,q,q),L.save(),L.scale(q/32,q/32),L.translate(16,15),L.rotate(s+Math.PI/2),L.beginPath(),L.moveTo(-8,0),L.lineTo(-8,4),L.lineTo(-4,4),L.moveTo(8,0),L.lineTo(8,4),L.lineTo(4,4),L.moveTo(-8,4),L.quadraticCurveTo(0,-6,8,4),L.restore(),L.lineCap="round",L.lineJoin="miter",L.strokeStyle="white",L.lineWidth=4,L.stroke(),L.strokeStyle="black",L.lineWidth=2,L.stroke(),s="cursor:url("+(_=JSON.stringify(p.toDataURL()))+")"+$,1!==O&&(s=s+("cursor:url(data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+q+'px" height="'+q+'px"><image xlink:href='+_+' width="'+q+'" height="'+q+'"/></svg>'))+")"+$+"cursor:-webkit-image-set(url("+_+")"+O+"x,url("+_+")1x)"+$),(L=w.createElement("style")).textContent="body."+y+" *, ."+y+"{"+s+"}",w.head.appendChild(L)},((_=v.Guide.Grid=function(y){this._interactor=y,this._alignmentGuideId=0,this._xAlignmentGuide=[],this._yAlignmentGuide=[]}).prototype={}).constructor=_,o.defineProperties(_.prototype,{gridBlockSize:{get:function(){return this._gridBlockSize||this._interactor.getStyle("gridBlockSize")},set:function(y){this._gridBlockSize=y,this._interactor._42()}},gridThickLinesEvery:{get:function(){return this._gridThickLinesEvery||this._interactor.getStyle("gridThickLinesEvery")},set:function(y){this._gridThickLinesEvery=y,this._interactor._42()}},gridEnabled:{get:function(){return this._interactor.gridEnabled&&this.isValidGrid()}}}),_.prototype._42=function(){var y=this._interactor;this.gridEnabled&&this.drawGrid(),y.alignmentGuideEnabled&&this.drawAlignmentGuide()},_.prototype.makeMatrix=function(){var y=this._interactor.getStyle("gridAngle"),q=this._interactor.getStyle("gridRotation"),_=new v.Math.Matrix2d,s=Math.sin(y),y=Math.cos(y);return _.set(1,0,y,s,0,0),_.rotate(q),_},_.prototype.isValidGrid=function(){var y=Math.PI,q=this._interactor;return!(q.gv._zoom<q.getStyle("gridZoomThreshold"))&&(q=q.getStyle("gridAngle"),!((q=Math.abs(q%y/y*180))<1-1e-8||179.00000001<q))},_.prototype.drawAlignmentGuide=function(){var y=this._interactor,q=y.gv,_=y._canvas,s=y._context,p=_.width,O=_.height,L=q.tx(),$=q.ty(),k=q._zoom;s.beginPath(),s.strokeStyle=y.getStyle("gridAlignmentGuideColor"),s.lineWidth=1,this._xAlignmentGuide.forEach(function(y){y=y.p*k+L,s.moveTo(y,0),s.lineTo(y,O)}),this._yAlignmentGuide.forEach(function(y){y=y.p*k+$,s.moveTo(0,y),s.lineTo(p,y)}),s.stroke()},_.prototype.drawGrid=function(){var y,q,_,s=this._interactor,p=this.gridBlockSize,O=this.gridThickLinesEvery,L=s.getStyle("gridThickColor"),$=s.getStyle("gridLightColor"),k=s.gv,M=s._canvas,E=s._context,s=M.width,M=M.height,H=this.makeMatrix(),w=H.applyInverse(v.toWorldPosition(k,{x:0,y:0})),Q=H.applyInverse(v.toWorldPosition(k,{x:s,y:0})),x=H.applyInverse(v.toWorldPosition(k,{x:0,y:M})),s=H.applyInverse(v.toWorldPosition(k,{x:s,y:M})),S=Math.min(w.x,Q.x,x.x,s.x),X=Math.max(w.x,Q.x,x.x,s.x),T=Math.min(w.y,Q.y,x.y,s.y),i=Math.max(w.y,Q.y,x.y,s.y),M=Math.ceil(S/p),N=Math.floor(X/p),w=Math.ceil(T/p),a=Math.floor(i/p);function l(y,q,_,s){y=v.toScreenPosition(k,H.apply({x:y,y:q})),q=v.toScreenPosition(k,H.apply({x:_,y:s})),E.moveTo(y.x,y.y),E.lineTo(q.x,q.y)}for(k.tx(),k.ty(),k._zoom,E.save(),E.lineWidth=1,E.beginPath(),E.strokeStyle=L,_=Math.ceil(M/O)*O;_<=N;_+=O)l(y=_*p,T,y,i);for(_=Math.ceil(w/O)*O;_<=a;_+=O)l(S,q=_*p,X,q);for(E.stroke(),E.beginPath(),E.strokeStyle=$,_=M;_<=N;_++)_%O!=0&&l(y=_*p,T,y,i);for(_=w;_<=a;_++)_%O!=0&&l(S,q=_*p,X,q);E.stroke(),E.restore()},_.prototype.getAlignmentGuides=function(){return{x:this._xAlignmentGuide,y:this._yAlignmentGuide}},_.prototype.addAlignmentGuide=function(y,q,_){var s,y="x"===y?this._xAlignmentGuide:this._yAlignmentGuide,q={p:q,id:_=_||++this._alignmentGuideId};return y.length?(s=this._findClosestAlignmentGuide(q.p,y)).dis<0?y.splice(s.index+1,0,q):y.splice(s.index,0,q):y.push(q),this._interactor._42(),_},_.prototype.findClosest=function(y,q,_){var s=this._interactor,p=s.gv,O=1/0,L=1/0,$=(y=_?v.toWorldPosition(p,y):y).x,k=y.y;if(this.gridEnabled&&(E=this.gridBlockSize,y=(M=this.makeMatrix()).applyInverse(y),O=(y=M.apply({x:Math.round(y.x/E)*E,y:Math.round(y.y/E)*E})).x-$,L=y.y-k,M=!0),s.alignmentGuideEnabled&&(E=this._findClosestAlignmentGuide($,this._xAlignmentGuide).dis,y=this._findClosestAlignmentGuide(k,this._yAlignmentGuide).dis,Math.abs(E)<Math.abs(O)&&(O=E,M=!0),Math.abs(y)<Math.abs(L)&&(L=y,M=!0)),M){var M=!1,$=p._zoom,k=s.getStyle("smartGuideThreshold")/$,E={};if(Math.abs(O)<k&&"y"!==q&&(E.x=_?O*$:O,M=!0),Math.abs(L)<k&&"x"!==q&&(E.y=_?L*$:L,M=!0),M)return E}},_.prototype._findClosestAlignmentGuide=function(y,q){if(!q.length)return{dis:1/0};for(var _,s=0,p=q.length-1;1<p-s;)q[_=Math.floor((s+p)/2)].p<y?s=_:p=_;var O=q[s].p-y,L=q[p].p-y;return Math.abs(O)<=Math.abs(L)?{line:q[s],dis:O,index:s}:{line:q[p],dis:L,index:p}},_.prototype.removeAllAlignmentGuide=function(y){"y"!==y&&(this._xAlignmentGuide=[]),"x"!==y&&(this._yAlignmentGuide=[]),this._interactor._42()},_.prototype.removeAlignmentGuide=function(y){for(var q,_,s,p=this._xAlignmentGuide,O=0;O<2;O++)for(_=(p=(q=0)===O?this._xAlignmentGuide:this._yAlignmentGuide).length;q<_;q++)if((s=p[q]).id===y)return p.splice(q,1),this._interactor._42(),{axis:0===O?"x":"y",position:s.p};return!1},_.prototype.adjustAlignmentGuide=function(y,q){var _=this.removeAlignmentGuide(y);return!!_&&(this.addAlignmentGuide(_.axis,q,y),!0)},(((O=v.Guide.Rect=function(y){this._interactor=y}).prototype={}).constructor=O).prototype.gatherRects=function(){var s,p,O,L,$=this._interactor.gv,k=[],M=[],y={x:k,y:M},E={},q=$.getDataModel(),_=q.a("width"),H=q.a("height");_&&H&&(p=s=0,O=_,L=H,k.push({node:q,type:0,p:s},{node:q,type:1,p:s+O/2},{node:q,type:2,p:s+O}),M.push({node:q,type:0,p:p},{node:q,type:1,p:p+L/2},{node:q,type:2,p:p+L}),E[q._id||0]={x:s,y:p,width:O,height:L}),q.each(function(q){var _,y;W(q)&&!$.isSelected(q)&&$.isVisible(q)&&$.isValidGuideLineSource(q)&&(_=!1,$.sm().getSelection().each(function(y){_||(q.isHostOn(y)||q.isDescendantOf(y))&&(_=!0)}),_||(y=q.getRect(),s=y.x,p=y.y,O=y.width,L=y.height,k.push({node:q,type:0,p:s},{node:q,type:1,p:s+O/2},{node:q,type:2,p:s+O}),M.push({node:q,type:0,p:p},{node:q,type:1,p:p+L/2},{node:q,type:2,p:p+L}),E[q._id]=y))}),k.sort(function(y,q){return y.p-q.p}),M.sort(function(y,q){return y.p-q.p}),this._grid=y,this._87I=E},O.prototype.gatherLines=function(y,q,_){var s,p,O,L,$,k,M,E,H,w=[this.findClosest({x:y.x,y:y.y},q),this.findClosest({x:y.x+y.w/2,y:y.y+y.h/2},q),this.findClosest({x:y.x+y.w,y:y.y+y.h},q)],Q={},x=this._87I;for(_=_||255,this._guideLine=[],s=0;s<2;s++)for(Q={},M=0===s?(L="y",(k=y.x)+y.w):(L="x",(k=y.y)+y.h),p=0;p<3;p++)($=w[p])&&isFinite($[L])&&_&1<<3*s+p&&(Q[H=($=$[L+"Line"]).node._id||0]||(Q[H]=!0,H=x[H],H="y"===L?(E=H.x,H.x+H.width):(E=H.y,H.y+H.height),O=$.p,this._guideLine.push({type:L,a:k,b:M,c:E,d:H,p:O,center:1===$.type})))},O.prototype._binarySearchClosest=function(y,q){if(!q.length)return{dis:1/0};for(var _,s=0,p=q.length-1;1<p-s;)q[_=Math.floor((s+p)/2)].p<y?s=_:p=_;var O=q[s].p-y,L=q[p].p-y;return Math.abs(O)<=Math.abs(L)?{line:q[s],dis:O}:{line:q[p],dis:L}},O.prototype.findClosest=function(y,q,_){var s,p=(k=this._interactor).gv,O=this._grid,L=(_&&(y=v.toWorldPosition(p,y)),this._binarySearchClosest(y.x,O.x)),y=this._binarySearchClosest(y.y,O.y),O=L.dis,$=y.dis,p=p._zoom,k=k.getStyle("smartGuideThreshold")/p,M={};if(Math.abs(O)<k&&"y"!==q&&(M.x=_?O*p:O,M.xLine=L.line,s=!0),Math.abs($)<k&&"x"!==q&&(M.y=_?$*p:$,M.yLine=y.line,s=!0),s)return M},O.prototype._42=function(){var y=this._guideLine;if(y&&!P.Default.isCtrlDown()){var q=this._interactor;if(q.getStyle("guideLineVisible"))for(var _,s,p,O,L,$,k,M,E,H,w,Q,x,S=q.gv,X=q._context,T=S.tx(),i=S.ty(),N=S._zoom,a=q.getStyle("guideLineTextSpacing"),l=0,j=y.length;l<j;l++)L=(_=y[l]).type,$=_.p,k=_.a,M=_.b,E=_.c,H=_.d,w=Math.min(k,E),Q=Math.max(M,H),$="x"===L?(p=w*N+i,O=s=$*N+T,Q*N+i):(s=w*N+T,O=Q*N+T,p=$*N+i),v.Icons.DrawIcon(q,X,v.Icons.MoveLineGuide,{rect:[s,p,O,$],center:_.center}),k<=H&&E<=M||(w=H<k?H:M,Q=H<k?k:E,"x"===L?(_.center2center||(O=s-=a),p=w*N+i,$=Q*N+i,x=v.Icons.MoveLineGuideDistanceV):"y"===L&&(_.center2center||($=p-=a),s=w*N+T,O=Q*N+T,x=v.Icons.MoveLineGuideDistanceH),v.Icons.DrawIcon(q,X,x,{x0:s,y0:p,x1:O,y1:$,dis:Q-w}))}},O.prototype.clear=function(){this._guideLine=null};((q=v.Guide.Hover=function(y){this._interactor=y}).prototype={}).constructor=q,o.defineProperties(q.prototype,{}),q.prototype._42=function(){var y,q,_,s=this._interactor;s.getStyle("hoverGuideVisible")&&!s.gvEditing&&(y=s.hoverData,_=s.gv,!W(y)||_.isSelected(y)?s.hoverData=null:(y=lu(_,y),q=v.toScreenPosition(_,{x:y.x,y:y.y}),_=v.toScreenPosition(_,{x:y.x+y.width,y:y.y+y.height}),v.Icons.DrawIcon(s,s._context,v.Icons.HoverDataRect,{min:q,max:_,color:s.getStyle("hoverGuideColor")||s.getStyle("baseColor"),borderWidth:s.getStyle("hoverGuideBorderWidth")||1,borderPattern:s.getStyle("hoverGuideBorderPattern")||[1,4]})))},v.DefaultStyleMap={baseColor:"rgb(51,153,255)",pointSize:[24,9],checkSize:7,rotateCheckSize:10,moveSensitivity:10,moveDummyThreshold:32,moveDummyPosition:[0,0,-16,-16],moveDummyLineExtraShift:[-32,0],moveDummySensitivity:16,keepAspectRatio:!1,rotateRound:Math.PI/2,shiftRotateRound:Math.PI/12,rotateSensitivity:Math.PI/60,rotateAsClock:!1,rotateTipVisible:!0,shiftLineRotateRound:Math.PI/4,anchorMovable:!0,anchorVisible:!0,anchorHideThreshold:25,anchorOutsideVisibleThreshold:.25,anchorRound:.25,anchorSensitivity:.02,smartGuideThreshold:8,curveIntersectSize:5,curvePointIntersectSize:8,edgeHostDetectPerFrame:!0,edgeHostEdgeMaxDistance:12,edgeHostEdgeHighlighColor:"#5d5d5d",edgeHostPointHighlighColor:"red",edgeHostHighlighPeriod:1500,edgeElevationEditable:!1,attachThreshold:25,guideLineVisible:!0,guideLineTextSpacing:0,hoverGuideVisible:!1,hoverGuideColor:null,gridBlockSize:40,gridThickLinesEvery:10,gridThickColor:"#5d5d5d",gridLightColor:"#d0d0d0",gridZoomThreshold:.25,gridAlignmentGuideColor:"#ff0000",gridAngle:Math.PI/2,gridRotation:0,groupRotateModeDefault:"block",groupRotateModeKey:["ctrlKey","metaKey"],rotateCursorSize:32,rotateCursorRound:45,tipTextColor:"#ffffff",tipBackground:"#333333",curveHighlightColor:"#30599e",rectPointBackground:"white",rectPointBorderColor:"#666666",rectPointShadowColor:"rgba(0,0,0,0.35)",shapeCtrlPointBackground:"white",shapeCtrlPointBorderColor:null,shapeCtrlPointHighlightBorder:null,shapeHighlighPointBackground:"#30599e",curveElevationVisible:!0,curveElevationIntersectSize:8,curveElevationGuideShift:[20,0],curveTipVisible:!0,connectGuideVisible:!0,connectGuideShift:[1,.25,8,0],connectGuideIntersectSize:8,connectGuideGarbageIntersectsize:25,connectGuideGarbageShift:[1,1,-48,-48]};var p=v.Icons={},WE=null,AE=v.DefaultStyleMap.baseColor,zE="rgb(255,204,153)",eE=(P.Default.setImage("Icons.RectPoint",{width:6,height:6,comps:[{type:"rect",background:"rgb(247,247,247)",borderWidth:1,borderColor:{func:function(){return AE}},rect:[0,0,6,6]}]}),p.GroupSubEntityRect={comps:[{type:"shape",points:{func:function(){if(!(q=p.GroupSubEntityRect.data))return[];var y=q.min,q=q.max;return[y.x,y.y,y.x,q.y,q.x,q.y,q.x,y.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return p.GroupSubEntityRect.data.isKeyOb,AE}}}]},p.HoverDataRect={comps:[{type:"shape",points:{func:function(){if(!(q=p.HoverDataRect.data))return[];var y=q.min,q=q.max;return y.x-=4,y.y-=4,q.x+=4,q.y+=4,[y.x,y.y,y.x,q.y,q.x,q.y,q.x,y.y]}},segments:[1,2,2,2,5],background:null,borderWidth:{func:function(){return p.HoverDataRect.data.borderWidth}},borderColor:{func:function(){return p.HoverDataRect.data.color}},borderCap:"butt",borderPattern:{func:function(){return p.HoverDataRect.data.borderPattern}}}]},p.Line={comps:[{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[p.Line.data.P1.x,p.Line.data.P1.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[p.Line.data.P2.x,p.Line.data.P2.y],6,6]}}}]},p.NodeHoverGuide={comps:[{type:"shape",points:{func:function(){return p.NodeHoverGuide.data}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:"#3399FF"}]},p.Rect={comps:[{type:"shape",points:{func:function(){if(!(s=p.Rect.data))return[];var y=s.LT,q=s.LB,_=s.RB,s=s.RT;return[y.x,y.y,q.x,q.y,_.x,_.y,s.x,s.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return AE}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return p.Rect.data.rotation}},rect:{func:function(){return[[p.Rect.data.LT.x,p.Rect.data.LT.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return p.Rect.data.rotation}},rect:{func:function(){return[[p.Rect.data.LB.x,p.Rect.data.LB.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return p.Rect.data.rotation}},rect:{func:function(){return[[p.Rect.data.RB.x,p.Rect.data.RB.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return p.Rect.data.rotation}},rect:{func:function(){return[[p.Rect.data.RT.x,p.Rect.data.RT.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return p.Rect.data.rotation}},visible:{func:function(){return!!p.Rect.data.L}},rect:{func:function(){return[[p.Rect.data.L.x,p.Rect.data.L.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return p.Rect.data.rotation}},visible:{func:function(){return!!p.Rect.data.R}},rect:{func:function(){return[[p.Rect.data.R.x,p.Rect.data.R.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return p.Rect.data.rotation}},visible:{func:function(){return!!p.Rect.data.T}},rect:{func:function(){return[[p.Rect.data.T.x,p.Rect.data.T.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return p.Rect.data.rotation}},visible:{func:function(){return!!p.Rect.data.B}},rect:{func:function(){return[[p.Rect.data.B.x,p.Rect.data.B.y],6,6]}}}]},P.Default.setImage("Icons.Anchor",{width:12,height:12,comps:[{type:"shape",borderWidth:1,borderColor:{func:function(){return AE}},borderCap:"round",shadowColor:"#1ABC9C",points:[.50928,6,11.49072,6,6,6,6,.50928,6,11.49072]},{type:"circle",borderWidth:1,borderColor:{func:function(){return AE}},shadowColor:"#1ABC9C",rect:[2.84391,2.84391,6.53697,6.53697]}]}),p.Anchor={comps:[{type:"image",name:"Icons.Anchor",rect:{func:function(){return[[p.Anchor.data.POS.x,p.Anchor.data.POS.y],16,16]}}}]},p.TipShiftX=12,p.TipShiftY=12,[8,28]);p.TipHelper={comps:[{type:"roundRect",rect:{func:function(){return[p.TipHelper.data.helperPos.x,p.TipHelper.data.helperPos.y,eE[0]*p.TipHelper.data.size,eE[1]]}},background:{func:function(){return WE.getStyle("tipBackground")}},opacity:.6},{type:"text",text:{func:function(){return p.TipHelper.data.text}},rect:{func:function(){return[p.TipHelper.data.helperPos.x,p.TipHelper.data.helperPos.y,eE[0]*p.TipHelper.data.size,eE[1]]}},color:{func:function(){return WE.getStyle("tipTextColor")}},font:"bold 12px Arial",align:"center"}]},p.ShapePoint={comps:[{type:"circle",visible:{func:function(){return!!p.ShapePoint.data.dynamicVisible}},rect:{func:function(){var y=p.ShapePoint.data.point,q=p.ShapePoint.data.size||7;return[y,q+10,q+10]}},background:{func:function(){var y=Date.now(),q=p.ShapePoint.data.dynamicPeriod||1500;return"rgba(27,124,22,"+.5*Math.sin(y%q/q*Math.PI)+")"}},borderWidth:0},{type:"circle",rect:{func:function(){var y=p.ShapePoint.data.point,q=p.ShapePoint.data.size||7;return[y,q,q]}},background:{func:function(){return p.ShapePoint.data.isEnd?"rgba(27,124,222,0.7)":"#ffffff"}},borderWidth:1,borderColor:{func:function(){return p.ShapePoint.data.color||AE}}},{type:"rect",visible:{func:function(){return!!p.ShapePoint.data.dynamicVisible}},background:"red",borderWidth:0,rotation:Math.PI/4,borderColor:{func:function(){return AE}},rect:{func:function(){return[p.ShapePoint.data.point,5,5]}}}]},p.ShapeBgCurve={comps:[{type:"shape",visible:{func:function(){return!!p.ShapeBgCurve.data.dynamicVisible}},points:{func:function(){return p.ShapeBgCurve.data.P}},segments:{func:function(){return p.ShapeBgCurve.data.S}},background:null,borderWidth:6,borderColor:{func:function(){var y=Date.now(),q=p.ShapeBgCurve.data.dynamicPeriod||1500;return"rgba(27,124,22,"+.3*Math.sin(y%q/q*Math.PI)+")"}}},{type:"shape",points:{func:function(){return p.ShapeBgCurve.data.P}},segments:{func:function(){return p.ShapeBgCurve.data.S}},background:null,borderWidth:1,borderColor:{func:function(){return p.ShapeBgCurve.data.color||AE}}}]},p.ShapeHighlighPoint={comps:[{type:"circle",rect:{func:function(){var y=p.ShapeHighlighPoint.data;return[[y.x,y.y],8,8]}},background:{func:function(){return WE.getStyle("shapeHighlighPointBackground")}},borderWidth:0}]},p.ShapeHighlighRealPoint={comps:[{type:"circle",rect:{func:function(){var y=p.ShapeHighlighRealPoint.data;return[[y.x,y.y],10,10]}},background:"#ffffff",borderWidth:2,borderColor:{func:function(){return AE}}}]},p.ShapeHighlighCtrlPoint={comps:[{type:"shape",points:{func:function(){var y=p.ShapeHighlighCtrlPoint.data,q=y.x;return[q-4,(y=y.y)-4,q-4,y+4,q+4,y+4,q+4,y-4]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return WE.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return WE.getStyle("shapeCtrlPointBorderColor")||AE}}}]},p.ShapeHighlightCurve={comps:[{type:"shape",points:{func:function(){return p.ShapeHighlightCurve.data}},segments:[1,4],background:null,borderWidth:3,borderColor:{func:function(){return WE.getStyle("curveHighlightColor")}}}]},p.ShapeGuideLine={comps:[{type:"shape",points:{func:function(){return p.ShapeGuideLine.data}},background:null,borderWidth:1,borderColor:"rgb(255,204,153)"}]},p.MoveLineGuide={comps:[{type:"shape",points:{func:function(){return p.MoveLineGuide.data.rect}},background:null,borderWidth:1,borderColor:{func:function(){return p.MoveLineGuide.data.center?"rgb(183,232,135)":zE}}}]},p.MoveLineGuideDistanceH={comps:[{type:"shape",points:{func:function(){var y=p.MoveLineGuideDistanceH.data,q=y.x0;return[q,(y=y.y0)-5,q,y+5]}},rotation:-Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:zE},{type:"shape",points:{func:function(){var y=p.MoveLineGuideDistanceH.data,q=y.x1;return[q,(y=y.y1)-5,q,y+5]}},rotation:-Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:zE},{type:"text",text:{func:function(){return Math.round(p.MoveLineGuideDistanceH.data.dis)}},rect:{func:function(){var y=p.MoveLineGuideDistanceH.data;return[[(y.x0+y.x1)/2,y.y0-10],20,20]}},color:zE,font:"12px Arial",align:"center"}]},p.MoveLineGuideDistanceV={comps:[{type:"shape",points:{func:function(){var y=p.MoveLineGuideDistanceV.data,q=y.x0;return[q-5,y=y.y0,q+5,y]}},rotation:Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:zE},{type:"shape",points:{func:function(){var y=p.MoveLineGuideDistanceV.data,q=y.x1;return[q-5,y=y.y1,q+5,y]}},rotation:Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:zE},{type:"text",text:{func:function(){return Math.round(p.MoveLineGuideDistanceV.data.dis)}},rect:{func:function(){var y=p.MoveLineGuideDistanceV.data;return[[y.x0-10,(y.y0+y.y1)/2],20,20]}},color:zE,font:"12px Arial",align:"center"}]},P.Default.setImage("Icons.EdgeElevationGuideImage",{width:16,height:16,comps:[{type:"oval",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[.5,.5,15,15]},{type:"shape",borderWidth:2,borderColor:"rgb(44,44,44)",borderCap:"round",points:[4,8,8,4,12,8,8,4,8,13],segments:[1,2,2,1,2]}]}),p.EdgeElevationGuide={comps:[{type:"image",name:"Icons.EdgeElevationGuideImage",rect:{func:function(){var y=(q=p.EdgeElevationGuide.data).x,q=q.y,_=WE.getStyle("curveElevationIntersectSize"),s=WE.getStyle("curveElevationGuideShift");return[(y+=s[0])-_,(q+=s[1])-_,2*_,2*_]}}}]},P.Default.setImage("Icons.ConnectGuideBgImage",{width:12,height:12,comps:[{type:"shape",background:"#3399ff",fillRule:"evenodd",shadowColor:"#1ABC9C",rotation:3.14159,points:[6.00001,11.99999,6.00001,11.99999,2.6863,11.99999,1e-5,9.30695,1e-5,5.99999,1e-5,5.99999,1e-5,2.68628,2.69305,-1e-5,6.00001,-1e-5,12.00001,-1e-5,11.99998,12.00001,6.00001,11.99999],segments:[1,2,4,2,4,2,2,2]}]}),P.Default.setImage("Icons.ConnectGuideHeaderImage",{width:12,height:12,comps:[{type:"oval",background:"#3399FF",borderColor:"#3399FF",shadowColor:"#1ABC9C",rect:[0,0,12,12]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[4.76,2.56,8.2,5.98,4.76,9.44]}]}),p.ConnectGuide={comps:[{type:"image",name:"Icons.ConnectGuideBgImage",rotation:{func:function(){return p.ConnectGuide.data.rotation}},rect:{func:function(){var y=p.ConnectGuide.data.connect,q=(y.x,y.y,WE.getStyle("connectGuideIntersectSize"));return[[y.x,y.y],2*q,2*q]}}},{type:"image",name:"Icons.ConnectGuideHeaderImage",rect:{func:function(){var y=p.ConnectGuide.data.cursorPos||p.ConnectGuide.data.connect,q=WE.getStyle("connectGuideIntersectSize");return[[y.x,y.y],2*q-2,2*q-2]}}},{type:"shape",background:null,borderColor:"#3399ff",borderWidth:2,segments:[1,4],points:{func:function(){var y=p.ConnectGuide.data.connect,q=p.ConnectGuide.data.cursorPos||y;return[y.x,y.y,y.x+.5*(q.x-y.x),y.y,q.x+.5*(y.x-q.x),q.y,q.x,q.y]}}}]},P.Default.setImage("Icons.ConnectGuideGarbageImage",{width:48,height:48,comps:[{type:"oval",background:"rgba(0,0,0,0.1)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,48,48]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[19.84721,19.69091,19.84721,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[24.10371,19.69091,24.10371,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[28.15279,19.69091,28.15279,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[11.23055,15.22377,36.76945,15.189,19.12302,15.17121,20.94722,11.5228,26.41985,11.5228,28.24406,15.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[15.48702,15.22377,17.02595,21.25344]}]}),P.Default.setImage("Icons.ConnectGuideDeletingImage",{width:56,height:56,comps:[{type:"oval",background:"rgba(232,0,0,0.75)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,56,56]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[22.67939,27.69091,22.67939,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[26.93588,27.69091,26.93588,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[30.98497,27.69091,30.98497,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",anchorX:0,anchorY:1,rotation:5.65062,points:[14.06272,23.22377,39.60163,23.189,21.9552,23.17121,23.7794,19.5228,29.25203,19.5228,31.07623,23.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[18.3192,23.22377,17.02595,21.25344]}]}),p.ConnectGuideGarbage={comps:[{type:"image",name:{func:function(){return p.ConnectGuideGarbage.data.hover?"Icons.ConnectGuideDeletingImage":"Icons.ConnectGuideGarbageImage"}},rect:{func:function(){var y=p.ConnectGuideGarbage.data,q=WE.getStyle("connectGuideGarbageIntersectsize");return y.hover&&(q+=5),[[y.x,y.y],2*q,2*q]}}}]},p.ShapeActivingCtrl={comps:[{type:"shape",visible:{func:function(){return!!p.ShapeActivingCtrl.data.c1}},points:{func:function(){var y=p.ShapeActivingCtrl.data;return[y.point.x,y.point.y,y.c1.x,y.c1.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:{func:function(){return AE}}},{type:"shape",visible:{func:function(){return!!p.ShapeActivingCtrl.data.c2}},points:{func:function(){var y=p.ShapeActivingCtrl.data;return[y.point.x,y.point.y,y.c2.x,y.c2.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:{func:function(){return AE}}},{type:"shape",visible:{func:function(){return!!p.ShapeActivingCtrl.data.c1}},points:{func:function(){var y=(q=p.ShapeActivingCtrl.data.c1).x,q=q.y,_=3;return"c1"===p.ShapeActivingCtrl.data.hl&&(_+=.5),[y-_,q-_,y-_,q+_,y+_,q+_,y+_,q-_]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return WE.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return"c1"===p.ShapeActivingCtrl.data.hl?WE.getStyle("shapeCtrlPointHighlightBorder")||AE:WE.getStyle("shapeCtrlPointBorderColor")||AE}}},{type:"shape",visible:{func:function(){return!!p.ShapeActivingCtrl.data.c2}},points:{func:function(){var y=(q=p.ShapeActivingCtrl.data.c2).x,q=q.y,_=3;return"c2"===p.ShapeActivingCtrl.data.hl&&(_+=.5),[y-_,q-_,y-_,q+_,y+_,q+_,y+_,q-_]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return WE.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return"c2"===p.ShapeActivingCtrl.data.hl?WE.getStyle("shapeCtrlPointHighlightBorder")||AE:WE.getStyle("shapeCtrlPointBorderColor")||AE}}}]},p.RoundPoint={comps:[{type:"circle",background:"rgb(247,247,247)",borderWidth:1,borderColor:{func:function(){return AE}},rect:{func:function(){return[[p.RoundPoint.data.x,p.RoundPoint.data.y],6,6]}}}]},p.AttachPoint={comps:[{type:"rect",background:{func:function(){return p.AttachPoint.data.isAttach?"rgb(51,153,255)":"rgb(247,247,247)"}},borderWidth:1,rotation:Math.PI/4,borderColor:{func:function(){return AE}},rect:{func:function(){var y=p.AttachPoint.data.isAttach?10:6;return[[p.AttachPoint.data.x,p.AttachPoint.data.y],y,y]}}}]},p.SimpleRect={comps:[{type:"rect",background:null,borderWidth:{func:function(){return p.SimpleRect.data.borderWidth||1}},borderColor:{func:function(){return p.SimpleRect.data.color||AE}},rect:{func:function(){var y=p.SimpleRect.data;return[y.x,y.y,y.width,y.height]}}}]},P.Default.setImage("Icons.MoveDummyImage",{width:32,height:32,boundExtend:12,attachStyle:"close",comps:[{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",shadow:!0,shadowColor:"rgba(0,0,0,0.25)",shadowOffsetX:0,rect:[0,0,32,32]},{type:"shape",background:"rgb(51,153,255)",pixelPerfect:!0,points:[8.65079,11.90713,9.05502,11.46921,9.70629,11.46921,10.11052,11.90713,10.51476,12.28891,10.51476,12.92895,10.11052,13.34441,8.49359,14.97258,12.2889,14.97258,12.85034,14.97258,13.29949,15.42172,13.29949,15.99439,13.29949,16.57828,12.85034,17.0162,12.2889,17.0162,8.49359,17.0162,10.11052,18.6556,10.51476,19.0486,10.51476,19.7111,10.11052,20.09288,9.70629,20.50834,9.05502,20.50834,8.65079,20.09288,5.32709,16.76917,5.28217,16.71303,4.87794,16.32002,4.87794,15.67998,5.28217,15.26452,8.65079,11.90713,8.65079,11.90713,8.65079,11.90713,13.3444,10.09931,13.3444,10.09931,12.94017,10.50354,12.2889,10.50354,11.88467,10.09931,11.48043,9.69507,11.48043,9.0438,11.88467,8.63957,15.27574,5.25973,15.66874,4.86672,16.32001,4.86672,16.73547,5.25973,16.76917,5.31586,20.10409,8.63957,20.50832,9.0438,20.50832,9.68385,20.10409,10.09931,19.69986,10.49231,19.07105,10.50354,18.64436,10.09931,17.02742,8.45991,17.02742,12.26646,17.02742,12.83912,16.55581,13.31072,15.99438,13.31072,15.43295,13.31072,14.98379,12.83912,14.98379,12.26646,14.96134,8.45991,13.3444,10.09931,13.3444,10.09931,13.3444,10.09931,21.90069,13.33318,21.90069,13.33318,21.49646,12.91771,21.49646,12.27768,21.90069,11.89591,22.31615,11.45798,22.94497,11.45798,23.36043,11.89591,26.72904,15.2533,27.12205,15.66876,27.12205,16.3088,26.72904,16.7018,26.6729,16.75794,23.36043,20.08165,22.94497,20.49711,22.31615,20.49711,21.90069,20.08165,21.49646,19.69987,21.49646,19.03737,21.90069,18.64437,23.51763,17.00498,19.72231,17.00498,19.14965,17.00498,18.71173,16.56705,18.71173,15.98316,18.71173,15.41049,19.14965,14.96135,19.72231,14.96135,23.51763,14.96135,21.90069,13.33318,21.90069,13.33318,21.90069,13.33318,11.88467,23.32675,11.88467,23.32675,11.48043,22.94498,11.48043,22.27125,11.88467,21.88948,12.2889,21.48523,12.94017,21.48523,13.3444,21.88948,14.96134,23.52887,14.98379,19.7111,14.98379,19.14966,15.43295,18.67805,15.99438,18.67805,16.55581,18.67805,17.02742,19.14966,17.02742,19.7111,17.02742,23.52887,18.64436,21.88948,19.07105,21.48523,19.69986,21.48523,20.10409,21.88948,20.50832,22.27125,20.50832,22.94498,20.10409,23.32675,16.76917,26.65045,16.73547,26.72905,16.32001,27.13329,15.66874,27.13329,15.27574,26.72905,11.88467,23.32675,11.88467,23.32675,11.88467,23.32675],segments:[1,4,4,2,2,4,4,2,2,4,4,2,2,4,2,2,2,1,2,4,4,2,4,2,2,4,4,2,2,4,4,2,2,2,2,1,2,4,4,2,4,2,2,4,4,2,2,4,4,2,2,2,2,1,2,4,4,2,2,4,4,2,2,4,4,2,2,4,2,2,2]}]}),p.MoveDummy={comps:[{type:"image",name:"Icons.MoveDummyImage",rect:{func:function(){var y=p.MoveDummy.data;return[[y.pos.x,y.pos.y],2*y.size,2*y.size]}}}]},v.Icons.DrawIcon=function(y,q,_,s){_.width=_.height=1e4,_.data=s,WE=y,P.Default.drawImage(q,_,0,0,1e4,1e4),WE=k5},v.Icons.MapPoints=function(y,q){for(var _=0,s=y.length;_<s;_++)y[_]/=q},v.roundTo=function(y,q,_){var s=Math.abs(y%q);return s<_||q-s<_?q*Math.round(y/q):y},v.toFixed=function(y){return Math.round(100*y)/100},v.getDataMatrix=function(y){var q,_;return y instanceof P.Shape?(q=new P.Math.Matrix2d,_=y.getPosition(),q.translate(-_.x,-_.y).scale(y.getScale().x,y.getScale().y).rotate(y.getRotation()).translate(_.x,_.y),q):y.getMatrix?y.getMatrix():new P.Math.Matrix2d},(((y=v.Math.Curve=function(){this._curves=[]}).prototype={}).constructor=y).prototype.createFromHtShape=function(q,y,_){y instanceof P.List&&(y=y.toArray());for(var s,p,O,L,$=null,k=null,M=0,E=v.Math.Vector2,H=v.Math.CubicBezier,w=function(y){return new E(q[y],q[y+1],_?_[y/2]:k5)},Q=0,x=y.length;Q<x;Q++){switch(p=null,y[Q]){case 1:$=k=w(M),M+=2;break;case 2:s=w(M),M+=2,p=new H(k,k.clone(),s.clone(),s),k=s;break;case 3:O=w(M),s=w(M+2),M+=4,p=new H(k,O.clone().sub(k).multiplyScalar(2/3).add(k),O.clone().sub(s).multiplyScalar(2/3).add(s),s),k=s;break;case 4:O=w(M),L=w(M+2),s=w(M+4),M+=6,p=new H(k,O,L,s),k=s;break;case 5:if(!$)break;p=new H(k,k.clone(),$.clone(),$),$=k=null}p&&(p._index=this._curves.length,this._curves.push(p))}},y.prototype.checkPoint=function(y,q){for(var _,s,p,O=this._curves,L=0,$=O.length;L<$;L++)if((p=(s=O[L]).intersectRect(y,q,q)).length)return _=0,p.forEach(function(y){_+=y.t}),_/=p.length,(y=s.getPointAt(_)).t=_,{bezier:s,intersection:y}},y.prototype.insertKnot=function(y,q){q=y.insertKnot(q),this._curves.splice(y._index,1,q[0],q[1])},y.prototype._isCloseEnough=function(y,q){return Math.abs(y.x-q.x)<1e-6&&Math.abs(y.y-q.y)<1e-6},y.prototype._isSamePoint=function(y,q){return y===q},y.prototype.moveRealPoint=function(s,p){var O=this,y=O._curves,L=p.clone().sub(s);y.forEach(function(y){var q=y._p1,_=(y._p2,y._p3,y._p4);O._isSamePoint(q,s)&&(y._p2.add(L),y._p1=p),O._isSamePoint(_,s)&&(y._p3.add(L),y._p4=p)})},y.prototype.moveCtrlDueToRealPointMovement=function(s,q){function p(y){y.add(q),y.e&&q.e&&(y.e+=q.e)}var O=this;O._curves.forEach(function(y){var q=y._p1,_=(y._p2,y._p3,y._p4);O._isSamePoint(q,s)&&p(y._p2),O._isSamePoint(_,s)&&p(y._p3)})},y.prototype.moveCtrlPoint=function(y,_,s){var p,q,O=y[s];O&&(O.e!==k5&&(_.e=O.e),q=(p=this)._curves,_.clone().sub(O),q.forEach(function(y){var q;"c2"===s?q="_p2":"c1"===s&&(q="_p3"),p._isSamePoint(y[q],O)&&(y[q]=_)}),y[s]=_)},y.prototype.deleteRealPoint=function(y,q){for(var _,s,p,O,L=this._curves,$={},k=[],M=v.Math.CubicBezier,E=0,H=L.length;E<H;E++)s=(_=L[E])._p1,p=_._p2,_._p3,O=_._p4,!$[E]&&this._isSamePoint(s,y)||(this._isSamePoint(O,y)?E+1<H&&this._isSamePoint(L[E+1]._p1,y)&&(q||k.push(new M(s,p,L[E+1]._p3,L[E+1]._p4))):k.push(_));this._curves=k},y.prototype.findPairs=function(y,q){for(var _,s,p,O,L=this._curves,$={},k=[],M=0,E=L.length;M<E;M++)_=(p=L[M])._p1,O=p._p2,s=p._p3,p=p._p4,!$[M]&&this._isSamePoint(_,y)&&(q?k.push({point:_,r2:p}):k.push({point:_,c2:O})),this._isSamePoint(p,y)&&(O=q?{point:p,r1:_}:{point:p,c1:s},M+1<E&&this._isSamePoint(L[M+1]._p1,y)&&(q?O.r2=L[M+1]._p4:O.c2=L[M+1]._p2,$[M+1]=!0),k.push(O));return k},y.prototype.toHtShape=function(){var p=this,y=p._curves,O=[],L=[],$={x:1/0,y:1/0};return y.forEach(function(y){var q=y._p1,_=y._p2,s=y._p3,y=y._p4;if(p._isCloseEnough(q,$)||(O.push(1),L.push(q.clone())),$=y,p._isCloseEnough(q,_)&&p._isCloseEnough(s,y))return O.push(2),void L.push(y.clone());O.push(4),L.push(_.clone(),s.clone(),y.clone())}),{segments:O,points:L}};(_=v.Math.CubicBezier=function(y,q,_,s){this._id=v.Math.CubicBezier._globalId++,this._p1=y,this._p2=q,this._p3=_,this._p4=s})._globalId=1,((_.prototype={}).constructor=_).prototype.toString=function(){return this._id},_.prototype.intersectRect=function(y,q,_){var q=q/2,_=_/2,s=y.x,y=y.y,p=new(O=v.Math.Vector2)(-q+s,-_+y),q=new O(q+s,_+y),s=new O(q.x,p.y),_=new O(p.x,q.y),y=this.intersectLine(p,s),O=this.intersectLine(s,q),s=this.intersectLine(q,_),q=this.intersectLine(_,p);return y.concat(O).concat(s).concat(q)},_.prototype.intersectLine=function(y,q){var _=y.clone().min(q),s=y.clone().max(q),p=this._p1,O=this._p2,L=this._p3,$=this._p4,k=p.clone().multiplyScalar(-1),M=O.clone().multiplyScalar(3),E=L.clone().multiplyScalar(-3),$=k.add(M).add(E).add($);k=p.clone().multiplyScalar(3),M=O.clone().multiplyScalar(-6),E=L.clone().multiplyScalar(3),L=k.add(M).add(E),k=p.clone().multiplyScalar(-3),M=O.clone().multiplyScalar(3);for(var E=k.add(M),O=p.clone(),k=new v.Math.Vector2(y.y-q.y,q.x-y.x),M=y.x*q.y-q.x*y.y,H=this.getRoots(k.dot($),k.dot(L),k.dot(E),k.dot(O)+M),w=new Array,Q=0,x=H.length;Q<x;Q++){var S,X=H[Q];X<0||1<X||((S=this.getPointAt(X)).t=X,y.x==q.x?_.y<=S.y&&S.y<=s.y&&w.push(S):y.y==q.y?_.x<=S.x&&S.x<=s.x&&w.push(S):S.x>=_.x&&S.y>=_.y&&S.x<=s.x&&S.y<=s.y&&w.push(S))}return w},_.prototype.solveTForPoint=function(y){for(var q=this._p1.x-y.x,_=this._p2.x-y.x,s=this._p3.x-y.x,p=this._p4.x-y.x,O=this.getRoots(p-3*s+3*_-q,3*s-6*_+3*q,3*_-3*q,q),L=k5,$=1/0,k=0,M=O.length;k<M;k++){var E,H=O[k];H<0||1<H||((E=this.getPointAt(H)).t=H,(H=Math.abs(E.y-y.y))<$&&($=H,L=E))}return L},_.prototype.getPointAt=function(y){var q=this._p1,_=this._p2,s=this._p3,p=this._p4,q=q.clone().lerp(_,y),_=_.clone().lerp(s,y),s=s.clone().lerp(p,y),p=q.lerp(_,y),q=_.lerp(s,y);return p.lerp(q,y)},_.prototype.getPointByPercentage=function(y){var q=this.length*y,_=this._cacheLength,s=_.length;if(0==q)return _[0].point;if(1<=y)return _[s-1].point;for(var p=0;p<s;p++){var O,L=_[p];if(!(L.len<q))return O=_[p-1],L.point.clone().sub(O.point).setLength(q-O.len).add(O.point)}},_.prototype.getTByPercentage=function(y){var q=this.length*y,_=this._cacheLength,s=_.length;if(0==q||y<=0)return _[0].t;if(1<=y)return _[s-1].t;for(var p=0;p<s;p++){var O,L=_[p];if(!(L.len<q))return(q-(O=_[p-1]).len)/(L.len-O.len)*(L.t-O.t)+O.t}},_.prototype.getRoots=function(y,q,_,s){var p,O,L,$,k=new Array,M=(Math.abs(y)<1e-6&&(0<(M=(p=_/(L=q))*p-s/L*4)?(O=Math.sqrt(M),k.push(.5*(-p+O)),k.push(.5*(-p-O))):0==M&&k.push(.5*-p)),(q/=y)/3),y=(p=(2*q*q*q-9*(_/=y)*q+27*(s/=y))/27)*p/4+(L=(3*_-q*q)/3)*L*L/27,s=p/2;return 0<(y=Math.abs(y)<=1e-6?0:y)?(_=0<=($=-s+(O=Math.sqrt(y)))?Math.pow($,1/3):-Math.pow(-$,1/3),0<=($=-s-O)?_+=Math.pow($,1/3):_-=Math.pow(-$,1/3),k.push(_-M)):y<0?(q=Math.sqrt(-L/3),p=Math.atan2(Math.sqrt(-y),-s)/3,O=Math.cos(p),_=Math.sin(p),L=Math.sqrt(3),k.push(2*q*O-M),k.push(-q*(O+L*_)-M),k.push(-q*(O-L*_)-M)):($=0<=s?-Math.pow(s,1/3):Math.pow(-s,1/3),k.push(2*$-M),k.push(-$-M)),k},_.prototype._70I=function(){return this._p1.distanceToSquared(this._p2)<1e-10&&this._p3.distanceToSquared(this._p4)<1e-10},_.prototype.insertKnot=function(y){var q=this._p1,_=this._p2,s=this._p3,p=this._p4,O=q.clone().lerp(_,y),_=_.clone().lerp(s,y),s=s.clone().lerp(p,y),L=O.clone().lerp(_,y),_=_.clone().lerp(s,y),$=L.clone().lerp(_,y);return this._70I()?(q.clone().lerp(p,y),[new v.Math.CubicBezier(q,q.clone(),$.clone(),$),new v.Math.CubicBezier($,$.clone(),p.clone(),p)]):[new v.Math.CubicBezier(q,O,L,$),new v.Math.CubicBezier($,_,s,p)]},o.defineProperties(_.prototype,{length:{get:function(){if(!(y=this._cacheLength))for(var y=this._cacheLength=[],q=this._p1,_=0,s=0;_<=1;){var p=this.getPointAt(_+=.001);s+=p.clone().sub(q).length(),y.push({len:s,t:_,point:(q=p).clone()})}return y[y.length-1].len}},p1:{get:function(){return this._p1},set:function(y){this._p1=y,this._cacheLength=k5}},p2:{get:function(){return this._p2},set:function(y){this._p2=y,this._cacheLength=k5}},p3:{get:function(){return this._p3},set:function(y){this._p3=y,this._cacheLength=k5}},p4:{get:function(){return this._p4},set:function(y){this._p4=y,this._cacheLength=k5}}});var fE,GE,rE,gE,xE=P.Default.getInternal().ui().EdgeUI,nE={_47O:function(y){var q=nE.getBackups()._47O;v.inEdit(this.gv)||q.call(this,y)}},QE=(v.Inject.registAsModule(nE,xE),P.Default.getInternal().ui().NodeUI),vE={_47O:function(y){var q=vE.getBackups()._47O;v.inEdit(this.gv)||q.call(this,y)},getSelectWidth:function(){var y=this.gv,q=this._data;return y.isEditable(q)&&v.inEdit(y)?0:vE.getBackup("getSelectWidth").call(this)}},bE=(v.Inject.registAsModule(vE,QE),P.graph.GraphView),IE={_editPointSize:(q=P.Default.isTouchable,v.getStyle("pointSize")[q?0:1]),isPointEditable:function(y){if(v.inEdit(this))return!this._pointEditableFunc||this._pointEditableFunc(y);IE.getBackup("isPointEditable").call(this,y)},isEditable:function(y){var q=IE.getBackup("isEditable"),q=y instanceof v.Group||q.call(this,y);return v.inEdit(this)&&y instanceof P.Edge?!!y.s("2d.editable")&&(!(q=this.getEditableFunc())||q(y)):q},_42:function(y,q){IE.getBackups()._42.call(this,y,q),v.inEdit(this)&&this.getEditInteractor().drawImpl()}},iE=(v.Inject.registAsModule(IE,bE),P.Default.getInternal().ui().ShapeUI),UE={_47O:function(y){var q=UE.getBackups()._47O;v.inEdit(this.gv)||q.call(this,y)}},hE=(v.Inject.registAsModule(UE,iE),P.graph.DefaultInteractor),dE={handle_mousewheel:function(y){var q=dE.getBackup("handle_mousewheel");v.inEdit(this.gv)||q.call(this,y)}},uE=(v.Inject.registAsModule(dE,hE),P.graph.MoveInteractor),y$={_calcShift:function(y,q){var _=y$.getBackup("_calcShift"),s=this.gv;return v.inEdit(s)&&s.getEditInteractor().getSubModule("Move").calcShift(y,q,this)||_.call(this,y,q)},clear:function(y){y$.getBackup("clear").call(this,y);var q=this.gv;v.inEdit(q)&&q.getEditInteractor().getSubModule("Move").clear(y)}};v.Inject.registAsModule(y$,uE),(((O=v.Rect=function(y){this.catalog="Rect",this._interactor=y}).prototype={}).constructor=O).prototype.gatherInfo=function(y,q){var _;return 1===q.length?(_=q[0])instanceof P.Shape&&_._70I()?this.gatherLine(y,_):!Sx(_,y)&&this.gatherSingleTarget(y,_):1<q.length&&this.gatherMultiTargets(y,q)},O.prototype.gatherSingleTarget=function(y,q){if(q.getCorners){var _,s,p=this.info,O=(this.target=q,_=this.screenInfo={},q.getCorners());for(s in p.LT=new v.Math.Vector2(O[0]),p.LB=new v.Math.Vector2(O[1]),p.RB=new v.Math.Vector2(O[2]),p.RT=new v.Math.Vector2(O[3]),p.T=p.LT.clone().add(p.RT).divideScalar(2),p.B=p.LB.clone().add(p.RB).divideScalar(2),p.L=p.LT.clone().add(p.LB).divideScalar(2),p.R=p.RT.clone().add(p.RB).divideScalar(2),p)_[s]=v.toScreenPosition(y,p[s]);var L=this._interactor.getStyle("checkSize");return _.rotLT=(O=function(y,q,_){return q=q.clone().sub(y).setLength(-L),_=_.clone().sub(y).setLength(-L),q.add(_).add(y)})(_.LT,_.RT,_.LB),_.rotLB=O(_.LB,_.LT,_.RB),_.rotRB=O(_.RB,_.LB,_.RT),_.rotRT=O(_.RT,_.LT,_.RB),_.rotT=_.rotLT.clone().add(_.rotRT).divideScalar(2),_.rotB=_.rotLB.clone().add(_.rotRB).divideScalar(2),_.rotL=_.rotLT.clone().add(_.rotLB).divideScalar(2),_.rotR=_.rotRT.clone().add(_.rotRB).divideScalar(2),_.rotation=q.getRotation(),this.gatherConnectInfo(),!0}},O.prototype.gatherConnectInfo=function(){var y,q,_=this.target,s=this._interactor,p=this.screenInfo,O=s.gv;O.isConnectActionVisible(_)&&s.getStyle("connectGuideVisible")&&(y=(y=_.s?_.s("connectGuideShift"):y)||s.getStyle("connectGuideShift"),s=_.getAnchor(),q=_.getSize(),_=_.toGlobal({x:q.width*(y[0]-s.x),y:q.height*(y[1]-s.y)}),_=v.toScreenPosition(O,_),p.P1?_.add(p.P2.clone().sub(p.P1).setLength(y[2])):(_.add(p.RT.clone().sub(p.LT).setLength(y[2])),_.add(p.LB.clone().sub(p.LT).setLength(y[3]))),p.connect=_)},O.prototype.gatherMultiTargets=function(y,q){return!!(q=v.Group.findOrCreateGroup(q,this._interactor._uuid))&&(this.editing&&"rotate"!==this.editing.mode||q.calcInfo(),this.gatherSingleTarget(y,q))},O.prototype.gatherLine=function(y,q){this.target=q;var _=this.screenInfo={},s=q.getPoints(),q=v.getDataMatrix(q);return _.P1=v.toScreenPosition(y,q.apply(s.get(0))),_.P2=v.toScreenPosition(y,q.apply(s.get(1))),this.gatherConnectInfo(),!0},O.ResizeKeys=["LT","RB","LB","RT","L","R","B","T"],O.ResizeDirection=[{x:-1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],O.RotateKeys=["rotLT","rotRB","rotLB","rotRT","rotL","rotR","rotB","rotT"],O.prototype.check=function(y,q,_){if(P.Default.isLeftButton(q)){var s=this;if(s.editing=null,s.tipInfo=null,s.screenInfo){var p=s.target,O=y.isEditable(p),L=s.screenInfo;if(O&&L.connect)if(M=s._checkConnect(_))return M;if(L.P1)return s._checkLine(_);var $,k,M,E=null,H=(M=s._interactor).getStyle("checkSize");if(O&&y.isRectEditable(p))for(Q=0;Q<v.Rect.ResizeKeys.length;Q++)if(k=v.Rect.ResizeKeys[Q],v.checkHit(_,L[k],H)){E=k,$="resize";break}if(!E&&O&&y.isRotationEditable(p)&&!M.getStyle("rotateAsClock"))for(var w=M.getStyle("rotateCheckSize"),Q=0;Q<v.Rect.RotateKeys.length;Q++)if(k=v.Rect.RotateKeys[Q],v.checkHit(_,L[k],w)){E=k,$="rotate";break}if(E){if("rotate"===$){if(O=y.lp(q),p instanceof v.Group){for(var x=M.getStyle("groupRotateModeKey"),S=!1,X=0,T=(x="string"==typeof x?[x]:x).length;X<T;X++)if(q[x[X]]){S=!0;break}var y=M.getStyle("groupRotateModeDefault"),i=S?"batch"===y?"block":"batch":y}y="batch"===i?p.getAnchor2():p.getPosition(),O=Math.atan2(O.y-y.y,O.x-y.x),M._setRotateCursor(O),s.editing={mode:$,key:E,pos:y,flipY:p.getScale().y<0,rotation:p.getRotation(),hitRot:O},i&&(s.editing.groupRotateMode=i)}else{var y=v.Rect.ResizeKeys.indexOf(E),O=v.Rect.ResizeDirection[y],i=Math.cos(p.getRotation()),y=Math.sin(p.getRotation()),N=O.x*Math.sign(p.getScale().x),O=O.y*Math.sign(p.getScale().y),i=Math.atan2(-y*N-i*O,i*N-y*O),N=(Math.round(i/(Math.PI/4))+8)%8,y=(this._interactor.setCursor(["ew-resize","nesw-resize","ns-resize","nwse-resize","ew-resize","nesw-resize","ns-resize","nwse-resize"][N]),p.getWidth()),O=p.getHeight(),i=p.getAnchor();s.editing={mode:$,key:E,rect:{x:-y*i.x,y:-O*i.y,width:y,height:O},anchor:i,matrix:p.getMatrix()}}return E}M.setCursor("default")}}},O.prototype._checkLine=function(y){this.screenInfo;var q,_=this._interactor.getStyle("checkSize");if(v.checkHit(y,this.screenInfo.P1,_))q="P1";else{if(!v.checkHit(y,this.screenInfo.P2,_))return void this._interactor.setCursor("default");q="P2"}return this.editing={mode:"line",key:q},q},O.prototype._checkConnect=function(y){var q,_,s=this.screenInfo,p=this._interactor,O=p.getStyle("connectGuideIntersectSize"),s=s.connect,L=y.x,$=s.x;if(L<$&&$-L<O&&Math.abs(s.y-y.y)<O||$<=L&&v.checkHit(y,s,O))return q=E5.getConnectAction(p.gv),this.editing={mode:"connect"},q&&q.delete&&(this.target instanceof v.Group?(_=!0,p.gv.sm().getSelection().each(function(y){q.delete.visible.call(null,p.gv,y)||(_=!1)}),this.editing.hasDeleteAction=_):q.delete.visible.call(null,p.gv,this.target)&&(this.editing.hasDeleteAction=!0)),p.setCursor("default"),"connect"},O.prototype._fireEditEvent=function(y,q){var _=this._interactor,s=this.editing;s&&(s="rotate"===(s=s.mode)?"Rotation":"connect"===s?"Connection":"resize"===s?"Rect":s[0].toUpperCase()+s.slice(1),_.fi({kind:y+"Edit"+s,event:q}))},O.prototype.startEdit=function(y,q){y.startDragging(q),this._interactor.fi({kind:"prepareEdit",event:q});var _,s=this.editing,p=this.target;if(s){if(this._fireEditEvent("begin",q),s.started=!0,"rotate"===s.mode)return s.groupRotateMode&&p.beginRotate(s),void y._42();"connect"===s.mode?s.hasDeleteAction&&(q=y.gv,_=this._interactor.getStyle("connectGuideGarbageShift"),s.garbageInfo={x:q.getWidth()*_[0]+_[2],y:q.getHeight()*_[1]+_[3],size:this._interactor.getStyle("connectGuideGarbageIntersectsize")},y._42()):("line"===s.mode||p&&0===p.getRotation())&&(this._inSmartGuide=!0,this._interactor.rectGuide.gatherRects())}},O.prototype._46O=function(y){var q,_,s=this,p=s.editing,O=s.target;if(p){if("connect"===p.mode&&!p.canceled&&!p.deleted)try{p.garbageInfo&&p.garbageInfo.hover?E5.doDeleteConnectionAction(s._interactor.gv,O):E5.doConnectAction(s._interactor.gv,O,p.target)}catch(y){console.error(y)}_=p.freezeFlag,q=s.editing.groupRotateMode,s._fireEditEvent("end",y),s.editing=null}s.tipInfo=null,s._inSmartGuide&&(s._interactor.rectGuide.clear(),s._inSmartGuide=!1),q&&O&&O.endRotate(),O instanceof P.Block&&(_===k5?delete O._freezeSyncFromChildren:O._freezeSyncFromChildren=_,O.updateFromChildren())},O.prototype.handleNormalStateDelete=function(){var y=this.editing;if(y&&"connect"===y.mode&&!y.canceled&&!y.deleted){if(y.garbageInfo){try{E5.doDeleteConnectionAction(this._interactor.gv,this.target)}catch(y){console.error(y)}y.garbageInfo=null}return y.cursorPos=null,y.targetCorners=null,y.deleted=!0,this._interactor._42(),!0}},O.prototype.handleNormalStateKeyDown=function(y){var q=this.editing;if(q&&"connect"===q.mode&&!q.canceled&&!q.deleted)return P.Default.isEsc(y)?(q.cursorPos=null,q.targetCorners=null,q.canceled=!0,this._interactor._42(),!0):void 0},O.prototype.handleEdit=function(q,y){var _=this,s=_.editing;if(s){var p,O,L=_.target,$=s.key,k=s.mode,M=q.lp(y),E=_._interactor;if("connect"===k)return s.canceled?void 0:s.deleted?void 0:(s.cursorPos=E._getLogicalPoint(y),(i=s.garbageInfo)&&v.checkHit(s.cursorPos,i,i.size)?(i.hover=!0,s.target=null,s.targetCorners=null):(i&&(i.hover=!1),s.target=q.getDataAt(M,function(y){return!!q.isSelectable(y)&&!!W(y)})||null,s.targetCorners=v.getTargetCornersOnScreen(q,s.target)),void E._42());if("rotate"===k){i=s.pos,i=Math.atan2(M.y-i.y,M.x-i.x),N=s.groupRotateMode?i-s.hitRot:(T=i-s.hitRot,s.rotation+T),(N%=2*Math.PI)<0&&(N+=2*Math.PI),P.Default.isCtrlDown(y)||(x=GA(y)?(H=E.getStyle("shiftRotateRound"))/2:(H=E.getStyle("rotateRound"),E.getStyle("rotateSensitivity")),N=v.roundTo(N,H,x)),s.groupRotateMode?0!=(T=N-(s.lastRotation||0))&&(L.addRotation(T,s.groupRotateMode,function(y){return q.isRotationEditable(y)}),s.lastRotation=N):L.setRotation(N),E._setRotateCursor(i),N>Math.PI&&(N-=2*Math.PI);var H=(N/Math.PI*180).toFixed(2)+"°"}else if("resize"===k){var w,Q,x=s.rect,S=x.x,X=x.y,T=x.width,i=x.height,N=s.anchor,a=s.matrix,l=L.s&&L.s("keepAspectRatio")||E.getStyle("keepAspectRatio"),j=(GA(y)&&(l=!l),_._unionPointMode1),Z=_._unionPointMode2,Z=(!_._inSmartGuide||P.Default.isCtrlDown(y)||l||("L"===$||"R"===$?w="x":"T"!==$&&"B"!==$||(w="y"),_._adsorbedToClosest(M,w),O=!0),K=a.tfi(M),"LT"===$?(x=j(K,{x:S+T,y:X+i},T,i,l),Q=9):"T"===$?(x=Z({x:S,y:K.y},{x:S+T,y:X+i},T,i,l,"v"),Q=1):"RT"===$?(x=j(K,{x:S,y:X+i},T,i,l),Q=33):"L"===$?(x=Z({x:K.x,y:X},{x:S+T,y:X+i},T,i,l,"h"),Q=8):"R"===$?(x=Z({x:S,y:X},{x:K.x,y:X+i},T,i,l,"h"),Q=32):"LB"===$?(x=j(K,{x:S+T,y:X},T,i,l),Q=12):"B"===$?(x=Z({x:S,y:X},{x:S+T,y:K.y},T,i,l,"v"),Q=4):"RB"===$&&(x=j(K,{x:S,y:X},T,i,l),Q=36),a.tf(x.x+x.width*N.x,x.y+x.height*N.y));L instanceof P.Block&&(s.hasOwnProperty("freezeFlag")||(s.freezeFlag=L._freezeSyncFromChildren,L._freezeSyncFromChildren=!0)),L.setPosition(Z),L.setSize(x.width,x.height),O&&(p=L.getRect(),E.rectGuide.gatherLines({node:L,x:p.x,y:p.y,w:p.width,h:p.height},w,Q)),H=Math.round(x.width)+" * "+Math.round(x.height)}else if("line"===k){if(GA(y)){var j=L.getPoints(),K="P1"===$?j.get(1):j.get(0),C=M.x-K.x,B=M.y-K.y,F=E.getStyle("shiftLineRotateRound"),V=_._shiftDirList;if(!V||_._shiftRotateRound!==F){_._shiftRotateRound=F,_._shiftDirList=V=[];for(var h=0;h<Math.PI;h+=F)V.push({x:p5(h),y:H5(h)})}for(var t,u=0,J=0,D=V.length;J<D;J++){var c=V[J],R=c.x*C+c.y*B;Math.abs(R)>Math.abs(u)&&(u=R,t=c)}M={x:K.x+t.x*u,y:K.y+t.y*u},E.rectGuide.clear()}else _._inSmartGuide&&!P.Default.isCtrlDown(y)&&(_._adsorbedToClosest(M),O=!0);T=v.getDataMatrix(L).applyInverse(M),L.setPoint("P1"===$?0:1,T,!0),l=(i=L.getPoints()).get(0),a=i.get(1),S=l.x-a.x,X=l.y-a.y,H=" "+Math.round(Math.sqrt(S*S+X*X))+" ",O&&(p=L.getRect(),E.rectGuide.gatherLines({node:L,x:p.x,y:p.y,w:p.width,h:p.height}))}H&&((N=P.Default.getLogicalPoint(y,E._canvas)).x+=v.Icons.TipShiftX,N.y+=v.Icons.TipShiftY,_.tipInfo={helperPos:N,text:H,size:H.length}),_._fireEditEvent("between",y)}},O.prototype._unionPointMode1=function(y,q,_,s,p){var O;return p&&_&&s&&(p=y.x-q.x,O=y.y-q.y,Math.abs(p*s)<Math.abs(O*_)?(O=Math.sign(O)*Math.abs(p*s/_),y.y=q.y+O):(p=Math.sign(p)*Math.abs(O*_/s),y.x=q.x+p)),P.Default.unionPoint(y,q)},O.prototype._unionPointMode2=function(y,q,_,s,p,O){var L,y=P.Default.unionPoint(y,q);return p&&_&&s&&("v"===O?(L=y.x+y.width/2,y.width=_*y.height/s,y.x=L-y.width/2):(L=y.y+y.height/2,y.height=s*y.width/_,y.y=L-y.height/2)),y},O.prototype._adsorbedToClosest=function(y,q){var _=(s=this._interactor).rectGuide.findClosest(y,q),s=s.gridGuide.findClosest(y,q),q=1/0,p=1/0;_&&(isFinite(_.x)&&(q=_.x),isFinite(_.y)&&(p=_.y)),s&&(isFinite(s.x)&&Math.abs(s.x)<Math.abs(q)&&(q=s.x),isFinite(s.y)&&Math.abs(s.y)<Math.abs(p)&&(p=s.y)),isFinite(q)&&(y.x+=q),isFinite(p)&&(y.y+=p)},O.prototype._42=function(y,q,_){var s=this,p=(s.info={},s.screenInfo=null,s._interactor);if(!p.editDetail&&s.gatherInfo(q,_)){var O=s.editing,_=O?O.groupRotateMode:null,L=s.screenInfo;if("block"!==_||!O||!O.started){if(L.P1?v.Icons.DrawIcon(p,y,v.Icons.Line,L):v.Icons.DrawIcon(p,y,v.Icons.Rect,L),L.connect&&(v.Icons.DrawIcon(p,y,v.Icons.ConnectGuide,{rotation:L.rotation,connect:L.connect,cursorPos:O?O.cursorPos:null}),O)){if(O.targetCorners){for(var $={x:1/0,y:1/0},k={x:-1/0,y:-1/0},M=0,E=O.targetCorners.length;M<E;M+=2)$.x=Math.min($.x,O.targetCorners[M]),k.x=Math.max(k.x,O.targetCorners[M]),$.y=Math.min($.y,O.targetCorners[M+1]),k.y=Math.max(k.y,O.targetCorners[M+1]);v.Icons.DrawIcon(p,y,v.Icons.HoverDataRect,{min:$,max:k,color:p.getStyle("hoverGuideColor")||p.getStyle("baseColor")})}O.garbageInfo&&v.Icons.DrawIcon(p,y,v.Icons.ConnectGuideGarbage,O.garbageInfo)}p.getStyle("rotateTipVisible")&&s.tipInfo&&v.Icons.DrawIcon(p,y,v.Icons.TipHelper,s.tipInfo)}s.target instanceof v.Group&&s.target._42(p,y,q)}},(((_=v.Anchor=function(y){this.catalog="Anchor",this._interactor=y}).prototype={}).constructor=_).prototype.gatherInfo=function(y,q){if(1!==q.length)return 1<q.length&&this.gatherMultiTargets(y,q);var _=q[0];return _.getAnchor&&!(_ instanceof P.Shape&&_._70I()||Sx(_,y))?this.gatherSingleTarget(y,q[0]):void 0},_.prototype.gatherSingleTarget=function(y,q){return this.info.POS=q.getPosition(),this.screenInfo.POS=v.toScreenPosition(y,this.info.POS),this.target=q,!0},_.prototype.gatherMultiTargets=function(y,q){return!!(q=v.Group.findOrCreateGroup(q,this._interactor._uuid))&&(this.screenInfo.POS=v.toScreenPosition(y,q.getAnchor2()),this.target=q,!0)},_.prototype.isVisible=function(){var y=this._interactor;if(!1===y.getStyle("anchorVisible"))return!1;var q=this.target;if(q){if(this.editing)return!0;var _=q.getAnchor(),s=y.getStyle("anchorOutsideVisibleThreshold");if(_.x<-s||_.x>1+s||_.y<-s||_.y>1+s)return!0;if(_=q.getSize(),s=q.getScale(),Math.min(Math.abs(_.width*s.x),Math.abs(_.height*s.y))*y.gv._zoom<y.getStyle("anchorHideThreshold"))return!1}return!0},_.prototype.check=function(y,q,_){if(P.Default.isLeftButton(q)&&(q=this._interactor,this.isVisible()&&!1!==q.getStyle("anchorMovable"))){this.editing=null,this.tipInfo=null;var s=this.target;if(s&&y.isAnchorEditable(s)&&y.isEditable(s)&&this.screenInfo&&(y=this.screenInfo.POS)&&v.checkHit(_,new v.Math.Vector2(y),q.getStyle("checkSize")))return s instanceof v.Group?this.editing={}:(_=s.getWidth(),y=s.getHeight(),q=s.getAnchor(),this.editing={rect:{x:-_*q.x,y:-y*q.y,width:_,height:y},anchor:q,matrix:s.getMatrix()}),!0}},_.prototype.startEdit=function(y,q){y.startDragging(q),y.fi({kind:"beginEditAnchor",event:q})},_.prototype._46O=function(y){this.editing&&(this.editing=null,this._interactor.fi({kind:"endEditAnchor",event:y})),this.tipInfo=null},_.prototype.handleEdit=function(y,q){var _=this.target;if(_&&(p=this.editing)){var y=y.lp(q),s=this._interactor;if(_ instanceof v.Group)return _.setAnchor2(y),void s._42();var y=p.matrix.tfi(y),p=p.rect,O=(y.x-p.x)/p.width,y=(y.y-p.y)/p.height;P.Default.isCtrlDown(q)||(p=s.getStyle("anchorRound"),L=s.getStyle("anchorSensitivity"),O=v.roundTo(O,p,L),y=v.roundTo(y,p,L)),_.setAnchor(O,y,!0);(p=P.Default.getLogicalPoint(q,s._canvas)).x+=v.Icons.TipShiftX,p.y+=v.Icons.TipShiftY;var L=O.toFixed(2)+", "+y.toFixed(2);this.tipInfo={helperPos:p,text:L,size:L.length},s.fi({kind:"betweenEditAnchor",event:q})}},_.prototype._42=function(y,q,_){this.info={},this.screenInfo={};var s=this._interactor;s.editDetail||this.gatherInfo(q,_)&&this.isVisible()&&(v.Icons.DrawIcon(s,y,v.Icons.Anchor,this.screenInfo),this.tipInfo&&v.Icons.DrawIcon(s,y,v.Icons.TipHelper,this.tipInfo))},(((q=v.MoveDummy=function(y){this.catalog="MoveDummy",this._interactor=y}).prototype={}).constructor=q).prototype.gatherInfo=function(y,q){var _=this._interactor.getSubModule("Rect");if(_&&(k=_.screenInfo)){var s=this._interactor;if(this.getMovableTarget(_.target)&&!1!==(_=s.getStyle("moveDummyThreshold"))){var p=k.LT||k.P1,O=k.RT||k.P2,L=k.LB||p;if(p){var $,k=k.P1,M=Math.min(p.distanceTo(L),p.distanceTo(O));if(!(!0!==_&&_<M))return _=s.getStyle("moveDummyPosition"),M=O.clone().sub(p),O=L.clone().sub(p),L=_[2],$=_[3],(k=k&&s.getStyle("moveDummyLineExtraShift"))&&(L+=k[0],$+=k[1]),k=p.clone().add(M.clone().multiplyScalar(_[0])).add(M.setLength(L)).add(O.clone().multiplyScalar(_[1])).add(O.setLength($)),this.screenInfo.pos=k,this.screenInfo.size=s.getStyle("moveDummySensitivity"),!0}}}},q.prototype.getMovableTarget=function(y){var q=this._interactor.gv;if(W(y)){if(q.isMovable(y))return y}else if(y instanceof v.Group)for(var _=y._entities,s=_.length-1;0<=s;s--){var p=_[s];if(W(p)&&q.isMovable(p))return p}return null},q.prototype.getMoveInteractor=function(){for(var y,q=this._interactor.gv.getInteractors(),_=0,s=q.length;_<s;_++)if((y=q.get(_))instanceof uE)return y},q.prototype.startEdit=function(y,q){y.startDragging(q);var _,s=this.getMoveInteractor();s&&(_=this.selectedTarget,(y=y.gv)._moving=1,s._data=_,y.handleMouseDown&&y.handleMouseDown(q,_))},q.prototype._46O=function(y){var q=this.getMoveInteractor();q&&(q.handleWindowMouseUp(y),this.selectedTarget=null)},q.prototype.handleEdit=function(y,q){var _=this.getMoveInteractor();_&&_.handleWindowMouseMove(q)},q.prototype.check=function(y,q,_){if(this.selectedTarget=null,P.Default.isLeftButton(q)&&!y._scrolling&&!Dl()&&this.screenInfo&&(q=this.screenInfo.pos)&&!(_.distanceTo(q)>this.screenInfo.size))return y=this._interactor,this.selectedTarget=this.getMovableTarget(y.getSubModule("Rect").target),y.setCursor("default"),!0},q.prototype._42=function(y,q,_){this.screenInfo={};var s=this._interactor;s.editDetail||!this.gatherInfo(q,_)||s.editing&&!this.selectedTarget||v.Icons.DrawIcon(s,y,v.Icons.MoveDummy,this.screenInfo)},(((O=v.RotateX=function(y){this.catalog="RotateX",this._interactor=y}).prototype={}).constructor=O).prototype.gatherInfo=function(y,q){var _;return 1===q.length?!((_=q[0])instanceof P.Shape&&_._70I()||Sx(_,y))&&this.gatherSingleTarget(y,_):1<q.length&&this.gatherMultiTargets(y,q)},O.prototype.gatherSingleTarget=(fE=new P.Math.Vector2,GE=new P.Math.Vector2,rE=new P.Math.Vector2,gE=new P.Math.Vector2,function(y,q){var _,s;if(q.getCorners)return s=q.getCorners(),_=q.getPosition(),fE.copy(s[0]),rE.copy(s[1]),gE.copy(s[3]),GE.copy(fE).add(gE).divideScalar(2).add(fE.sub(rE).setLength(15/y.getZoom())),s=Math.max(cM(_,s[0]),cM(_,s[1]),cM(_,s[2]),cM(_,s[3])),this.info.POS=GE.clone(),this.screenInfo.POS=v.toScreenPosition(y,this.info.POS),this.screenInfo.LEN=Math.sqrt(s)*y.getZoom()+15,this.screenInfo.CENTER=v.toScreenPosition(y,_),this.target=q,!0}),O.prototype.gatherMultiTargets=function(y,q){return!!(q=v.Group.findOrCreateGroup(q,this._interactor._uuid))&&this.gatherSingleTarget(y,q)},O.prototype.isVisible=function(){var y=this._interactor;if(!y.getStyle("rotateAsClock"))return!1;var q=this.target;return!q||!(!(y=y.gv).isEditable(q)||!y.isRotationEditable(q))},O.prototype.check=function(y,q,_){return((y=this._checkImpl(y,q,_))||this._clockPainted)&&this._interactor._42(),y},O.prototype._checkImpl=function(y,q,_){if(P.Default.isLeftButton(q)){var s=this;if(s.editing=null,s.tipInfo=null,s.screenInfo&&(p=s.screenInfo.POS)&&s.isVisible()){var p,O=s._interactor;if(v.checkHit(_,p,O.getStyle("checkSize")))return _=s.target,p=y.lp(q),y=_.getPosition(),q=Math.atan2(p.y-y.y,p.x-y.x),O._setRotateCursor(q),s.editing={pos:y,rotation:_.getRotation(),hitRot:q,groupRotateMode:"block",screenInfo:{CENTER:s.screenInfo.CENTER,LEN:s.screenInfo.LEN}},!0}}},O.prototype.startEdit=function(y,q){y.startDragging(q),y.fi({kind:"beginEditRotation",event:q}),this.target instanceof v.Group&&this.target.beginRotate(this.editing)},O.prototype._46O=function(y){this.editing&&(this.editing=null,this._interactor.fi({kind:"endEditRotation",event:y})),this.target instanceof v.Group&&this.target.endRotate(),this.tipInfo=null},O.prototype.handleEdit=function(q,y){var _,s,p,O,L,$,k,M,E=this.editing;E&&(_=this.target,p=q.lp(y),s=this._interactor,L=E.pos,p=Math.atan2(p.y-L.y,p.x-L.x),$=(L=_ instanceof v.Group)?p-E.hitRot:(O=p-E.hitRot,E.rotation+O),($%=2*Math.PI)<0&&($+=2*Math.PI),P.Default.isCtrlDown(y)||(M=GA(y)?(k=s.getStyle("shiftRotateRound"))/2:(k=s.getStyle("rotateRound"),s.getStyle("rotateSensitivity")),$=v.roundTo($,k,M)),L?0!=(O=$-(E.lastRotation||0))&&(_.addRotation(O,E.groupRotateMode,function(y){return q.isRotationEditable(y)}),E.lastRotation=$):_.setRotation($),s._setRotateCursor(p),$>Math.PI&&($-=2*Math.PI),k=($/Math.PI*180).toFixed(2)+"°",(M=P.Default.getLogicalPoint(y,s._canvas)).x+=v.Icons.TipShiftX,M.y+=v.Icons.TipShiftY,this.tipInfo={helperPos:M,text:k,size:k.length},s.fi({kind:"betweenEditRotation",event:y}))},O.prototype._42=function(y,q,_){var s=this,p=(s._clockPainted=!1,s.info={},s.screenInfo={},s._interactor);p.editDetail||s.gatherInfo(q,_)&&s.isVisible()&&(v.Icons.DrawIcon(p,y,v.Icons.RoundPoint,s.screenInfo.POS),p.getStyle("rotateTipVisible")&&s.tipInfo&&v.Icons.DrawIcon(p,y,v.Icons.TipHelper,s.tipInfo),s.editing&&s.drawClock(y))},O.prototype.drawClock=function(y){y.save(),this._clockPainted=!0;var q,_,s,p,O,L=this.editing||{},$=L.screenInfo||this.screenInfo,k=$.LEN,M=k+8,E=k+18;y.save(),y.translate($.CENTER.x,$.CENTER.y),y.beginPath(),y.strokeStyle="rgb(150, 150, 150)";for(var H=0;H<360;H++)q=H*Math.PI/180,H%5==0&&(_=H5(q)*k,s=p5(q)*k,p=H5(q)*M,O=p5(q)*M,y.moveTo(_,s),y.lineTo(p,O)),H%45==0&&(_=H5(q)*k,s=p5(q)*k,p=H5(q)*E,O=p5(q)*E,y.moveTo(_,s),y.lineTo(p,O));y.stroke(),y.rotate(-u5),$=L.lastRotation||this.target.getRotation(),y.beginPath(),y.fillStyle="rgba(255, 0, 0, 0.1)",y.strokeStyle="rgb(157, 157, 157)",y.moveTo(0,0),y.arc(0,0,E,0,$,!1),y.fill(),y.beginPath(),y.moveTo(0+E,0),y.arc(0,0,E,0,$,!1),y.stroke(),y.restore()},((y=v.Curve=function(y){this.catalog="Curve",this._interactor=y}).prototype={}).constructor=y,o.defineProperties(y.prototype,{activing:{get:function(){return this._activing},set:function(y){y?(this._activing=new v.CurveActiving(this,y),this.gatherSingleTarget(this._interactor.gv,this.target)):((y=this._activing)&&y.dispose(),this._activing=null)}}}),y.PointType={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3},y.prototype.setUp=function(){var y=this._interactor;y&&y.gv.mp(this._onGraphviewPropertyChanged,this)},y.prototype._onGraphviewPropertyChanged=function(y){"zoom"!==y.property&&"translateX"!==y.property&&"translateY"!==y.property||this._handleDataChanged()},y.prototype.tearDown=function(){var y=this._interactor;y&&y.gv.ump(this._onGraphviewPropertyChanged,this)},y.prototype.canEnterEditDetailMode=function(){var y=nu(this._interactor);if(y)return this.target=y},y.prototype.canQuitEditDetailMode=function(y){var q=this._interactor._getLogicalPoint(y);if(!this._checkEditRealPoint(q))return this._interactor.gv.getDataAt(y)!==this.target||void 0},y.prototype.preHandleScroll=function(y){var q=this.editing;if(q&&q.inEdit)return!0},y.prototype.getCurrentSelectintStatus=function(){var _=this;if(_.activing&&!_.activing.selections){if(_.activing.status!=k5)return _.activing.status;var y=function(y){var q=_.activing.status;_.activing.status=y,_._interactor.fp("shapePointStatus",q,y)},q=v.Curve.PointType,s=_.activing.point,p=_.activing.pairs;if(!p||1!==p.length)return y(q.Mirrored);var O=(p=p[0]).c1&&p.c1.isNearEnough(s),L=p.c2&&p.c2.isNearEnough(s);return p.c1&&p.c2?O&&L?y(q.Straight):O||L?y(q.Asymmetric):(O=p.c1.clone().sub(s),L=p.c2.clone().sub(s),1e-5<Math.abs(O.x*L.y-O.y*L.x)||0<O.x*L.x?y(q.Disconnected):1e-5<Math.abs(O.length()-L.length())?y(q.Asymmetric):y(q.Mirrored)):y(O||L?q.Straight:q.Disconnected)}},y.prototype.handle_keydown=function(y){var q;this._interactor.editDetail&&(q=v.Curve.PointType,"1"===y.key?this._setCurrentSelectionStatus(q.Straight):"2"===y.key?this._setCurrentSelectionStatus(q.Mirrored):"3"===y.key?this._setCurrentSelectionStatus(q.Disconnected):"4"===y.key&&this._setCurrentSelectionStatus(q.Asymmetric))},y.prototype.setCurrentSelectionStatus=function(y){var q=this._interactor;q&&((q=q.gv).dm().beginTransaction(),this._setCurrentSelectionStatus(y),q.dm().endTransaction())},y.prototype._setCurrentSelectionStatus=function(y){var q=this,_=q.activing;if(_){var s=q.getCurrentSelectintStatus();if(null!==s&&s!==y){_.status=y;var p=q.activing.point;if((O=q.activing.pairs)&&1===O.length){var O=O[0],L=q.screenInfo.curve,$=v.Curve.PointType,k=q._interactor,M=function(){q._writeToHt(),k.fp("shapePointStatus",s,y),q.check(k.gv,null,new v.Math.Vector2(k._lastLogicalPoint))};if(y===$.Straight)return L.moveCtrlPoint(O,p,"c1"),L.moveCtrlPoint(O,p,"c2"),void M();if(s===$.Straight)return H=(E=L.findPairs(p,!0)[0]).r1||p,E=(E.r2||p).clone().sub(H).multiplyScalar(.25),L.moveCtrlPoint(O,p.clone().sub(E),"c1"),L.moveCtrlPoint(O,p.clone().add(E),"c2"),void M();var E,H=O.c1,w=O.c2;if(H&&w){if(y===$.Mirrored)return L.moveCtrlPoint(O,p.clone().multiplyScalar(2).sub(w),"c1"),void M();if(y===$.Asymmetric&&s===$.Disconnected)return $=H.clone().sub(p).length(),E=p.clone().sub(w).setLength($).add(p),L.moveCtrlPoint(O,E,"c1"),void M()}_._firePointChange(),k.fp("shapePointStatus",s,y),q.check(k.gv,null,new v.Math.Vector2(k._lastLogicalPoint))}}}},y.prototype._handleDataChanged=(q$="s:edge.points,s:edge.segments,points,segments,shape,position,rotation,scale".split(","),function(y){this.screenInfo&&this.target&&(y&&q$.indexOf(y.property)<0||(y=this._interactor,this.gatherSingleTarget(y.gv,this.target,!0),this.check(y.gv,null,new v.Math.Vector2(y._lastLogicalPoint)),y._42()))}),y.prototype.gatherSingleTarget=function(q,y,_){var s,p,O,L,$=this,k=($.screenInfo&&$.screenInfo.curve&&(s=$.screenInfo.curve._curves),$.editing),M=k?$.screenInfo:$.screenInfo={},E=y instanceof P.Edge,H=E?(L=y.s("edge.segments"),y.s("edge.points")||new P.List):(L=y._58O,y._59O),w=(M.S=L,M.P=[]),Q=v.getDataMatrix(y);if(y instanceof P.Polyline||y instanceof P.Edge&&$._interactor.getStyle("edgeElevationEditable")?(p=y.getElevation&&y.getElevation()||0,M.E=[]):(O=!1,H.each(function(y){y.e!==k5&&(O=!0)}),O&&(M.E=[])),H.each(function(y){M.E&&M.E.push(y.e!=k5?y.e:p),y=Q.apply(y),y=v.toScreenPosition(q,y),w.push(y.x,y.y)}),E&&(L=w.length,H=v.toScreenPosition(q,y._lastSourcePoint||(L?{x:w[0],y:w[1]}:{x:0,y:0})),E=v.toScreenPosition(q,y._lastTargetPoint||(L?{x:w[L-2],y:w[L-1]}:{x:0,y:0})),w.splice(0,0,H.x,H.y),w.push(E.x,E.y),M.E&&((L=y.getSourceAgent())instanceof P.Edge?M.E.splice(0,0,y.s("edge.source.offset.elevation")):M.E.splice(0,0,((y.s("edge.source.anchor.elevation")||.5)-.5)*L.getTall()*L.getScaleTall()+L.getElevation()+y.s("edge.source.offset.elevation")),(H=y.getTargetAgent())instanceof P.Edge?M.E.push(y.s("edge.target.offset.elevation")):M.E.push(((y.s("edge.target.anchor.elevation")||.5)-.5)*H.getTall()*H.getScaleTall()+H.getElevation()+y.s("edge.target.offset.elevation")))),!M.S||!M.S.size()){M.S=new P.List,M.S.add(1);for(var x=0;x<w.length/2-1;x++)M.S.add(2)}k&&!_||$.convertToCubicBezier(s),!$.activing||!_&&$.editing&&"realPoint"!==$.editing.type||(E=M.curve.findPairs($.activing.point),$.activing.pairs=E)},y.prototype._convertToNewPoint=function(y,q,_,s){for(var p,O=0,L=q.length;O<L;O++){if((p=q[O])._p1.isNearEnough(y)&&(!s||s.indexOf(p._p1)<0))return p._p1;if(p._p4.isNearEnough(y)&&(!s||s.indexOf(p._p4)<0))return p._p4}if(_)for(O=0,L=Math.min(_.length,L);O<L;O++){if((p=_[O])._p1===y&&(!s||s.indexOf(q[O]._p1)<0))return q[O]._p1;if(p._p4===y&&(!s||s.indexOf(q[O]._p4)<0))return q[O]._p4}},y.prototype.convertToCubicBezier=function(q){var _,s,p,O,L,$=this,y=new v.Math.Curve,k=$.screenInfo;y.createFromHtShape(k.P,k.S,k.E),k.curve=y,$.activing&&(_=y._curves,k=$.activing.point,s=$._convertToNewPoint(k,_,q),p=[],s&&($.activing.point=s,p.push(s)),$.activing.selections&&(O=-1,(L=$.activing.selections).forEach(function(y){O++,(s=$._convertToNewPoint(y,_,q,p))&&(L[O]=s,p.push(s))})))},y.prototype.check=function(y,q,_){if(!q||WA(q)||AA(q)){var s=this;if(s._interactor.setCursor("default"),s.editing=null,s.highlight=null,s.tipInfo=null,s.edgeEditResult=null,s.screenInfo)return Dl()||q&&AA(q)||s._checkEditCtrlPoint(_)||s._checkEditRealPoint(_)||s._checkEditElevation(_)||(q=s.screenInfo.curve.checkPoint(_,s._interactor.getStyle("curveIntersectSize")))&&((_=s.highlight={type:"insertKnot"}).bezier=q.bezier,_.point=q.intersection),s._interactor._42(),!0}},y.prototype.getAdjacentBeziers=function(y){var q=this.screenInfo;if(q){for(var _,s=q.curve._curves,p=[],O=k5,L=0,$=s.length;L<$;L++)if(_=s[L],O===k5){if(_._p4.isNearEnough(y))p.push(_),O=L;else if(_._p1.isNearEnough(y))return p.push(_),p}else{if(_._p1.isNearEnough(y))return p.push(_),p;_._p4.isNearEnough(y)&&(p[0]=_,O=L)}return p}},y.prototype.roundCorner=function(y){if(this.activing&&this.screenInfo){var q=this.screenInfo.curve._curves,_=(E=this.activing).point,s=this.getAdjacentBeziers(_);if(s&&2===s.length)var p=(O=s[1])._index,O=O.insertKnot(O.getTByPercentage(y/O.length))[1],L=(q[p]=O).p1,$=(k=s[0])._index,k=k.insertKnot(k.getTByPercentage(1-y/k.length))[0],M=(q[$]=k).p4;else{var E=E.pairs[0],H=q.length;if(E.c1){if(E.c2)return;var $=(k=s[0])._index,M=(k=k.insertKnot(k.getTByPercentage(1-y/k.length))[0]).p4,L=(L=(O=q[($+1)%H]).p1).clone().sub(_).setLength(y).add(_),p=$+1;if(1-Math.abs(M.clone().sub(_).normalize().dot(L.clone().sub(_).normalize()))<1e-8)return;q[$]=k}else{if(p=(O=s[0])._index,L=(O=O.insertKnot(O.getTByPercentage(y/O.length))[1]).p1,M=(M=(k=q[(p-1+H)%H]).p4).clone().sub(_).setLength(y).add(_),1-Math.abs(M.clone().sub(_).normalize().dot(L.clone().sub(_).normalize()))<1e-8)return;q[p]=O}}$=new v.Math.CubicBezier(M,(E=_).clone().sub(M).multiplyScalar(2/3).add(M),E.clone().sub(L).multiplyScalar(2/3).add(L),L),q.splice(p,0,$),this._writeToHt(),this.activing=null,this._interactor._42()}},y.prototype._checkEditRealPoint=function(y){var q,_,s,p,O,L,$=this.screenInfo.curve._curves,k=this._interactor.getStyle("curvePointIntersectSize"),M=1/0;for(k*=k,s=0,p=$.length;s<p;s++)O=(q=$[s])._p1,(L=y.distanceToSquared(O))<M&&(M=L,_=O),O=q._p4,(L=y.distanceToSquared(O))<M&&(M=L,_=O);return!(k<M)&&((k=this.highlight={type:"changeRealPoint"}).point=_,this.editing={type:"realPoint",point:_,shiftGuide:{point:_.clone(),dir:"x",limit:0}},this._interactor.setCursor("crosshair"),!0)},y.prototype._checkEditElevation=function(y){if(!this._interactor.getStyle("curveElevationVisible"))return!1;if(this.target instanceof P.Edge&&!this._interactor.getStyle("edgeElevationEditable"))return!1;var q=this.activing;if(!q)return!1;if(!(q=q.getCurrentEditingPoint()))return!1;var _=this._interactor,s=_.getStyle("curveElevationGuideShift");return(_=_.getStyle("curveElevationIntersectSize"))*_<y.distanceToSquared({x:q.x+s[0],y:q.y+s[1]})?void 0:(this.highlight={type:"elevation"},_=new v.Math.Vector2(y.x,y.y,q.e),this.editing={type:"elevation",startPoint:_},this._interactor.setCursor("crosshair"),!0)},y.prototype._checkEditCtrlPoint=function(y){var q=this;if(q.activing&&!q.activing.selections&&(k=q.getCurrentSelectintStatus())!==v.Curve.PointType.Straight){var _=q.activing.pairs;if(_){var s,p,O,L,$,k=q._interactor.getStyle("curvePointIntersectSize");k*=k;for(var M,E,H=1/0,w=0,Q=_.length;w<Q;w++)for(L=_[w],E=0;E<2;E++)L[$=0===E?"c1":"c2"]&&(M=y.distanceToSquared(L[$]))<H&&(H=M,s=L,p=w,O=$);return k<H?!1:(q.activing.hlpair=s,q.activing.hltype=O,(k=q.highlight={type:"changeCtrlPoint"}).point=s[O],q.editing={type:"ctrlPoint",pair:s,pairId:p,ctrlType:O,direction:s[O].clone().sub(q.activing.point).normalize()},q._interactor.setCursor("crosshair"),!0)}}},y.prototype.startEdit=function(y,q){y.startDragging(q);var _,s,p,O,L=this;L.highlight&&"insertKnot"===L.highlight.type&&(L.insertKnot(),L.gatherSingleTarget(L._interactor.gv,L.target),L.activing=null,L._checkEditRealPoint(L._interactor._getLogicalPoint(q)));(k=L._activing)&&("ctrlPoint"===($=L.editing?L.editing.type:null)?k.editingCtrl={pairId:L.editing.pairId,type:k.hltype}:"realPoint"===$&&(k.editingCtrl=!1));var $=L.highlight,k=P.Default.isCtrlDown(q);if(!$||Dl()||AA(q))return!(_=L._interactor.gv).setFocus(q)||_._scrolling?void 0:void(k?L._multiSelect={startPoint:_.lp(q)}:_.isPannable()&&(WA(q)||AA(q))&&(L._pan={tx:_.tx(),ty:_.ty()},y.fi({kind:"beginPan",event:q})));"changeRealPoint"===$.type&&(_=L.activing?L.activing.point:null,s=L.activing?L.activing.selections:null,k&&L.activing?_===$.point?(s?(L.activing={point:s[0]},1<s.length&&(s.splice(0,1),L.activing.selections=s)):L.activing=null,L.editing=null):s&&0<=(p=s.indexOf($.point))?(1<s.length?s.splice(p,1):delete L.activing.selections,L.editing=null):s?(s.push(_),L.activing={point:$.point,selections:s}):L.activing={point:$.point,selections:[_]}:s?_!==$.point&&(0<=(p=s.indexOf($.point))?(s.splice(p,1,_),L.activing={point:$.point,selections:s}):L.activing={point:$.point}):(_===$.point&&(O=L.activing.status),L.activing={point:$.point},O&&(L.activing.status=O)),y.fi({kind:"beginEditPoint",event:q}))},y.prototype.insertKnot=function(){var y=this.highlight;this.screenInfo.curve.insertKnot(y.bezier,y.point.t),this._writeToHt()},y.prototype._writeToHt=function(){var y,q,_,s=(O=this.screenInfo.curve.toHtShape()).points,p=[],O=O.segments,L=this._interactor.gv,$=(L.dm().beginTransaction(),this.target),k=$ instanceof P.Edge,M=v.getDataMatrix($).invert();($ instanceof P.Polyline||k&&this._interactor.getStyle("edgeElevationEditable"))&&(_=$.getElevation&&$.getElevation()||0);for(var E=0,H=s.length;E<H;E++)y=s[E],q=v.toWorldPosition(L,y),q=M.apply(q),isFinite(y.e)&&y.e!==_&&(q.e=y.e),p.push(q);$._writing=!0,k?($.s("edge.type","points"),$.setStyle("edge.segments",O),$.setStyle("edge.points",p.slice(1,p.length-1)),$.setStyle("edge.source.offset.x",0),$.setStyle("edge.source.offset.y",0),$.setStyle("edge.target.offset.x",0),$.setStyle("edge.target.offset.y",0),k=this._nextChangeEdgeHost,delete this._nextChangeEdgeHost,k&&("source"===k.type?$.setSource(k.host):$.setTarget(k.host)),this._writeEdgeHostAnchor("source",p[0]),this._writeEdgeHostAnchor("target",p[p.length-1])):p.length?($.setSegments(O),$.setPoints(p,!0)):$.removeFromDataModel(),L.dm().endTransaction(),delete $._writing},y.prototype._writeEdgeHostAnchor=function(y,q){var _=this.target,s=this._calcHostAnchor(_,y,q);s.index!==k5?(_.setStyle("edge."+y+".index",s.index),_.setStyle("edge."+y+".percent",k5),_.setStyle("edge."+y+".anchor.x",k5),_.setStyle("edge."+y+".anchor.y",k5),_.setStyle("edge."+y+".anchor.elevation",k5),_.setStyle("edge."+y+".offset.elevation",q.e)):s.percent!==k5?(_.setStyle("edge."+y+".percent",s.percent),_.setStyle("edge."+y+".index",k5),_.setStyle("edge."+y+".anchor.x",k5),_.setStyle("edge."+y+".anchor.y",k5),_.setStyle("edge."+y+".anchor.elevation",k5),_.setStyle("edge."+y+".offset.elevation",q.e)):(_.s("edge."+y+".anchor.x",s.x),_.s("edge."+y+".anchor.y",s.y),_.s("edge."+y+".anchor.elevation",s.e),s.offsetX||s.offsetY||s.offsetElevation?(_.s("edge."+y+".offset.x",s.offsetX),_.s("edge."+y+".offset.y",s.offsetY),_.s("edge."+y+".offset.elevation",s.offsetElevation)):(_.s("edge."+y+".offset.x",0),_.s("edge."+y+".offset.y",0),_.s("edge."+y+".offset.elevation",0)))},y.prototype._calcHostAnchor=function(y,q,_,s){s=s||("source"===q?y.getSource():y.getTarget());var p=this._interactor.gv;if(O=p.calculateAttachPoint(s,_))return O.info;if(Qx(s))return p.calculateEdgePosition(s,_);var O=s.getRotation(),L=s.getAnchor(),$=(Sx(s,p)&&(O=0),s.getElevation()),k=s.getTall()*s.getScaleTall(),$=((_.e||0)-y.s("edge."+q+".offset.elevation")-$)/k+.5,y=s.getScale();return O||y.x<0||y.y<0?(q=s.getMatrix().tfi(_),k=s.getSize(),{x:q.x/k.width+L.x,y:q.y/k.height+L.y,e:$}):(O=lu(p,s),{x:(_.x-O.x)/O.width,y:(_.y-O.y)/O.height,e:$})},y.prototype._handlePanning=function(y){var q,_,s,p,O=this._pan;O&&(O.started=!0,_=(q=this._interactor).gv,s=q._lastClientPoint,p=gA(y),p=Au(_,p,s),_.setTranslate(O.tx+p.x,O.ty+p.y),this.gatherSingleTarget(q.gv,this.target),q._42(),q.fi({kind:"betweenPan",event:y}))},y.prototype.handleEdit=function(y,q){var _,s,p,O,L,$,k,M,E,H,w,Q,x,S,X,T,i,N,a=this,l=a.editing;if(a._pan)a._handlePanning(q);else{if(a._multiSelect)return a._multiSelect.endPoint=y.lp(q),void a._interactor.redraw();l&&(l.inEdit=!0,s=a._interactor._getLogicalPoint(q),S=P.Default.isCtrlDown(q),M=P.Default.isShiftDown(q),X=l.type,_=a.activing,a._guideInfo=null,"ctrlPoint"===X&&M?(E=a.editing.direction.clone(),w=_.point,x=E.dot(s.clone().sub(w)),s=E.setLength(x).add(w)):"ctrlPoint"!==X&&"realPoint"!==X||("realPoint"===X&&M&&(p=(M=a.editing.shiftGuide).point,Q=Math.abs(s.x-p.x),(T=Math.abs(s.y-p.y))<Q&&Q>M.limit&&"y"===M.dir&&(M.dir="x"),Q<T&&T>M.limit&&"x"===M.dir&&(M.dir="y"),"x"===(E=M.dir)?(s.y=p.y,M.limit=Math.max(M.limit,Q)):"y"===E&&(s.x=p.x,M.limit=Math.max(M.limit,T))),S||((Q=a._isEditEdgeSourceTarget())&&(H=s.clone()),M=a._guidingToEdit(s,E),i=T=1/0,(X="realPoint"===X?a._interactor.gridGuide.findClosest(s,E,!0):null)&&(X.x&&(T=X.x),X.y&&(i=X.y)),E=!1,M&&(M.xList&&(Math.abs(M.x)<=Math.abs(T)?(E=!0,T=M.x):delete M.xList),M.yList&&(Math.abs(M.y)<=Math.abs(i)?(E=!0,i=M.y):delete M.yList),E&&(a._guideInfo=M)),isFinite(T)&&(s.x+=T),isFinite(i)&&(s.y+=i),E&&(M.v=s),Q&&(X=E?s.clone():null,s.copy(H),(T=a._editEdgeSourceTarget(Q,s,S,X))&&(N=(a.edgeEditResult=T).tipText,T.isFixed&&(a._guideInfo=null))))),O=a.screenInfo.curve,"realPoint"===l.type?((w=l.point).e!==k5&&(s.e=w.e),O.moveRealPoint(w,s),l.point=s,a.highlight.point=s,i=_.status,L=_.selections,a.activing={point:s,status:i},L&&($=s.clone().sub(w),k=0,L.forEach(function(y){var q=y.clone().add($);O.moveRealPoint(y,q),L[k++]=q}),a.activing.selections=L)):"ctrlPoint"===l.type?(M=_.pairs[l.pairId],O.moveCtrlPoint(M,s,l.ctrlType),((E=_.status)===(H=v.Curve.PointType).Mirrored||E===H.Asymmetric)&&M.c1&&M.c2&&(w=new v.Math.Vector2(_.point),Q="c1"===l.ctrlType?"c2":"c1",E===v.Curve.PointType.Mirrored?O.moveCtrlPoint(M,w.clone().multiplyScalar(2).sub(s),Q):E===H.Asymmetric&&(x=M[Q].clone().sub(w).length(),S=w.clone().sub(M[l.ctrlType]).setLength(x).add(w),isNaN(S.x)||O.moveCtrlPoint(M,S,Q))),_._firePointChange()):"elevation"===l.type&&(X=(p=l.startPoint).e+(p.y-s.y)/y._zoom,a._setCurrentPointImpl("e",X),_._firePointChange(),N="E: "+v.toFixed(X)),(T=P.Default.getLogicalPoint(q,a._interactor._canvas)).x+=v.Icons.TipShiftX,T.y+=v.Icons.TipShiftY,N||(i=v.toWorldPosition(y,s),N=v.toFixed(i.x)+", "+v.toFixed(i.y)),a.tipInfo={helperPos:T,text:N,size:N.length},a._writeToHt(),a._interactor.fi({kind:"betweenEditPoint",event:q}))}},y.prototype._setCurrentPointImpl=function(y,q){var _=this._activing;if(!_)return!1;var s=this.target;if(!s)return!1;var p=_.getCurrentEditingPoint();if(!p)return!1;var O,L,$,k,M,E,H=_.editingCtrl;return H||(O=p.clone()),"e"===y?p.e=q:("x"===y||"y"===y?(L=_._lastFirePoint,L="x"===y?{x:q,y:L?L.y:0}:{x:L?L.x:0,y:q}):"object"==typeof y?(L=y).e!==k5&&(p.e=y.e):(L={x:y,y:q},arguments[2]!==k5&&(p.e=arguments[2])),y=v.getDataMatrix(s),L=v.toScreenPosition(this._interactor.gv,y.apply(L)),p.x=L.x,p.y=L.y),H||($=O.multiplyScalar(-1).add(p),$x(p.e)&&$x(O.e)&&($.e=p.e-O.e),(k=this.screenInfo.curve).moveCtrlDueToRealPointMovement(p,$),(M=_.selections)&&(E=0,M.forEach(function(y){var q=y.clone().add($);isFinite($.e)&&(q.e=(isFinite(y.e)?y.e:s.getElevation()||0)+$.e),k.moveRealPoint(y,q),M[E++]=q}),_.selections=M)),!0},y.prototype.setCurrentPoint=function(y,q){return!!this._setCurrentPointImpl(y,q)&&(this._writeToHt(),!0)},y.prototype._isEditEdgeSourceTarget=function(){if(!(this.target instanceof P.Edge))return!1;var y=this.editing.point,q=this.screenInfo.curve._curves;return y===q[0]._p1?"source":y===q[q.length-1]._p4&&"target"},y.prototype._editEdgeSourceTarget=function(q,y,_,s){var p,O,L,$,k,M,E,H,w,Q=this,x=Q.target;if(L="source"===q?x.getSource():x.getTarget())return p=Q._interactor.gv,k=v.toWorldPosition(p,y),(M=(M=(O=Q._calcHostAnchor(x,q,k,L)).index!==k5||O.percent!==k5?O.distance*p.getZoom()>Q._interactor.getStyle("edgeHostEdgeMaxDistance"):!!Q._interactor.getStyle("edgeHostDetectPerFrame")||O.x<0||1<O.x||O.y<0||1<O.y)&&p.getDataAt(k,function(y){return!!p.isSelectable(y)&&!!p.isSourceTargetEditable(x,y,q)&&!!x.canSetSourceTarget(y,q)}))&&(E=Q._calcHostAnchor(x,q,k,M),Q._nextChangeEdgeHost={type:q,host:L=M},O=E),M=!1,_||O.x===k5?O.percent===k5&&O.index===k5||(M=!0,$=O.point):(E=Q._interactor.getStyle("anchorRound"),_=Q._interactor.getStyle("anchorSensitivity"),(H=p.calculateAttachPoint(L,k))?(O=H.info,M=!0):((O=s?Q._calcHostAnchor(x,q,v.toWorldPosition(p,s),L):O).x=v.roundTo(O.x,E,_),O.y=v.roundTo(O.y,E,_)),$=mu(p,L,0,O.offsetX||0,O.offsetY||0,O.x,O.y)),$&&(k=v.toScreenPosition(p,$),y.x=k.x,y.y=k.y),Q._edgeHostGuideInfo={corners:v.getTargetCornersOnScreen(p,L),attach:H?H.index:-1,host:L},O.percent!==k5?w="percent: "+O.percent.toFixed(2):O.index!==k5?w="index: "+O.index:(w=O.x.toFixed(2)+", "+O.y.toFixed(2),(O.offsetX||O.offsetY)&&(w+=" offset: "+O.offsetX.toFixed(2)+", "+O.offsetY.toFixed(2))),{host:L,anchor:O,tipText:w,isFixed:M}},y.prototype._guidingToEdit=function(y,q){if(x=this.screenInfo.curve){var _,s,p,O,L,$,k,M,E=x._curves,H=1/0,w=1/0,Q=[];for(this.editing&&"realPoint"===this.editing.type&&(M=this.editing.point),L=0,$=2*E.length;L<$;L++)k=E[Math.floor(L/2)][L%2?"_p4":"_p1"],0<=Q.indexOf(k)||(Q.push(k),M&&M===k||(p=k.x-y.x,O=k.y-y.y,Math.abs(p)<Math.abs(H)?(H=p,_=[k]):p===H&&_.push(k),Math.abs(O)<Math.abs(w)?(w=O,s=[k]):O===w&&s.push(k)));var x=this._interactor.getStyle("smartGuideThreshold");if((Math.abs(H)>x||"y"===q)&&(_=null),(Math.abs(w)>x||"x"===q)&&(s=null),(_||s)&&(x=!1,q={},_&&(x=!0,q.xList=_,q.x=H),s&&(x=!0,q.yList=s,q.y=w),x))return q}},y.prototype._46O=function(y){var q=this;q.editing&&(q.editing=null,q._interactor.fi({kind:"endEditPoint",event:y})),q._guideInfo=null,q._edgeHostGuideInfo=null,q._pan&&(q._pan=null,q._interactor.fi({kind:"endPan",event:y})),q._multiSelect&&(q._handleMultiSelect(q._multiSelect,y),q._multiSelect=null),q.tipInfo=null,q.edgeEditResult=null},y.prototype._handleMultiSelect=function(y,q){if(y.startPoint&&y.endPoint){for(var _,s,p,O,L=this._interactor,$=L.gv,k=v.toScreenPosition($,y.startPoint),$=v.toScreenPosition($,y.endPoint),M=P.Default.unionPoint(k,$),E=this.screenInfo.curve._curves,H=[],w=function(y){y.x>=M.x&&y.y>=M.y&&y.x<=M.x+M.width&&y.y<=M.y+M.height&&H.indexOf(y)<0&&H.push(y)},Q=0,x=E.length;Q<x;Q++)w((p=E[Q])._p1),w(p._p4);if(H.length){var S=(y=this.activing||{}).selections||[],X=(y.point&&S.push(y.point),P.Default.isShiftDown(q)),T=q.altKey;if(T&&!X)for(O=H,H=[],Q=0,x=O.length;Q<x;Q++)_=O[Q],0<=(s=S.indexOf(_))&&H.push(_);for(Q=0,x=S.length;Q<x;Q++)_=S[Q],0<=(s=H.indexOf(_))?X&&!T||(H[s]=k5):H.push(_);for(O=H,H=[],Q=0,x=O.length;Q<x;Q++)O[Q]&&H.push(O[Q]);0===(x=H.length)?this.activing=null:1===x?this.activing={point:H[0]}:(_=H[x-1],this.activing={point:_,selections:H.splice(0,x-1)}),L.redraw()}}},y.prototype._canDeletePoint=function(y,q){if(!(this.target instanceof P.Edge))return!0;var _=y._curves[0],y=y._curves[y._curves.length-1];return _._p1!==q&&y._p4!==q},y.prototype.handleDelete=function(){var q,_,s=this;s.activing&&s.screenInfo&&(q=P.Default.isShiftDown(),_=s.screenInfo.curve,s._canDeletePoint(_,s.activing.point)&&_.deleteRealPoint(s.activing.point,q),s.activing.selections&&s.activing.selections.forEach(function(y){s._canDeletePoint(_,y)&&_.deleteRealPoint(y,q)}),s.activing=null,delete s.editing,delete s.tipInfo,delete s.edgeEditResult,delete s._pan,delete s._multiSelect,s._writeToHt(),s._interactor.fp("deleteShapePoint",!1,!0))},y.prototype.handleDoubleClick=function(y){var q,y=this._interactor._getLogicalPoint(y);if(this.screenInfo&&this._checkEditRealPoint(y))return y=(y=this.getCurrentSelectintStatus())===(q=v.Curve.PointType).Mirrored?q.Straight:q.Mirrored,this._setCurrentSelectionStatus(y),this._interactor._42(),!0},y.prototype._drawHighlight=function(y){var q,_,s=this.highlight;s&&(_=s.bezier,q=this._interactor,_&&v.Icons.DrawIcon(q,y,v.Icons.ShapeHighlightCurve,[_._p1.x,_._p1.y,_._p2.x,_._p2.y,_._p3.x,_._p3.y,_._p4.x,_._p4.y]),(_=s.point)&&"insertKnot"===s.type&&v.Icons.DrawIcon(q,y,v.Icons.ShapeHighlighPoint,_))},y.prototype._drawGuide=function(y){var q=this._guideInfo;if(q)for(var _,s,p,O=q.v,L=0;L<2;L++)if(p=0===L?q.xList:q.yList)for(_=0,s=p.length;_<s;_++)v.Icons.DrawIcon(this._interactor,y,v.Icons.ShapeGuideLine,[O.x,O.y,p[_].x,p[_].y])},y.prototype._drawCurrentPoint=function(q){if(this.activing){var y=this.activing,_=this.getCurrentSelectintStatus(),s=this._interactor;if(_!==v.Curve.PointType.Straight){var p=y.pairs,O=(y.hlpair,y.hltype,y.selections),L=y.editingCtrl;if(p&&!O)for(var $,k=0,M=p.length;k<M;k++)$=p[k],L&&k===L.pairId&&$[L.type]?v.Icons.DrawIcon(s,q,v.Icons.ShapeActivingCtrl,{point:$.point,c1:$.c1,c2:$.c2,hl:L.type}):v.Icons.DrawIcon(s,q,v.Icons.ShapeActivingCtrl,$)}v.Icons.DrawIcon(s,q,v.Icons.ShapeHighlighRealPoint,this.activing.point),O&&O.forEach(function(y){v.Icons.DrawIcon(s,q,v.Icons.ShapeHighlighRealPoint,y)})}},y.prototype.clear=function(){this.editing=null,this._guideInfo=null,this.activing=null,this.highlight=null},y.prototype._42=function(q){var y=this,_=(y.info={},y.editing||(y.screenInfo=null),y._interactor);if(_.editDetail){var s,p,O=_.gv;if(!y.target||!O.isSelected(y.target)||!O.isVisible(y.target))return _.editDetail=!1,void y.clear();y.gatherSingleTarget(O,y.target),v.Icons.DrawIcon(_,q,v.Icons.ShapeBgCurve,y.screenInfo),y._interactor.getStyle("curveElevationVisible")&&(y.target instanceof P.Polyline||y.target instanceof P.Edge&&y._interactor.getStyle("edgeElevationEditable"))&&y.activing&&(s=y.activing.getCurrentEditingPoint())&&"string"!=typeof s.e&&v.Icons.DrawIcon(_,q,v.Icons.EdgeElevationGuide,s),y._drawHighlight(q),y._drawCurrentPoint(q),y._getRealPoint().forEach(function(y){v.Icons.DrawIcon(_,q,v.Icons.ShapePoint,y)}),y._drawGuide(q),y.tipInfo&&y._interactor.getStyle("curveTipVisible")&&v.Icons.DrawIcon(_,q,v.Icons.TipHelper,y.tipInfo),y._edgeHostGuideInfo&&_._drawHostGuide(y._edgeHostGuideInfo),y.edgeEditResult&&y._drawEdgeHostHighlight(q,y.edgeEditResult.host,y.edgeEditResult.anchor),y._multiSelect&&y._multiSelect.endPoint&&((s=P.Default.unionPoint(v.toScreenPosition(O,y._multiSelect.startPoint),v.toScreenPosition(O,y._multiSelect.endPoint))).color=O.getRectSelectBorderColor(),q.save(),q.setTransform(1,0,0,1,0,0),O=E5.devicePixelRatio,p=s.borderWidth=Math.round(O),p/=2,s.x=Math.round(s.x*O)+p,s.y=Math.round(s.y*O)+p,s.width=Math.round(s.width*O),s.height=Math.round(s.height*O),v.Icons.DrawIcon(_,q,v.Icons.SimpleRect,s),q.restore())}else y.clear()},y.prototype._drawEdgeHostHighlight=function(y,q,_){this.drawEdgeHostHighlight(y,q,_),this._interactor.redraw()},y.prototype.drawEdgeHostHighlight=function(y,q,_){if(Qx(q)){for(var s,p,O=this._interactor,L=O.gv,q=L.getDataUI(q),$=du(q),k=[],M=0,E=$.points.length;M<E;M++)p=v.toScreenPosition(L,$.points.get(M)),k.push(p.x,p.y);$.segments&&(s=$.segments.toArray());for(var H=O.getStyle("edgeHostHighlighPeriod"),w=O.getStyle("edgeHostEdgeHighlighColor"),Q=(v.Icons.DrawIcon(O,y,v.Icons.ShapeBgCurve,{P:k,S:s,color:w,dynamicVisible:_.index===k5,dynamicPeriod:H}),w=O.getStyle("edgeHostPointHighlighColor"),OQ(q)),M=0,E=Q.length;M<E;M++){var x=Q[M],x=v.toScreenPosition(L,x);v.Icons.DrawIcon(O,y,v.Icons.ShapePoint,{point:{x:x.x,y:x.y},color:w,size:12,dynamicVisible:M===_.index,dynamicPeriod:H})}}},y.prototype._getRealPoint=function(){var _,y=this.screenInfo,s=y.P,p=y.S,O=-1,L=[],$=-1,k=p.length;return p.each(function(y){$++;var q=1;if(3===y)q=2;else if(4===y)q=3;else if(5===y)return;O+=q,_=k<=$+1||1===p.get($+1),L.push({point:{x:s[2*O],y:s[2*O+1]},segmentIndex:$,pointIndex:O,isEnd:_})}),L},y.prototype.getEditingPointsInfo=function(y){var q=this,_=q.activing;if(!_)return!1;var s=_.point;if(!s)return!1;var p=this._getRealPoint(),O=[{screen:s}];_.selections&&_.selections.forEach(function(y){O.push({screen:y})});var L,$,k=p.length;return O.forEach(function(y){for(L=0;L<k;L++)if($=p[L],y.screen.isNearEnough($.point)){y.segmentIndex=$.segmentIndex,y.pointIndex=$.pointIndex,y.point=q.target.getPoints().get($.pointIndex);break}}),y&&O.sort(function(y,q){return y.segmentIndex-q.segmentIndex}),O};(((_=v.MoveHelper=function(y){this.catalog="Move",this._interactor=y}).prototype={}).constructor=_).prototype.calcShift=function(y,q,_){var s,p=this,O=p._interactor.gv,L=O.lp(q);if("beginMove"===y&&p._gatherGridInfo(_._lastLogicalPoint||L),y=p._target){if(_=y.downPosition){var $=p._interactor.getStyle("moveSensitivity")/O._zoom;if(_.distanceTo(L)<$)return{x:0,y:0};delete y.downPosition}P.Default.isShiftDown(q)&&(L=p._dealShiftDown(L),s=y.shiftGuide.dir);var k,_=y.rawPos={x:y.pos.x+L.x-y.lp.x,y:y.pos.y+L.y-y.lp.y};if(P.Default.isCtrlDown(q))return k=p._calcShiftByAddon(),p._target.node instanceof v.Group&&((E=p._target.node)._position.x+=k.x,E._position.y+=k.y),k;if($=p._interactor.rectGuide,y.node instanceof P.Data&&y.node.s("2d.attachable")&&(L=p._calcAttachNodeShift(y.node,_),$.clear(),L))return L;for(var M,E,H=y.x+_.x,w=y.y+_.y,q={x:H,y:w},L={x:H+y.w/2,y:w+y.h/2},Q={x:H+y.w,y:w+y.h},x=p._interactor.gridGuide,S=[$.findClosest(q,s),$.findClosest(L,s),$.findClosest(Q,s),x.findClosest(q,s),x.findClosest(L,s),x.findClosest(Q,s)],X=1/0,T=1/0,i=0,N=S.length;i<N;i++)(M=S[i])&&(H=M.x,w=M.y,isFinite(H)&&Math.abs(H)<Math.abs(X)&&(X=H),isFinite(w)&&Math.abs(w)<Math.abs(T)&&(T=w));return isFinite(X)||(X=0),isFinite(T)||(T=0),k=p._calcShiftByAddon(X,T),p._target.node instanceof v.Group&&((E=p._target.node)._position.x+=k.x,E._position.y+=k.y),$=y.node,Sx($,O)||p._interactor.rectGuide.gatherLines({node:$,x:y.x+(_.x+X),y:y.y+(_.y+T),w:y.w,h:y.h},s),k}},_.prototype._calcShiftByAddon=function(y,q){var _=(s=this._target).rawPos,s=s.node.getPosition();return{x:_.x-s.x+(y=y||0),y:_.y-s.y+(q=q||0)}},_.prototype._dealShiftDown=function(y){var q=this._target.shiftGuide,_=this._target.lp,s=Math.abs(y.x-_.x),p=Math.abs(y.y-_.y),O=(p<s&&s>q.limit&&"y"===q.dir&&(q.dir="x"),s<p&&p>q.limit&&"x"===q.dir&&(q.dir="y"),q.dir);return"x"===O?(y.y=_.y,q.limit=Math.max(q.limit,s)):"y"===O&&(y.x=_.x,q.limit=Math.max(q.limit,p)),y},_.prototype._isAttachableLineShape=function(y){if(!y.getSegments)return!1;var q=y.getSegments();if(!q)return!0;for(var _=1,s=(q=q instanceof P.List?q.getArray():q).length;_<s;_++)if(2!==q[_])return!1;return!0},_.prototype._calcAttachNodeShift=(_$=new f,s$=new f,p$=new f,O$=new f,function(y,q){var _=this._interactor.gv,s=y.getHost(),p=_.getDataAt(q,function(y){return!!y.s("2d.hostable")});if(p&&s!==p&&y.setHost(p),!p)return this._edgeHostGuideInfo=null,y.setHost(null);var O,L,s=this._edgeHostGuideInfo={corners:v.getTargetCornersOnScreen(_,p),host:p,attach:-1};if(!this._isAttachableLineShape(p))return(O=_.calculateAttachPoint(p,q))?(L=O.point,s.attach=O.index,this._calcShiftByAddon(L.x-q.x,L.y-q.y)):void 0;for(var $,k,M,E,H,w,Q=p.getPoints(),x=Q.size(),S=p.getPointsMatrix2d(),X=1/0,T=0;T<x&&(T!==x-1||p.isClosePath());T++)0!==T?s$.copy(p$):S.apply(Q.get(T),s$),S.apply(T===x-1?Q.get(0):Q.get(T+1),p$),_$.copy(q).sub(s$),O$.copy(p$).sub(s$),$=O$.length(),O$.divideScalar($),(k=_$.dot(O$))<0?k=0:$<k&&(k=$),O$.multiplyScalar(k).add(s$),(M=_$.copy(q).sub(O$).lengthSq())<X&&(X=M,w=T,E=k,H=$);return Math.sqrt(X)*_.getZoom()>this._interactor.getStyle("attachThreshold")?(y.s({"attach.index":-1}),void y.setHost(null)):(y.s("attach.offset.opposite")&&(E=H-E),y.s({"attach.index":w,"attach.offset":y.s("attach.offset.relative")?E/H:E}),{x:0,y:0})}),_.prototype._gatherGridInfo=function(y){var q,_,s=this._interactor;if((p=s._getValidSelection()).length){if(1===p.length){if(!(q=p[0]).getRect)return void(this._target=null)}else if(!(q=v.Group.findOrCreateGroup(p,s._uuid)))return void(this._target=null)}else{var p=s.gv.sm().getSelection();if(p.length&&!(q=p.get(0)).getRect)return void(this._target=null)}q&&(p=q.getPosition(),_=q.getRect(),this._target={node:q,x:_.x-p.x,y:_.y-p.y,w:_.width,h:_.height,lp:{x:y.x,y:y.y},pos:{x:p.x,y:p.y},shiftGuide:{dir:"x",limit:0},downPosition:new v.Math.Vector2(y)},s.rectGuide.gatherRects())},_.prototype.clear=function(){this._edgeHostGuideInfo=null,this._interactor.rectGuide.clear(),this._interactor._42()},_.prototype._42=function(){var y=this._edgeHostGuideInfo;y&&this._interactor._drawHostGuide(y)};var q$,_$,s$,p$,O$,L$,$$,k$,M$,E$,H$,w$,Q$,x$,S$,X$,T$,i$,N$,a$,l$,j$,Z$,K$,C$,B$,F$,V$,h$,t$,u$,J$,D$,c$,R$,o$,Y$,P$,m$,W$,x5,A$,z$,e$,f$,G$,r$,g$,n$,v$,b$,I$,U$,d$,yq,qq,_q,sq,pq,Oq,Lq,$q,kq,Mq,Eq,Hq,wq,Qq,xq,Sq,Xq,Tq,iq,Nq,aq,lq,jq,Zq,Kq,Cq,Bq,Fq,Vq,hq,tq,uq,Jq,Dq,cq,Rq,oq,Yq,Pq,mq,Wq,Aq,zq,eq,fq,Gq,rq,gq,nq,vq,bq,Iq,Uq,dq,y4,q4,_4,s4,p4,O4,L4,$4,k4,M4,E4,H4,w4,Q4,x4,S4,X4,T4,i4,N4,a4,l4,j4,Z4,K4,C4,B4,F4,V4,h4,t4,u4,J4,D4,c4,R4,o4,Y4,P4,m4,W4,A4=P.WebGLConstants=o.freeze({DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047}),z4=(L$="undefined"!=typeof WebGL2RenderingContext,$$={aliasedLineWidthRange:33902,aliasedPointSizeRange:33901,maxCombinedTextureImageUnits:35661,maxCubeMapTextureSize:34076,maxFragmentUniformVectors:36349,maxRenderBufferSize:34024,maxTextureImageUnits:34930,maxTextureSize:3379,maxVaryingVectors:36348,maxVertexAttribs:34921,maxVertexTextureImageUnits:35660,maxVertexUniformVectors:36347,maxViewportDIMs:3386},k$={max3DTextureSize:32883,maxArrayTextureLayers:35071,maxColorAttachments:36063,maxCombinedFragmentUniformComponents:35379,maxCombinedUniformBlocks:35374,maxCombinedVertexUniformComponents:35377,maxDrawBuffers:34852,maxElementIndex:36203,maxElementsIndices:33001,maxElementsVertices:33e3,maxFragmentInpuComponents:37157,maxFragmentUniformBlocks:35373,maxFragmentUniformComponents:35657,maxProgramTexelOffset:35077,maxSamples:36183,maxTextureLODBias:34045,maxTransformFeedbackInterleavedComponents:35978,maxTransformFeedbackSeparateAttribs:35979,maxTransformFeedbackSeparateComponents:35968,maxUniformBlockSize:35376,maxUniformBufferBindings:35375,maxVaryingComponents:35659,maxVertexOutputComponents:37154,maxVertexUniformBlocks:35371,maxVertexUniformComponents:35658,minProgramTexelOffset:35076},{for:function(y){var q=y._info;return q||(y._info=q=function(s,y){(y=y==k5?{}:y).version=L$&&(s instanceof WebGL2RenderingContext||"[object WebGL2RenderingContext]"===o.prototype.toString.call(s))?2:1,y.extensions=function(){for(var y={},q=s.getSupportedExtensions(),_=q.length;_--;)y[q[_]]=function(y,q){var _=k5;return function(){return _=_||y.getExtension(q)}}(s,q[_]);return y}();for(var q=o.keys($$),_=0,p=q.length;_<p;++_)y[O=q[_]]=s.getParameter($$[O]);if(1<y.version)for(var O,_=0,p=(q=o.keys(k$)).length;_<p;++_)y[O=q[_]]=s.getParameter(k$[O]);return y}(y,q)),q}}),e4=(M$="undefined"!=typeof Float32Array&&new Float32Array(4),q={viewport:{def:[0,0,NaN,NaN],getter:function(y){return y.getParameter(2978)},setter:function(y,q){var _=q[2]!=q[2]?y.drawingBufferWidth-q[0]:q[2],s=q[3]!=q[3]?y.drawingBufferHeight-q[1]:q[3];y.viewport(q[0],q[1],_,s)}},dither:{def:!1,getter:function(y){return y.isEnabled(3024)},setter:function(y,q){q?y.enable(3024):y.disable(3024)}},rasterizerDiscard:{def:!1,getter:function(y){return 1<z4.for(y).version&&y.isEnabled(35977)},setter:function(y,q){1!==z4.for(y).version&&(q?y.enable(35977):y.disable(35977))}},lineWidth:{def:1,getter:function(y){return y.lineWidth?y.getParameter(2849):1},setter:function(y,q){y.lineWidth&&y.lineWidth(q)}},color:{clear:{def:[0,0,0,0],getter:function(y){return y.getParameter(3106)},setter:function(y,q){y.clearColor(q[0],q[1],q[2],q[3])},parse:oM},mask:{def:[!0,!0,!0,!0],getter:function(y){return y.getParameter(3107)},setter:function(y,q){y.colorMask(q[0],q[1],q[2],q[3])}}},blend:{enabled:{def:!1,getter:function(y){return y.isEnabled(3042)},setter:function(y,q){q?y.enable(3042):y.disable(3042)}},color:{def:[0,0,0,0],getter:function(y){return y.getParameter(32773)},setter:function(y,q){y.blendColor(q[0],q[1],q[2],q[3])},parse:oM},equation:{def:[32774,32774],getter:function(y){return[y.getParameter(32777),y.getParameter(34877)]},setter:function(y,q){y.blendEquationSeparate(q[0],q[1])},parse:function(y){var q=y.length;return 1<q?y:(M$[1]=M$[0]=1===q?y[0]:y,M$)}},func:{def:[1,A4.ZERO,1,A4.ZERO],getter:function(y){return[y.getParameter(32969),y.getParameter(32968),y.getParameter(32971),y.getParameter(32970)]},setter:function(y,q){y.blendFuncSeparate(q[0],q[1],q[2],q[3])},parse:function(y){return 3<y.length?y:(M$[2]=M$[0]=y[0],M$[3]=M$[1]=y[1],M$)}}},cullFace:{enabled:{def:!1,getter:function(y){return y.isEnabled(2884)},setter:function(y,q){q?y.enable(2884):y.disable(2884)}},mode:{def:1029,getter:function(y){return y.getParameter(2885)},setter:function(y,q){y.cullFace(q)}},frontFace:{def:2305,getter:function(y){return y.getParameter(2886)},setter:function(y,q){y.frontFace(q)}}},scissor:{enabled:{def:!1,getter:function(y){return y.isEnabled(3089)},setter:function(y,q){q?y.enable(3089):y.disable(3089)}},box:{def:[0,0,NaN,NaN],getter:function(y){return y.getParameter(3088)},setter:function(y,q){var _=q[2]!=q[2]?y.drawingBufferWidth-q[0]:q[2],s=q[3]!=q[3]?y.drawingBufferHeight-q[1]:q[3];y.scissor(q[0],q[1],_,s)}}},depth:{enabled:{def:!1,getter:function(y){return y.isEnabled(2929)},setter:function(y,q){q?y.enable(2929):y.disable(2929)}},clear:{def:1,getter:function(y){return y.getParameter(2931)},setter:function(y,q){y.clearDepth(q)}},mask:{def:!0,getter:function(y){return y.getParameter(2930)},setter:function(y,q){y.depthMask(q)}},range:{def:[0,1],getter:function(y){return y.getParameter(2928)},setter:function(y,q){y.depthRange(q[0],q[1])}},func:{def:513,getter:function(y){return y.getParameter(2932)},setter:function(y,q){y.depthFunc(q)}}},stencil:{enabled:{def:!1,getter:function(y){return y.isEnabled(2960)},setter:function(y,q){q?y.enable(2960):y.disable(2960)}},clear:{def:0,getter:function(y){return y.getParameter(2961)},setter:function(y,q){y.clearStencil(q)}},frontMask:{def:255,getter:function(y){return y.getParameter(2968)},setter:function(y,q){y.stencilMaskSeparate(1028,q)}},frontOp:{def:[7680,7680,7680],getter:function(y){return[y.getParameter(2964),y.getParameter(2965),y.getParameter(2966)]},setter:function(y,q){y.stencilOpSeparate(1028,q[0],q[1],q[2])}},frontFunc:{def:[519,0,255],getter:function(y){return[y.getParameter(2962),y.getParameter(2967),y.getParameter(2963)]},setter:function(y,q){y.stencilFuncSeparate(1028,q[0],q[1],q[2])}},backMask:{def:255,getter:function(y){return y.getParameter(36005)},setter:function(y,q){y.stencilMaskSeparate(1029,q)}},backOp:{def:[7680,7680,7680],getter:function(y){return[y.getParameter(34817),y.getParameter(34818),y.getParameter(34819)]},setter:function(y,q){y.stencilOpSeparate(1029,q[0],q[1],q[2])}},backFunc:{def:[519,0,255],getter:function(y){return[y.getParameter(34816),y.getParameter(36003),y.getParameter(36004)]},setter:function(y,q){y.stencilFuncSeparate(1029,q[0],q[1],q[2])}}},hint:{generateMipmap:{def:4352,getter:function(y){return y.getParameter(33170)},setter:function(y,q){y.hint(33170,q)}},fragmentShaderDerivative:{def:4352,getter:function(y){var q=z4.for(y);return 1!==q.version||q.extensions.OES_standard_derivatives?y.getParameter(35723):4352},setter:function(y,q){var _=z4.for(y);(1<_.version||_.extensions.OES_standard_derivatives)&&y.hint(35723,q)}}},pixelStore:{packAlignment:RM(4,3333,!1),unpackAlignment:RM(4,3317,!1),unpackFlipY:RM(!1,37440,!1),unpackPremultiplyAlpha:RM(!1,37441,!1),unpackColorspaceConversion:RM(37444,37443,!1),packRowLength:RM(0,3330,!0),packSkipPixels:RM(0,3332,!0),packSkipRows:RM(0,3331,!0),unpackRowLength:RM(0,3314,!0),unpackImageHeight:RM(0,32878,!0),unpackSkipPixels:RM(0,3316,!0),unpackSkipRows:RM(0,3315,!0),unpackSkipImages:RM(0,32877,!0)},polygonOffset:{enabled:{def:!1,getter:function(y){return y.isEnabled(32823)},setter:function(y,q){q?y.enable(32823):y.disable(32823)}},value:{def:[0,0],getter:function(y){return[y.getParameter(32824),y.getParameter(10752)]},setter:function(y,q){y.polygonOffset(q[0],q[1])}}},sampleCoverage:{enabled:{def:!1,getter:function(y){return y.isEnabled(32928)},setter:function(y,q){q?y.enable(32928):y.disable(32928)}},alpha:{def:!1,getter:function(y){return y.isEnabled(32926)},setter:function(y,q){q?y.enable(32926):y.disable(32926)}},value:{def:[1,!1],getter:function(y){return[y.getParameter(32938),y.getParameter(32939)]},setter:function(y,q){y.sampleCoverage(q[0],q[1])}}}},q=Ou.create(q,function(y){return"def"in y}),PM.prototype.reset=function(){for(var y=this._struct.children,q=y.length;q--;){var _=y[q],s=_.name;_.isLeaf?this[s]=_.desc.def:this._branches[s].reset()}},PM.prototype.save=function(y){y==k5&&(y={});for(var q=this._struct.children,_=q.length;_--;){var s=q[_],p=s.name;s.isLeaf?y[p]=YM(this._record[p]):((s=y[p])==k5&&(y[p]=s={}),this._branches[p].save(s))}return y},PM.prototype.sync=function(y,q){for(var _=this._struct.children,s=_.length;s--;){var p=_[s],O=p.name;p.isLeaf?!q&&this._leafSync[O]||(y?this._record[O]=p.desc.getter(this.gl):p.desc.setter(this.gl,this._record[O]),this._leafSync[O]=!0):this._branches[O].sync(y,q)}},PM.prototype.syncLoss=function(){for(var y=this._struct.children,q=y.length;q--;){var _=y[q];_.isLeaf?this._leafSync[_.name]=!1:this._branches[_.name].syncLoss()}},PM.prototype.apply=function(y){for(var q=this._struct.children,_=q.length;_--;){var s=q[_],p=s.name;p in y&&(s.isLeaf?this[p]=y[p]:this._branches[p].apply(y[p]))}},PM.prototype.append=function(y){var q,_=this._struct.childMap;for(q in y){var s=_[q];s&&(s.isLeaf?this[q]=y[q]:this._branches[q].append(y[q]))}},E$=function $(p){var k=[];function y(y,q){PM.call(this,p,y,q);for(var _=k.length;_--;){var s=k[_];this._branches[s._name]=new s._type(y,this._record[s._name])}}return iM(y,PM),p.forEach(function(y,q){var _,s,p=y.name,O=NM(y.desc.def),L=O&&y.desc.def.length;y.isLeaf?(_=y.desc.setter,s=y.desc.parse,o.defineProperty(q,p,{configurable:!1,enumerable:!0,get:function(){return this._record[p]},set:O?function(y){s&&(y=s(y)),!function(y,q){for(var _=L,s=!1;_--;)y[_]!==q[_]&&(y[_]=q[_],s=!0);return s}(this._record[p],y)&&this._leafSync[p]||(_(this.gl,this._record[p]),this._leafSync[p]=!0)}:function(y){this._record[p]===y&&this._leafSync[p]||(_(this.gl,y),this._record[p]=y,this._leafSync[p]=!0)}})):(k.push({_name:p,_type:$(y)}),o.defineProperty(q,p,{configurable:!1,enumerable:!0,get:function(){return this._branches[p]},set:function(y){this._branches[p].apply(y)}}))},y.prototype),y}(q),function(){var k=[];if("function"==typeof Float32Array)for(var y=1;y<17;++y)k[y]=new Float32Array(y);function M(y,q,_,s){if(y)if(y.length!=k5)for(p=0;p<s;++p)q[_+p]=y[p];else y.toArray&&y.toArray(q,_);else for(var p=0;p<s;++p)q[_+p]=0}function _(y,q,_){var s=y[0];if(s<=0||0<s)return y;var p=q*_,O=k[p];if(O==k5&&(k[p]=O=new Float32Array(p)),0!==q){M(s,O,0,_);for(var L=1,$=0;L!==q;++L)M(y[L],O,$+=_,_)}return O}function q(y,q){y.uniform1iv(this.addr,q)}function s(y,q){y.uniform2iv(this.addr,q)}function p(y,q){y.uniform3iv(this.addr,q)}function O(y,q){y.uniform4iv(this.addr,q)}var L=[0,1],$=[];function E(y,q,_){$[y]=[q,_]}E(5126,function(y,q){var _=this.cache;_[0]!==q&&(y.uniform1f(this.addr,q),_[0]=q)},function(y,q){y.uniform1fv(this.addr,q)}),E(35664,function(y,q){var _,q=q.x!=k5?(_=q.x,q.y):(_=q[0],q[1]),s=this.cache;s[0]===_&&s[1]===q||(y.uniform2f(this.addr,_,q),s[0]=_,s[1]=q)},function(y,q){q=_(q,this.size,2),y.uniform2fv(this.addr,q)}),E(35665,function(y,q){q=(q="string"==typeof q?fl(q):q).x!=k5?(_=q.x,s=q.y,q.z):q.r!=k5?(_=q.r,s=q.g,q.b):q.red!=k5?(_=q.red,s=q.green,q.blue):(_=q[0],s=q[1],q[2]);var _,s,p=this.cache;p[0]===_&&p[1]===s&&p[2]===q||(y.uniform3f(this.addr,_,s,q),p[0]=_,p[1]=s,p[2]=q)},function(y,q){q=_(q,this.size,3),y.uniform3fv(this.addr,q)}),E(35666,function(y,q){q=(q="string"==typeof q?fl(q):q).x!=k5?(_=q.x,s=q.y,p=q.z,q.w):q.r!=k5?(_=q.r,s=q.g,p=q.b,q.a):q.red!=k5?(_=q.red,s=q.green,p=q.blue,q.alpha):(_=q[0],s=q[1],p=q[2],q[3]==M5?1:q[3]);var _,s,p,O=this.cache;O[0]===_&&O[1]===s&&O[2]===p&&O[3]===q||(y.uniform4f(this.addr,_,s,p,q),O[0]=_,O[1]=s,O[2]=p,O[3]=q)},function(y,q){q=_(q,this.size,4),y.uniform4fv(this.addr,q)}),E(5124,function(y,q){var _=this.cache;_[0]!==q&&(y.uniform1i(this.addr,q),_[0]=q)},q),E(35667,s,s),E(35668,p,p),E(35669,O,O),E(35670,function(y,q){var _=this.cache;_[0]!==(q=L[q?1:0])&&(y.uniform1i(this.addr,q),_[0]=q)},q),E(35671,s,s),E(35672,p,p),E(35673,O,O),E(35674,function(y,q){var _=k[4];_.set(q,0),y.uniformMatrix2fv(this.addr,!1,_)},function(y,q){y.uniformMatrix2fv(this.addr,!1,_(q,this.size,4))}),E(35675,function(y,q){var _=k[9];_.set(q,0),y.uniformMatrix3fv(this.addr,!1,_)},function(y,q){y.uniformMatrix3fv(this.addr,!1,_(q,this.size,9))}),E(35676,function(y,q){var _=k[16];_.set(q,0),y.uniformMatrix4fv(this.addr,!1,_)},function(y,q){y.uniformMatrix4fv(this.addr,!1,_(q,this.size,16))}),E(35678,function(y,q){y.uniform1i(this.addr,this.slots[0]),y.activeTexture(33984+this.slots[0]),y.bindTexture(3553,q||y._emptyTexture)},function(y,q){y.uniform1iv(this.addr,this.slots);for(var _=this.slots.length;_--;)y.activeTexture(33984+this.slots[_]),y.bindTexture(3553,q[_]||y._emptyTexture)}),E(35680,function(y,q){y.uniform1i(this.addr,this.slots[0]),y.activeTexture(33984+this.slots[0]),y.bindTexture(34067,q||y._emptyCubeTexture)},function(y,q){y.uniform1iv(this.addr,this.slots);for(var _=this.slots.length;_--;)y.activeTexture(33984+this.slots[_]),y.bindTexture(34067,q[_]||y._emptyCubeTexture)});var i=/([\w\d_]+)(\])?(\[|\.)?/g;function N(y,q,_,s,p){this.name=y,this.addr=q,this.cache=[],this.size=s?_.size:0,this.activeInfo=_,this.setter=$[_.type][s?1:0],this.slots=function(y,q,_){switch(y.type){case 35678:case 35680:if("uSampler"===_)return[0];if("uBlendSampler"===_)return[1];for(var s=y.size,p=new Int32Array(s),O=0;O<s;++O)p[O]=q.usedTextureSlot++;return p}return k5}(_,p,y),pu(this)}function a(y,q,_){this.gl=q,this._program=_,this._leaves={},this._branches={},this._struct=y}function H(y,q){for(var _=y.getProgramParameter(q,35718),s={},p={usedTextureSlot:2};_--;){var O=y.getActiveUniform(q,_),L=O.name,$=(X=Q=S=M=void 0,O),k=y.getUniformLocation(q,L),M=s,E=p,H=$.name,w=H.length;for(i.lastIndex=0;;){var Q=i.exec(H),x=i.lastIndex,S=Q[1],X="]"===Q[2];if(X&&(S|=0),(Q=Q[3])===k5||"["===Q&&x+2===w){M[S]=new N(S,k,$,Q!==k5,E);break}(X=M[S])==k5&&(M[S]=X={}),M=X}}var T=function p(O){var L=[];function y(y,q){a.call(this,O,y,q);for(var _=L.length;_--;){var s=L[_];this._branches[s._name]=new s._type(y,q)}this.uuid=e.generateUUID()}return iM(y,a),O.forEach(function(y,q){var _,s=y.name;y.isLeaf?(_=aM("d.setter(this.gl, v);",["v"],["d"],[y.desc]),o.defineProperty(q,s,{configurable:!1,enumerable:!0,get:function(){return _},set:_})):(L.push({_name:s,_type:p(y)}),o.defineProperty(q,s,{configurable:!1,enumerable:!0,get:function(){return this._branches[s]},set:function(y){this._branches[s].apply(y)}}))},y.prototype),y}(Ou.create(s,function(y){return"addr"in y}));return o.defineProperty(T.prototype,"textureCount",{configurable:!1,enumerable:!1,writable:!1,value:p.usedTextureSlot}),new T(y,q)}return a.prototype.apply=function(y,q){for(var _=this._struct.children,s=_.length;s--;){var p,O=_[s],L=O.name,$=O.desc.activeInfo;if(q){if((p=q(y,L,$?$.type:null))===k5)continue}else{if(!(L in y))continue;p=y[L]}O.isLeaf?this[L]=p:this._branches[L].apply(p)}},a.prototype.append=function(y){var q,_=this._struct.childMap;for(q in y){var s=_[q];s&&(s.isLeaf?this[q]=y[q]:this._branches[q].append(y[q]))}},function(y,q){var _=q._uniforms;return _||(q._uniforms=_=H(y,q)),_}}()),f4=function(){for(var p=[],y=1;y<17;++y)p[y]=new T8(y);function M(y,q,_,s){for(var p=_?1:0,O=q.addr,L=y._4MQ,$=0;$<s;$++)(L[O+$]||0)!==p&&(L[O+$]=p,y.vertexAttribDivisor(O+$,p))}var s=[],E="undefined"!=typeof WebGLBuffer&&WebGLBuffer.prototype;function q(y,L,$,k){s[y]=function(y,q,_,s,p,O){this.addr==k5||this.addr<0||(q==k5||!1===q?k(y,this.addr):su(q)===E?$(this,y,q,q.glType,s,p,O):(k(y,this.addr),L(this,y,q)))}}function _(y,q){y.disableVertexAttribArray(q)}function $(y,q,_){this.name=y,this.addr=q,this.activeInfo=_,this.setter=s[_.type],pu(this)}function k(y,q,_){this.gl=q,this.program=_,this._branches={},this._struct=y}return q(5126,function(y,q,_){q.vertexAttrib1f(y.addr,_)},function(y,q,_,s,p,O,L){q.bindBuffer(34962,_);var $=y.addr;q.enableVertexAttribArray($),M(q,y,_.instanced,1),q.vertexAttribPointer($,1,s||5126,!!p,O||0,L||0),q.bindBuffer(34962,null)},_),q(35664,function(y,q,_){var s;_.x!=k5?q.vertexAttrib2f(y.addr,_.x,_.y):((s=p[2]).set(_,0),q.vertexAttrib2fv(y.addr,s))},function(y,q,_,s,p,O,L){q.bindBuffer(34962,_);var $=y.addr;q.enableVertexAttribArray($),M(q,y,_.instanced,1),q.vertexAttribPointer($,2,s||5126,!!p,O||0,L||0),q.bindBuffer(34962,null)},_),q(35665,function(y,q,_){var s;_.x!=k5?q.vertexAttrib3f(y.addr,_.x,_.y,_.z):_.r!=k5?q.vertexAttrib3f(y.addr,_.r,_.g,_.b):_.red!=k5?q.vertexAttrib3f(y.addr,_.red,_.green,_.blue):((s=p[3]).set(_,0),q.vertexAttrib3fv(y.addr,s))},function(y,q,_,s,p,O,L){q.bindBuffer(34962,_);var $=y.addr;q.enableVertexAttribArray($),M(q,y,_.instanced,1),q.vertexAttribPointer($,3,s||5126,!!p,O||0,L||0),q.bindBuffer(34962,null)},_),q(35666,function(y,q,_){var s;(_="string"==typeof _?fl(_):_).x!=k5?q.vertexAttrib4f(y.addr,_.x,_.y,_.z,_.w):_.r!=k5?q.vertexAttrib4f(y.addr,_.r,_.g,_.b,_.a):_.red!=k5?q.vertexAttrib4f(y.addr,_.red,_.green,_.blue,_.alpha):((s=p[4]).set(_,0),q.vertexAttrib4fv(y.addr,s))},function(y,q,_,s,p,O,L){q.bindBuffer(34962,_);var $=y.addr;q.enableVertexAttribArray($),M(q,y,_.instanced,1),q.vertexAttribPointer($,4,s||5126,!!p,O||0,L||0),q.bindBuffer(34962,null)},_),q(35674,function(y,q,_){_=_.el||_;for(var s=0,p=0;s<2;++s)q.vertexAttrib2f(y.addr,_[p++],_[p++])},function(y,q,_,s,p,O,L){var O=O||16,L=L||0,$=y.addr;q.bindBuffer(34962,_),q.enableVertexAttribArray($),q.vertexAttribPointer($,2,s||5126,!!p,O,L),q.enableVertexAttribArray($+1),q.vertexAttribPointer($+1,2,s||5126,!!p,O,L+8),M(q,y,_.instanced,2),q.bindBuffer(34962,null)},function(y,q){y.disableVertexAttribArray(q),y.disableVertexAttribArray(q+1)}),q(35675,function(y,q,_){_=_.el||_;for(var s=0,p=0;s<3;++s)q.vertexAttrib3f(y.addr,_[p++],_[p++],_[p++])},function(y,q,_,s,p,O,L){var O=O||36,L=L||0,$=y.addr;q.bindBuffer(34962,_);for(var k=0;k<3;k++)q.enableVertexAttribArray($+k),q.vertexAttribPointer($+k,3,s||5126,!!p,O,L+12*k);M(q,y,_.instanced,3),q.bindBuffer(34962,null)},function(y,q){y.disableVertexAttribArray(q),y.disableVertexAttribArray(q+1),y.disableVertexAttribArray(q+2)}),q(35676,function(y,q,_){_=_.el||_;for(var s=0,p=0;s<4;++s)q.vertexAttrib4f(y.addr,_[p++],_[p++],_[p++],_[p++])},function(y,q,_,s,p,O,L){var O=O||64,L=L||0,$=y.addr;q.bindBuffer(34962,_);for(var k=0;k<4;k++)q.enableVertexAttribArray($+k),q.vertexAttribPointer($+k,4,s||5126,!!p,O,L+16*k);M(q,y,_.instanced,4),q.bindBuffer(34962,null)},function(y,q){y.disableVertexAttribArray(q),y.disableVertexAttribArray(q+1),y.disableVertexAttribArray(q+2),y.disableVertexAttribArray(q+3)}),k.prototype.disable=function(){for(var y=this._struct.children,q=y.length;q--;){var _=y[q],s=_.name;_.isLeaf?this[s]=k5:this._branches[s].disable()}},k.prototype.apply=function(y,q){for(var _=this._struct.children,s=_.length;s--;){var p,O=_[s],L=O.name;if(q){if((p=q(y,L,O))===k5)continue}else{if(!(L in y))continue;p=y[L]}O.isLeaf?this[L]=p:this._branches[L].apply(p)}},k.prototype.append=function(y){var q,_=this._struct.childMap;for(q in y){var s=_[q];s&&(s.isLeaf?this[q]=y[q]:this._branches[q].append(y[q]))}},function(y,q){var _=q._attribs;return _||(q._attribs=_=function(y,q){for(var _=y.getProgramParameter(q,35721),s={};_--;){var p=y.getActiveAttrib(q,_),O=p.name,L=y.getAttribLocation(q,O);0<=L&&(s[O]=new $(O,L,p))}return new(function p(O){var L=[];function y(y,q){k.call(this,O,y,q);for(var _=L.length;_--;){var s=L[_];this._branches[s._name]=new s._type(y,q)}}return iM(y,k),O.forEach(function(y,q){var _,s=y.name;y.isLeaf?(_=aM("d.setter(this.gl, v);",["v"],["d"],[y.desc]),o.defineProperty(q,s,{configurable:!1,enumerable:!0,get:function(){return _},set:_})):(L.push({_name:s,_type:p(y)}),o.defineProperty(q,s,{configurable:!1,enumerable:!0,get:function(){return this._branches[s]},set:function(y){this._branches[s].apply(y)}}))},y.prototype),y}(Ou.create(s,function(y){return"addr"in y})))(y,q)}(y,q)),_}}(),S5=function(y){var q;o.defineProperties(this,{gl:{configurable:!1,enumerable:!1,value:y,writable:!1},glState:{configurable:!1,enumerable:!1,value:((q=(y=y)._state)||(y._state=q=new E$(y)),q),writable:!1}}),this._currProgram=k5,this._currUniforms=k5,this._currAttribs=k5,this._sync=!0},G4=(o.defineProperties(S5.prototype,{program:{configurable:!1,enumerable:!1,get:function(){return this._currProgram},set:function(y){this._sync&&y===this._currProgram||(this.gl.useProgram(y),this._currProgram=y,this._currUniforms=e4(this.gl,y),this._currAttribs=f4(this.gl,y),this._sync=!0)}},uniforms:{configurable:!1,enumerable:!1,get:function(){return this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currUniforms},set:function(y){this._currUniforms&&(this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currUniforms.apply(y))}},attribs:{configurable:!1,enumerable:!1,get:function(){return this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currAttribs},set:function(y){this._currUniforms&&(this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currAttribs.apply(y))}}}),S5.prototype.useProgram=function(y){this._sync&&y===this._currProgram||(this.gl.useProgram(y),this._currProgram=y,this._currUniforms=e4(this.gl,y),this._currAttribs=f4(this.gl,y),this._sync=!0)},S5.prototype.directState=function(){return this.glState},S5.prototype.directUniforms=function(){return this._currUniforms},S5.prototype.directAttribs=function(){return this._currAttribs},S5.prototype.syncLoss=function(){this._sync=!1,this.glState.syncLoss()},S5.for=function(y){var q=y._renderState;return q||(y._renderState=q=new S5(y)),q},"light.color"),r4=4294967295,g4=0,n4={},v4={},b4=function(y){var q;if(y=E5.convertShape3dModelName(y),Mx(y)){if(y.modelType){if(y.uuid){if(q=Vn[y.uuid])return q}else y.uuid=P.Math.generateUUID();return q!==k5||$_&&$_[y.uuid]||H_(y.uuid,y),k5}return y}return q=Vn[y],y&&q===k5&&on.test(y)&&($_&&$_[y]||(E_(y,y),q=Vn[y])),q},I4="undefined"!=typeof WebGLTexture&&WebGLTexture.prototype,U4=function(y){return y&&su(y)===I4},d4=function(y,q){y.frameStack?y.frameStack.push(q):y.frameStack=[q],y.bindFramebuffer(36160,q)},yK=function(y){var q=y.frameStack;if(q){if(q.pop(),q.length)return void y.bindFramebuffer(36160,q[q.length-1]);y.frameStack=null}y.bindFramebuffer(36160,null)},qK=(ax(E5,{graph3dViewAttributes:M5,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:u/60,graph3dViewSortable:!1,graph3dViewOpaqueSortable:!1,graph3dViewBlockSelectable:!0,graph3dViewEditHelperDisabled:!1,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:qn,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewRotateMaxPhi:u,graph3dViewRotateMinPhi:0,graph3dViewShadowDisabled:!0,graph3dViewShadowQuality:"high",graph3dViewShadowIntensity:.3,graph3dViewShadowBias:-.005,graph3dViewShadowRadius:.1,graph3dViewShadowType:"hard",graph3dViewShadowDegreeX:30,graph3dViewShadowDegreeZ:-10,graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewSyncEyeWithOrthoWidth:!1,graph3dViewFovy:u/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewDataNumWarningLine:1e4,graph3dViewHeadlightDirection:"camera",graph3dViewHeadlightRange:0,graph3dViewHeadlightGroup:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewHeadlightAmbientIntensity:.7,graph3dViewHeadlightRatioForPhysicalMaterial:.5,graph3dViewFogDisabled:!0,graph3dViewFogMode:"linear",graph3dViewFogDensity:5e-4,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewPickerResolution:.5,graph3dViewDashDisabled:!0,graph3dViewUvClipEnabled:!1,graph3dViewTransmissionEnabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,graph3dViewBatchInstancedDisabled:!0,graph3dViewFlowBlendMode:"addRGB",graph3dViewEnvmapType:"legacy",graph3dMaxVectorCacheTime:50,graph3dEnvmapCapabilityRequire:8,setShape3dModel:function(y,q){w5(q)&&on.test(q)?E_(y,q):Mx(q)&&q.modelType?H_(y,q):q===k5?delete Vn[y]:Vn[y]=q},getShape3dModel:b4,convertShape3dModelName:function(y){return y},getShape3dModelMap:function(){return Vn},getCachedShape3dModelMap:function(){return hn},createMatrix:function(y,q){for(var _=(y=Hx(y)?y:[y]).length-1;0<=_;_--){var s=y[_];q=D8(s.mat,s.s3,s.r3,s.rotationMode,s.t3,q)}return q},transformVec:C8,glBindFrame:d4,glUnbindFrame:yK,createBoxModel:function(){return{vs:X_,ns:N_,uv:i_,is:T_}},createRoundRectModel:function(y,q){return u_.roundRect(y,q)},createStarModel:function(y,q){return u_.star(y,q)},createRectModel:function(y,q){return u_.rect(y,q)},createTriangleModel:function(y,q){return u_.triangle(y,q)},createRightTriangleModel:function(y,q){return u_.rightTriangle(y,q)},createParallelogramModel:function(y,q){return u_.parallelogram(y,q)},createTrapezoidModel:function(y,q){return u_.trapezoid(y,q)},createSmoothSphereModel:function(y,q,_,s,p,O,L){return $Q(new cQ(y,q,_,s,p,O,L))},createSphereModel:function(y,q,_,s,p,O,L){return y?Z_(y,q,_,s,p,O,L):E5.createSmoothSphereModel()},createSmoothConeModel:function(y,q,_,s,p){return V_(y,q,_,s,p)},createConeModel:function(y,q,_,s,p,O,L,$){return y?h_(y,q,_,s,p,O,L,$):V_(O)},createSmoothCylinderModel:function(y,q,_,s,p,O,L,$){return $Q(new DQ(y,q,_,s,p,O,L,$))},createCylinderModel:function(y,q,_,s,p,O,L,$){return y?F_(y,q,_,s,p,O,L,$):B_(O,L)},createSmoothTorusModel:function(y,q,_,s,p,O){return $Q(new RQ(y,q,_,s,p,O))},createTorusModel:function(y,q,_,s,p,O,L,$){return y?C_(y,q,_,s,p,O,L,$):K_(O,L)},createExtrusionModel:function(y,q,_,s,p,O,L,$){return t_(y,q,_,s,p,O,L,$)},createSmoothRingModel:function(y,q,_,s,p,O){for(var L=[],$=0;$<y.length-1;$+=2)L.push({x:y[$],y:y[$+1]});for(y=bl(L,q,_)[0],L=[],$=0;$<y.length;$++){var k=y[$];L.push(new Q5(k.x,0,k.y))}return $Q(new PQ(L,O,s,p))},createTextGeometry:function(y,q){var _=$Q(new mQ(y,q));if(q.cube)for(var q=(y=function(y){for(var q,_,s,p,O,L,$=Hx(y)?y:[y],k=1/0,M=1/0,E=1/0,H=-1/0,w=-1/0,Q=-1/0,x=["vs","top_vs","bottom_vs"],S=0,X=$.length;S<X;S++)for(L=$[S],q=0,_=x.length;q<_;q++)if(O=L[x[q]])for(s=0,p=O.length;s<p;s+=3)k=s5(k,O[s]),M=s5(M,O[s+1]),E=s5(E,O[s+2]),H=_5(H,O[s]),w=_5(w,O[s+1]),Q=_5(Q,O[s+2]);return y.boundingBox={min:{x:k,y:M,z:E},max:{x:H,y:w,z:Q}}}(_)).min,y=y.max,s=q.x,p=q.y,O=q.z,L=y.x-s||1,$=y.y-p||1,k=y.z-O||1,M=["vs","top_vs","bottom_vs"],E=0,H=M.length;E<H;E++){var w=_[M[E]];if(w)for(var Q=0,x=w.length;Q<x;Q+=3)w[Q]=(w[Q]-s)/L-.5,w[Q+1]=(w[Q+1]-p)/$-.5,w[Q+2]=(w[Q+2]-O)/k-.5}return _},loadFontFace:function(y,s){E5.xhrLoad(y,function(q){if(!q)return s();var _;try{_=JSON.parse(q)}catch(y){_=JSON.parse(q.substring(65,q.length-2))}CQ.loadFace(_),s&&s(_.familyName.toLowerCase())},s?null:{sync:!0})},createRingModel:function(y,o,Y,q,_,s,p,O,L,$){for(var k=[],M=0;M<y.length-1;M+=2)k.push({x:y[M],y:y[M+1]});s=s||E5.shapeSide,p=p||0,O=O||s;var E,H,w,Q,x,S,X,T,i,N,a,l,j,Z,K,C,B,F=[],V=[],h=L?[]:M5,t=L?[]:M5,u=$?[]:M5,J=$?[]:M5,D=q?[]:M5,P=q?[]:M5,m=_?[]:M5,W=_?[]:M5,y=bl(k,o,Y),A=Px(y),c=0,R=2*Math.PI/s;return y.forEach(function(y){if(1<(w=y.length)){if(Q=y[0],q)for(S=Q.x,T=Q.y,M=p;M<O;M++)j=(a=M+1)*R,Z=H5(l=M*R),K=p5(l),C=H5(j),B=p5(j),D.push(Z*S,T,-K*S,C*S,T,-B*S,0,T,0),P.push(.5-.5*Z,.5-.5*K,.5-.5*C,.5-.5*B,.5,.5);for(N=0;N<w;N++){for(x=y[N],S=Q.x,X=x.x,T=Q.y,i=x.y,E=c/A,c+=vA(Q,x),H=c/A,M=p;M<O;M++)j=(a=M+1)*R,Z=H5(l=M*R),K=p5(l),C=H5(j),B=p5(j),F.push(Z*X,i,-K*X,C*X,i,-B*X,Z*S,T,-K*S,C*X,i,-B*X,C*S,T,-B*S,Z*S,T,-K*S),V.push(M/s,H,a/s,H,M/s,E,a/s,H,a/s,E,M/s,E),L&&M===p&&(h.push(0,T,0,0,i,0,Z*X,i,-K*X,Z*X,i,-K*X,Z*S,T,-K*S,0,T,0),t.push(0,.5-T,0,.5-i,2*X,.5-i,2*X,.5-i,2*S,.5-T,0,.5-T)),$&&a===O&&(u.push(0,T,0,C*X,i,-B*X,0,i,0,C*X,i,-B*X,0,T,0,C*S,T,-B*S),J.push(1,.5-T,1-2*X,.5-i,1,.5-i,1-2*X,.5-i,1,.5-T,1-2*S,.5-T));Q=x}if(_)for(S=Q.x,T=Q.y,M=p;M<O;M++)j=(a=M+1)*R,Z=H5(l=M*R),K=p5(l),C=H5(j),B=p5(j),m.push(C*S,T,-B*S,Z*S,T,-K*S,0,T,0),W.push(.5-.5*C,.5+.5*B,.5-.5*Z,.5+.5*K,.5,.5)}}),{vs:F,uv:V,bottom_vs:m,bottom_uv:W,top_vs:D,top_uv:P,from_vs:h,from_uv:t,to_vs:u,to_uv:J}}},!0),ax(X5,{"3d.move.mode":k5,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"3d.clip.direction":null,"3d.clip.percentage":1,"3d.reflectable":!0,"shape.border.gradient.color":k5,"edge.gradient.color":k5,"edge.source.t3":k5,"edge.target.t3":k5,"light.type":"point","light.group":0,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":u/4,"light.range":0,"light.exponent":1,"light.intensity":1,"light.rotation.enable":!1,"light.size":[100,100],"light.specular.disable":!1,"light.mask":r4,"headlight.ambientIntensity":k5,"wf.visible":!1,"wf.width":1,"wf.fog":!0,"wf.group":0,"wf.color":mU,"wf.short":!1,"wf.mat":k5,"wf.boundingBox":!1,"wf.material":null,"wf.geometry":!1,"wf.loadQuadWireframe":!1,"wf.combineTriangle":!0,"wf.normEpsilon":k5,batch:k5,static:k5,"static.group":0,"transparent.mask":!1,"transparent.separate":!1,brightness:k5,"select.brightness":.7,"repeat.uv.length":k5,"rotate.uv.length":k5,"rotate.vs.length":k5,"shadow.cast":!0,"shadow.receive":!0,"3d.clipbox":k5,"3d.clipbox.mask":r4,"3d.clipbox.group":0,"3d.clipbox.shape":"cube","effect.flow":!1,"effect.flow.gradient":"spread.horizontal","effect.flow.uvshape":"rect","effect.flow.size":512,"effect.flow.group":0,"effect.flow.intensity":1,"effect.flow.blend":k5,"effect.flow.mask":r4,bloom:!1,envmap:0,"envmap.probe":0,roughness:0,renderTextureSamples:4,alphaTest:.4,autorotate:!1,fixSizeOnScreen:!1,"texture.cache":!1,"hide.overlapping.group":k5,"vector.dynamic":!1,"vector.dynamic.maxsize":2048,"texture.scale":1,"geometry.cache":!1,"highlight.mode":!1,"highlight.type":"hard","highlight.visible":!0,"highlight.width":.8,"highlight.color":"rgba(190, 210, 250, 1)","highlight.glow":.8,"highlight.strength":2,"color.empty":[0,0,0,0],matDef:k5,"shape3d.material":k5,"shape3d.top.material":k5,"shape3d.bottom.material":k5,"shape3d.from.material":k5,"shape3d.to.material":k5,"label.face":d5,"label.t3":k5,"label.r3":k5,"label.texture.scale":2,"label.rotationMode":XQ,"label.light":!1,"label.blend":k5,"label.reverse.flip":!1,"label.reverse.color":FU,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":d5,"label2.t3":k5,"label2.r3":k5,"label2.texture.scale":2,"label2.rotationMode":XQ,"label2.light":!1,"label2.blend":k5,"label2.reverse.flip":!1,"label2.reverse.color":FU,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":d5,"note.t3":k5,"note.r3":k5,"note.texture.scale":2,"note.rotationMode":XQ,"note.light":!1,"note.blend":k5,"note.reverse.flip":!1,"note.reverse.color":FU,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":d5,"note2.t3":k5,"note2.r3":k5,"note2.texture.scale":2,"note2.rotationMode":XQ,"note2.light":!1,"note2.blend":k5,"note2.reverse.flip":!1,"note2.reverse.color":FU,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,"part.boundingBox":!1,shape3d:k5,"shape3d.color":x,"shape3d.top.color":k5,"shape3d.bottom.color":k5,"shape3d.from.color":k5,"shape3d.to.color":k5,"shape3d.image":k5,"shape3d.image.projection":k5,"shape3d.top.image":k5,"shape3d.bottom.image":k5,"shape3d.from.image":k5,"shape3d.to.image":k5,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":k5,"shape3d.side.to":k5,"shape3d.smooth":k5,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":k5,"shape3d.opacity":k5,"shape3d.reverse.flip":!1,"shape3d.reverse.color":FU,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":k5,"shape3d.uv.scale":k5,"shape3d.uv.rotation":k5,"shape3d.uv.anchor":k5,"shape3d.uv.union":k5,"shape3d.top.uv.offset":k5,"shape3d.top.uv.scale":k5,"shape3d.top.uv.rotation":k5,"shape3d.top.uv.anchor":k5,"shape3d.bottom.uv.offset":k5,"shape3d.bottom.uv.scale":k5,"shape3d.bottom.uv.rotation":k5,"shape3d.bottom.uv.anchor":k5,"shape3d.from.uv.offset":k5,"shape3d.from.uv.scale":k5,"shape3d.from.uv.rotation":k5,"shape3d.from.uv.anchor":k5,"shape3d.to.uv.offset":k5,"shape3d.to.uv.scale":k5,"shape3d.to.uv.rotation":k5,"shape3d.to.uv.anchor":k5,"shape3d.top.cap":k5,"shape3d.bottom.cap":k5,"shape3d.start.angle":0,"shape3d.sweep.angle":O5,"shape3d.point.epsilon":1e-6,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"shape3d.transmission":k5,"shape3d.reflector":!1,"shape3d.reflector.color":"rgb(128,128,128)","shape3d.reflector.blur":0,"shape3d.reflector.blur.iterations":1,"shape3d.reflector.background":null,"shape3d.reflector.clip":.003,"shape3d.reflector.shadow":"scene","camera.type":"perspective","camera.aspect":1,"camera.fovy":k5,"camera.ortho.width":k5,"camera.near":k5,"camera.far":k5,"camera.background":0,"camera.clear":!0,"camera.renderSky":!0,"camera.renderShadowMap":!0,"camera.renderAxis":!1,"camera.renderGrid":!1,"camera.renderEdit":!1,"camera.onlySky":!1,"camera.skybox.blur":k5,"skybox.blur.size":0,"skybox.blur.resolution":0,"texture.mipmap.max":k5,"texture.filter":k5,"texture.filter.min":k5,"texture.filter.mag":k5,"texture.wrap":k5,"texture.flipY":!1,"points.image":"rect","points.color":"white","points.transparent":!1,"points.size":20,"points.opacity":1,"points.uv.scale":[1,1],"points.uv.offset":[0,0],"points.discard.selectable":!1,"all.light":!0,"all.visible":!0,"all.color":x,"all.image":k5,"all.blend":k5,"all.opacity":k5,"all.reverse.flip":!1,"all.reverse.color":FU,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":k5,"all.uv.offset":k5,"all.uv.scale":k5,"all.uv.rotation":k5,"all.uv.anchor":k5,"all.uv.union":k5,"all.discard.selectable":!0,"all.material":k5,mat:k5,"left.mat":k5,"right.mat":k5,"top.mat":k5,"bottom.mat":k5,"front.mat":k5,"back.mat":k5,"edge.source.anchor.elevation":k5,"edge.target.anchor.elevation":k5,"edge.source.offset.elevation":0,"edge.target.offset.elevation":0,"3d.bone.visible":!1},!0),[0,0,0,0]),_K=function(y){return y instanceof L6},sK=function(y){return[y.x,y.e||0,y.y]},pK=function(y,q,_){for(var s=(q=fl(q||0))[0],p=q[1],O=q[2];_--;)y.push(s,p,O)},OK=function(y,q,_){for(var s=(q=fl(q||0))[0],p=q[1],O=q[2],L=q[3];_--;)y.push(s,p,O,L)},LK=function(y,q,_){if(q)for(var s,p,O,L=q[0],$=q[1],k=q[2],M=q[4],E=q[5],H=q[6],w=q[8],Q=q[9],x=q[10],S=q[12],X=q[13],T=q[14],i=_.length,N=0,N=0;N<i;N+=3)s=_[N],p=_[N+1],O=_[N+2],y.push(L*s+M*p+w*O+S,$*s+E*p+Q*O+X,k*s+H*p+x*O+T);else ix(y,_);return y},$K=function(y,q,_){var s=q.s("light.intensity"),p=(L=fl(q.s(G4)))[0],O=L[1],L=L[2],s=(1!==s&&(p*=s,O*=s,L*=s),q.s("light.disabled"));y.push(p,O,L,s?1:0),_.c.push(p,O,L),_.g.push(s?-1:q.s("light.group")),_.e.push(s?1:0)},kK=(h$=new Q5,t$=new bB,function(y,q){return h$.copy(y).applyEuler(q.getEuler(t$)),[h$.x,h$.y,h$.z]}),MK=function(y,q,_,s){if((s=s===k5?y._headlightAmbientIntensity:s)!==q._lastHeadlightAmbientIntensity&&(q.uHeadlightAmbientIntensity=q._lastHeadlightAmbientIntensity=s),_!==q._lastLightMask&&(q._lastLightMask=_,s=y._lastLightUploadInfo)){for(var p,O=s.g,L=s.e,$=O.length,k=new Array($),M=!1,E=0;E<$;E++)p=O[E],(k[E]=!(p<0||32<=p)&&_&1<<p?0:1)!==L[E]&&(M=!0);if(M){s.e=L=k;var H,w=s.c,s=(q.uHeadlightColor=[w[0],w[1],w[2],L[0]],y._59O),Q=y._spots,y=y._dirs,x=3,S=1;if($=s.length){for(E=0,H=[];E<$;E++)H.push(w[x++],w[x++],w[x++],L[S++]);q.uPointColor=H}if($=Q.length){for(E=0,H=[];E<$;E++)H.push(w[x++],w[x++],w[x++],L[S++]);q.uSpotColor=H}if($=y.length){for(E=0,H=[];E<$;E++)H.push(w[x++],w[x++],w[x++],L[S++]);q.uDirColor=H}}}},EK=function(y,q){return Math.max(y.getRotateMinPhi()+x8,Math.min(y.getRotateMaxPhi()-x8,q))},HK=function(){return.05+c5()/2},wK=function(y,q,_,s){var p=y.getEye(),y=(y.isOrtho()?((O=i8(y.getCenter(),p))[0]+=s[0],O[1]+=s[1],O[2]+=s[2]):O=p,q),p=_,q=s,_=O,s=a8(y,p),O=i8(_,q,!0),y=a8(O,p);return F5(y)<x8?M5:(_=(s-a8(q,p))/y,[q[0]+O[0]*_,q[1]+O[1]*_,q[2]+O[2]*_])},QK=function(y,q){return{x:2*y.x-q.x,y:2*y.y-q.y}},xK=function(y,q,_,s){if(!y)return O=D5(q.y-_.y,_.x-q.x),{x:q.x+s*p5(O),y:q.y+s*H5(O)};if(!_)return O=D5(y.y-q.y,q.x-y.x),{x:q.x+s*p5(O),y:q.y+s*H5(O)};var p,O,L,$,k=i8([y.x,y.y,0],[q.x,q.y,0],!0),M=i8([_.x,_.y,0],[q.x,q.y,0],!0),E=-(k[0]+M[0])/2,H=-(k[1]+M[1])/2,w=B5(E*E+H*H);return w<x8?(O=D5(y.y-q.y,q.x-y.x),{x:q.x+s*p5(O),y:q.y+s*H5(O)}):(p=y.x-q.x,y=y.y-q.y,L=_.x-q.x,$=_.y-q.y,p=B5(p*p+y*y),y=B5(L*L+$*$),O=V5(a8(k,M))/2,L=0<k[1]*M[0]-k[0]*M[1]?-1:1,E/=w,H/=w,$=s/p5(O),k=_5(p,y)/H5(O),w=Math.min($,k),M={x:q.x+L*w*E,y:q.y+L*w*H},_.b&&$>y/H5(O)&&(M.adjust=!0),M)},SK=function(y){var q=y[0],_=y[1],s=y[2],p=y[3],O=y[4],L=y[5],$=y[6],k=y[7],M=y[8],E=y[9],H=y[10],w=y[11],Q=y[12],x=y[13],S=y[14],X=y[15],T=q*L-_*O,i=q*$-s*O,N=q*k-p*O,a=_*$-s*L,l=_*k-p*L,j=s*k-p*$,Z=M*x-E*Q,K=M*S-H*Q,C=M*X-w*Q,B=E*S-H*x,F=E*X-w*x,V=H*X-w*S,h=T*V-i*F+N*B+a*C-l*K+j*Z;if(!h)return M5;y[0]=(L*V-$*F+k*B)*(h=1/h),y[1]=(s*F-_*V-p*B)*h,y[2]=(x*j-S*l+X*a)*h,y[3]=(H*l-E*j-w*a)*h,y[4]=($*C-O*V-k*K)*h,y[5]=(q*V-s*C+p*K)*h,y[6]=(S*N-Q*j-X*i)*h,y[7]=(M*j-H*N+w*i)*h,y[8]=(O*F-L*C+k*Z)*h,y[9]=(_*C-q*F-p*Z)*h,y[10]=(Q*l-x*N+X*T)*h,y[11]=(E*N-M*l-w*T)*h,y[12]=(L*K-O*B-$*Z)*h,y[13]=(q*B-_*K+s*Z)*h,y[14]=(x*i-Q*a-S*T)*h,y[15]=(M*a-E*i+H*T)*h},XK=function(y,q){var _,s;q&&(_=q[0],s=q[1],q=q[2],y[12]=y[0]*_+y[4]*s+y[8]*q+y[12],y[13]=y[1]*_+y[5]*s+y[9]*q+y[13],y[14]=y[2]*_+y[6]*s+y[10]*q+y[14],y[15]=y[3]*_+y[7]*s+y[11]*q+y[15])},TK=function(y,q){var _,s;q&&(_=q[0],s=q[1],q=q[2],y[0]=y[0]*_,y[1]=y[1]*_,y[2]=y[2]*_,y[3]=y[3]*_,y[4]=y[4]*s,y[5]=y[5]*s,y[6]=y[6]*s,y[7]=y[7]*s,y[8]=y[8]*q,y[9]=y[9]*q,y[10]=y[10]*q,y[11]=y[11]*q)},iK=function(y,q,_){var s=q[0],p=q[1],O=q[2],L=q[3],$=q[4],k=q[5],M=q[6],E=q[7],H=q[8],w=q[9],Q=q[10],x=q[11],S=q[12],X=q[13],T=q[14],q=q[15],i=_[0],N=_[1],a=_[2],l=_[3];return y[0]=i*s+N*$+a*H+l*S,y[1]=i*p+N*k+a*w+l*X,y[2]=i*O+N*M+a*Q+l*T,y[3]=i*L+N*E+a*x+l*q,i=_[4],N=_[5],a=_[6],l=_[7],y[4]=i*s+N*$+a*H+l*S,y[5]=i*p+N*k+a*w+l*X,y[6]=i*O+N*M+a*Q+l*T,y[7]=i*L+N*E+a*x+l*q,i=_[8],N=_[9],a=_[10],l=_[11],y[8]=i*s+N*$+a*H+l*S,y[9]=i*p+N*k+a*w+l*X,y[10]=i*O+N*M+a*Q+l*T,y[11]=i*L+N*E+a*x+l*q,i=_[12],N=_[13],a=_[14],l=_[15],y[12]=i*s+N*$+a*H+l*S,y[13]=i*p+N*k+a*w+l*X,y[14]=i*O+N*M+a*Q+l*T,y[15]=i*L+N*E+a*x+l*q,y},NK=function(y,q,_,s){var p,O,L,$,k=q[0],M=q[1],q=q[2],E=s[0],H=s[1],s=s[2],w=_[0],Q=_[1],_=_[2];return F5(k-w)<x8&&F5(M-Q)<x8&&F5(q-_)<x8?K8(y):($=1/B5((w=k-w)*w+(Q=M-Q)*Q+(_=q-_)*_),($=B5((p=H*(_*=$)-s*(Q*=$))*p+(s=s*(w*=$)-E*_)*s+(E=E*Q-H*w)*E))?(p*=$=1/$,s*=$,E*=$):E=s=p=0,($=B5((H=Q*E-_*s)*H+(O=_*p-w*E)*O+(L=w*s-Q*p)*L))?(H*=$=1/$,O*=$,L*=$):L=O=H=0,y[0]=p,y[1]=H,y[2]=w,y[3]=0,y[4]=s,y[5]=O,y[6]=Q,y[7]=0,y[8]=E,y[9]=L,y[10]=_,y[11]=0,y[12]=-(p*k+s*M+E*q),y[13]=-(H*k+O*M+L*q),y[14]=-(w*k+Q*M+_*q),y[15]=1,y)},aK=function(y,q,_,s,p){var q=1/J5(q/2),O=1/(s-p);return y[0]=q/_,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=q,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=(p+s)*O,y[11]=-1,y[12]=0,y[13]=0,y[14]=2*p*s*O,y[15]=0,y},lK=function(y,q,_,s,p,O,L){var $=1/(q-_),k=1/(s-p),M=1/(O-L);return y[0]=-2*$,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=-2*k,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=2*M,y[11]=0,y[12]=(q+_)*$,y[13]=(p+s)*k,y[14]=(L+O)*M,y[15]=1,y},jK=function(y,q){var _=q[0],s=q[1],p=q[2],O=(O=_*_+s*s+p*p+(q=q[3])*q)?1/O:0;return y[0]=-_*O,y[1]=-s*O,y[2]=-p*O,y[3]=q*O,y},ZK=function(y,q){var _=q[0]+q[5]+q[10],s=0;return 0<_?(s=2*Math.sqrt(_+1),y[3]=.25*s,y[0]=(q[6]-q[9])/s,y[1]=(q[8]-q[2])/s,y[2]=(q[1]-q[4])/s):q[0]>q[5]&q[0]>q[10]?(s=2*Math.sqrt(1+q[0]-q[5]-q[10]),y[3]=(q[6]-q[9])/s,y[0]=.25*s,y[1]=(q[1]+q[4])/s,y[2]=(q[8]+q[2])/s):q[5]>q[10]?(s=2*Math.sqrt(1+q[5]-q[0]-q[10]),y[3]=(q[8]-q[2])/s,y[0]=(q[1]+q[4])/s,y[1]=.25*s,y[2]=(q[6]+q[9])/s):(s=2*Math.sqrt(1+q[10]-q[0]-q[5]),y[3]=(q[1]-q[4])/s,y[0]=(q[8]+q[2])/s,y[1]=(q[6]+q[9])/s,y[2]=.25*s),y},KK=function(y,q,_){var s=q[0],p=q[1],O=q[2],L=O+O,$=s*(E=s+s),k=s*(H=p+p),s=s*L,M=p*H,p=p*L,E=(q=q[3])*E,H=q*H,q=q*L;return y[0]=1-(M+(O=O*L)),y[1]=k+q,y[2]=s-H,y[3]=0,y[4]=k-q,y[5]=1-($+O),y[6]=p+E,y[7]=0,y[8]=s+H,y[9]=p-E,y[10]=1-($+M),y[11]=0,y[12]=_[0],y[13]=_[1],y[14]=_[2],y[15]=1,y},CK=function(y,q){if(y.isVREnabled()){var _=y.vr.getViewMatrix(q);if(_)return _}return y._camera?y._camera.getViewMatrix(q):NK(q||l8(),y._eye,y._center,y._up)},BK=function(y,q){if(y.isVREnabled()&&(s=y.vr.getProjectMatrix()))return s;if(y._camera)return y._camera.getProjectMatrix();if(!q&&y._computedProjectMatrix)return Z8(y._computedProjectMatrix);var _,s=y.getAspect(),q=y._near,p=y._far,O=l8();return y._ortho?(_=y._orthoWidth/2,lK(O,-_,_,-(_/=s),_,q,p)):aK(O,y._fovy,s,q,p),O},FK=function(y,q){if(!y)return M5;var _=[],s=0,p=y.length,O=p/3;if(q){for(;s<p;s++)_[s]=0;for(s=0;s<q.length;s+=3){var L=[],$=[];(M=[])[0]=y[3*q[s+1]+0]-y[3*q[s]+0],M[1]=y[3*q[s+1]+1]-y[3*q[s]+1],M[2]=y[3*q[s+1]+2]-y[3*q[s]+2],L[0]=y[3*q[s+2]+0]-y[3*q[s+1]+0],L[1]=y[3*q[s+2]+1]-y[3*q[s+1]+1],L[2]=y[3*q[s+2]+2]-y[3*q[s+1]+2],$[0]=M[1]*L[2]-M[2]*L[1],$[1]=M[2]*L[0]-M[0]*L[2],$[2]=M[0]*L[1]-M[1]*L[0];for(var k=0;k<3;k++)_[3*q[s+k]+0]+=$[0],_[3*q[s+k]+1]+=$[1],_[3*q[s+k]+2]+=$[2]}}else for(s=0;s<O;s+=3){var M,L=[],$=[];for((M=[])[0]=y[3*(s+1)+0]-y[3*s+0],M[1]=y[3*(s+1)+1]-y[3*s+1],M[2]=y[3*(s+1)+2]-y[3*s+2],L[0]=y[3*(s+2)+0]-y[3*(s+1)+0],L[1]=y[3*(s+2)+1]-y[3*(s+1)+1],L[2]=y[3*(s+2)+2]-y[3*(s+1)+2],$[0]=M[1]*L[2]-M[2]*L[1],$[1]=M[2]*L[0]-M[0]*L[2],$[2]=M[0]*L[1]-M[1]*L[0],k=0;k<3;k++)_[3*(s+k)+0]=$[0],_[3*(s+k)+1]=$[1],_[3*(s+k)+2]=$[2]}for(s=0;s<p;s+=3){var E=[],H=(E[0]=_[s+0],E[1]=_[s+1],E[2]=_[s+2],B5(E[0]*E[0]+E[1]*E[1]+E[2]*E[2]));0===H&&(H=x8),E[0]=E[0]/H,E[1]=E[1]/H,E[2]=E[2]/H,_[s+0]=E[0],_[s+1]=E[1],_[s+2]=E[2]}return new T8(_)},VK=function(y,q,_,s,p){return s=s||q.createTexture(),_&&(p?(p.image=_,y.createTexture(p,s)):y.createTexture({image:_},s)),s},hK=function(y,q,_){return _=new Uint8Array(_||4),q=q||y.createTexture(),y.activeTexture(33984),uK(y,q),JK(y,10241,9729),y.texImage2D(3553,0,6408,1,1,0,6408,5121,_),q},tK=function(y){return y.createBuffer()},uK=function(y,q){y.bindTexture(3553,q||y._emptyTexture)},JK=function(y,q,_){y.texParameteri(3553,q,_)},DK=function(y,q){(y=S5.for(y).directState()).polygonOffset.enabled=!0,y.polygonOffset.value=q},cK=function(y){S5.for(y).directState().polygonOffset.enabled=!1},RK=function(y,q){return y=S5.for(y).directState().color.clear,q&&y?y.slice(0):y},oK=function(y,q){q&&(S5.for(y).directState().color.clear=fl(q))},YK=function(y){if(y){var q=y.getGL();if(q)for(var _=1,s=arguments.length;_<s;_++){var p=arguments[_];if(Hx(p))for(var O=0,L=p.length;O<L;O++)mM(q,p[O]);else mM(q,p)}}},PK=function(y,q,_){if(q._lastClipboxVersion!==y._boxClipperVersion)q._lastClipboxVersion=y._boxClipperVersion;else if(_===q._lastClipboxEnabled)return;var s=y._boxClipperGroups,p=y._boxClipperShapes,O=s?s.length:0,L=new Array(O);if(_)for(var $=0;$<O;$++)L[$]=_&1<<s[$]?p[$]:0;q._lastClipboxEnabled=_,q.uClipperShape=L},mK=PK,WK=function(y){var q=(y=S5.for(y)).directUniforms(),y=y.directAttribs();q.uFix=!0,y.aNormal=!1},AK=function(y){S5.for(y).directUniforms().uFix=!1},zK=function(y,q,_,s,p,O,L){var $=(k=S5.for(y)).directState(),k=k.directUniforms();y._picking||(q?(k.uBlend=!0,k.uBlendColor=q):k.uBlend=!1,k.uLight=k.uFog=_==M5||_,$x(s)&&1!==s&&(k.uPartOpacity=s),k.uReverseFlip=p!=M5&&p,k.uFixPickReverseColor=O||FU),$.cullFace.enabled=!!L},eK=function(y){y._picking||(S5.for(y).directUniforms().uPartOpacity=1)},fK=(V$=[1,0,0,0,1,0,0,0,0],function(y,q,_,s,p,O,L,$,k,M){var E=(H=S5.for(y)).directUniforms(),H=H.directAttribs();if(!q)return E.uSampler=y._emptyTexture,void(E.uBlendSampler=y._emptyBlendTexture);E.uTexture=!0,E.uDiscardSelectable=!kx(_)||_,H.aUv=dK(y,s,p,M5,2),M?(E.uBlendTexture=!0,E.uBlendSampler=M):(E.uBlendTexture=!1,E.uBlendSampler=y._emptyBlendTexture),E.uSampler=q,E.uUvMatrix=O||L||$||k?l3($,O,L,k):V$}),GK=function(y,q){var _=(s=S5.for(y)).directUniforms(),s=s.directAttribs();y.activeTexture(33984),uK(y,M5),y.activeTexture(33985),uK(y,M5),q&&(s.aUv=!1,_.uTexture=!1,_.uSampler=y._emptyTexture,_.uBlendTexture=!1,_.uBlendSampler=y._emptyBlendTexture)},rK=function(y,q,_,s){var p=q.getBrightness(_),O=_.s("alphaTest"),L=S5.for(y),$=L.directUniforms(),k=q._picking,M=!0;return p!=M5&&1!==p&&($.uBrightness=p),$.uAlphaTest=O,$.shadowReceive=!k&&_.s("shadow.receive"),$.shadowCull=!k&&!!_.s("shadow.cull"),mK(q,$,_.s("3d.clipbox")?g4:_.s("3d.clipbox.mask")),(p=_.s("3d.clip.direction"))?(0===(O=_.s("3d.clip.percentage"))&&(M=!1),p=q.getData3dUI(_)._formatClipUniforms(p,O,_),$.uClipPercent=p[1],$.uClipDirection=p[0]):$.uClipDirection=0,$.blackout=!(!y._blooming||_.s("bloom")),k||(q._flowObjects.length&&q.flowMap.resetDataFlowEnabld(_,$),s||(O=_.s("envmap"),$.uUseEnvMap=!!O,$.roughness=_.s("roughness"),q._setEnvmapByProbeId($,_.s("envmap.probe"),O||.01),MK(q,$,_.s("light.mask"),_.s("headlight.ambientIntensity"))),$.uFog=_.s("shape3d.light")!=M5),s||!!_._flipSide!=(2===_._forceSingleFace)&&(L.directState().cullFace.frontFace=2304),M},gK=function(y,q,_,s,p){var O=(L=S5.for(y)).directUniforms(),L=L.directAttribs();!q||e5||G5||y.lineWidth(q),_&&!y._picking&&(O.uFixPickReverseColor=_),s&&(L.aPosition=dK(y,s,p,M5))},nK=function(y,q,_,s){y&&(s&&(_*=s),y.calls++,y.vertices+=_,q==M5||4===q?y.faces+=_/3:1===q?y.lines+=_/2:q===A4.POINTS?y.points+=_:5===q||6===q?y.faces+=_-2:3===q?y.lines+=_-1:2===q&&(y.lines+=_))},vK=function(y,q,_,s,p){H$&&(s=y[H$]),p?y.drawArraysInstanced(s==M5?4:s,q,_,p):y.drawArrays(s==M5?4:s,q,_),nK(y._renderInfo,s,_,p)},bK=function(y,q,_,s,p,O){H$&&(s=y[H$]),O?y.drawElementsInstanced(s==M5?4:s,_,p==M5?5123:p,q==M5?0:2*q,O):y.drawElements(s==M5?4:s,_,p==M5?5123:p,q==M5?0:2*q),nK(y._renderInfo,s,_,O)},IK=function(y,q,_,s,p){return y.bindBuffer(34962,q),_&&y.bufferData(34962,_,35044),q},UK=function(y,q,_,s,p){return(q=dK(y,q,_,s,p)).instanced=!0,q},dK=function(y,q,_,s,p){return _?_3(y,34962,q,_):IK(y,q,_)},y3=function(y,q,_){y.bindBuffer(34963,q),_&&y.bufferData(34963,_,35044)},q3=function(y,q,_){_3(y,34963,q,_)},_3=function(y,q,_,s){var p,O=s._bufId||(s._bufId=P.Math.generateIncreasingID()),L=y._4NQ;return(_=L[O])&&_._buf?y.bindBuffer(q,_._buf):(p=tK(y),_=L[O]={_buf:p},y.bindBuffer(q,p),y.bufferData(q,s,35044),L=5126,s instanceof Uint16Array?L=5123:s instanceof Int16Array?L=5122:s instanceof Uint32Array?L=5125:s instanceof Int32Array?L=5124:s instanceof Int8Array?L=5120:(s instanceof Uint8Array||s instanceof Uint8ClampedArray)&&(L=5121),p.glType=L),_._fid=y._renderInfo.frame,_._buf},s3=function(y,q){q!=M5&&0<=q&&y.disableVertexAttribArray(q)},p3=function(y,q){var _=y.getGL(),_=S5.for(_).directUniforms();y._7O=y._8O.pop(),y._modelMatrix=y._modelMatrixStack.pop(),q&&(_.uModelViewMatrix=y._7O,y._6O=q,_.uNormalMatrix=q)},O3=function(y,q){var _,s,p,O,L,$;return(_=q=q||l8())[0]=y[0],_[1]=y[1],_[2]=y[2],_[3]=y[3],_[4]=y[4],_[5]=y[5],_[6]=y[6],_[7]=y[7],_[8]=y[8],_[9]=y[9],_[10]=y[10],_[11]=y[11],_[12]=y[12],_[13]=y[13],_[14]=y[14],_[15]=y[15],SK(q),y=(_=q)[1],s=_[2],p=_[3],O=_[6],L=_[7],$=_[11],_[1]=_[4],_[2]=_[8],_[3]=_[12],_[4]=y,_[6]=_[9],_[7]=_[13],_[8]=s,_[9]=O,_[11]=_[14],_[12]=p,_[13]=L,_[14]=$,q},L3=function(y,q){var _=y.getGL(),s=y._7O,_=S5.for(_).directUniforms();q?(y._8O.push(Z8(s)),y._modelMatrixStack.push(Z8(y._modelMatrix)),_.uModelMatrix=iK(y._modelMatrix,y._modelMatrix,q),y._7O=iK(s,s,q)):_.uModelMatrix=y._modelMatrix=Z8(j8),_.uModelViewMatrix=s,_.uNormalMatrix=O3(s,y._6O)},$3={body:0,label:1,label2:2,note:3,note2:4,symbol:5},k3=function(y,q,_,s,p,O){var L,$=_?((_=s._pickId)||(_=s._pickId=q._pickIdUsed,q._pickIdUsed+=10),null!=($=$3[p])?L=_+$:(L=(_=(_=s._pickExtraPartMap)||(s._pickExtraPartMap={}))[p])||(L=_[p]=q._pickIdUsed++),q[L]||(q[L]={data:s.data,part:p}),j6(L)):qK;return O||(S5.for(y).directUniforms().uFixPickReverseColor=$),$},M3=k3,E3=function(y,q,_){var s,p="target"===(_="target"!==_?"source":_)?q.getTargetAgent():q.getSourceAgent(),_="edge."+_+".";if(W(p))return i=q.s(_+"anchor.x"),L=q.s(_+"anchor.elevation"),X=q.s(_+"anchor.y"),s=J8(p,y.getMat(p)),N=p.getAnchor3d(),(i=C8([(i===k5?.5:i)-N.x,(L===k5?.5:L)-N.y,(X===k5?.5:X)-N.z],s))[1]+=q.s(_+"offset.elevation"),i;var O=q.s(_+"index"),L=y.getData3dUI(p);if(!L.info||!L.info.list)return!1;if(0<=O){for(var $,k,M,E=(T=L.info._lastPointsSegments).points,H=T.segments,w=-1,Q=-1,x=0,S=(H||E).length;x<S;x++){if(3===(k=H?H.get(x):1))M=2;else if(4===k)M=3;else{if(5===k)continue;M=1}if(w+=M,++Q===O){$=E.get(w);break}}return[($=$||E.get(E.length-1)).x,($.e||0)+q.s(_+"offset.elevation"),$.y]}var X=q.s(_+"percent")||0,X=Math.max(0,Math.min(X,1));if(!L||!L.getCache)return!1;var T,i,N=L.getCache(),S=N[N.length-1].length;return[(i=(T=y.getLineOffset(p,X*S)).point).x,i.y+q.s(_+"offset.elevation"),i.z]},H3=(F$={center:function(y,q,_,s,p){var O=-q[1]/2,O={x:-q[0]/2,y:O,width:q[0],height:q[1]};return[(q=BU(y,O,_)).x+s,-q.y-p,E5.getPosition3dGap()]},front:function(y,q,_,s,p){var O=-q[1]/2,O={x:-q[0]/2,y:O,width:q[0],height:q[1]};return[(y=BU(y,O,_)).x+s,-y.y-p,q[2]/2+E5.getPosition3dGap()]},back:function(y,q,_,s,p){var O={x:-q[0]/2,y:-q[1]/2,width:q[0],height:q[1]};return[-(y=BU(y,O,_)).x-s,-y.y-p,-q[2]/2-E5.getPosition3dGap()]},left:function(y,q,_,s,p){var O=-q[1]/2,O={x:-q[2]/2,y:O,width:q[2],height:q[1]},y=BU(y,O,_);return[-q[0]/2-E5.getPosition3dGap(),-y.y-p,y.x+s]},right:function(y,q,_,s,p){var O={x:-q[2]/2,y:-q[1]/2,width:q[2],height:q[1]},y=BU(y,O,_);return[q[0]/2+E5.getPosition3dGap(),-y.y-p,-y.x-s]},top:function(y,q,_,s,p){var O={x:-q[0]/2,y:-q[2]/2,width:q[0],height:q[2]};return[(y=BU(y,O,_)).x+s,q[1]/2+E5.getPosition3dGap(),y.y+p]},bottom:function(y,q,_,s,p){var O=-q[2]/2,O={x:-q[0]/2,y:O,width:q[0],height:q[2]};return[(y=BU(y,O,_)).x+s,-q[1]/2-E5.getPosition3dGap(),-y.y-p]}},function(y,q,_,s,p,O){return F$[s](y,q,_,p||0,O||0)}),w3=function(y,q,_,s,p,O,L,$,k,M){return p&&(q[0]+=p[0],q[1]+=p[1],q[2]+=p[2]),XK(y,_),$?(p=l8(),GQ(p,k,M),C8(q,p),XK(y,q),y.auto=$,y.pos=C8([0,0,0],y),O&&(_=y.mat2=l8(),GQ(_,O,L))):(GQ(y,k,M),XK(y,q),s===qD?t8(y,-u5):s===_D?t8(y,u5):s===sD?h8(y,-u5):s===pD?h8(y,u5):s===yD&&t8(y,u),GQ(y,O,L)),y},Q3=function(y,q){var _,s,p=q.auto,O=q.mat2,y=y.gv;p?(_=l8(),s=[0,0,0,0],p="string"==typeof p?[(p.indexOf("x")<0?y._eye:y._center)[0],(p.indexOf("y")<0?y._eye:y._center)[1],(p.indexOf("z")<0?y._eye:y._center)[2]]:y._eye,ZK(s,NK(l8(),p,y._center,y._up)),KK(_,jK(s,s),q.pos),O&&iK(_,_,O),L3(y,_)):L3(y,q)},x3=function(y,q,_,s,p){var O=y.s,L=y.gv,$=L.getGL(),k=L._buffer,M=L._1O,E=S5.for($).directAttribs();VK(L,$,Pl,M),Q3(y,_),zK($,O(q+".blend"),O(q+".light"),O(q+".opacity"),O(q+".reverse.flip"),O(q+".reverse.color"),y.data._forceSingleFace||O(q+".reverse.cull")),fK($,M,p,k.uv,Q_),E.aPosition=dK($,k.vs,s,M5),E.aNormal=dK($,k.ns,x_,M5),q3($,k.is,S_),bK($,0,S_.length),GK($,M),eK($),p3(L)},S3=function(y,q,_){var s=y.gv,p=y.data,O=s.getFaceMaterial(p,q),y=y[q]={blend:s.getBodyColor(p)||s.getFaceBlend(p,q),light:s.getFaceLight(p,q),color:s.getFaceColor(p,q),opacity:s.getFaceOpacity(p,q),transparent:O?T3(O):s.getFaceTransparent(p,q),reverseFlip:s.getFaceReverseFlip(p,q),reverseColor:s.getFaceReverseColor(p,q),reverseCull:s.getFaceReverseCull(p,q),texture:s.getFaceImage(p,q),blendTexture:s.getFaceBlendImage(p,q),discardSelectable:s.getFaceDiscardSelectable(p,q),material:O};return"csg"!==q&&(y.uv=s.getFaceUv(p,q)||_&&_[q+"Uv"],y.uvScale=s.getFaceUvScale(p,q)||_&&_[q+"UvScale"],y.uvOffset=s.getFaceUvOffset(p,q)||_&&_[q+"UvOffset"],y.uvRotation=s.getFaceUvRotation(p,q)||_&&_[q+"uvRotation"],y.uvAnchor=s.getFaceUvAnchor(p,q)||_&&_[q+"uvAnchor"],(O=s.getFaceMat(p,q))&&(_=J8(p,O),p.appendAnchorMatrix3d(_),y.mat=_)),y},X3=function(y,q,_,s,p){var O,L,$,k,M=y[s];M&&(O=y.data,!(y=y.gv)._picking&&M.material?P_(q,y,O,M.material,[M.vs,M.tuv,M.ns]):p(M.transparent)&&(p=y._buffer,s=y.getTexture(M.texture,O,s),L=y.getTexture(M.blendTexture,O),$=(k=S5.for(q)).directUniforms(),k=k.directAttribs(),fK(q,s,M.discardSelectable,p.uv,M.tuv,M.uvOffset,M.uvScale,M.uvRotation,M.uvAnchor,L),zK(q,M.blend,M.light,M.opacity,M.reverseFlip,M.reverseColor,O._forceSingleFace||M.reverseCull),M.cs&&!y._batchColorDisabled?($.uBatchColor=!0,k.aBatchColor=dK(q,p.batchColor,M.cs,_.aBatchColor,4)):$.uDiffuse=M.color||X5["color.empty"],k.aPosition=dK(q,p.vs,M.vs,M5),k.aNormal=dK(q,p.ns,M.ns,M5),vK(q,0,M.vs.length/3),M.cs&&!y._batchColorDisabled&&($.uBatchColor=!1,s3(q,_.aBatchColor)),eK(q),GK(q,s)))},T3=function(y){return!!y&&!(!(y="string"==typeof y?E5.getMaterial(y):y)||!y.transparent)},i3=(Z$=new Q5,K$=new Q5,C$=new Q5,B$=new AB,function(y,q,_,s,p){y.identity();var O=q.rotationOffset,L=q.rotationPivot,$=q.scalingOffset,k=q.scalingPivot,_=(Z$.fromArray(_||q.translation),O&&Z$.add(K$.fromArray(O)),L&&Z$.add(K$.fromArray(L)),y.makeRotationFromQuaternion(B$.fromArray(s||q.rotation)).setPosition(Z$),Z$.set(0,0,0),L&&Z$.sub(K$.fromArray(L)),$&&Z$.add(K$.fromArray($)),k&&Z$.add(K$.fromArray(k)),0===Z$.x&&0===Z$.y&&0===Z$.z||y.translate(Z$),p||q.scale);return 2!==q.inheritType&&_&&(C$.fromArray(_),1===C$.x&&1===C$.y&&1===C$.z||y.scale(C$)),k&&y.translate(K$.multiplyScalar(-1)),y}),N3=function(y,q,s){var p,O,L,$;Hx(y)?y.forEach(function(y){N3(y,q,s)}):w5(y)?N3(W_(q,y),q,s):Mx(y)?y.model3d?E5.traverse(y,function(y,q){p=y.position,O=y.scale,(L=y.quaternion)||(L=y.euler)&&($=$||[0,0,0],L=e.eulerArrayToQuaternionArray(L,$));var _=y._matrixWorld;(_=_||(y._matrixWorld=new G)).composeFromArray(p,L,O),q&&_.premultiply(q._matrixWorld),(q=y.mesh)&&("string"==typeof q&&(q=E5.getMesh(q)),s.push({matrix:_,mesh:q}))},null,"comps"):y.shape3d?N3(y.shape3d,q,s):s.push({mesh:y}):s.push({mesh:y})},a3=(j$=new e.Matrix2d,function(y,q,_,s,p){return(p=p||j$).identity(),s&&p.translate(-s[0],-s[1]),_&&p.scale(_[0],_[1]),y&&p.rotate(y),s&&p.translate(s[0],s[1]),q&&p.translate(q[0],q[1]),p}),l3=(a$=[1,0,0,0,1,0,0,0,1],l$=[1,0,0,0,1,0,0,0,1],function(y,q,_,s){return y||q||_||s?(N$=y?(i$=p5(y),H5(y)):(i$=0,1),T$=_?(X$=_[0],_[1]):X$=1,w$=N$*X$,Q$=i$*X$,x$=-i$*T$,N$*=T$,T$=s?(S$=s[0]-(w$*s[0]+x$*s[1]),s[1]-(Q$*s[0]+N$*s[1])):S$=0,q&&(S$+=q[0],T$+=q[1]),l$[0]=w$,l$[1]=Q$,l$[3]=x$,l$[4]=N$,l$[6]=S$,l$[7]=T$,l$):a$}),j3=function(y,q,_,s){y.uUseSkinning=!0,y.bindMatrix=q.skeleton.bindMatrix,y.bindMatrixInverse=s.bindMatrixInverse,y.boneTexture=_,y.boneTextureSize=q.boneTextureSize},Z3=function(y,q,_,s){var p,O,L,$,k,M;s?(y.center=q.max.clone().add(q.min).multiplyScalar(.5).toArray(),p=y.center[0],O=y.center[1],L=y.center[2]):p=O=L=0,_?(M=s?($=(_=q.max.clone().sub(q.min).toArray())[0],k=_[1],_[2]):($=2*Math.max(Math.abs(q.min.x),Math.abs(q.max.x)),k=2*Math.max(Math.abs(q.min.y),Math.abs(q.max.y)),2*Math.max(Math.abs(q.min.z),Math.abs(q.max.z))),0===$&&($=Math.min(k,M)/1e3||.001),0===k&&(k=Math.min($,M)/1e3||.001),0===M&&(M=Math.min($,k)/1e3||.001),y.rawS3=[$,k,M],y.scale=[1/$,1/k,1/M]):$=k=M=1,s&&(y.position=[-p/$,-O/k,-L/M])},K3=function(y,q,_,s,p,O){for(var L,$,k,M,E,H,w,Q,x,S=[s-q,p-_],X=y?y.length:0,T=0;T<X;T++){for($=2,k=(L=y[T])[0],M=L[1];$+1<L.length;){if(E=L[$],H=L[$+1],ux(q,_,s,p,k,M,E,H,!0)){Q=vA(w=[E-k,H-M]),w[0]/=Q,w[1]/=Q,Q=a8(S,w),x=[w[0]*(Q=0<Q?O:-O),w[1]*Q];break}k=E,M=H,$+=2}if(x)break}if(x)for(s=q+x[0],p=_+x[1],T=0;T<X;T++)for($=2,k=(L=y[T])[0],M=L[1];$+1<L.length;){if(E=L[$],H=L[$+1],ux(q,_,s,p,k,M,E,H,!0))return[0,0];k=E,M=H,$+=2}return x||[s-q,p-_]},C3=function(y){return"nearest"===y?9728:"linear"===y?9729:y},B3=P.graph3d={WebGLConstants:A4},O=function(y,q,_){w8("ht.graph3d."+y,q,_)},F3="~!<yfusfw!+!yjsubNudfkpsQv!>!opjujtpQ`mh!\v?zepc/tw/qbNxpmg=!fevmdoj$\v!\v?zepc/tw/qbNxpebit=!fevmdoj$\v!\vgjeof$\v!~!<fdobutjEfojMb!>!fdobutjEfojMw!|!*itbEv)!gj!\vITBE!gfegj$\v!\vgjeof$\v!~!<ttfouihjsCidubCb!>!ttfouihjsCidubCw!|!*ttfouihjsCidubCv)!gj!\vTTFOUIHJSCIDUBC!gfegj$\v!\vgjeof$\v!~!<eofmCidubCb!>!eofmCidubCw!|!*eofmCidubCv)!gj!\vEOFMCIDUBC!gfegj$\v!\vgjeof$\v!~!<spmpDidubCb!>!spmpDidubCw!|!*spmpDidubCv)!gj!\vSPMPDIDUBC!gfegj$\v!\vgjeof$\v!~!<**1/2!-wVb)4dfw!+!yjsubNwVv)3dfw!>!wVw!|!*fsvuyfUv)!gj!\vftmf$\v!<*y/wVb!-**1/2!-wVb)4dfw!+!yjsubNwVv)3dfw)4dfw!>!wVw!\vQJMD`WV!gfegj$\v!<*efnspgtobsu!+!yjsubNmfepNv)4dfw!>!opjujtpQemspXw!<*yfusfw)4dfw!>!opjujtpQwNw!\vgjeof$\v!<**1/2!-mbnspOudfkcp)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!\vftmf$\v!<**1/2!-mbnspOudfkcp)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!ftmf!~!<**1/2!-mbnspOw!+!n)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!<**^3]n!-^3]n)upe!-*^2]n!-^2]n)upe!-*^1]n!-^1]n)upe)4dfw!0!mbnspOudfkcp!>!mbnspOw!<*!efdobutoJyjsubNb!)4ubn!>!n!4ubn!|!*fdobutoJftVv)!gj!\vFDOBUTOJIDUBC!gfegj$\v!<efnspgtobsu!+!yjsubNxfjWmfepNv!>!yfusfw!5dfw!\vgjeof$\v!~!<efnspgtobsu!+!efdobutoJyjsubNb!>!efnspgtobsu!|!*fdobutoJftVv)!gj!\vFDOBUTOJIDUBC!gfegj$\v!<*mbnspOb)4dfw!>!mbnspOudfkcp!4dfw!<*opjujtpQb)4dfw!>!opjujtpQmbdpMw!<*1/2!-opjujtpQb)5dfw!>!efnspgtobsu!5dfw!|!*)ojbn!ejpw!\v?ebfi/tw/qbNxpmg=!fevmdoj$\v!\v?ebfi/tw/qbNxpebit=!fevmdoj$\v!\vgjeof$\v!<fdobutjEfojMw!ubpmg!hojzsbw!<fdobutjEfojMb!ubpmg!fuvcjsuub!<itbEv!mppc!nspgjov!\vITBE!gfegj$\v!\vgjeof$\v!<^TUIHJM`UPQT`NVO]opjudfsjEupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]opjujtpQupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]spmpDupqTv!5dfw!nspgjov!\v1!?!TUIHJM`UPQT`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`UOJPQ`NVO]opjujtpQuojpQv!4dfw!nspgjov!<^TUIHJM`UOJPQ`NVO]spmpDuojpQv!5dfw!nspgjov!\v1!?!TUIHJM`UOJPQ`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`SJE`NVO]opjudfsjEsjEv!4dfw!nspgjov!<^TUIHJM`SJE`NVO]spmpDsjEv!5dfw!nspgjov!\v1!?!TUIHJM`SJE`NVO!gj$\v!<opjujtpQmbdpMw!4dfw!hojzsbw!<opjujtpQemspXw!4dfw!hojzsbw!<opjujtpQwNw!4dfw!hojzsbw!<mbnspOw!4dfw!hojzsbw!<yjGv!mppc!nspgjov!\vgjeof$\v!\v?ebfi/tw/hojdobutoj=!fevmdoj$\v!\vHOJDOBUTOJ`FTV!fojgfe$\v!<fdobutoJftVv!mppc!nspgjov!\vFDOBUTOJIDUBC!gfegj$\v!\vgjeof$\v!<wVw!3dfw!hojzsbw!\vftmf$\v!<wVw!4dfw!hojzsbw!\vQJMD`WV!gfegj$\v!\vgjeof$\v!<eofmCidubCw!4dfw!hojzsbw!<eofmCidubCb!4dfw!fuvcjsuub!<eofmCidubCv!mppc!nspgjov!\vEOFMCIDUBC!gfegj$\v!\vgjeof$\v!<ttfouihjsCidubCw!ubpmg!hojzsbw!<ttfouihjsCidubCb!ubpmg!fuvcjsuub!<ttfouihjsCidubCv!mppc!nspgjov!\vTTFOUIHJSCIDUBC!gfegj$\v!\vgjeof$\v!<spmpDidubCw!5dfw!hojzsbw!<spmpDidubCb!5dfw!fuvcjsuub!<spmpDidubCv!mppc!nspgjov!\vSPMPDIDUBC!gfegj$\v!<wVb!3dfw!fuvcjsuub!<opjujtpQb!4dfw!fuvcjsuub!<mbnspOb!4dfw!fuvcjsuub!<yjsubNmbnspOv!5ubn!nspgjov!<yjsubNxfjWmfepNv!5ubn!nspgjov!<yjsubNmfepNv!5ubn!nspgjov!<yjsubNxfjWv!5ubn!nspgjov!<yjsubNudfkpsQv!5ubn!nspgjov!<yjsubNwVv!4ubn!nspgjov!<fsvuyfUeofmCv!mppc!nspgjov!<fsvuyfUv!mppc!nspgjov!\vYJGFSQ$!00^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",V3=(ax(E5,{setBatchInfo:function(y,q){Fn[y]=q},getBatchInfo:function(y){return Fn[y]},getBatchInfoMap:function(){return Fn},setBatchInfoMap:function(y){Fn=y}},!0),[1,1,1]),h3=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t3=[1,0,0,0,0,1,0,1,1,1,1,0],u3=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],J3=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],D3=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],c3=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],R3=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],o3=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],Y3=function(y,q){y._40Q.each(function(y){y.ivBatch(q)})},P3=function(y,q,_,s){var p=q[_=_._id];if(p){var O=(T=y[k=p.batch]).ds,L=p.index;if(T.invalidate=!0,delete q[_],O.splice(L,1),Bx(O))return!1!==(_=s.getBatchInfo(k)||mn).keepData&&T.ms&&T.ms.length&&_.instanced&&!s.isBatchInstancedDisabled()?(T.ms=[],T.ics&&(T.ics=[]),void(T.ps&&(T.ps=[]))):void delete y[k];for(var _=L,s=p.begin,$=p.size;L<O.length;L++)(p=q[O[L]._id]).index--,p.begin-=$;if(T.ms&&T.ms.length)return T.ms.splice(16*_,16),T.ics&&T.ics.splice(4*_,4),void(T.ps&&(T.ps.splice(4*_,4),T.ps._invalidateThisFrame=!0));var y=3*s,k=3*$,_=4*s,M=4*$,E=T.vs,H=T.ps,w=T.uv,Q=T.cs,x=T.bs,S=T.rs,X=T.ns,T=T.ls;E.splice(y,k),H.splice(_,M),H._invalidateThisFrame=!0,w&&w.splice(2*s,2*$),Q&&Q.splice(_,M),x&&x.splice(y,k),S&&S.splice(s,$),X&&X.splice(y,k),T&&T.splice(s,$)}},m3=function(y,q,_,s,p){if(!s)return M5;var O,L,$=q[s];return $||(L=(O=p.getBatchInfo(s)||mn).image||O.material?[]:M5,p=O.instanced&&!p.isBatchInstancedDisabled(),$=q[s]={vs:[],ns:[],uv:L,cs:L||O.color?M5:[],bs:O.blend?[]:M5,ps:[],rs:O.brightness?[]:M5,ds:[],ms:p?[]:M5,ics:L||O.color||!p?M5:[]}),$.invalidate=!0,y[_._id]={index:$.ds.length,begin:$.vs.length/3,batch:s},$.ds.push(_),$},W3=function(y,q){return q!=M5&&1!==q?[y[0]*q,y[1]*q,y[2]*q,y[3]]:y},A3=function(y){y&&(y._ctlineModel=[],y._lineModel=k5)},z3=function(y,q,_){var l=y.getData3dUI(q);if(($=($=l.shapeModel)||W_(l))||!l.shapeName){var s,p=q.s("wf.combineTriangle");if(_.geometry){if(!$&&!($=q instanceof P.Node&&!(q instanceof P.Shape)?D$=D$||{vs:X_,is:T_,uv:i_}:[l.left,l.front,l.right,l.back,l.top,l.bottom]))return k5;if(!(s=p?(s=q.s("wf.normEpsilon"),isNaN(s)&&(s=2),p=0|Math.min(3,Math.max(1,isNaN(p)?1:p)),MQ[p-1]($,l,180/(Math.PI*s))):function(y){var q,_,s,p,O;if(E=y._lineModel)return E;for(var L,$,k,M=["","top_","bottom_"],E=[],H=[],w=(N3(y,l,H),e.requestVector3()),Q=e.requestVector3(),x=e.requestVector3(),S=0,X=H.length;S<X;S++)if((p=H[S])&&(O=p.mesh))for(q=0,_=M.length;q<_;q++)if(s=O[M[q]+"vs"])for(var T=O[M[q]+"is"],i=p.matrix,N=T?T.length:s.length/3,a=0;a<N;a+=3)k=T?(L=T[a],$=T[a+1],T[a+2]):($=(L=a)+1,a+2),L*=3,$*=3,k*=3,i?(w.fromArray(s,L).applyMatrix4(i),Q.fromArray(s,$).applyMatrix4(i),x.fromArray(s,k).applyMatrix4(i),E.push(w.x,w.y,w.z,Q.x,Q.y,Q.z,Q.x,Q.y,Q.z,x.x,x.y,x.z,x.x,x.y,x.z,w.x,w.y,w.z)):E.push(s[L],s[L+1],s[L+2],s[$],s[$+1],s[$+2],s[$],s[$+1],s[$+2],s[k],s[1+k],s[2+k],s[k],s[1+k],s[2+k],s[L],s[L+1],s[L+2]);return e.releaseVector3(w),e.releaseVector3(Q),e.releaseVector3(x),y._lineModel=E}($))||0===s.length)return}else s=_.short?j_:l_,q.s("wf.boundingBox")&&(p=l.getBoundingBox(!0))&&($=(new G).scale(p.max.clone().sub(p.min)).setPosition(p.max.clone().add(p.min).divideScalar(2)).toArray(),s=LK([],$,s));var O,L,p=y.getBrightness(q),$=q.s("bloom"),k=q.s("3d.reflectable"),M=fl(_.color||"white"),E=M[3]<1,H=Math.ceil(_.width)||1,w=q.s("3d.clipbox")?g4:q.s("3d.clipbox.mask"),Q=q.s("wf.fog"),x=q.s("wf.group"),S=q.getRenderLayer(),y=y._40Q.get(S),S=q.s("wf.material"),X=y.wireframeIndexMap,y=y.wireframeModelMap,T=q.s("batch"),i=q.s("3d.clip.direction");if(S||i){if(i){if(0===(L=q.s("3d.clip.percentage")))return;L=l._formatClipUniforms(i,L,q)}O="_"+q._id}else O=T?(E?"T":"O")+x+"_"+T:(E?"T":"O")+x+($?"_1":"_0")+(k?"1_":"0_")+w+"_"+H+(Q?"1_":"0_");i=(i=y[O])||(y[O]={vs:[],cs:[],ps:[],ds:[],T:E,B:$,clipboxMask:w,reflectable:!!k,W:H,batch:T,fog:Q}),S&&(i.material=S),i.invalidate=!0,x=i.vs,y=i.cs,E=i.ds,$=X[q._id]={index:E.length,begin:x.length/3,batch:O},E.push(q),w=l.mat,_.geometry&&q instanceof P.Shape&&(E5.extractShapeTranslation||E5.extractPolylineTranslation||E5.extractVerticesTranslation)&&(k=l._vsTranslation)&&w&&(w=(new e.Matrix4).fromArray(w).multiply(k).toArray()),q instanceof P.Edge||!(!w||!_.geometry&&q instanceof P.Shape)||(w=J8(q,_.mat),q.appendAnchorMatrix3d(w)),L?(i.mat=Z8(w),i.clipDirection=L[0],i.clipPercent=L[1],LK(x,null,s)):LK(x,w,s),H=$.size=x.length/3-$.begin,OK(y,W3(M,p),H)}},e3=function(y,q,_,s){if(q){var p=(_=_[q.batch]).ps,O=(_=_.ms&&_.ms.length)?4*q.index:4*q.begin,L=_?1:q.size;if(p[O]!==y[0]||p[O+1]!==y[1]||p[O+2]!==y[2]||p[O+3]!==y[3]){for(var $=0;$<L;$++)p[O++]=y[0],p[O++]=y[1],p[O++]=y[2],p[O++]=y[3];p._invalidateThisFrame=!0}}},f3=(u$=new P.Math.Vector3,J$=new P.Math.Vector3,function(y,q){var _=q+["32"],s=y[q],p=y[_];if(s){if(E5.extractBatchTranslation||E5.extractVerticesTranslation)if("vs"!==q||y.ms&&y.ms.length){if("ms"===q&&y.ms&&y.ms.length){for(J$.set(0,0,0),L=s.length,$=12;$<L;$+=16)J$.add(u$.fromArray(s,$));for(J$.divideScalar(L/16),k=J$.x,M=J$.y,E=J$.z,H=new Array(L),$=0;$<L;$+=16){for(var O=0;O<12;O++)H[$+O]=s[$+O];H[$+12]=s[$+12]-k,H[$+13]=s[$+13]-M,H[$+14]=s[$+14]-E,H[$+15]=s[$+15]}s=H,y.translate=[k,M,E]}}else{J$.set(0,0,0);for(var L=s.length,$=0;$<L;$+=3)J$.add(u$.fromArray(s,$));J$.divideScalar(L/3);for(var k=J$.x,M=J$.y,E=J$.z,H=new Array(L),$=0;$<L;$+=3)H[$]=s[$]-k,H[$+1]=s[$+1]-M,H[$+2]=s[$+2]-E;s=H,y.translate=[k,M,E]}p&&p.length===s.length?(p.set(s),p._bufId=null):y[_]=new T8(s)}else delete y[_]}),G3=function(y,q,_,s,p,O,L,$){var k,M,E=q instanceof P.Shape,H=O[0],w=O.length;if(1<w)for(var H=Z8(H),Q=1;Q<w;Q++)iK(H,H,O[Q]);E&&(k=q.p3(),XK(H,k)),ix(L.ms,H),L.ics&&OK(L.ics,q.s("shape3d.color")||x,1),L.vs.length||(M=Z8(h3),E&&XK(M,N8(k)),r3(y,q,_,s,p,[M],L,$))},r3=function(q,_,y,s,p,O,L,$){if(Hx(y))y.forEach(function(y){r3(q,_,y,s,p,O,L,$)});else if(w5(y))r3(q,_,W_(s,y),s,p,O,L,$);else if(Mx(y)){var k,M=g(y.mat,_,q),E=g(y.s3,_,q),H=g(y.t3,_,q),w=g(y.r3,_,q);if((E||w||H||M)&&(k=D8(M,E,w,g(y.rotationMode,_,q),H),O.push(k)),y.shape3d)r3(q,_,y.shape3d,s,p,O,L,y);else{var M=s.s,Q=($=$||mn,O[0]),x=O.length,E=M("shape3d.color",y.color,$.color);if(p=p||M("shape3d.blend",y.blend,$.blend),1<x)for(var Q=Z8(Q),S=1;S<x;S++)iK(Q,Q,O[S]);w=Q?O3(Q):M5,y.vs&&M(uL,y.visible,$.visible)&&g3(Q,L,y.vs,y.uv,y.is,y.ns,w,p,E),y.top_vs&&M(cL,y.topVisible,$.topVisible)&&g3(Q,L,y.top_vs,y.top_uv,y.top_is,y.top_ns,w,p,M("shape3d.top.color",y.topColor,$.topColor)||E),y.bottom_vs&&M(RL,y.bottomVisible,$.bottomVisible)&&g3(Q,L,y.bottom_vs,y.bottom_uv,y.bottom_is,y.bottom_ns,w,p,M("shape3d.bottom.color",y.bottomColor,$.bottomColor)||E),y.from_vs&&M(JL,y.fromVisible,$.fromVisible)&&g3(Q,L,y.from_vs,y.from_uv,y.from_is,y.from_ns,w,p,M("shape3d.from.color",y.fromColor,$.fromColor)||E),y.to_vs&&M(DL,y.toVisible,$.toVisible)&&g3(Q,L,y.to_vs,y.to_uv,y.to_is,y.to_ns,w,p,M("shape3d.to.color",y.toColor,$.toColor)||E)}k&&O.pop()}},g3=function(_,y,s,p,q,O,L,$,k){var M,E=y.cs,H=y.uv,w=y.bs,Q=y.ns,x=y.vs,y=(O&&0!==O.length||(O=FK(s,q)),G.determinantOfArray(_)<0);q||y?(M=q?q.length:s.length/3,F8(q||M,y,function(y){var q=3*y;LK(x,_,[s[q],s[1+q],s[2+q]]),LK(Q,L,[O[q],O[1+q],O[2+q]]),H&&ix(H,[p[2*y],p[2*y+1]])})):(M=s.length/3,LK(x,_,s),LK(Q,L,O),H&&ix(H,p)),E&&OK(E,k,M),w&&($?pK(w,$,M):ix(w,V3,M))},n3=function(y,q,_){var s=y.data.p3();q=Z8(q),XK(q,s),ix(_.ms,q),_.ics&&OK(_.ics,y.data.s("shape3d.color")||x,1),_.vs.length||(q=Z8(h3),XK(q,N8(s)),v3(y,q,_))},v3=function(y,q,_){d3(y,qD,q,_),d3(y,_D,q,_),d3(y,d5,q,_),d3(y,yD,q,_),d3(y,sD,q,_),d3(y,pD,q,_),d3(y,"csg",q,_)},b3=function(y,q,_,s,p,O){ix(_.ms,p),_.ics&&OK(_.ics,q.s("all.color")||x,1),_.vs.length||I3(y,q,_,s,Z8(h3),O)},I3=function(y,q,_,s,p,O){y_(y,q,_,s,p,O,qD,u3),y_(y,q,_,s,p,O,_D,J3),y_(y,q,_,s,p,O,sD,D3),y_(y,q,_,s,p,O,pD,c3),y_(y,q,_,s,p,O,d5,R3),y_(y,q,_,s,p,O,yD,o3)},U3=function(y,q,_,s,p){s?p.instanced?y.gv.batchInstancedModel(y.data,s,y,y.getBodyColor(),[q],_):r3(y.gv,y.data,s,y,y.getBodyColor(),[q],_):p.instanced?y.gv.batchInstancedShapeFace(y,q,_):v3(y,q,_)},d3=function(y,q,_,s){if(y=y[q]){var p=y.tuv;if(p){var q=y.uvScale,O=y.uvOffset,L=y.uvRotation,$=y.uvAnchor;if(q||O||L)for(var k,M,E=(L=a3(L,O,q,$)).a,H=L.b,w=L.c,Q=L.d,x=L.tx,S=L.ty,X=p.length,T=0;T<X;T+=2)k=p[T],M=p[T+1],p[T]=E*k+w*M+x,p[T+1]=H*k+Q*M+S}g3(_,s,y.vs,p,M5,M5,_?O3(_):M5,y.blend,y.color)}},y_=function(y,q,_,s,p,O,L,$){var k,M,E,H,w,Q,x,S,X,T,i,N,a,l,j,Z=_.cs,K=_.uv,C=_.bs,B=_.vs,F=_.ns,V=FK($);y.getFaceVisible(q,L)&&((_=y.getFaceMat(q,L))&&(p=J8(q,_),O=O3(p)),G.determinantOfArray(p)<0?(_=$.length/3,F8(_,!0,function(y){LK(B,p,[$[y*=3],$[1+y],$[2+y]]),LK(F,O,[V[y],V[1+y],V[2+y]])})):(LK(B,p,$),LK(F,O,V)),Z&&OK(Z,y.getFaceColor(q,L),6),K&&(_=y.getFaceUv(q,L)||s[L+"Uv"],Z=y.getFaceUvScale(q,L)||s[L+"UvScale"],k=y.getFaceUvOffset(q,L)||s[L+"UvOffset"],H=y.getFaceUvRotation(q,L)||s[L+"UvRotation"],s=y.getFaceUvAnchor(q,L)||s[L+"UvAnchor"],w=(_=_?[_[6],_[7],_[0],_[1],_[2],_[3],_[2],_[3],_[4],_[5],_[6],_[7]]:t3)[0],Q=_[1],x=_[2],S=_[3],X=_[4],T=_[5],i=_[6],N=_[7],a=_[8],l=_[9],j=_[10],_=_[11],(Z||k||H||s)&&(k=(H=a3(H,k,Z,s)).a,Z=H.b,s=H.c,M=H.d,Q=Z*(w=k*w+s*Q+(E=H.tx))+M*Q+(H=H.ty),S=Z*(x=k*x+s*S+E)+M*S+H,T=Z*(X=k*X+s*T+E)+M*T+H,N=Z*(i=k*i+s*N+E)+M*N+H,l=Z*(a=k*a+s*l+E)+M*l+H,_=Z*(j=k*j+s*_+E)+M*_+H),K.push(w,Q,x,S,X,T,i,N,a,l,j,_)),C&&((Z=y.getBodyColor(q)||y.getFaceBlend(q,L))?pK(C,Z,6):ix(C,V3,6)))},q_=function(y,q,_,s){var p,O,L,$,_=y._picking?y.pickColorMap:null,k=y.getGL(),M=y._buffer;if(!Cx(q)){for($ in L3(y,h3),WK(k),q){var E,H,w,Q,x,S,X,T,i,N=q[$],a=(Q=N.batch?(E=(Q=y.getBatchInfo(N.batch)||mn).wfBloom===k5?Q.bloom:Q.wfBloom,H=Q.wfReflectable===k5?Q.reflectable:Q.wfReflectable,w=Q.wfClipboxMask===k5?Q.clipboxMask:Q.wfClipboxMask,Q.width):(E=N.B,H=N.reflectable,w=N.clipboxMask,N.W),!_&&N.material);!a&&(s&&!N.T||!s&&N.T||y.isReflecting(k)&&!1===H)||(X=_&&!y.drawFilter,N.invalidate?(N.invalidate=!1,f3(N,"vs"),f3(N,"cs"),f3(N,"ls"),X&&f3(N,"ps")):X&&N.ps&&N.ps._invalidateThisFrame&&(N.ps._invalidateThisFrame=!1,f3(N,"ps")),X=N.translate,p=N.clipDirection,a?("lines"!==(x=(a=N.material).renderMode)?a.renderMode="lines":x=null,y._prefabRenderer.render(k,{position:X,mesh:{vs:N.vs32,aLineDistance:N.ls32,aBatchColor:N.cs32,_complete_:!0},mat:a},N),x&&(a.renderMode=x)):(X||p?(O=p?Z8(N.mat):[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],X&&XK(O,X),L=Z8(y._6O),L3(y,O)):O=null,a=N.vs32,x=_?N.ps32:N.cs32,gK(k,Q,M5,M.vs,a),S=(X=S5.for(k)).directUniforms(),X=X.directAttribs(),i=N.D,T=!y._dashDisabled&&i,S.uAlphaTest=X5.alphaTest,k._blooming&&!E&&(S.blackout=!0),p&&(S.uClipPercent=N.clipPercent,S.uClipDirection=p),mK(y,S,w===k5?r4:w),T&&(S.uDash=!0,S.uDashDistance=i,S.uDashGapDistance=N.G,S.uDiffuse=N.A||X5["color.empty"],X.aLineDistance=dK(k,M.lineDistance,N.ls32,M5,1)),(i=!y._batchColorDisabled)&&x&&x.length?(S.uBatchColor=!0,X.aBatchColor=dK(k,M.batchColor,x,M5,4)):(S.uBatchColor=!1,X.aBatchColor=!1),(N=!1!==N.fog)||(S.uFog=!1),fK(k),vK(k,0,a.length/3,1),GK(k),N||(S.uFog=!0),i&&(S.uBatchColor=!1,X.aBatchColor=!1),T&&(S.uDash=!1,X.aLineDistance=!1),k._blooming&&!E&&(S.blackout=!1),O&&(p&&(S.uClipDirection=0),p3(y,L),S.uModelMatrix=j8)))}AK(k),p3(y)}},__=function(y,q){y.invalidate=!1,f3(y,"vs"),f3(y,"ns"),f3(y,"cs"),f3(y,"rs"),q&&f3(y,"ps"),f3(y,"bs"),f3(y,"uv"),f3(y,"ms"),f3(y,"ics")},s_=function(y,q,o,_,s,p){var O,L,$,k,M,E,H,_=y._picking?y.pickColorMap:null,w=y.getGL(),Q=S5.for(w),x=Q.directUniforms(),S=Q.directAttribs(),X=y._buffer;if(!Cx(q)){var T,i,N,a=y._flowObjects.length?y.flowMap:null,l=y.drawFilter;for(O in L3(y,h3),q)if(!1!==(L=y.getBatchInfo(O)||mn).visible)if((h=!_&&L.material)||!(s&&!L.transparent||!s&&L.transparent||y.isReflecting(w)&&!1===L.reflectable)){var j=L.renderLayerMask;if(wu(p=p==M5?Mu:p,j=j==M5?Mu:j)&&(j=q[O],_||!L.transparentMask)){if(i=!1,l){if(!1===L.highlight)continue;if(T=j.ds){for(var Z=0,K=T.length;Z<K;Z++)if(!l(T[Z])){i=!0;break}if(!i)continue}}var C,B=s&&!0===L.autoSort&&(y._33Q||j.invalidate)&&!i,F=_&&!i,V=(j.invalidate?__(j,F):F&&j.ps&&j.ps._invalidateThisFrame&&(j.ps._invalidateThisFrame=!1,f3(j,"ps")),j.ms32);if(V){if(!V.length)continue;N=!0}else N=!1;if(F=j.vs32,$=_?j.ps32:N?j.ics32:j.cs32,M=j.uv32,J=j.bs32,k=j.rs32,H=F.length/3,B&&((C=O_(F,y.getEye(),y,V))?(j.is=C.is,j.elementTypeUint=C.useUint32):(j.is=null,j.elementTypeUint=null)),H){if((C=L.polygonOffset)&&DK(w,C),h&&!i){var h={vs:F,uv:M,ns:j.ns32,is:j.is,_complete_:!0},h={position:j.translate,mesh:h,mat:L.material};N&&(h.instances={aMatrixInstanced:j.ms32}),y._prefabRenderer.render(w,h,L)}else{(h=j.translate)&&L3(y,[1,0,0,0,0,1,0,0,0,0,1,0,h[0],h[1],h[2],1]),L.light,E=y.getTexture(L.image),zK(w,M5,L.light,L.opacity,L.reverseFlip,L.reverseColor,L.reverseCull),$?y._batchColorDisabled?(x.uBatchColor=!1,S.aBatchColor=!1):(x.uBatchColor=!0,S.aBatchColor=i?[0,1,1,1]:N?UK(w,X.instancedBatchColor,$,M5,4):dK(w,X.batchColor,$,M5,4)):(x.uBatchColor=!1,x.uDiffuse=L.color||X5["color.empty"]);var t,u=L.alphaTest;x.uAlphaTest=u===k5?X5.alphaTest:u,x.shadowReceive=!_&&!1!==L.shadowReceive,mK(y,x,L.clipboxMask===k5?r4:L.clipboxMask),MK(y,x,L.lightMask===k5?r4:L.lightMask,L.headlightAmbientIntensity),a&&a.resetFlowUniform(L.effectFlowMask===k5?r4:L.effectFlowMask,x),w._blooming&&!L.bloom&&(x.blackout=!0),L.envmap!==k5?(x.uUseEnvMap=!0,x.roughness=L.roughness||0,y._setEnvmapByProbeId(x,L.envmapProbe||0,L.envmap)):(x.uUseEnvMap=!1,x.envMapIntensity=0);(u=J&&!y._batchBlendDisabled)&&(x.uBatchBlend=!0,S.aBatchBlend=dK(w,X.batchBlend,J,M5));var J=k&&!y._batchBrightnessDisabled;if(J&&(x.uBatchBrightness=!0,S.aBatchBrightness=dK(w,X.batchBrightness,k,M5,1)),M?fK(w,E,L.discardSelectable,X.uv,M,L.uvOffset,L.uvScale,L.uvRotation,L.uvAnchor):fK(w),S.aPosition=dK(w,X.vs,F,M5),S.aNormal=dK(w,X.ns,j.ns32,M5),N&&(x.uUseInstance=!0),i){for(N&&!(t=y._highlightInstancedFloatArray)&&(t=y._highlightInstancedFloatArray=new T8(16)),Z=0,K=T.length;Z<K;Z++)if(!l(T[Z])){var D=o[T[Z]._id];if(N){for(var c=0;c<16;c++)t[c]=V[16*D.index+c];R=UK(w,X.ms,t,M5),w.bufferSubData(34962,0,t),S.aMatrixInstanced=R,vK(w,0,H,null,1)}else{var R=D.begin,Y=D.size;vK(w,R,Y)}}}else N&&(B&&(V=p_(V,y.getEye())),S.aMatrixInstanced=UK(w,X.ms,V,M5)),j.is?(y3(w,X.is,j.is),bK(w,0,H,null,j.elementTypeUint?5125:null,N?j.ms32.length/16:0)):vK(w,0,H,null,N?j.ms32.length/16:0);M?GK(w,E):GK(w),$&&!y._batchColorDisabled&&(x.uBatchColor=!1,S.aBatchColor=!1),u&&(x.uBatchBlend=!1,S.aBatchBlend=!1),J&&(x.uBatchBrightness=!1,S.aBatchBrightness=!1),w._blooming&&!L.bloom&&(x.blackout=!1),N&&(x.uUseInstance=!1,S.aMatrixInstanced=k5),eK(w),h&&(p3(y),x.uModelMatrix=j8)}C&&cK(w)}}}p3(y)}},p_=function(_,s){for(var y,q,p,O=_.length/16,L=new Array(O),$=0;$<O;$++)L[$]=$;L.sort(function(y,q){return y=[_[16*y+12],_[16*y+13],_[16*y+14]],q=[_[16*q+12],_[16*q+13],_[16*q+14]],vA(s,q)-vA(s,y)});var k=_._sortedByEye;for(k&&k.length===_.length||(k=_._sortedByEye=new T8(16*O)),$=0;$<O;$++)for(q=16*$,p=16*L[$],y=0;y<16;y++)k[q+y]=_[p+y];return k._bufId=null,k},O_=function(s,p,y,q){var _=s.length/3,O=65535<_;if(!(y=y._glCapabilities.elementTypeUint&&O)&&O)return null;q&&q.length&&((O=e.requestMatrix4()).fromArray(q).invert(),p=eB(p).applyMatrix4(O).toArray(),e.releaseMatrix4(O));for(var L=new Array(_),$=_/3,k=new Array($),M=0;M<$;M++)k[M]=M;for(k.sort(function(y,q){var _=[(s[y=9*y]+s[3+y]+2*s[6+y])/4,(s[1+y]+s[4+y]+2*s[7+y])/4,(s[2+y]+s[5+y]+2*s[8+y])/4],q=[(s[y=9*q]+s[3+y]+2*s[6+y])/4,(s[1+y]+s[4+y]+2*s[7+y])/4,(s[2+y]+s[5+y]+2*s[8+y])/4];return 0<(y=vA(p,_)-vA(p,q))?-1:y<0?1:0}),M=0;M<$;M++){var E=3*M,H=3*k[M];L[E]=H,L[1+E]=1+H,L[2+E]=2+H}return{useUint32:y,is:new(y?Uint32Array:S8)(L)}},L_={obj:function(O,L){var y={mat:O.mat,model3d:O.model3d,matDef:O.matDef,s3:O.s3,r3:O.r3,rotationMode:O.rotationMode,t3:O.t3,cube:O.cube==M5||O.cube,center:O.center==M5||O.center,ignoreMtls:O.ignoreMtls,ignoreTransparent:O.ignoreTransparent,ignoreColor:O.ignoreColor,ignoreImage:O.ignoreImage,ignoreNormal:O.ignoreNormal,prefix:O.prefix,flipY:O.flipY,flipFace:O.flipFace,reverseFlipMtls:O.reverseFlipMtls,finishFunc:function(y,q,_){if(y){if(y.model3d)return y.json=O,void L(y);var s,q=[];for(s in y){var p=y[s];q.rawS3=p.rawS3,p.center&&(q.center=p.center),q.push(p),O.eachModel&&O.eachModel(s,p)}q.json=O,L(q)}else L()}};E5.loadObj(O.obj,O.mtl,y)},bin:function(y,s){E5.loadBin(y.url,{finishFunc:function(y,q,_){y?s(y):s()}})},fbx:function(_,s){var y={matDef:_.matDef,flipY:_.flipY,cube:_.cube,center:_.center,shape3d:_.shape3d,playAutomatically:_.playAutomatically,animations:!1!==_.animations,rotationInterpolation:_.rotationInterpolation,finishFunc:function(q){var y;q?(y=(q.json=_).animationSources)&&y.length?E5.asyncEach(y,function(y,_){E_(y,y,function(y,q){tA(function(){_(null,q)})})},function(y){s(E5.completeFbxAnimation(_.url,q,_.animations,y))}):s(E5.completeFbxAnimation(_.url,q,_.animations)):s()}};E5.loadFbx(_.url,y)},gltf:function(q,_){var y={matDef:q.matDef,flipY:q.flipY,cube:q.cube,center:q.center,shape3d:q.shape3d,path:q.path,playAutomatically:q.playAutomatically,finishFunc:function(y){y?(y.json=q,_(y)):_()}};E5.loadGltf(q.url,y)}},$_=(E5.getModelTypeHandlers=function(){return L_},E5.setModelTypeHandler=function(y,q){L_[y]=q},E5.getModelTypeHandler=function(y){return L_[y]},E5.handleModelLoaded=function(y,q){},E5.handleUnfoundModel=function(y,q,_){},M5),k_=M5,M_=function(y){$_&&!y._loadingModelView_&&((k_=k_||{})[y._loadingModelView_=hA()]=y)},E_=function(_,s,p){var O,y=($_=$_||{})[_];if(y){if(y.url===s)return;y.request.onload=An,y.request.onerror=An}return s.indexOf(".bin")===s.length-4?H_(_,{modelType:"bin",url:s},s,p):s.indexOf(".fbx")===s.length-4?H_(_,{modelType:"fbx",url:s},s,p):s.indexOf(".gltf")===s.length-5||s.indexOf(".glb")===s.length-4?H_(_,{modelType:"gltf",url:s},s,p):void((s=E5.beforeLoadURL(s)).data?(y=E5.parse(s.data),H_(_,y,s,p)):(O=new pE,$_[_]={request:O,url:s},O.onload=function(y){var q;200===this.status||0===this.status?(delete $_[_],q=E5.parse(O.getResponseText()),H_(_,q,s,p)):w_(_,E5.handleUnfoundModel(_,s)||M5,p)},O.onerror=function(y){w_(_,E5.handleUnfoundModel(_,s)||M5,p)},(y={}).url=encodeURI(s),y.sync=!1,O.send(y)))},H_=function(q,_,s,p){var y=_.modelType;if(!y)return w_(q,_,p),void E5.handleModelLoaded(q,_);(y=E5.getModelTypeHandler(y))?($_=$_||{})[q]||($_[q]=!0,y(_,function(y){y?(w_(q,y,p),E5.handleModelLoaded(q,y)):w_(q,E5.handleUnfoundModel(q,s,_)||M5,p)})):w_(q,E5.handleUnfoundModel(q,s,_)||M5,p)},w_=function(y,q,_){if(delete $_[y],w5(q)&&on.test(q))E_(y,q,_);else{if(Vn[y]=q,_&&_(y,q),Cx($_)&&($_=M5,k_)){for(var s in k_)(p=k_[s]).invalidateAll&&p.invalidateAll(k5,"modelLoaded",y),p.redraw&&p.redraw(),p.iv(),delete p._loadingModelView_;k_=M5}if(q&&k_)for(var s in k_){var p;(p=k_[s]).invalidateAll&&p.invalidateAll(k5,"modelLoading",y),p.redraw&&p.redraw(),p.iv()}}},Q_=new T8([0,0,0,1,1,1,1,0]),x_=new T8([0,0,1,0,0,1,0,0,1,0,0,1]),S_=new S8([0,1,2,2,3,0]),X_=new T8([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),T_=new S8([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),i_=new T8([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),N_=FK(X_,T_),a_=(new T8([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new S8([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[qD,d5,_D,yD,sD,pD]),l_=[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5],j_=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],Z_=function(y,q,_,s,p,O,L){y=y||16,q=q||0,_=_||y;var $,k,M,E,H,w,Q=[],x=[],S=O5/y,X=u/(O=O||16);for(i=0;i<O;i++)for(k=i*X,w=(M=i+1)*X,$=q;$<_;$++)j=$*S,H=(E=$+1)*S,Q.push(.5*p5(k)*H5(j),.5*H5(k),-.5*p5(k)*p5(j),.5*p5(w)*H5(H),.5*H5(w),-.5*p5(w)*p5(H),.5*p5(k)*H5(H),.5*H5(k),-.5*p5(k)*p5(H),.5*p5(k)*H5(j),.5*H5(k),-.5*p5(k)*p5(j),.5*p5(w)*H5(j),.5*H5(w),-.5*p5(w)*p5(j),.5*p5(w)*H5(H),.5*H5(w),-.5*p5(w)*p5(H)),x.push($/y,i/O,E/y,M/O,E/y,i/O,$/y,i/O,$/y,M/O,E/y,M/O);if(L)for(var T=[],i=0,N=Q.length;i<N;i+=3)T.push(2*Q[i],2*Q[i+1],2*Q[i+2]);if(s)for(var a=[],l=[],j=q*S,i=0;i<O;i++)k=i*X,a.push(0,0,0,.5*p5(w=(M=i+1)*X)*H5(j),.5*H5(w),-.5*p5(w)*p5(j),.5*p5(k)*H5(j),.5*H5(k),-.5*p5(k)*p5(j)),l.push(0,.5,q/y,M/O,q/y,i/O);if(p){var Z=[],K=[],j=_*S;for(i=0;i<O;i++)w=(M=i+1)*X,Z.push(0,0,0,.5*p5(k=i*X)*H5(j),.5*H5(k),-.5*p5(k)*p5(j),.5*p5(w)*H5(j),.5*H5(w),-.5*p5(w)*p5(j)),K.push(1,.5,_/y,i/O,_/y,M/O)}return s={vs:Q,uv:x,from_vs:a,from_uv:l,to_vs:Z,to_uv:K},L&&(s.ns=T),s},K_=function(y,q,_){(y=y||.17)<0?y=0:.25<y&&(y=.25);for(var s,p,O,L,$,k=[],M=[],E=[],H=O5/(_=_||18),w=O5/(q=q||12),Q=.5-y,x=0;x<=q;x++)for(L=H5(p=x*w-u),O=p5(p),T=0;T<=_;T++)$=Q+y*L,k.push(H5(s=T*H)*$,O*y,-p5(s)*$),M.push(T/_,1-x/q);for(x=0;x<q;x++)for(var S=x*(_+1),X=(x+1)*(_+1),T=0;T<_;T++)E.push(S+T,X+T+1,X+T,S+T,S+T+1,X+T+1);return{vs:k,uv:M,is:E}},C_=function(y,q,_,s,p,O,L,$){y=y||18,q=q||0,_=_||y,(O=O||.17)<0?O=0:.25<O&&(O=.25);var k,M,E,H,w,Q,x,S,X,T=[],i=[],N=O5/y,a=O5/(L=L||12),l=.5-O,j=$?[]:k5;for(C=0;C<L;C++)for(Q=C*a-u,x=(E=C+1)*a-u,k=q;k<_;k++)H=k*N,w=(M=k+1)*N,S=l+O*H5(Q),X=l+O*H5(x),T.push(H5(H)*S,p5(Q)*O,-p5(H)*S,H5(w)*S,p5(Q)*O,-p5(w)*S,H5(w)*X,p5(x)*O,-p5(w)*X,H5(H)*S,p5(Q)*O,-p5(H)*S,H5(w)*X,p5(x)*O,-p5(w)*X,H5(H)*X,p5(x)*O,-p5(H)*X),i.push(k/y,1-C/L,M/y,1-C/L,M/y,1-E/L,k/y,1-C/L,M/y,1-E/L,k/y,1-E/L),$&&j.push(H5(H)*H5(Q),p5(Q),-p5(H)*H5(Q),H5(w)*H5(Q),p5(Q),-p5(w)*H5(Q),H5(w)*H5(x),p5(x),-p5(w)*H5(x),H5(H)*H5(Q),p5(Q),-p5(H)*H5(Q),H5(w)*H5(x),p5(x),-p5(w)*H5(x),H5(H)*H5(x),p5(x),-p5(H)*H5(x));if(s)for(var Z=[],K=[],C=0;C<L;C++)x=(E=C+1)*a-u,H=q*N,S=l+O*H5(Q=C*a-u),X=l+O*H5(x),Z.push(H5(H)*S,p5(Q)*O,-p5(H)*S,H5(H)*X,p5(x)*O,-p5(H)*X,H5(H)*l,0,-p5(H)*l),K.push(.5+.5*H5(Q),.5-.5*p5(Q),.5+.5*H5(x),.5-.5*p5(x),.5,.5);if(p)for(var B=[],F=[],C=0;C<L;C++)x=(E=C+1)*a-u,H=_*N,S=l+O*H5(Q=C*a-u),X=l+O*H5(x),B.push(H5(H)*S,p5(Q)*O,-p5(H)*S,H5(H)*l,0,-p5(H)*l,H5(H)*X,p5(x)*O,-p5(H)*X),F.push(.5-.5*H5(Q),.5-.5*p5(Q),.5,.5,.5-.5*H5(x),.5-.5*p5(x));return s={vs:T,uv:i,from_vs:Z,from_uv:K,to_vs:B,to_uv:F},$&&(s.ns=j),s},B_=function(y,q){for(var _,s,p,O,L,$=[],k=[],M=[],E=[],H=O5/16,w=0;w<=16;w++)O=.5*(s=H5(_=w*H)),p=p5(_),$.push(O,-.5,L=.5*p,O,.5,L),M.push(s,0,p,s,0,p),k.push(1-w/16,1,1-w/16,0);for(w=0;w<16;w++)E.push(2*w,2*w+1,2*w+3,2*w,2*w+3,2*w+2);if(q){var Q=[],x=[],S=[];for(Q.push(0,-.5,0),x.push(.5,.5),w=0;w<=16;w++)s=H5(_=w*H),p=p5(_),Q.push(.5*s,-.5,.5*-p),x.push(.5+.5*s,.5+.5*p);for(w=0;w<16;w++)S.push(0,w+2,w+1)}if(y){var X=[],T=[],i=[];for(X.push(0,.5,0),T.push(.5,.5),w=0;w<=16;w++)s=H5(_=w*H),p=p5(_),X.push(.5*s,.5,.5*-p),T.push(.5+.5*s,.5-.5*p);for(w=0;w<16;w++)i.push(0,w+1,w+2)}return{vs:$,uv:k,is:E,ns:M,bottom_vs:Q,bottom_uv:x,bottom_is:S,top_vs:X,top_uv:T,top_is:i}},F_=function(y,q,_,s,p,O,L,$){y=y||12,_=_||y;for(var k,M,E,H,w,Q,x,S,X,T,i,N,a=[],l=[],j=O5/y,Z=q=q||0;Z<_;Z++)M=(k=Z+1)*j,S=.5*H5(x=Z*j),X=.5*p5(x),E=.5*H5(M),H=.5*p5(M),a.push(S,-.5,-X,E,-.5,-H,S,.5,-X,E,-.5,-H,E,.5,-H,S,.5,-X),l.push(Z/y,1,k/y,1,Z/y,0,k/y,1,k/y,0,Z/y,0);if($)for(var K=[],Z=0,C=a.length;Z<C;Z+=3)K.push(2*a[Z],0,2*a[Z+2]);if(L){var B=[],F=[];for(Z=q;Z<_;Z++)M=j*(Z+1),S=H5(x=j*Z),X=p5(x),E=H5(M),H=p5(M),B.push(.5*S,-.5,.5*-X,0,-.5,0,.5*E,-.5,.5*-H),F.push(.5+.5*S,.5+.5*X,.5,.5,.5+.5*E,.5+.5*H)}if(O){var V=[],h=[];for(Z=q;Z<_;Z++)M=j*(Z+1),S=H5(x=j*Z),X=p5(x),E=H5(M),H=p5(M),V.push(.5*S,.5,.5*-X,.5*E,.5,.5*-H,0,.5,0),h.push(.5+.5*S,.5-.5*X,.5+.5*E,.5-.5*H,.5,.5)}return s&&(w=[],Q=[],S=.5*H5(x=j*q),X=.5*p5(x),T=q/y,w.push(0,.5,0,0,-.5,0,S,-.5,-X,S,-.5,-X,S,.5,-X,0,.5,0),Q.push(0,0,0,1,T,1,T,1,T,0,0,0)),p&&(i=[],N=[],S=.5*H5(x=j*_),X=.5*p5(x),T=_/y,i.push(0,-.5,0,0,.5,0,S,.5,-X,S,.5,-X,S,-.5,-X,0,-.5,0),N.push(1,1,1,0,T,0,T,0,T,1,1,1)),L={vs:a,uv:l,bottom_vs:B,bottom_uv:F,top_vs:V,top_uv:h,from_vs:w,from_uv:Q,to_vs:i,to_uv:N},$&&(L.ns=K),L},V_=function(y,q,_,s,p){_=_||0,p=p==M5?.5:p;for(var O,L,$,k,M,E=[0,.5,.75,.875,.9375],H=[],w=[],Q=[],x=(s=s==M5?O5:s)/(q=q||18),S=0;S<E.length;S++)for(var X=S%2==0?0:.5,T=0;T<=q;T++)L=1-E[S],H.push(H5(O=(T+X)*x+_)*p*L,E[S]*p*2-p,-p5(O)*p*L),w.push((T+X)/q,L);for(S=0;S<E.length-1;S++)for(var i=S*(q+1),N=(S+1)*(q+1),T=0;T<q;T++)Q.push(i+T,N+T+1,N+T,i+T,i+T+1,N+T+1);for(M=H.length/3-(q+1),T=0;T<q;T++)H.push(0,p,0),w.push((T+.5)/q,0);for(T=0;T<q;T++)Q.push(M+T,M+T+1,M+(q+1)+T);if(y){var a=[],l=[],j=[];for(a.push(0,-p,0),l.push(.5,.5),T=0;T<=q;T++)$=H5(O=T*x+_),k=p5(O),a.push($*p,-p,-k*p),l.push(.5+.5*$,.5+.5*k);for(T=0;T<q;T++)j.push(0,T+2,T+1)}return{vs:H,uv:w,is:Q,bottom_vs:a,bottom_uv:l,bottom_is:j}},h_=function(y,q,_,o,Y,s,p,O){y=y||16,_=_||y;var L,$,k,M,E,H,w,Q,x,S=[],X=[],T=O5/y,i=q=q||0,N=1/(p=p||1),a=new Q5,l=new Q5,j=new Q5,Z=new Q5,K=new Q5,C=new Q5,B=new Q5;for(O&&(L=[],k=new Q5,M=new Q5,E=new Q5);i<_;i++){var F=i+1,V=T*i,h=T*F;for(a.set(.5*H5(V),-.5,.5*-p5(V)),l.set(.5*H5(h),-.5,.5*-p5(h)),j.set(0,.5,0),O&&(k.set(H5(V),.5,-p5(V)).normalize(),M.set(H5(h),.5,-p5(h)).normalize(),E.copy(k).add(M).normalize()),Z.lerpVectors(j,a,N),K.lerpVectors(j,l,N),S.push(Z.x,Z.y,Z.z,K.x,K.y,K.z,j.x,j.y,j.z),X.push(i/y,N,F/y,N,(i+F)/2/y,0),O&&L.push(k.x,k.y,k.z,M.x,M.y,M.z,E.x,E.y,E.z),$=1;$<p;$++)Z.lerpVectors(j,a,N*($+1)),K.lerpVectors(j,l,N*($+1)),C.lerpVectors(j,a,N*$),B.lerpVectors(j,l,N*$),S.push(Z.x,Z.y,Z.z,K.x,K.y,K.z,C.x,C.y,C.z,C.x,C.y,C.z,K.x,K.y,K.z,B.x,B.y,B.z),X.push(i/y,N*($+1),F/y,N*($+1),i/y,N*$,i/y,N*$,F/y,N*($+1),F/y,N*$),O&&L.push(k.x,k.y,k.z,M.x,M.y,M.z,k.x,k.y,k.z,k.x,k.y,k.z,M.x,M.y,M.z,M.x,M.y,M.z)}if(s)for(var t=[],u=[],i=q;i<_;i++){var h=T*(i+1),J=H5(V=T*i),D=p5(V),c=H5(h),R=p5(h);t.push(.5*J,-.5,.5*-D,0,-.5,0,.5*c,-.5,.5*-R),u.push(.5+.5*J,.5+.5*D,.5,.5,.5+.5*c,.5+.5*R)}return o&&(w=[],(H=[]).push(0,.5,0,0,-.5,0,.5*H5(V=T*q),-.5,.5*-p5(V)),w.push(0,0,0,1,q/y,1)),Y&&(x=[],(Q=[]).push(0,-.5,0,0,.5,0,.5*H5(V=T*_),-.5,.5*-p5(V)),x.push(1,1,1,0,_/y,1)),s={vs:S,uv:X,bottom_vs:t,bottom_uv:u,from_vs:H,from_uv:w,to_vs:Q,to_uv:x},O&&(s.ns=L),s},t_=function(y,q,_,s,p,O,L,$){for(var k=[],M=0;M<y.length-1;M+=2)k.push({x:y[M],y:y[M+1]});return EQ(k,q,_,s,p,O,L,$,!1)},u_={roundRect:function(y,q){return t_([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],y,q,3)},star:function(y,q){return t_([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],y,q)},rect:function(y,q){return t_([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],y,q)},billboard:function(){return{vs:[-.5,.5,0,-.5,-.5,0,.5,.5,0,.5,.5,0,-.5,-.5,0,.5,-.5,0],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]}},plane:function(){return{vs:[-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,-.5,-.5,0,.5,.5,0,.5],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]}},triangle:function(y,q){return t_([0,-.5,.5,.5,-.5,.5],[1,2,2,5],y,q)},rightTriangle:function(y,q){return t_([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],y,q)},parallelogram:function(y,q){return t_([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],y,q)},trapezoid:function(y,q){return t_([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],y,q)}},J_={torus:1,sphere:1,cone:1},D_=ax(DA(J_),{cylinder:1}),c_={roundRect:1,star:1,rect:1,triangle:1,rightTriangle:1,parallelogram:1,trapezoid:1,cylinder:1},R_=ax(DA(c_),{cone:1}),o_=function(y,q,_){var s,p=g(y.anchor3d,_,q),O=g(y.mat,_,q),L=g(y.s3,_,q),$=g(y.t3,_,q),k=g(y.r3,_,q),M=L||k||$||O;return(p||M)&&(s=Z8(q._6O),M=M?D8(O,L,k,g(y.rotationMode,_,q),$):l8(),p&&XK(M,[.5-p[0],.5-p[1],.5-p[2]]),L3(q,M)),s},Y_=function(q,_,y,s,p,O,L){var $,k,M,E,H,w,Q,x,S,X,T,i,N,a,l,j,Z,K,C,B,F,V;Hx(y)?y.forEach(function(y){Y_(q,_,y,s,p,O,L)}):w5(y)?Y_(q,_,W_(s,y),s,p,O,L):Mx(y)&&(y.shape3d?($=o_(y,q,_),Y_(q,_,y.shape3d,s,p,O,y),$&&p3(q,$)):($=q,k=_,M=s.s,E=p,H=L||mn,C=(C=O)&&!C(M("shape3d.transparent",y.transparent,H.transparent)),l=$._picking,w=y.vs&&M(uL,y.visible,H.visible),Q=!l&&w?M("shape3d.material",y.material,H.material):null,x=y.top_vs&&M(cL,y.topVisible,H.topVisible),S=!l&&x?M("shape3d.top.material",y.topMaterial,H.topMaterial):null,X=y.bottom_vs&&M(RL,y.bottomVisible,H.bottomVisible),T=!l&&X?M("shape3d.bottom.material",y.bottomMaterial,H.bottomMaterial):null,i=y.from_vs&&M(JL,y.fromVisible,H.fromVisible),N=!l&&i?M("shape3d.from.material",y.fromMaterial,H.fromMaterial):null,a=y.to_vs&&M(DL,y.toVisible,H.toVisible),l=!l&&a?M("shape3d.to.material",y.toMaterial,H.toMaterial):null,(!C||Q||l||S||T||N)&&(j=o_(y,$,k),A_(y)&&$.getData3dUI(k).dispatchBoundingBoxChanged(),Z=$._26I,(K=M("polygonOffset",y.polygonOffset,H.polygonOffset))&&DK(Z,K),Q&&P_(Z,$,k,Q,[y.vs,y.uv,y.ns,y.is]),S&&P_(Z,$,k,S,[y.top_vs,y.top_uv,y.top_ns,y.top_is]),T&&P_(Z,$,k,T,[y.bottom_vs,y.bottom_uv,y.bottom_ns,y.bottom_is]),N&&P_(Z,$,k,N,[y.from_vs,y.from_uv,y.from_ns,y.from_is]),l&&P_(Z,$,k,l,[y.to_vs,y.to_uv,y.to_ns,y.to_is]),C||(C=$._buffer,B=M("shape3d.color",y.color,H.color),E=E||M("shape3d.blend",y.blend,H.blend),V=(y.opacity==M5?H:y).opacity,V=(F=M("shape3d.opacity"))!=M5&&V!=M5?V*F:V!=M5?V:F,zK(Z,E,M("shape3d.light",y.light,H.light),V,M("shape3d.reverse.flip",y.reverseFlip,H.reverseFlip),M("shape3d.reverse.color",y.reverseColor,H.reverseColor),k._forceSingleFace||M("shape3d.reverse.cull",y.reverseCull,H.reverseCull)),w&&!Q&&m_(Z,C,B,$.getTexture(M("shape3d.image",y.image,H.image),k),M("shape3d.discard.selectable",y.discardSelectable,H.discardSelectable),y.vs,y.uv,y.ns,y.is,M("shape3d.uv.offset",y.uvOffset,H.uvOffset),M("shape3d.uv.scale",y.uvScale,H.uvScale),M("shape3d.uv.rotation",y.uvRotation,H.uvRotation),M("shape3d.uv.anchor",y.uvAnchor,H.uvAnchor)),x&&!S&&m_(Z,C,M("shape3d.top.color",y.topColor,H.topColor)||B,$.getTexture(M("shape3d.top.image",y.topImage,H.topImage),k,"top"),M("shape3d.top.discard.selectable",y.topDiscardSelectable,H.topDiscardSelectable),y.top_vs,y.top_uv,y.top_ns,y.top_is,M("shape3d.top.uv.offset",y.topUvOffset,H.topUvOffset),M("shape3d.top.uv.scale",y.topUvScale,H.topUvScale),M("shape3d.top.uv.rotation",y.topUvRotation,H.topUvRotation),M("shape3d.top.uv.anchor",y.topUvAnchor,H.topUvAnchor)),X&&!T&&m_(Z,C,M("shape3d.bottom.color",y.bottomColor,H.bottomColor)||B,$.getTexture(M("shape3d.bottom.image",y.bottomImage,H.bottomImage),k,"bottom"),M("shape3d.bottom.discard.selectable",y.bottomDiscardSelectable,H.bottomDiscardSelectable),y.bottom_vs,y.bottom_uv,y.bottom_ns,y.bottom_is,M("shape3d.bottom.uv.offset",y.bottomUvOffset,H.bottomUvOffset),M("shape3d.bottom.uv.scale",y.bottomUvScale,H.bottomUvScale),M("shape3d.bottom.uv.rotation",y.bottomUvRotation,H.bottomUvRotation),M("shape3d.bottom.uv.anchor",y.bottomUvAnchor,H.bottomUvAnchor)),i&&!N&&m_(Z,C,M("shape3d.from.color",y.fromColor,H.fromColor)||B,$.getTexture(M("shape3d.from.image",y.fromImage,H.fromImage),k,"from"),M("shape3d.from.discard.selectable",y.fromDiscardSelectable,H.fromDiscardSelectable),y.from_vs,y.from_uv,y.from_ns,y.from_is,M("shape3d.from.uv.offset",y.fromUvOffset,H.fromUvOffset),M("shape3d.from.uv.scale",y.fromUvScale,H.fromUvScale),M("shape3d.from.uv.rotation",y.fromUvRotation,H.fromUvRotation),M("shape3d.from.uv.anchor",y.fromUvAnchor,H.fromUvAnchor)),a&&!l&&m_(Z,C,M("shape3d.to.color",y.toColor,H.toColor)||B,$.getTexture(M("shape3d.to.image",y.toImage,H.toImage),k,"to"),M("shape3d.to.discard.selectable",y.toDiscardSelectable,H.toDiscardSelectable),y.to_vs,y.to_uv,y.to_ns,y.to_is,M("shape3d.to.uv.offset",y.toUvOffset,H.toUvOffset),M("shape3d.to.uv.scale",y.toUvScale,H.toUvScale),M("shape3d.to.uv.rotation",y.toUvRotation,H.toUvRotation),M("shape3d.to.uv.anchor",y.toUvAnchor,H.toUvAnchor)),eK(Z)),K&&cK(Z),j&&p3($,j))))},P_=function(y,q,_,s,p){var O=_._flipSide;O&&(_._flipSideInheirt=!0),q._prefabRenderer.render(y,{mesh:{vs:p[0],uv:p[1],ns:p[2],is:p[3],_complete_:!0},mat:s},_),O&&(_._flipSideInheirt=k5)},m_=function(y,q,_,s,p,O,L,$,k,M,E,H,w){var Q=(x=S5.for(y)).directUniforms(),x=x.directAttribs();Q.uDiffuse=_||X5["color.empty"],L?fK(y,s,p,q.uv,L,M,E,H,w):fK(y),x.aPosition=dK(y,q.vs,O,M5),x.aNormal=dK(y,q.ns,$,M5),k?(q3(y,q.is,k),bK(y,0,k.length,null,k instanceof Uint32Array?5125:null)):vK(y,0,O.length/3),L?GK(y,s):GK(y)},W_=function(y,q){var _=y.s;if(!(q=q||_(hL)))return M5;var s=b4(q);if(s)return s;if("text"===q){var p={amount:_("shape3d.text.amount"),size:_("shape3d.text.size"),font:_("shape3d.text.font"),style:_("shape3d.text.style"),weight:_("shape3d.text.weight"),fill:_("shape3d.text.fill"),curveSegments:_("shape3d.text.curveSegments"),spacing:_("shape3d.text.spacing"),cube:_("shape3d.text.cube")},O=y.gv.getShape3dText(y.data),L=O;for(T in p)L+="_"+(p[T]===k5?"U":p[T]);return y._cachedTextKey===L?y._cachedTextGeometry:(y._cachedTextKey=L,y._cachedTextGeometry=E5.createTextGeometry(O,p))}var $,k,M,E,H,w,Q,x,S,X,T=q;return D_[q]&&($=_("shape3d.side"),k=_("shape3d.side.from"),M=_("shape3d.side.to"),E=_(JL),H=_(DL),$<3?(M=k=$=0,H=E=!1):((M==M5||$<M)&&(M=$),0===(k=k==M5||k<0?0:k)&&M===$&&(H=E=!1)),T+="-"+$+"-"+k+"-"+M+"-"+E+"-"+H+((w=_("shape3d.smooth"))?1:0)),c_[q]&&(T+="-"+(Q=_(cL))),R_[q]&&(T+="-"+(x=_(RL))),"torus"===q&&((S=_("shape3d.torus.radius"))<0?S=0:.25<S&&(S=.25),T+="-"+S),J_[q]&&(T+="-"+(X=_(tL))),(s=hn[T])||("box"===q?s=E5.createBoxModel():u_[q]?s=u_[q](Q,x):"sphere"===q?s=E5.createSphereModel($,k,M,E,H,X,w):q===TD?s=E5.createCylinderModel($,k,M,E,H,Q,x,w):"cone"===q?s=E5.createConeModel($,k,M,E,H,x,X,w):"torus"===q&&(s=E5.createTorusModel($,k,M,E,H,S,X,w)),hn[T]=s),s},A_=function(){var y=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],q=["","top_","bottom_","from_","to_"];if($5=Zx(F3.substr(F3.indexOf("^#")+2)),function(y){for(var q in y)1===q.length&&(R8=y[q]);return!!q}(E5[Ox(rL+y[15]+"n"+y[16])]())&&j5())return function(L){return!(!L||L._complete_||(L._complete_=!0,L.vs&&Bx(L.ns)&&(L.ns=FK(L.vs,L.is),L.boundingBox=k5),L.top_vs&&Bx(L.top_ns)&&(L.top_ns=FK(L.top_vs,L.top_is),L.top_boundingBox=k5),L.bottom_vs&&Bx(L.bottom_ns)&&(L.bottom_ns=FK(L.bottom_vs,L.bottom_is),L.bottom_boundingBox=k5),L.from_vs&&Bx(L.from_ns)&&(L.from_ns=FK(L.from_vs,L.from_is),L.from_boundingBox=k5),L.to_vs&&Bx(L.to_ns)&&(L.to_ns=FK(L.to_vs,L.to_is),L.to_boundingBox=k5),y.forEach(function(y){var q=L[y];Hx(q)&&(L[y]=new T8(q))}),q.forEach(function(y){var q=L[y+"is"];if(Hx(q)){var _=L[y+"vs"];if(_)s=196605<_.length;else for(var s=!1,p=0,O=q.length;p<O;p++)if(65535<q[p]){s=!0;break}L[y+"is"]=new(s?X8:S8)(q)}}),0))}}(),z_=function(y,q){var _=y[q];Hx(_)&&(y[q]=new T8(_))},e_=(ax(dB,{_25Q:function(y,q){var X=new Q5;y._16O=function(y,q,_,s,p,O,L,$,k){var M,E,H,w,Q,x,S=this.info;return S?(M=l8(),S=Zu[q]?(E=S.p3,H=S.c1,S.c2):ju[q]?(H=S.s1||S.c1,S.s2||S.c2):(H=S.t1||S.c1,S.t2||S.c2),(w=this.data)instanceof dQ&&this.shapeModel&&(w=w.getPointsMatrix3d(),E=E&&X.copy(E).applyMatrix4(w).toArray(),H=H&&X.copy(H).applyMatrix4(w).toArray(),S=S&&X.copy(S).applyMatrix4(w).toArray()),w=0,H&&S&&(Q=i8(S,H),w=vA(H,S),Q=[0,-D5(Q[2],Q[0]),t5(Q[1]/w)],x="zyx",E=E||[(H[0]+S[0])/2,(H[1]+S[1])/2,(H[2]+S[2])/2]),H=H3(q,[w,0,0],_,s,$,k),w3(M,H,E,s,p,O,L,y,Q,x)):j8},y.drawBody=function(y,q,_){var s,p=this.shapeModel;p&&(s=this.gv,L3(s),Y_(s,this.data,p,this,this.getBodyColor(),_))},y.createLineModel=function(y,q,_,s,p){var O=this.s,L=G_(y,q,O(tL));if(y=O(s+".color")){for(var $=[],k=0;k<L.length;k++){var M=L[k],E=M.length;if(1<E){var H=M[0];$.push(H.x,H.y,H.z);for(var w=1;w<E-1;w++)H=M[w],$.push(H.x,H.y,H.z),$.push(H.x,H.y,H.z);H=M[E-1],$.push(H.x,H.y,H.z)}}var q=0,p=(O(p)&&(S=O(p+".color"),X=O(p+".pattern"),q=O(p+".offset"),i=y),this.gv),Q=this.data,x=$,S=S||y,y=i?M5:O(s+".gradient.color"),X=X||O(s+".pattern"),O=q,s=i,T=((q=p.getBrightness(Q))==M5&&(q=1),W3(fl(S),q)),S=T[3]<1,i=(_=Math.ceil(_)||1,Q.s("3d.clipbox")?g4:Q.s("3d.clipbox.mask")),N=(S?"T":"O")+_+"_"+i,a=(X&&(N+="-"+(B=X[0])+"-"+(u=(X[1]||B)+B),s&&(N+="-"+el(s)+"-"+q,s=W3(fl(s),q))),Q.getRenderLayer()),l=(a=p._40Q.get(a)).polylineIndexMap,j=(a=a.polylineModelMap)[N];j||(j=a[N]={vs:[],cs:[],ps:[],ds:[],ls:X?[]:M5,T:S,clipboxMask:i,W:_},X&&(j.D=B,j.G=u,j.A=s)),j.invalidate=!0;var Z,a=j.vs,K=j.cs,S=j.ds,C=j.ls,i=l[Q._id]={index:S.length,begin:a.length/3,batch:N},B=(S.push(Q),!(_=p.getData3dUI(Q).mat)&&Q instanceof P.Polyline&&(_=J8(Q),Q.appendAnchorMatrix3d(_)),LK(a,_,x),i.size=a.length/3-i.begin),F=x.length,V=0,h=[];if(X||y)for(c=0;c<F;c+=6)Z=vA([x[c],x[c+1],x[c+2]],[x[c+3],x[c+4],x[c+5]]),h.push(Z),V+=Z;if(V&&y)for(var t,u=W3(fl(y),q),J=[u[0]-T[0],u[1]-T[1],u[2]-T[2],u[3]-T[3]],D=0,c=0;c<F;c+=6)OK(K,[T[0]+J[0]*(t=D/V),T[1]+J[1]*t,T[2]+J[2]*t,T[3]+J[3]*t],1),D+=h[c/6],OK(K,[T[0]+J[0]*(t=D/V),T[1]+J[1]*t,T[2]+J[2]*t,T[3]+J[3]*t],1);else OK(K,T,B);if(X)for(D=O||0,c=0;c<F;c+=6)C.push(D),D+=h[c/6],C.push(D)}return L},y.createTubeModel=function(y,q,_,s){for(var p=this,O=p.s,L=O("shape3d.side")||H8,$=O("shape3d.start.angle"),k=O("shape3d.sweep.angle"),M=O(cL)?O("shape3d.top.cap"):M5,E=O(RL)?O("shape3d.bottom.cap"):M5,H="flat"===M,w="flat"===E,Q=H&&(s?s.uv:O("shape3d.top.image")),x=w&&(s?s.uv:O("shape3d.bottom.image")),S=!s||s.uv,X=O("shape3d.smooth"),T={vs:[],uv:S?[]:M5,ns:X?[]:M5,top_vs:H?[]:M5,top_uv:Q?[]:M5,bottom_vs:w?[]:M5,bottom_uv:x?[]:M5},i=G_(y,q,O(tL),_),N=0,a=i.length,l=0,j=O("shape3d.uv.union");N<a;N++)!0!==j&&(l=0),l=r_(T,i[N],O("rotate.vs.length"),O(oL),O("rotate.uv.length"),_,L,$,k,M,E,l);s?(S=p._matWithExtraction||p.mat,r3(p.gv,p.data,T,p,p.getBodyColor(),S?[S]:[],s)):p.shapeModel=T,p.lineShapeModel=T;var Z=p._vsTranslation;if(Z)for(var N=0,K=i.length;N<K;N++)for(var C=0,B=i[N].length;C<B;C++)i[N][C]=i[N][C].clone().applyMatrix4(Z);return i},y.getCache=function(){var y=this.info;if(y){var q=y.list;if(q)return y.cache||(y.cache=f_(q))}return M5}}}),function(y,q){for(var _,s=0,p=y.length,O=0,L=p-1;O<=L;)if((_=y[s=K5(O+(L-O)/2)].length-q)<0)O=s+1;else{if(!(0<_)){L=s;break}L=s-1}var $=y[s=L],k=$.point;return{point:k=s!==p-1&&$.length!==q?(new Q5).subVectors(y[s+1].point,k).normalize().multiplyScalar(q-$.length).add(k):k,tangent:$.tangent}}),f_=function(y){for(var q,_,s=[],p=0,O=0;O<y.length;O++){for(var L=y[O],$=0;$<L.length;$++){q=L[$],_&&(p+=_.distanceTo(q));var k=new Q5,M=L[$+1];M?k.subVectors(M,q):_?k.subVectors(q,_):k.x=1,k.normalize(),s.push({point:q,length:p,tangent:k}),_=q}_=null}return s},G_=function(y,q,_,s){_=_||M8;for(var p=[],O=0,L=y.size();O<L;O++){var $=y.get(O);p.push(new Q5($.x,$.e||0,$.y))}for(var k,M,E,H,w,Q=[],x=[],S=0,X=0,T=(q=!q||(q=wx(q)?q._as:q).length?q:null)?q.length:L;X<T;X++){if(1===(w=q?q[X]:0===X?1:2))Q.push(E=[]),E.push(p[S++]);else if(2===w||5===w)if(H=2===w?p[S++]:E[0],s)if(2===(N=q?q[X+1]:X+1<T?2:M5)||5===N){var i=E[E.length-1],N=2===N?p[S]:E[0],i=(new Q5).subVectors(i,H),N=(new Q5).subVectors(N,H),a=i.length(),l=N.length();if(a&&l)if(a/2<s&&l/2<s)E.push(H);else for(i.multiplyScalar(s5(s,a/2)/a).add(H),N.multiplyScalar(s5(s,l/2)/l).add(H),k=new uQ(i,H,N).getPoints(_),M=0;M<=_;M++)E.push(k[M])}else E.push(H);else E.push(H);else if(3===w)for(k=new uQ(E[E.length-1],p[S++],p[S++]).getPoints(_),M=1;M<=_;M++)E.push(k[M]);else if(4===w)for(k=new JQ(E[E.length-1],p[S++],p[S++],p[S++]).getPoints(_),M=1;M<=_;M++)E.push(k[M]);x.push(Q.length,E.length)}return Q.indexMark=x,Q},r_=function(y,q,_,s,p,O,L,$,x,k,M,E){var H=q.length;if(1<H){var w,Q,S,X,T,i,N,a=(_=function(y,q){var _,s,p,O=new Q5,L=[],$=[],k=[],M=0,E=y.length;for(q&&(p=[0]);M<E;M++)s=y[M],(_=y[M+1])?O.subVectors(_,s):O.subVectors(s,y[M-1]),q?(s=O.length(),_&&p.push(O5*s/q),s&&O.multiplyScalar(1/s)):O.normalize(),L.push(O.clone());var H,w=new Q5,Q=new Q5,x=new G,S=L[0],X=$[0]=new Q5,T=k[0]=new Q5;for(Math.abs(Math.abs(S.y)-1)<1e-4?w.set(1,0,0):w.set(0,1,0),Q.crossVectors(S,w).normalize(),X.crossVectors(S,Q),T.crossVectors(S,X),M=1;M<E;M++)$[M]=$[M-1].clone(),k[M]=k[M-1].clone(),Q.crossVectors(L[M-1],L[M]),1e-4<Q.length()&&(Q.normalize(),H=V5(Vx(L[M-1].dot(L[M]),-1,1)),$[M].applyMatrix4(x.makeRotationAxis(Q,H))),q&&$[M].applyMatrix4(x.makeRotationAxis(L[M],p[M])),k[M].crossVectors(L[M],$[M]);return{B:k,T:L,N:$}}(q,_)).T,l=_.N,j=_.B,Z=("flat"===k&&zM(y,!0,q[0],j[0],l[0],O,L,$,x),"flat"===M&&zM(y,!1,q[H-1],j[H-1],l[H-1],O,L,$,x),[]),K=C5(L/2),_="round"===M,o=q[0],C=a[0],Y=j[0],P=l[0],m=q[H-1],B=a[H-1],W=j[H-1],A=l[H-1];if("round"===k){for(t=1;t<=K;t++)l.splice(0,0,P),j.splice(0,0,Y),a.splice(0,0,C),i=-t/K*O,q.splice(0,0,C.clone().multiplyScalar(i).add(o)),Z[K-t]=B5(O*O-i*i);H+=K}if(_){for(t=1;t<=K;t++)l.push(A),j.push(W),a.push(B),i=t/K*O,q.push(B.clone().multiplyScalar(i).add(m)),Z[q.length-1]=B5(O*O-i*i);H+=K}if(y.uv){var F=0,V=E,h=[];for(s&&(F=s),X=q[0],h[0]=0,t=1;t<H;t++)S=q[t],h[t]=X.distanceTo(S),X=S,s||(F+=h[t]);for(T=[],N=[],t=0;t<H;t++)V+=h[t],T[t]=F?V/F:0,N[t]=p?O5*V/p:0;E=V,y.internalUvScale=F?E/F:1}for(var z=!!y.ns,t=0;t<H;t++){if(w=function(y,q,_,s,p,O,L,$,k){$=$||0;for(var M=[],E=(x||O5)/p,H=k?new Q5:M5,w=0;w<=p;w++){var Q=AM(y,q,_,s,w*E+O);M.push(Q),L!=M5&&(Q.uv=[L,1-w/p+$]),k&&(Q.ns=H.subVectors(Q,y).normalize().toArray())}return M}(S=q[t],j[t],l[t],Z[t]===k5?O:Z[t],L,$,T?T[t]:M5,N?N[t]:M5,z),Q)for(var u=0;u<L;u++){var J=Q[u],D=Q[u+1]||Q[0],c=w[u],R=w[u+1]||w[0];WM(y.vs,D,J,c,c,R,D),y.uv&&function(y){for(var q=1;q<arguments.length;q++){var _=arguments[q].uv;y.push(_[0],_[1])}}(y.uv,D,J,c,c,R,D),z&&function(y){for(var q=1;q<arguments.length;q++){var _=arguments[q].ns;y.push(_[0],_[1],_[2])}}(y.ns,D,J,c,c,R,D)}Q=w}}return E},g_=(ax(E5,{getLineLength:function(y){return y[y.length-1].length},getLineOffset:e_,getLineCacheInfo:function(y,q,_,s){return f_(G_(y,q,_,s))}}),1),n_=function(X,w){function M(y,q){var _,s=[];if(y)for(var p in y)!1!==(_=y[p])&&s.push("#define "+p+(!0===_?"":" "+_));if(q)for(var p in q)y&&y[p]!==k5||!1!==(_=q[p])&&s.push("#define "+p+(!0===_?"":" "+_));return s.join("\n")}var q=/^[ \t]*#include +<([\w\d./]+)>/gm,Q=/^[ \t]*void[ \t]*main[ \t\r\n]*\(( *void *)?\)[ \t\r\n]*\{/gim;function x(y){return y.replace(q,_)}function _(y,q){var _=X.getShaderChunk(q);if(_===k5)throw new Error("Resolve #include <"+q+"> failed.");return x(_)}var s,p,O,L,$,O=/(uniform\s+sampler2D\s+\w+)\[([\S\d]+)\];/g,L=/#UNROLL_LOOP_START\s+for\s*\(\s*int\s+i\s*=\s*([\S\d]+)\s*;\s*i\s*<\s*([\S\d]+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#UNROLL_LOOP_END/g,$=/^\d+$/,S=function(y){return y.indexOf("UNROLL_LOOP_START")<0||(s={},y=(p=y).replace(O,E).replace(L,H),s=p=null),y};function k(y){if(y.match($))return R5(y);var q=s[y];return q||(q=new RegExp("#define\\s+"+y+"\\s+(\\d+)"),q=p.match(q),s[y]=q?R5(q[1]):0)}function E(y,q,_){_=k(_);for(var s="",p=0;p<_;p++)s+=q+p+";";return s}function H(y,q,_,s){for(var p="",O=k(q);O<k(_);O++)p+=s.replace(/\[\s*i\s*\]/g,"["+O+"]").replace(/\[\s*I\s*\]/g,O);return p}function y(y){var q,_,s=w._programs,p=0;for(q in s)(_=s[q])&&(_._forceDelete||Z-_._fid>y?(w.deleteProgram(_),delete s[q]):p++);w._validProgramCount=p}function T(y){var q={NUM_DIR_LIGHTS:y.get(0,8),NUM_SPOT_LIGHTS:y.get(8,8),NUM_POINT_LIGHTS:y.get(16,8),MAX_BOX_CLIPPER:y.get(24,8),MAX_FLOW_OBJECT:y.get(32,8),FOG:y.get(40),FOG_EXP2:y.get(41),UV_CLIP:y.get(42),USE_ENVMAP:y.get(43),ENVMAP_TYPE_CUBE_UV:y.get(44),OIT:y.get(45),BOX_CLIPER_TYPES:y.get(52,4),USE_SHADOWMAP:y.get(56),SHADOWMAP_TYPE_PCF:y.get(57),SHADOWMAP_TYPE_PCF_SOFT:y.get(58)};return q[E6[t[y.get(48,4)]]]=!0,q}function i(y,q){var _={DOUBLE_SIDED:q.get(0),CLIP_DIRECTION:q.get(1),USE_UV:q.get(53),USE_MAP:q.get(8),USE_ALPHAMAP:q.get(9),USE_AOMAP:q.get(17),USE_LIGHTMAP:q.get(7),USE_EMISSIVEMAP:q.get(12),USE_NORMALMAP:q.get(13),USE_ALPHATEST:q.get(3),TANGENTSPACE_NORMALMAP:q.get(13),USE_DISPLACEMENTMAP:q.get(15),USE_ENVMAP:q.get(52),ENVMAP_TYPE_CUBE_UV:!0,UV_CLIP:q.get(18),USE_INSTANCING:q.get(6),USE_SKINNING:q.get(19),BONE_TEXTURE:!0,OPAQUE:!q.get(4)},y=(_["ALPHAMAP_CHANNEL_"+u[q.get(20,4)]]=!0,_["AOMAP_"+u[q.get(28,4)]+"_"+(q.get(16)?1:2)]=!0,"pbr"===y?(q.get(10)&&(_.USE_ROUGHNESSMAP=!0,_["ROUGHNESSMAP_CHANNEL_"+u[q.get(32,4)]]=!0),q.get(14)&&(_.USE_METALNESSMAP=!0,_["METALNESSMAP_CHANNEL_"+u[q.get(36,4)]]=!0),q.get(5)&&(_.USE_TRANSMISSION=!0),_.NUM_RECT_AREA_LIGHTS=q.get(40,8)):"phong"===y&&(_[y=1===(y=q.get(48,4))?"ENVMAP_BLENDING_MIX":2===y?"ENVMAP_BLENDING_ADD":"ENVMAP_BLENDING_MULTIPLY"]=!0,q.get(11)&&(_.USE_SPECULARMAP=!0),_.NUM_RECT_AREA_LIGHTS=0),D[q.get(24,4)]);return _[y]=!0,_}function N(y,_){return y.replace(K,function(y,q){return q.split(",").forEach(function(y){y=y.trim(),_.indexOf(y)<0&&_.push(y)}),""})}function a(y,q,_,s,p,O,L){var $,k="",M="",E=0<=_.indexOf("oit")&&X._oitEnabled&&(p&&p.OIT||X._programDefines&&X._programDefines.OIT);if(E&&_.push("glsl3"),s)for(var H in s)M+="#extension "+H+(s[H]?" : enable\n":" : disable\n");return 0<=_.indexOf("depth")&&(M+="#extension GL_EXT_frag_depth : enable\n"),0<=_.indexOf("glsl3")&&(X.isWebGL2()?k="vs"===O?"#version 300 es\n"+M+"precision mediump sampler2DArray;\n#define attribute in\n#define varying out\n#define texture2D texture\n":"#version 300 es\n"+M+"#define varying in\n"+(E?"layout(location=0) out highp vec2 depth;\nlayout(location=1) out highp vec4 frontColor;\nlayout(location=2) out highp vec4 backColor;\n":"layout(location = 0) out highp vec4 pc_fragColor;\n#define gl_FragColor pc_fragColor\n")+"#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad\n":"fs"===O&&(k="#extension GL_OES_standard_derivatives : enable\n"+M)),L&&X._glUbos.supportsUbo&&(k+="#define USE_UBO\n"),y=(y=k+X._glCapabilities.precisionString+y).replace(C,q),"fs"===O&&($=0<=_.indexOf("bloomSelective"),(E||$)&&(y=y.replace(Q,function(y){return E&&(y+="\nvec4 my_FragColor;\n"),$?"#include <bloomSelective.fs.head>\n"+y+"\n#include <bloomSelective.fs.body>\n":y}))),y=x(y),S(y)}function l(y,q,_){var s=y.createShader(q);return y.shaderSource(s,_),y.compileShader(s),y.getShaderParameter(s,35713)?s:(b_.addShaderErrorLog("COMPILE",y.getError(),y.getShaderInfoLog(s),35633===q?"vs":"fs",_),null)}function j(y,q,_,s,p){var O=M(p.defines,!1===p.internalDefines?null:X._programDefines),L=(p.defines&&(q.match(C)||(q=O+"\n"+q),_.match(C)||(_=O+"\n"+_)),s||(q=N(q,s=[]),_=N(_,s)),"pbr"===p.type||"phong"===p.type),$=a(q,O,s,p.extensions,p.defines,"vs",L),O=a(_,O,s,p.extensions,p.defines,"fs",L);if(!($=l(y,35633,$)))return null;if(!(O=l(y,35632,O)))return $&&y.deleteShader($),null;var k=y.createProgram();if(y.attachShader(k,$),y.attachShader(k,O),y.linkProgram(k),L&&B&&X.isShaderCompileParallel()){L={program:k,vertShader:$,fragShader:O};V?V.push(L):V=[L],k._isReady=!1,X.iv()}else{if(y.deleteShader($),y.deleteShader(O),!y.getProgramParameter(k,35714))return 0<=(L=y.getProgramInfoLog(k)).indexOf("maximum temp register")&&!X._glTempRegisterLimited?(X._glTempRegisterLimited=!0,y.deleteProgram(k),X.genProgramDefines(),j(y,q,_,s,p)):(b_.addShaderErrorLog("LINK",y.getError(),L),y.deleteProgram(k),null);k._isReady=!0}return k._id=g_++,k}var Z,K=/^[ \t]*\/\/ *[Hh]ints *:([\w\d ,\.]+)$/gm,C=/(\/\/\s*)?#PREFIX/,B=X.getGLExtensions().get("KHR_parallel_shader_compile"),F=B?B.COMPLETION_STATUS_KHR:null,V=null,h=(Y&&Y.navigator&&Y.navigator.userAgent.toLowerCase().indexOf("chrome"),new UB(64)),t=o.keys(E6),u=["R","G","B","A"],J=["linear","reinhard","cineon","aces"],D=["UseLinearToneMapping","UseReinhardToneMapping","UseCineonToneMapping","UseACESFilmicToneMapping"],c=["mix","add"],R=new UB(64);return w._programs={},{acquireProgram:function(y,q){var _=w._programs,s=y.cacheKey,p=(s||(k=(p=y).type,p.defines&&(k+=M(p.defines,!1===p.internalDefines?null:X._programDefines)),s=p.cacheKey=k),_[s]);if(p){if(!q)return p._fid!==Z&&(p._dirty=!0,p._fid=Z),p._isReady?p:null;w.deleteProgram(p),delete _[s]}var O,L,$,k=y.type;return"legacy"===k?(O=Zx(F3.substring(0,F3.indexOf("^#"))),L=Zx("~!<eJ!>!spmpDhbsG`mh!\v?zepc/tg/ujp=!fevmdoj$\v!<1/2!;!x/eJ!@!uofsbqtobsUv!>!x/eJ!~!<spmpDsfmqnbTwv!>+!eJ!<*zy/wVw!-sfmqnbTeofmCv)E3fsvuyfu!>!spmpDsfmqnbTwv!5dfw!|!*fsvuyfUeofmCv)!gj!\vgjeof$\v!~!<ttfouihjsCidubCw!>+!chs/eJ!|*ttfouihjsCidubCv)gj!\vTTFOUIHJSCIDUBC!gfegj$\v!~!<ttfouihjsCv!>+!chs/eJ!|*1/2!>a!ttfouihjsCv)gj!\v?zepc/tg/hpg=!fevmdoj$\v!~!~!<zujdbqPusbQv!>+!b/eJ!|*1/2!>a!zujdbqPusbQv)gj!~!\vgjeof$\v!~!<zujtofuoJqbNwof!+!{zy/spmpDwof!>,!chs/eJ!\vgjeof$\v!<*spmpDwof)sbfojMpUmfyfUqbNwof!>!spmpDwof!<**{z/dfWudfmgfs!-y/dfWudfmgfs)4dfw!-qbNwoFv)fcvDfsvuyfu!>!spmpDwof!5dfw!\vftmf$\v!<**ttfoihvps!-*{z/dfWudfmgfs!-y/dfWudfmgfs)4dfw!-qbNwoFv)WVfcvDfsvuyfu)CHStpUsbfojM!>!spmpDwof!5dfw!\vWV`FCVD`FQZU`QBNWOF!gfegj$\v!\vgjeof$\v!<*mbnspOemspx!-yfusfWpUbsfnbd)udfmgfs!>!dfWudfmgfs!4dfw!\vftmf$\v!<***mbnspOemspx!-yfusfWpUbsfnbd)udfmgfs!-ubvRqbnwoFv)spudfWfubups)f{jmbnspo!>!dfWudfmgfs!4dfw!\vFUBUPS`QBNWOF!gfegj$\v!<*yjsubNxfjWv!-O)opjudfsjEnspgtobsUftsfwoj!>!mbnspOemspx!4dfw!<*opjujtpQbsfnbDv!.!opjujtpQemspXw)f{jmbnspo!>!yfusfWpUbsfnbd!4dfw!|*qbNwoFftVv)!gj!\vQBNWOF`FTV!gfegj$\v!\vgjeof$\v!~!~!~!~!<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ!<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt!|*^j]fmhoBupqTv!?!udfggFupqt)gj!<*mbnspOm!-^j]opjudfsjEupqTv)upe!>!udfggFupqt!ubpmg!<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw!|*1/1!?!fhobSm)!gj!~!<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm!|*1/1!?!^j]fhobSupqTv)!gj!<1/2!>!fhobSm!ubpmg!<^j]opjujtpQupqTv!.!opjujtpQwNw!>!spudfWm!4dfw!|*1/1!>>!x/^j]spmpDupqTv)gj!|!*,,j!<TUIHJM`UPQT`NVO!=!j!<1>j!uoj)spg!\v1!?!TUIHJM`UPQT`NVO!gj$\v!\vgjeof$\v!~!~!~!<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ!|*1/1!?!fhobSm)!gj!~!<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm!|*1/1!?!^j]fhobSuojpQv)!gj!<1/2!>!fhobSm!ubpmg!<^j]opjujtpQuojpQv!.!opjujtpQwNw!>!spudfWm!4dfw!|*1/1!>>!x/^j]spmpDuojpQv)gj!|!*,,j!<TUIHJM`UOJPQ`NVO!=!j!<1>j!uoj)spg!\v1!?!TUIHJM`UOJPQ`NVO!gj$\v!\vgjeof$\v!~!~!<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEv)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ!|*1/1!>>!x/^j]spmpDsjEv)gj!|!*,,j!<TUIHJM`SJE`NVO!=!j!<1>j!uoj)spg!\v1!?!TUIHJM`SJE`NVO!gj$\v!~!<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ!\vgjeof$\v!~!<fvmbWxpebit!+!zujtofuoJxpebit!.!1/2!>+!nsfUusfcnbm!~!<osvufs!<esbdtje!|!*1/1!>>!fvmbWxpebit!%%!mmvDxpebit)!gj!<*esppDxpebit!-tvjebSxpebit!-tbjCxpebit!-f{jTxpebit!-qbNxpebit)xpebiTufh!.!1/2!>!fvmbWxpebit!ubpmg!|!*fwjfdfSxpebit)!gj!\vQBNXPEBIT`FTV!gfegj$\v!~!<*1/2!-fhobSuihjmebfIv0*opjujtpQwNw)iuhofm)ojn!.!1/2!>+!nsfUusfcnbm!|*1/1!?!fhobSuihjmebfIv)gj!<*1/1!-zujtofuoJuofjcnBuihjmebfIv!,!*zujtofuoJuofjcnBuihjmebfIv!.!1/2)!+!nsfUusfcnbm)ybn!>!nsfUusfcnbm!<*opjudfsjEuihjmebfIv.!-O)upe!>!nsfUusfcnbm!ftmf!<*M.!-O)upe!>!nsfUusfcnbm!*1/1!>>!{/opjudfsjEuihjmebfIv!%%!1/1!>>!z/opjudfsjEuihjmebfIv!%%!1/1!>>!y/opjudfsjEuihjmebfIv)!gj!<nsfUusfcnbm!ubpmg!|*1/1!>>!x/spmpDuihjmebfIv)gj!\v?zepc/tg/qbNxpmg=!fevmdoj$\v!|!*uihjMv)!gj!~!\vgjeof$\v!~!<spmpDeofmCv!>+!eJ!|*eofmCv)gj!\vftmf$\v!~!<spmpDeofmCv!>+!eJ!|*eofmCv)gj!ftmf!~!<eofmCidubCw!>+!chs/eJ!|*eofmCidubCv)gj!\vEOFMCIDUBC!gfegj$\v!~!~!<esbdtje!|*1/1!>>!x/eJ)gj!\vgjeof$\v!<ftvggjEv!>!eJ!\vftmf$\v!~!<ftvggjEv!>!eJ!|ftmf~!<spmpDidubCw!>!eJ!|*spmpDidubCv)gj!\vSPMPDIDUBC!gfegj$\v!|!ftmf!~!<spmpDwv!>!eJ!|*fsvuyfUv)gj!|!ftmf!~!<spmpDftsfwfSldjQyjGv!>!eJ!|*qjmGftsfwfSva!%%!ldbCtj)gj!~!<O.!>!O!|*ldbCtj)gj!<fvsu!;!ftmbg!@!hojdbGuopsG`mh!>!ldbCtj!mppc!<F.!>!M!4dfw!<*opjujtpQwNw.)f{jmbnspo!>!F!4dfw!<*mbnspOw)f{jmbnspo!>!O!4dfw!|!ftmf!~!\vgjeof$\v!~!~!<ftvggjEv!>!eJ!|ftmf!~!<esbdtje!|*1/1!>>!x/ftvggjEv)gj!|!*fdobutjEitbEv!?!*fdobutjEqbHitbEv!-fdobutjEfojMw)epn!%%!itbEv)!gj!\vITBE!gfegj$\v!\vgjeof$\v!<spmpDftsfwfSldjQyjGv!>!eJ!\vftmf$\v!~!<spmpDftsfwfSldjQyjGv!>!eJ!|!ftmf!~!<spmpDidubCw!>!eJ!|*spmpDidubCv)gj!\vSPMPDIDUBC!gfegj$\v!|!*yjGv)!gj!<eJ!5dfw!\v?zepc/tg/fwjudfmfTnppmc=!fevmdoj$\v!\v?zepc/tg/ypcqjmd=!fevmdoj$\v!\v?zepc/tg/opjudfsjEqjmd=!fevmdoj$\v!~!~!~!<esbdtje!|!*utfUbiqmBv!>=!b/spmpDwv)!gj!|!ftmf!~!~!<esbdtje!|!*1/1!>>!b/spmpDwv)!gj!|!*uofsbqtobsUv)!gj!\vgjeof$\v!<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv!\vftmf$\v!<*zy/wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv!\vQJMD`WV!gfegj$\v!|!*fsvuyfUv)!gj!<spmpDwv!5dfw!|!*)ojbn!ejpw!\v?ebfi/tg/ujp=!fevmdoj$\v!\v?ebfi/tg/fwjudfmfTnppmc=!fevmdoj$\v!\v?ebfi/tg/qbNxpmg=!fevmdoj$\v!\vgjeof$\v!\v?TGopjudfmgfSwoFfcvd=!fevmdoj$\v!~!<*{zy/*yjsubn!+!*1/1!-sje)5dfw))f{jmbnspo!osvufs!|!*yjsubn!5ubn!oj!-sje!4dfw!oj)opjudfsjEnspgtobsUftsfwoj!4dfw!\vgjeof$\v!~!<*x/fvmbw!-**SPUDBG`BNNBH)4dfw!-{zy/fvmbw)xpq)5dfw!osvufs!|!*fvmbw!5dfw)sbfojMpUmfyfUqbNwof!5dfw!\vftmf$\v!~<*!b/fvmbw!-*!*!*!*!9142411/1!)4dfw!-chs/fvmbw!)mbvrFobiUttfm!)4dfw!-3:/32!+!chs/fvmbw!-*!661/1!)4dfw!.!661/2!+!*!*!77725/1!)4dfw!-chs/fvmbw!)xpq!)yjn!)5dfw!osvufs!|!*!fvmbw!5dfw!oj!)CHStpUsbfojM!5dfw!~!<*b/fvmbw!-****65151/1)4dfw!-chs/fvmbw)mbvrFobiUttfm)4dfw!-9194::4881/1!+!chs/fvmbw!-**5/3)4dfw!-*5218342361/1)4dfw!,!79:387985:/1!+!chs/fvmbw)xpq)yjn)5dfw!osvufs!|!*fvmbw!5dfw)sbfojMpUmfyfUqbNwof!5dfw!\vWV`FCVD`FQZU`QBNWOF!gfegj$\v!\vgjeof$\v!~!<{zy/*!*x/ubvr!-{/ubvr.!-z/ubvr.!-y/ubvr.)5dfw!-wr!)ubvRumvn!osvufs!<*!*1/1!-dfw)5dfw!-ubvr!)ubvRumvn!>!wr!5dfw!|!*!dfw!4dfw!-ubvr!5dfw!)spudfWfubups!4dfw!~!<*!{/3r!+!{/2r!.!z/3r!+!z/2r!.!y/3r!+!y/2r!.!x/3r!+!x/2r!-z/3r!+!y/2r!.!y/3r!+!z/2r!,!x/3r!+!{/2r!,!{/3r!+!x/2r!-y/3r!+!{/2r!.!{/3r!+!y/2r!,!x/3r!+!z/2r!,!z/3r!+!x/2r!-{/3r!+!z/2r!.!z/3r!+!{/2r!,!x/3r!+!y/2r!,!y/3r!+!x/2r)5dfw!osvufs!|!*3r!5dfw!-2r!5dfw)ubvRumvn!5dfw!<ubvRqbnwoFv!5dfw!nspgjov!\vFUBUPS`QBNWOF!gfegj$\v!<1/3!>!SPUDBG`BNNBH!ubpmg!utopd!\vQBNWOF`FTV!gfegj$\v!\v?ebfi/tg/qbNxpebit=!fevmdoj$\v!\vgjeof$\v!<fdobutjEfojMw!ubpmg!hojzsbw!<fdobutjEqbHitbEv!ubpmg!nspgjov!<fdobutjEitbEv!ubpmg!nspgjov!<itbEv!mppc!nspgjov!\vITBE!gfegj$\v!\v?ebfi/tg/hpg=!fevmdoj$\v!\v?ebfi/tg/ypcqjmd=!fevmdoj$\v!\v?hojldbq=!fevmdoj$\v!\vgjeof$\v!<^TUIHJM`UPQT`NVO]opjudfsjEupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]opjujtpQupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]fhobSupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]fmhoBupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]uofopqyFupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]spmpDupqTv!5dfw!nspgjov!\v1!?!TUIHJM`UPQT`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`UOJPQ`NVO]opjujtpQuojpQv!4dfw!nspgjov!<^TUIHJM`UOJPQ`NVO]fhobSuojpQv!ubpmg!nspgjov!<^TUIHJM`UOJPQ`NVO]spmpDuojpQv!5dfw!nspgjov!\v1!?!TUIHJM`UOJPQ`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`SJE`NVO]opjudfsjEsjEv!4dfw!nspgjov!<^TUIHJM`SJE`NVO]spmpDsjEv!5dfw!nspgjov!\v1!?!TUIHJM`SJE`NVO!gj$\v!\vgjeof$\v!<eofmCidubCw!4dfw!hojzsbw!<eofmCidubCv!mppc!nspgjov!\vEOFMCIDUBC!gfegj$\v!\vgjeof$\v!<ttfouihjsCidubCw!ubpmg!hojzsbw!<ttfouihjsCidubCv!mppc!nspgjov!\vTTFOUIHJSCIDUBC!gfegj$\v!\vgjeof$\v!<spmpDidubCw!5dfw!hojzsbw!<spmpDidubCv!mppc!nspgjov!\vSPMPDIDUBC!gfegj$\v!<opjudfsjEuihjmebfIv!4dfw!nspgjov!<spmpDuihjmebfIv!5dfw!nspgjov!<zujtofuoJuofjcnBuihjmebfIv!ubpmg!nspgjov!<fhobSuihjmebfIv!ubpmg!nspgjov!<opjujtpQemspXw!4dfw!hojzsbw!<opjujtpQbsfnbDv!4dfw!nspgjov!<yjsubNxfjWv!5ubn!nspgjov!\vgjeof$\v!\vgjeof$\v!<qbNwoFv!fcvDsfmqnbt!nspgjov!\vftmf$\v!<ttfoihvps!ubpmg!nspgjov!<qbNwoFv!E3sfmqnbt!nspgjov!\vWV`FCVD`FQZU`QBNWOF!gfegj$\v!<zujtofuoJqbNwof!ubpmg!nspgjov!<qbNwoFftVv!mppc!nspgjov!\vQBNWOF`FTV!gfegj$\v!<opjujtpQmbdpMw!4dfw!hojzsbw!<opjujtpQwNw!4dfw!hojzsbw!<mbnspOw!4dfw!hojzsbw!<ftvggjEv!5dfw!nspgjov!<zujdbqPusbQv!ubpmg!nspgjov!<ttfouihjsCv!ubpmg!nspgjov!<uihjMv!mppc!nspgjov!<spmpDeofmCv!5dfw!nspgjov!<eofmCv!mppc!nspgjov!\v?ebfi/tg/opjudfsjEqjmd=!fevmdoj$\v!\vOPJUDFSJE`QJMD!fojgfe$\v!<sfmqnbTeofmCv!E3sfmqnbt!nspgjov!<sfmqnbTv!E3sfmqnbt!nspgjov!\vgjeof$\v!<wVw!3dfw!hojzsbw!\vftmf$\v!<wVw!4dfw!hojzsbw!\vQJMD`WV!gfegj$\v!<fsvuyfUeofmCv!mppc!nspgjov!<fsvuyfUv!mppc!nspgjov!<uofsbqtobsUv!mppc!nspgjov!<utfUbiqmBv!ubpmg!nspgjov!<spmpDftsfwfSldjQyjGv!5dfw!nspgjov!<qjmGftsfwfSv!mppc!nspgjov!<yjGv!mppc!nspgjov!<fmcbudfmfTesbdtjEv!mppc!nspgjov!\vYJGFSQ$!00\v!\vujp!;tuoji!00")):(q=n4[k]).isRaw?(O=q.vs,L=q.fs,$=q.hints):(O=Zx(q[0],!0),L=Zx(q[1],!0)),!y.defines&&y.cacheKeyOfMat&&(y.defines=i(k,y.cacheKeyOfMat)),(p=j(w,O,L,$,y))?(q=p._isReady,p.name=k,p.cacheKey=s,p._dirty=!0,p._fid=Z,"pbr"===k||"phong"===k?(p._shaderParams={type:k,cacheKeyOfMat:y.cacheKeyOfMat&&y.cacheKeyOfMat.toString(),cacheKeyOfScene:X._sceneProgramDefinesMask},y.extensions&&(p._shaderParams.extensions=y.extensions)):p._shaderParams={type:y.type,cacheKeyOfMat:y.cacheKeyOfMat,defines:y.cacheKeyOfMat?null:y.defines,gvDefines:!1!==y.internalDefines?DA(X._programDefines):null,extensions:y.extensions},_[s]=p,q?p:null):p},scheduleProgramGC:y,checkParallelLinkStatus:function(){if(V){for(var y=V.length-1;0<=y;y--){var q,_,s=(_=V[y]).program;w.getProgramParameter(s,F)&&(V[y]=V[V.length-1],V.pop(),w.getProgramParameter(s,35714)?s._isReady=!0:(q=w.getProgramInfoLog(s),b_.addShaderErrorLog("LINK",w.getError(),q),w.deleteProgram(s),s._forceDelete=!0),w.deleteShader(_.vertShader),w.deleteShader(_.fragShader))}V.length?X.iv():V=null}},dispose:function(){y(-1)},setCurrentFrameRenderId:function(y){Z=y},disableAttributes:function(y){var q,_,s=y._programs;for(q in s)(_=s[q])&&_._fid===Z&&f4(y,_).disable()},genPhysicalProgramKeyOfScene:function(y){return h.set(0,y.NUM_DIR_LIGHTS,8),h.set(8,y.NUM_SPOT_LIGHTS,8),h.set(16,y.NUM_POINT_LIGHTS,8),h.set(24,y.MAX_BOX_CLIPPER,8),h.set(32,y.MAX_FLOW_OBJECT,8),h.set(40,y.FOG),h.set(41,y.FOG_EXP2),h.set(42,y.UV_CLIP),h.set(43,y.USE_ENVMAP),h.set(44,y.ENVMAP_TYPE_CUBE_UV),h.set(45,y.OIT),h.set(48,t.indexOf(X.getFlowBlendMode()),4),h.set(52,y.BOX_CLIPER_TYPES,4),h.set(56,y.USE_SHADOWMAP),h.set(57,y.SHADOWMAP_TYPE_PCF),h.set(58,y.SHADOWMAP_TYPE_PCF_SOFT),X._sceneProgramDefinesBits=h,X._sceneProgramDefinesMask=h.toString()},decodeSceneDefinesByKey:T,genPhysicalProgramKeyOfMat:function(y,q){return R.set(0,!y.cullFace),R.set(1,q.clipDirection),R.set(3,y.alphaTest!=M5),R.set(4,q.isTransparent),R.set(5,q.enableTransmission),R.set(6,q.useInstancing),R.set(7,y.lightMap),R.set(8,y.map),R.set(9,y.alphaMap),R.set(10,y.roughnessMap),R.set(11,y.specularMap),R.set(12,y.emissiveMap),R.set(13,y.normalMap),R.set(14,y.metalnessMap),R.set(15,q.useDisplacement),R.set(16,1==q.aoMapUvChannel),R.set(17,y.aoMap),R.set(18,q.useUvClip),R.set(19,q.skeleton),R.set(20,u.indexOf(q.alphaChannel),4),R.set(24,J.indexOf(q.toneMapping),4),R.set(28,u.indexOf(q.aoChannel),4),R.set(32,u.indexOf(q.roughnessChannel),4),R.set(36,u.indexOf(q.metalnessChannel),4),R.set(40,q.rectsNum,8),R.set(48,c.indexOf(q.envMapCombine)+1,4),R.set(52,q.envmap!=M5),R.set(53,R.get(8,8)||3==R.get(16,2)||R.get(18)),2!=R.get(16,2)&&!R.get(7)||(y.uUv2Matrix=l3(y.uv2Rotation,y.uv2Offset,y.uv2Scale,y.uv2Anchor)),R},decodePhysicalProgramDefinesByKey:i,serializePhysicalShader:function(){var y,q,_,s,p=w._programs,O=[];for(s in p)!(y=p[s]._shaderParams)||"pbr"!==y.type&&"phong"!==y.type||(O.push(y),q||(_=y.cacheKeyOfMat.length,q=y.cacheKeyOfScene.length+_));var L,$=O.length,k=40,M=new UB(k+2*$),E=[M];M.set(0,1,8),M.set(8,$,8),M.set(16,_,8),M.set(24,q,8),M.set(32,2,8);for(var H=0;H<$;H++)L=O[H],M.set(k,"pbr"===L.type),M.set(k+1,L.extensions&&L.extensions.GL_EXT_shader_texture_lod),k+=2,E.push(L.cacheKeyOfMat,L.cacheKeyOfScene);return E[0]=E[0].toString(),E.join("")},deserializePhysicalShader:function(y){var q=X._programDefines;if(0===y.indexOf("__ht__encode")){var _=E5.parse(y),s=this;_.forEach(function(y){s.genPhysicalProgramKeyOfScene(X._programDefines=y.gvDefines),s.acquireProgram(y)})}else for(var p=new UB(y.substr(0,8)),O=p.get(8,8),L=p.get(16,8),$=p.get(24,8),k=(p.fromString(y.substr(0,y.length-O*$)),y.length-O*$),M=p.get(32,8),E=40,H=0;H<O;H++){var w=p.get(E+0)?"pbr":"phong",Q=null,x=(p.get(E+1)&&(Q={GL_EXT_shader_texture_lod:!0}),y.substr(k+H*$,L)),S=y.substr(k+H*$+L,$-L),w=(X._programDefines=T(new UB(S)),{type:w,extensions:Q,cacheKey:S+x,cacheKeyOfMat:new UB(x)});this.acquireProgram(w),E+=M}X._programDefines=q}}},v_=(c$={5126:"float",35664:"vec2",35665:"vec3",35666:"vec4",5124:"int",35667:"ivec2",35668:"ivec3",35669:"ivec4",35670:"bool",35671:"bvec2",35672:"bvec3",35673:"bvec4",35674:"mat2",35675:"mat3",35676:"mat4",35678:"sampler2D",35680:"samplerCube"},R$=["uProjectMatrix","uViewMatrix","uModelMatrix","uModelViewMatrix","uNormalMatrix","uCameraPosition","uTime","uUvMatrix","uUv2Matrix"],o$=e.generateUUID(),function(y,q,_){var s,p=y.getGL();if(!p)return!1;var O=[],L=(_=!1!==_,b_.getShaderErrorLogId());try{var $=I_(q);if(!$)return{result:!1,reason:"invalidate shader source."};$.isRaw=!0,n4[o$]=$,(s=y.acquireProgram({type:o$,defines:null,internalDefines:!1},_))&&function y(q,_){for(var s,p=q.children,O=p.length-1;0<=O;O--){var L,$,k=(s=p[O]).name;0<=R$.indexOf(k)||($=s.desc,s.isLeaf?_.push({name:k,size:$.size,type:c$[$.activeInfo.type]}):($=s.childMap)[0]?(_.push({name:k,size:s.children.length,descs:L=[]}),y($[0],L)):(_.push({name:k,size:0,descs:L=[]}),y(s,L)))}}(e4(p,s)._struct,O)}catch(y){}finally{n4[o$]=null}return s?{result:!0,uniforms:O}:b_.getShaderErrorLogId()!==L&&(q=b_.getShaderErrorLog())?o.assign({result:!1},q):{result:!1,reason:"faild to create shader."}}),b_=(k=[],M=0,(E={})[A4.NO_ERROR]="no error",E[1280]="invalid enum",E[1281]="invalid value",E[1282]="invalid operation",E[1286]="invalid framebuffer operation",E[1285]="out of memory",E[37442]="context lost webgl",{addShaderErrorLog:function(y,q,_,s,p){for(var O=arguments.length,L=[],$=0;$<O;$++)L[$]=arguments[$];y={time:(new Date).toLocaleString(),_62O:y,reason:_},q&&(y.errorFlag=E[q]),s&&(y.shaderType=s,y.shaderSource=p),k[M]=y,M=(M+1)%50,console.error("Failed to create shader.")},clearShaderErrorLog:function(){k=[],M=0},getShaderErrorLog:function(y){return y=e.modToPositive(M-1+(y=y||0),50),k[y]},getShaderErrorLogId:function(){return M}}),I_=(ax(E5,{getShaderErrorLog:b_.getShaderErrorLog}),Y$=/^[ \t]*\/\/[ \t]*fs[ \t]*$/gim,P$=/^[ \t]*\/\/[ \t]*[Hh]ints[ \t]*:([\w\d ,\.]+)$/gm,m$=/^[ \t]*\/\/[ \t]*ExtraInfo[ \t]*:[ \t]*([\w\d\+\/=]+)$/gim,function(y){var q,_,s,p=[];do{if(!y.match(Y$))break;var O=(y=(y=y.replace(P$,function(y,q){return q.split(",").forEach(function(y){y=y.trim(),p.indexOf(y)<0&&p.push(y)}),""})).replace(m$,function(y,q){if(q.length)try{s=P.Default.parse("__ht__encode"+q.trim())}catch(y){}return""})).split(Y$)}while(2===O.length&&(q=O[0],_=O[1],0));if(!q||!_)return null;var L={vs:q,fs:_};return p.length&&(L.hints=p),s&&(L.extraInfo=s),L}),U_=function(y,q,_,s){var p,O=[];return _&&(p=[],_.glsl3&&p.push("glsl3"),_.light&&p.push("light"),p.length&&O.push("// Hints: "+p.join(", "))),s&&(_=P.Default.stringify(s,0,!0),O.push("// ExtraInfo: "+_.substr(12))),O.push(y+"\n// FS\n"+q),O.join("\n")},d_=e.newIdGenerator(),y6=function(y,q,_,s){this.id=d_.next(),_=_||"",s=s||_,this.gl=y,this.key=_,this.name=s,this.bindingPointIndex=q,this.__bufferOffset=0,this.__uniformNum=0,this.uniforms={},this.attaches=new WeakMap,this.currentCache=null,this.currentBuffer=null,this.currentBufClip=null},q6=(o.assign(y6.prototype,{setName:function(y){return this.name=y,this},addUniform:(W$={1:function(y,q,_,s){this.currentCache[q]!==(s=s==k5?0:s)&&(this.currentCache[q]=s,(q=this.currentBufClip[q])[0]=s,y.bufferSubData(35345,_,q))},2:function(y,q,_,s){var p=this.currentCache[q];p[0]===s[0]&&p[1]===s[1]||((q=this.currentBufClip[q])[0]=p[0]=s[0],q[1]=p[1]=s[1],y.bufferSubData(35345,_,q))},3:function(y,q,_,s){"string"==typeof s&&(s=fl(s));var p=this.currentCache[q];p[0]===s[0]&&p[1]===s[1]&&p[2]===s[2]||((q=this.currentBufClip[q])[0]=p[0]=s[0],q[1]=p[1]=s[1],q[2]=p[2]=s[2],y.bufferSubData(35345,_,q))},4:function(y,q,_,s){"string"==typeof s&&(s=fl(s));var p=this.currentCache[q];p[0]===s[0]&&p[1]===s[1]&&p[2]===s[2]&&p[3]===s[3]||((q=this.currentBufClip[q])[0]=p[0]=s[0],q[1]=p[1]=s[1],q[2]=p[2]=s[2],q[3]=p[3]=s[3],y.bufferSubData(35345,_,q))},12:function(y,q,_,s){var p=this.currentCache[q],O=!1,q=this.currentBufClip[q];p[0]!==s[0]&&(O=!0,q[0]=p[0]=s[0]),p[1]!==s[1]&&(O=!0,q[1]=p[1]=s[1]),p[2]!==s[2]&&(O=!0,q[2]=p[2]=s[2]),p[4]!==s[3]&&(O=!0,q[4]=p[4]=s[3]),p[5]!==s[4]&&(O=!0,q[5]=p[5]=s[4]),p[6]!==s[5]&&(O=!0,q[6]=p[6]=s[5]),p[8]!==s[6]&&(O=!0,q[8]=p[8]=s[6]),p[9]!==s[7]&&(O=!0,q[9]=p[9]=s[7]),p[10]!==s[8]&&(O=!0,q[10]=p[10]=s[8]),O&&y.bufferSubData(35345,_,q)},16:function(y,q,_,s){for(var p=this.currentCache[q],O=!1,L=this.currentBufClip[q],$=0;$<16;$++)p[$]!==s[$]&&(O=!0,L[$]=p[$]=s[$]);O&&y.bufferSubData(35345,_,L)}},function(y,q){var _,s,p,O;this.uniforms[y]===k5&&(_=this.__uniformNum++,(s=this.__bufferOffset)%(p=q<=2?q:4)!=0&&(s+=p-s%p),p=4*s,O=4*q/Float32Array.BYTES_PER_ELEMENT,this.__bufferOffset=s+q,this.uniforms[y]={index:_,location:p,dataSize:O},o.defineProperty(this,y,{configurable:!1,enumerable:!0,get:N,set:W$[q].bind(this,this.gl,_,p)}))}),attachSource:function(y,q){y=y||mn;var _=this.attaches.get(y),y=(_||this.attaches.set(y,_=this.newInstance()),_[0]),s=this.gl;return s.bindBuffer(35345,y),s.bindBufferBase(35345,this.bindingPointIndex,y),q&&_[3]===q?null:(_[3]=q,this.currentCache=_[1],this.currentBufClip=_[2],this.currentBuffer=y,this)},newInstance:function(){var y,q=this.gl,_=q.createBuffer(),s=(q.bindBuffer(35345,_),16*Math.ceil(this.__bufferOffset/4)),p=(q.bufferData(35345,s,35044),q.bindBuffer(35345,null),new Array(this.__uniformNum)),O=new Array(this.__uniformNum);for(y in this.uniforms){var L=this.uniforms[y],$=L.index,k=L.dataSize;if(k<=1)p[$]=0;else{p[$]=new Array(k);for(var M=0;M<k;M++)p[$][M]=0}for(O[$]=new Float32Array(k),M=0;M<k;M++)O[$][M]=0}return[_,p,O,0]}}),function(O){var _,L,$,s,k,p,M,E,H=this;function w(y){if("string"!=typeof y)return 0|y;switch(y){case"low":return 512;case"medium":return 1024;case"ultra":return 4096;default:return 2048}}function y(){H.enable=!E5.graph3dViewShadowDisabled,_=E5.graph3dViewShadowType,L=E5.graph3dViewShadowIntensity,$=E5.graph3dViewShadowBias,s=E5.graph3dViewShadowQuality,k=E5.graph3dViewShadowRadius,p=E5.graph3dViewShadowDegreeX,M=E5.graph3dViewShadowDegreeZ,E=null}H.enable=!1,y();var Q,x,S,X=1,T=w(s),i=!1,N=new P.Math.Matrix4,a=H.pvMatrix=new P.Math.Matrix4,l=0,j=(H.dispose=function(){YK(O,H.mapForReflector,H.map),H.mapForReflector=null,H.map=null},H.render=function(){if(!O._picking&&H.enable){var y=O.getGL();if(y){i&&H.setupShadowCamera(),O._glCapabilities&&(T=Math.min(T,O._glCapabilities.maxTextureSize));var q=O.isReflecting(y);if(q){if(l===y._renderInfo.frame)return;l=y._renderInfo.frame}(Q=H[y=q?"mapForReflector":"map"])?Q.setSize(T,T):Q=H[y]=new i6(O,O.getGL(),0,0,{samples:1,minFilter:9728,magFilter:9728,width:T,height:T}),O._depthGrabber.renderDepth(Q,!0,S,N,T,T,function(y,q){return y?_K(y)||!y.s("shadow.cast")||y instanceof UQ||y.s("effect.flow"):q?!1===q.shadowCast:void 0})}}},H.getShadow=function(){var y={degreeX:p,degreeZ:M,intensity:L,quality:s,type:_,radius:k,bias:$,bounding:E};return 1!==X&&(y.boundExtend=X),y},H.setShadow=function(y,q){H.enable=y=!!y,"object"==typeof q&&(q.intensity!==k5&&(L=q.intensity),q.bias!==k5&&($=q.bias),q.radius!==k5&&(k=q.radius),q.degreeX!==k5&&(p=q.degreeX),q.degreeZ!==k5&&(M=q.degreeZ),q.quality!==k5&&(s=q.quality),q.bounding!==k5&&(E=q.bounding),q.type!==k5&&_!==q.type&&(_=q.type),T=w(s),q.boundExtend!==k5&&(X=q.boundExtend)),y&&H.setupShadowCamera(),O.iv()},null),Z=(H.tryInvalidateLater=function(y,q){"modelLoaded"===q&&(j&&uA(j,!0),j=tA(function(){j=null,H.refresh()},H,k5,200))},H.refresh=function(){this.enable&&(this.setupShadowCamera(),O.iv())},H.tryUpdateBounding=function(y){var q,_,s;E||(q=this.boundingSphere)&&(_=(new G).fromArray(J8(y,O.getMat(y))),y=y.getAnchor3d(),s=new Q5,q.containsPoint(s.set(0-y.x,0-y.y,0-y.z).applyMatrix4(_))&&q.containsPoint(s.set(0-y.x,0-y.y,1-y.z).applyMatrix4(_))&&q.containsPoint(s.set(0-y.x,1-y.y,0-y.z).applyMatrix4(_))&&q.containsPoint(s.set(0-y.x,1-y.y,1-y.z).applyMatrix4(_))&&q.containsPoint(s.set(1-y.x,0-y.y,0-y.z).applyMatrix4(_))&&q.containsPoint(s.set(1-y.x,0-y.y,1-y.z).applyMatrix4(_))&&q.containsPoint(s.set(1-y.x,1-y.y,0-y.z).applyMatrix4(_))&&q.containsPoint(s.set(1-y.x,1-y.y,1-y.z).applyMatrix4(_))||H.setupShadowCamera())},[1,1]);H.createShadow=function(y,q){var _,s,p;y=y||O._frameState.renderState.directUniforms(),(s=!1!==O._getFrameRenderOptions("renderShadow")?O._getFrameRenderOptions("useReflectorSelfShadowMap")&&H.mapForReflector?H.mapForReflector.texture:H.map?H.map.texture:null:s)?(y.shadowMap=s,_=!0):((s=(p=O.getGL())._emptyShadowTexture)||(s=p._emptyShadowTexture=hK(p,null,[255,255,255,255])),y.shadowMap=s),q||(y.shadowSize=_?[Q.width,Q.height]:Z,y.shadowMatrix=a.toArray(),y.shadowIntensity=L,y.shadowBias=$,y.shadowRadius=k)},H.genShaderDefine=function(y){return y.USE_SHADOWMAP=!0,"hard"===_?y.SHADOWMAP_TYPE_PCF=!0:"soft"===_&&(O.isGLTempRegisterLimited()?y.SHADOWMAP_TYPE_PCF=!0:y.SHADOWMAP_TYPE_PCF_SOFT=!0),y},H.setupShadowCamera=function(){x=x||(H.boundingSphere=new P.Math.Sphere),E?x.set((new Q5).fromArray(E),E[3]):(i=!1,(_=O.getBoundingBox(O.dm().toDatas(function(y){return y.s("shadow.cast")&&O.isVisible(y)})))?(y=new Q5(_.min),q=new Q5(_.max)):(y=new Q5(-256,-256,-256),q=new Q5(256,256,256),i=!0),x.set(y.clone().add(q).multiplyScalar(.5),.5*y.distanceTo(q)*X));var y=2*(_=x.radius),q=(S=lK(l8(),-_,_,-_,_,y/1e3,y),a.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),a.multiply(N.fromArray(S)),Math.tan(-p*Math.PI/180)),y=Math.tan(-M*Math.PI/180),_=_/Math.sqrt(q*q+y*y+1),q=new Q5(_*q,_,_*y);H.direction=Q5.normalizeArray(q.clone().multiplyScalar(-1)),N.lookAt(q,new Q5(0,0,0),new Q5(0,1,0)).setPosition(q.add(x.center)),N.getInverse(N),a.multiply(N)},H.getDirection=function(){if(H.enable)return H.direction},H.resetProperties=y}),_6=(q6.PARAMS=["quality","intensity","bias","radius","type","degree.x","degree.z","bounding"],dB.ms_shadow=function(_,y){q6.PARAMS.forEach(function(y){var q=(y=y.replace(/(^|\.)[a-z]/g,function(y){return y[y.length-1].toUpperCase()})).charAt(0).toLowerCase()+y.substr(1);_["getShadow"+y]=function(){return this._getShadowParam(q)},_["setShadow"+y]=function(y){this._setShadowParam(q,y)}}),_.getCurrentShadowBounding=function(y){return!y&&this.shadowMap.boundingSphere||this.shadowMap.setupShadowCamera(),[(y=this.shadowMap.boundingSphere).center.x,y.center.y,y.center.z,y.radius]},_.refreshShadow=function(){this.shadowMap.refresh()},_.enableShadow=function(y){this.shadowMap.setShadow(!0,y)},_.disableShadow=function(){this.shadowMap.setShadow(!1)},_._getShadowParam=function(y){return this.shadowMap.getShadow()[y]},_._setShadowParam=function(y,q){var _=this._getShadowParam(y),s={},p=(s[y]=q,this.shadowMap);p.setShadow(p.enable,s),this.firePropertyChange("shadow"+y.charAt(0).toUpperCase()+y.substr(1),_,q)}},function(T){var _=this,i=this.renderTargetPool=[],N=[],a=["rect","circle","polygon"],l=!1,j=(_.render=function(){if(!T._picking){var y=T._flowObjects;if(y.length){var q=T.getGL();if(q){l=!0;(p=T._frameState.renderState.glState).blend.enabled=!1,p.depth.enabled=!1,p.cullFace.enabled=!1;var _,s,p=p.color.clear.slice(0);for(oK(q,[0,0,0,1]),_=0,s=y.length;_<s;_++)O=q,$=y[L=_],X=S=x=Q=w=H=E=M=k=void 0,"billboard"!==(X=(Q=T.getData3dUI($)).s("shape3d"))&&"plane"!==X||((k=i[L])||(k=i[L]=new i6(T)),w=$.s("effect.flow.size"),E=$.s("effect.flow.uvshape"),x=(H=$.getFinalScale3d())[0],(H="billboard"===X?H[1]:H[2])<x?(H=H/x*w,x=w):(x=x/H*w,H=w),x=Math.max(128,Math.round(x)||0),H=Math.max(128,Math.round(H)||0),k.setSize(O,x,H),k.bind(O),w=T.getViewport(O),T.setViewport(O,0,0,x,H),O.clear(16640),Q=T.getData3dUI($),(x=W_(Q,X))&&(!x.ns&&x.length&&(x=x[0]),A_(x),H=x.vs,(x=$.s("effect.flow.gradient"))?(M="Flow3d.Cached."+x,P.Default.getImageMap()[M]||P.Default.setImage(M,P.Default.toCanvas({width:100,height:100,comps:[{type:"rect",background:"rgb(0,0,0)",gradient:x,rect:[0,0,100,100]}]},100,100))):M=$.s("shape3d.image"),-1===(x=a.indexOf(E))&&0===E.indexOf("polygon")&&(S=+E.substring(7),x=Math.max(3,Math.min(1024,S))-1),T._prefabRenderer.render(O,{model3d:!0,mesh:{position:H},mat:{type:"flow",useXZ:"plane"===X,image:T.getTexture(M,$),blend:$.s("effect.flow.blend")||j,uvMatrix:l3(Q.s("shape3d.uv.rotation"),Q.s("shape3d.uv.offset"),Q.s("shape3d.uv.scale"),Q.s("shape3d.uv.anchor")),intensity:$.s("effect.flow.intensity"),shape:x}}),k.unbind(O),T.setViewport(O,w[0],w[1],w[2],w[3]),(E=$.getMatrix4()).getInverse(E),H=E.getElements(),"plane"===X?H[1]=H[5]=H[9]=H[13]=0:H[2]=H[6]=H[10]=H[14]=0,N[L]={matrix:E,group:$.s("effect.flow.group")}));oK(q,p),i.length!==s&&i.splice(s,i.length-s),l=!1}}}var O,L,$,k,M,E,H,w,Q,x,S,X},_.dispose=function(){T.getGL()&&(YK(T,i),i=this.renderTargetPool=[])},_.createFlow=function(y){var q;if(!l&&(q=i.length)){y=y||T._frameState.renderState.directUniforms();for(var _=[],s=[],p=[],O=0;O<q;O++)_[O]=N[O].matrix.toArray(),s[O]=i[O].texture,p[O]=!1;for(y.flowMatrix=_,O=0;O<q;O++)y["flowTexture"+O]=s[O];y.flowEnabled=p}},_.disableFlow=function(y){var q;if(q=i.length){y=y||T._frameState.renderState.directUniforms();for(var _=[],s=0;s<q;s++)_[s]=!1;y.flowEnabled=_}},_.resetDataFlowEnabld=function(y,q){return _.resetFlowUniform(y.s("effect.flow.mask"),q)},_.resetFlowUniform=function(y,q){var _=i.length,s=new Array(_);if(y)for(var p=0;p<_;p++)y&1<<N[p].group&&(s[p]=!0);q.flowEnabled=s},"white")}),s6=function(i){function y(y){i.getPostProcessing().isRenderingScene()&&"main"===y.layer&&(p="post"===y.phase?i.getPostProcessing().getRenderTarget().grabDepth():null)}var p,N,a,O=this,q=!1,L=1,H=new P.Math.Matrix4,l=(O.enable=function(){if(!q)return i.isWebGL2()&&i.addRenderLayerListener(y,O),q=!0},O.disable=function(){if(q)return i.isWebGL2()&&(i.removeRenderLayerListener(y,O),p=null),!(q=!1)},O.isEnabled=function(){return q},O.setResolution=function(y){L=y},O.getResolution=function(){return L},O.grab=function(y){var q,_,s;return!y&&i.isWebGL2()?(q=i.getPostProcessing().getRenderTarget())?p||q.grabDepth():null:(y=i.getGL())?(_=Math.round(L*i.getWidth()),s=Math.round(L*i.getHeight()),(q=y._depthGrabberRTT)||(q=y._depthGrabberRTT=new i6(i,_,s,{minFilter:9728,magFilter:9728})),i._setupPVMatrix(),O.renderDepth(q,!1,i._projectMatrix,i._viewMatrix,_,s),q.texture):void 0},O.renderDepth=function(y,q,_,s,p,O,L){var $,k,M,E=i.getGL();E&&((k=($=i._frameState).renderState.glState).blend.enabled=!1,k.depth.enabled=!0,k.depth.mask=!0,k=k.color.clear.slice(0),oK(E,[1,1,1,1]),M=i.acquireProgram({type:"shadowMap",defines:{MAX_BOX_CLIPPER:i._boxClippers.length,BOX_CLIPER_TYPES:i._boxClipperTypes,UV_CLIP:!1}}),$.renderState.useProgram(M),_.isMatrix4&&(_=_.getElements()),s.isMatrix4||(s=H.fromArray(s)),w(y,q,_,s,p,O,L),oK(E,k))},new P.Math.Matrix4),w=function(y,q,_,s,p,O,L){var $=i.getGL();y.setSize($,p,O),y.bind($),$.clear(16640);var k=(H=i._frameState.renderState).directUniforms(),M=H.directAttribs(),E=H.directState(),H=(k.uUseInstance=!1,k.uUseSkinning=!1,M.aMatrixInstanced=k5,k.boneTexture=k5,k.projectionMatrix=_,a=i.isReflecting($),(N=0<i._boxClippers.length)&&(mK(i,k,g4),k.uClipperMatrix=i._boxClipperMatrixes,k.uClipperClipInner=i._boxClipperClipInner),i._viewport);i.setViewport($,0,0,p,O);for(var w=i.getRenderLayerKeys(),Q=0,x=w.length;Q<x;Q++){var S,X=w[Q];i.getRenderLayerInfo(X).ignore||(X=i._40Q.get(X))&&(X.resetModel3dInstancedDraw(),S=X.batchIndexMap,K($,k,M,E,s,L,q,X.opaque,S,!1),q&&K($,k,M,E,s,L,q,X.transparent,S,!0),T($,k,M,E,s,L,q,X.batchModelMap,S))}y.unbind($),H&&i.setViewport($,H[0],H[1],H[2],H[3])},j=function(y,q,_,s,p,O,L){_&&_.length&&(p=p&&p.length?p.length/16:0,q.position=dK(y,i._buffer.vs,_,M5),s?(q3(y,i._buffer.is,s),bK(y,O||0,L===k5?s.length:L,null,s instanceof Uint32Array?5125:s instanceof Uint8Array?5121:null,null,p)):vK(y,O||0,L===k5?_.length/3:L,null,p))},Z=function(y,q,_,s){var p,O,L;if(Hx(_))for(O=0,L=_.length;O<L;O++)(p=_[O])&&Z(y,q,p,s);else w5(_)?Z(y,q,W_(s,_),s):Mx(_)&&(_.shape3d?Z(y,q,_.shape3d,s):$(y,q,_))},$=function(y,q,_){A_(_),j(y,q,_.vs,_.is),j(y,q,_.top_vs,_.top_is),j(y,q,_.bottom_vs,_.bottom_is),j(y,q,_.from_vs,_.from_is),j(y,q,_.to_vs,_.to_is)},T=function(y,q,_,s,p,O,L,$){if(!Cx($)&&!i.drawFilter){var k,M,E,H,w,Q=l.identity().premultiply(p),x=(q.modelViewMatrix=Q.toArray(),q.uClipDirection=0,new P.Math.Matrix4);for(k in $)if(!1!==(M=i.getBatchInfo(k)||mn).visible){if(!L)if(E=M.material){if("string"==typeof E&&(E=E5.getMaterial(E)),!L&&(!E||E.transparent))continue}else if(M.transparent)continue;O&&O(null,M)||a&&!1===M.reflectable||((E=$[k]).invalidate&&__(E,i._picking),N&&(q.modelMatrix=h3,mK(i,q,M.clipboxMask===k5?r4:M.clipboxMask)),(M=E.translate)&&(x.set(1,0,0,M[0],0,1,0,M[1],0,0,1,M[2],0,0,0,1),q.modelMatrix=x.getElements(),q.modelViewMatrix=x.premultiply(p).toArray()),(w=(H=E.ms32)&&H.length)&&(q.uUseInstance=!0,_.aMatrixInstanced=UK(y,i._buffer.ms,H,M5)),j(y,_,E.vs32,E.is,H),w&&(q.uUseInstance=!1,_.aMatrixInstanced=k5),M&&(q.modelMatrix=h3,q.modelViewMatrix=Q.toArray()))}}},K=function(M,E,H,w,Q,y,x,q,_,s){for(var S,p,X,O=q.length,L=0;L<O;L++)if(p=(k=q[L]).ui,S=k.data,i.isVisible(S)&&!(y&&y(S)||_[S._id]||a&&!1===S.s("3d.reflectable"))){if(k=p.s("3d.clip.direction")){if(0===($=p.s("3d.clip.percentage")))continue;k=p._formatClipUniforms(k,$,S),E.uClipPercent=k[1],E.uClipDirection=k[0]}else E.uClipDirection=0;if(N&&mK(i,E,S.s("3d.clipbox")?g4:S.s("3d.clipbox.mask")),($=p.shapeModel||W_(p))&&$.model3d)s||i._prefabRenderer.renderDepth(M,$,S,p.mat,function(y,q,_,s,p){var O,L,$,k;(x||_&&!_.transparent)&&((s=s&&s.aMatrixInstanced)&&(y=new G,E.uUseInstance=!0,H.aMatrixInstanced=UK(M,i._buffer.ms,s,M5)),N&&(E.modelMatrix=y.getElements()),E.modelViewMatrix=y.clone().premultiply(Q).getElements(),w.cullFace.enabled=!(!_||!_.cullFace),X=!(!_||!_.flipSide),(X=S._flipSide?!X:X)&&(w.cullFace.frontFace=2304),(y=!!(p.skeleton&&S&&(O=i._updatedSkeletonDatas[p._skeletonId+"|"+S._lastAnimHashKey])&&(L=i.getPrefabBoneTexture(p))))&&(_=p.boneTextureSize,M.activeTexture(33984),uK(M,L),M.texImage2D(3553,0,34836,_,_,0,6408,5126,O),uK(M,M5),j3(E,p,L,O),H.skinIndex=dK(M,null,q.skinIndex),H.skinWeight=dK(M,null,q.skinWeight)),p.drawRange&&($=p.drawRange[0],k=p.drawRange[1]),j(M,H,q.vs,q.is,s,$,k),X&&(w.cullFace.frontFace=2305),s&&(E.uUseInstance=!1,H.aMatrixInstanced=k5),y&&(E.uUseSkinning=!1,H.skinIndex=k5,H.skinWeight=k5))});else{var $=$||(S instanceof P.Node&&!(S instanceof P.Shape)?{vs:X_,is:T_}:[p.left,p.front,p.right,p.back,p.top,p.bottom]),k=p.mat?l.fromArray(p.mat):l.identity(),T=p._vsTranslation;if(T&&(E5.extractShapeTranslation||E5.extractPolylineTranslation||E5.extractVerticesTranslation)&&k.multiply(T),N&&(E.modelMatrix=k.toArray()),E.modelViewMatrix=k.premultiply(Q).toArray(),X=!1,T=S.s("shape3d.material")){if("string"==typeof T&&(T=E5.getMaterial(T)),!x&&(!T||T.transparent))continue;w.cullFace.enabled=!(!T||!T.cullFace),X=!(!T||!T.flipSide),(X=S._flipSide?!X:X)&&(w.cullFace.frontFace=2304)}else w.cullFace.enabled=!!S.s("shape3d.reverse.cull"),S._flipSide&&(X=!0,w.cullFace.frontFace=2304);Z(M,H,$,p),X&&(w.cullFace.frontFace=2305)}}}},p6=function(Q){var x,S,X,T,i,N,a=this,l=!1,j=-99999,Z=[0,0];function y(){l=!1;var q=Q.getGL();q&&(x&&x.forEach(function(y){q.deleteFramebuffer(y)}),S&&S.forEach(function(y){q.deleteFramebuffer(y)}),q.deleteFramebuffer(X),YK(Q,T)),x=S=X=T=null,Z[0]=0,Z[1]=0}function K(y,q,_){for(var s=0,p=Q._prg,O=Q.getGL(),L=y.length;s<L;s++)y[s].ui._42(O,p,B);s_(Q,q,_,0,!0)}function C(y){var q=Q.getGL(),q=S5.for(q),_=Q._frameState;_.syncEnv(),q.useProgram(Q._prg=Q._frameState.defaultProgram=y),_.setGLState(!0,!0),_.setUniforms(!0),q.directAttribs().disable(),Q.shadowMap.enable&&Q.shadowMap.createShadow(),Q.rebindOITTexture(),Q._envmapRenderer.resetUniformCache(),Q.flowMap.createFlow()}a.enableOIT=function(){},a.disableOIT=function(){y()},a.dispose=function(){y()},a.bindTexture=function(y){T&&((y=y||Q._frameState.renderState.directUniforms()).oitDepthSampler=T[i],y.oitFrontColorSampler=T[N])},a.render=function(y,q,_){var s=Q.getOITPassCount();if(!s)return!1;if(!y.length)return!1;if(!function(){var y=Q.getGL();if(y&&(_=Q.getCanvas())){var q=_.width,_=_.height;if(q&&_){if(l&&Z[0]===q&&Z[1]===_)return 1;var s={width:q,height:_,filter:9728,clampToEdge:!0,format:33319,type:5126,data:null},p=o.assign({},s,{format:6408,type:5131});x=[y.createFramebuffer(),y.createFramebuffer()],S=[y.createFramebuffer(),y.createFramebuffer()],X=y.createFramebuffer(),T=[];for(var O=0;O<2;O++){var L=Q.createTexture(s),$=Q.createTexture(p),k=Q.createTexture(p),M=3*O;d4(y,x[O]),y.activeTexture(33984+M),y.bindTexture(3553,L),y.framebufferTexture2D(36160,36064,3553,L,0),y.activeTexture(33984+M+1),y.bindTexture(3553,$),y.framebufferTexture2D(36160,36065,3553,$,0),y.activeTexture(33984+M+2),y.bindTexture(3553,k),y.framebufferTexture2D(36160,36066,3553,k,0),yK(y),d4(y,S[O]),y.framebufferTexture2D(36160,36064,3553,$,0),y.framebufferTexture2D(36160,36065,3553,k,0),yK(y),y.activeTexture(33984+M),uK(y,null),y.activeTexture(33984+M+1),uK(y,null),y.activeTexture(33984+M+2),uK(y,null),T.push(L,$,k)}d4(y,X);var E=Q.createTexture(p);return y.activeTexture(33990),y.bindTexture(3553,E),y.framebufferTexture2D(36160,36064,3553,E,0),uK(y,null),yK(y),T.push(E),Z[0]=q,Z[1]=_,l=!0}}}())return!1;Q._programDefines.OIT=!0,Q._glPrograms.genPhysicalProgramKeyOfScene(Q._programDefines);var p=Q._prg,O=(C(Q.acquireProgram({type:"legacy"})),Q.getGL()),L=S5.for(O).directState(),$=RK(O,!0),k=(k=O.frameStack)&&k.length?k[k.length-1]:null,M=(O.bindFramebuffer(36009,X),L.color.clear=[0,0,0,0],O.clear(16384),O.bindFramebuffer(36160,x[0]),O.drawBuffers([36064]),L.color.clear=[j,j,0,0],O.clear(16384),O.bindFramebuffer(36009,x[1]),L.color.clear=[-0,1,0,0],O.clear(16384),O.bindFramebuffer(36009,S[0]),O.drawBuffers([36064,36065]),L.color.clear=[0,0,0,0],O.clear(16384),O.bindFramebuffer(36009,S[1]),L.color.clear=[0,0,0,0],O.clear(16384),Q.getPostProcessing().getRenderTarget());M&&M.isBinding(O)&&(M=M.grabDepth(!0),O.bindFramebuffer(36160,x[0]),O.bindRenderbuffer(36161,M),O.framebufferRenderbuffer(36160,36096,36161,M),O.bindRenderbuffer(36161,null),O.bindFramebuffer(36160,null)),O.bindFramebuffer(36009,x[0]),O.drawBuffers([36064]),O.blendEquation(32776),i=3,N=4,a.bindTexture(S5.for(O).directUniforms()),K(y,q,_);for(var E,H=0,w=0;w<s;w++)O.bindFramebuffer(36009,x[H=1-(E=w%2)]),O.drawBuffers([36064]),L.color.clear=[j,j,0,0],O.clear(16384),O.bindFramebuffer(36009,S[H]),O.drawBuffers([36064,36065]),L.color.clear=[0,0,0,0],O.clear(16384),O.bindFramebuffer(36009,x[H]),O.drawBuffers([36064,36065,36066]),O.blendEquation(32776),N=1+(i=3*E),a.bindTexture(S5.for(O).directUniforms()),K(y,q,_),O.bindFramebuffer(36009,X),O.drawBuffers([36064]),O.blendEquation(32774),O.blendFuncSeparate(770,771,1,771),Q.renderModel({type:"oitBackBlend",transparent:!0,uBackColor:T[3*H+2]},{clear:!1});O.bindFramebuffer(36160,k),O.blendFunc(1,771),Q.renderModel({type:"oitFinal",transparent:!0,uFrontColor:T[3*H+1],uBackColor:T[6]},{clear:!1}),L.blend.apply({equation:32774,func:[770,771,1,771]}),L.color.clear=$,delete Q._programDefines.OIT,Q._glPrograms.genPhysicalProgramKeyOfScene(Q._programDefines),C(p)}},O6=function(y){this.gv=y,this.onMouseOver=this.onMouseOver.bind(this),this.resetProperties()};O6.Mode={Disable:0,Selection:1,MouseOver:2,Style:3},dB.ms_highlight=function(y){y.setHighlightMode=function(y){var q="selection"===y||"selected"===y?O6.Mode.Selection:"mouseover"===y||"hover"===y?O6.Mode.MouseOver:"style"===y?O6.Mode.Style:O6.Mode.Disable,_=this.getHighlightMode();this._highlightHelper.mode=q,this.firePropertyChange("highlightMode",_,y)},y.getHighlightMode=function(){var y=this._highlightHelper.mode;return y===O6.Mode.Selection?"selected":y===O6.Mode.MouseOver?"hover":y===O6.Mode.Style?"style":"disabled"},["type","color","width","glow","strength"].forEach(function(s){var p=s.replace(/(^|\.)[a-z]/g,function(y){return y[y.length-1].toUpperCase()});y["getHighlight"+p]=function(){return this._highlightHelper[s]},y["setHighlight"+p]=function(y){var q=this._highlightHelper,_=q[s];y!==_&&(q[s]=y,this.firePropertyChange("highlight"+p,_,y))}})},w8(O6,o,{onMouseOver:function(y){E5.preventDefault(y);var q=this.gv;q._48Q||(y=q.getDataAt(y))!==this.mouseOverData&&(this.mouseOverData=y,q.iv())},setFetchTargetFunc:function(y){this.fetchTargetFunc=y},_42:function(y,q){var _,s,p=this,O=p._mode,L=p.gv;if(!y._renderInfo.reflectDepth&&O!==O6.Mode.Disable){if(O===O6.Mode.Selection?_=L.sm().getSelection().toArray(function(y){return y.s("highlight.visible")}):O===O6.Mode.MouseOver&&p.mouseOverData&&p.mouseOverData.s("highlight.visible")&&(_=[p.mouseOverData]),p.fetchTargetFunc&&(_=p.fetchTargetFunc(_)),O===O6.Mode.Style)_=_||[],s=function(y){if(0<=_.indexOf(y))return!1;var q=L.getDataHighlightMode(y);return!1===q||!0!==q&&("selected"===q?!L.isSelected(y):"hover"!==q||y!==p.mouseOverData)};else{if(!_||!_.length)return;s=function(y){if(_.indexOf(y)<0)return!0}}var $,k,M,O=L.isVRPresenting(),E=L._camera,H=(E?(Q=E.getSize(L),$=Q[0],Q=Q[1]):($=L.getWidth(),Q=L.getHeight(),O&&(k=L.getWidth,$/=2,L.getWidth=function(){return $},M=L.getViewport())),L.getDevicePixelRatio()),w=Math.floor($*H),Q=Math.floor(Q*H),x=((H=p._renderTarget)?H.setSize(y,w,Q):p._renderTarget=H=new B3.RenderTarget(L,y,w,Q),"soft"===p.type);H.bind(y),x?(S=RK(y,!0),oK(y,[1,1,1,1]),y.clear(16384),oK(y,S)):y.clear(16384),L.setViewport(y,0,0,w,Q),L.drawFilter=function(y){return!y.s("static")&&s(y)},k3=function(y,q,_,s,p,O){return O?M3(y,q,_,s,p,O):(q=[0,1,1,1],S5.for(y).directUniforms().uFixPickReverseColor=q)},L.getRenderLists().each(function(y){y.beginFillHighlightMaskColor(s)});(S=y._blooming)&&(y._blooming=!1),L.renderPickScene(),S&&(y._blooming=!0),k3=M3,L.drawFilter=null,L.getRenderLists().each(function(y){y.endFillHighlightMaskColor()}),H.unbind(y);var q=L._prg,S=(e5&&s3(y,q.aPosition),s3(y,q.aNormal),!E&&O&&(L.getWidth=k,L.setViewport(y,M[0],M[1],M[2],M[3])),L.getHighlightColor());return p._lastHighlightColor!==S&&(H=el(p._lastHighlightColor=S),p._highlightColorData=[H[0]/255,H[1]/255,H[2]/255,H[3]/255]),x?p.renderSoftOutline(y,w,Q):p.renderHardOutline(y,w,Q),S5.for(y).useProgram(q=L._prg=L.acquireProgram({type:"legacy",defines:{}})),e5&&(E=y,(O=q.aPosition)!=M5&&0<=O&&E.enableVertexAttribArray(O)),!0}},renderHardOutline:function(y,q,_){var s=this.gv,p=s._postProcessing;(y=S5.for(y).directState()).blend.enabled=!0,y.depth.enabled=!1,p.blitScreen({type:"highlightHard",image:this._renderTarget.texture,textureSize:[q,_],edgeWidth:s.getHighlightWidth(),edgeColor:this._highlightColorData},{clear:!1}),y.blend.enabled=!1,y.depth.enabled=!0},renderSoftOutline:function(y,q,_){var s,p,O,L,$,k=this,M=k.gv,E=M._postProcessing,H=Math.floor(q/2),w=Math.floor(_/2),q=Math.floor(q/4),_=Math.floor(_/4),Q=k._downSampleRenderTarget,x=(Q?(s=k._edgeDetectionRenderTarget,p=k._blurV2,O=k._blurH2,L=k._blurV4,$=k._blurH4,Q.width===H&&Q.height===w||(Q.setSize(H,w),s.setSize(H,w),p.setSize(H,w),O.setSize(H,w),L.setSize(q,_),$.setSize(q,_))):(Q=k._downSampleRenderTarget=new B3.RenderTarget(M,y,H,w),s=k._edgeDetectionRenderTarget=new B3.RenderTarget(M,y,H,w),p=k._blurV2=new B3.RenderTarget(M,y,H,w),O=k._blurH2=new B3.RenderTarget(M,y,H,w),L=k._blurV4=new B3.RenderTarget(M,y,q,_),$=k._blurH4=new B3.RenderTarget(M,y,q,_)),RK(y,!0)),S=M.getViewport(),X=k.width,T=k.strength,i=k.glow,N=(a=S5.for(y).glState).depth,a=a.blend,l=N.enabled;oK(y,[1,1,1,1]),N.enabled=!1,a.apply({func:[770,1]}),E.blitScreen(Q,{type:"blitScreen",image:k._renderTarget.texture}),E.blitScreen(s,{type:"highlightEdgeDetection",image:Q.texture,texSize:[H,w],color:k._highlightColorData}),E.blitScreen(O,{type:"highlightBlur",image:s.texture,direction:[1,0],texSize:[H,w],radius:X}),E.blitScreen(p,{type:"highlightBlur",image:O.texture,direction:[0,1],texSize:[H,w],radius:X}),E.blitScreen($,{type:"highlightBlur",image:p.texture,direction:[1,0],texSize:[q,_],radius:X}),E.blitScreen(L,{type:"highlightBlur",image:$.texture,direction:[0,1],texSize:[q,_],radius:X}),a.apply({enabled:!0}),M.setViewport(y,S[0],S[1],S[2],S[3]),E.blitScreen({type:"highlightFinalBlend",image:k._renderTarget.texture,edgeTexture1:p.texture,edgeTexture2:L.texture,edgeStrength:T*X,edgeGlow:i},{clear:!1}),a.apply({func:[770,771,1,771]}),N.enabled=l,oK(y,x)},resetProperties:function(){this.mode=O6.Mode.Style,this.type=X5["highlight.type"],this.color=X5["highlight.color"],this.width=X5["highlight.width"],this.glow=X5["highlight.glow"],this.strength=X5["highlight.strength"]},dispose:function(){var y=this;YK(y.gv,y._renderTarget,y._downSampleRenderTarget,y._edgeDetectionRenderTarget,y._blurV2,y._blurH2,y._blurV4,y._blurH4),y._renderTarget=null,y._downSampleRenderTarget=null,y._edgeDetectionRenderTarget=null,y._blurV2=null,y._blurH2=null,y._blurV4=null,y._blurH4=null}}),o.defineProperties(O6.prototype,{mode:{get:function(){return this._mode},set:function(y){var q=this._mode;y!==q&&(this._mode=y,q=q===O6.Mode.MouseOver||q===O6.Mode.Style,(y=y===O6.Mode.MouseOver||y===O6.Mode.Style)&&q||(q&&q5(this.gv.getView(),"mousemove",this.onMouseOver),y&&y5(this.gv.getView(),"mousemove",this.onMouseOver)))}}});((y=B3.PrefabRenderer=function(y){this.gv=y}).prototype={}).constructor=y,EE("model"),EE("mesh"),EE("material"),EE("shader"),EE("shaderChunk",{loadingParam:{sync:!0}}),G$="",r$={},g$=[],n$=new G,v$=[0,0,0],b$={aPosition:"vs",aUv:"uv",aUv2:"uv2",aNormal:"ns"},I$={type:"fixColor",color:"gray"},U$={type:"fixColor",color:"black"},d$={5126:1,35664:2,35665:3,35666:4,35674:4,35675:9,35676:16},yq={triangles:4,triangleStrip:5,triangleFan:6,lines:1,lineLoop:2,lineStrip:3,points:A4.POINTS},qq={groundColor:[0,0,0]},_q=new G,sq=new G,y.prototype.render=function(o,y,q,_){var s;if((e$=y.prefix)&&(G$=(s=G$)+e$+"."),!1===nM(y,"visible",e$&&q instanceof iu&&q.s("model3dBindings")))s!==k5&&(G$=s);else{var p,Y,L=this.gv,o=IM(o,q);if(p=y.matDef)for(var O in p){var P=r$[O];P&&((Y=Y||{})[O]=P),r$[O]=p[O]}var $,k,m=rM().copy(n$),_=(_&&n$.fromArray(_),bM(y,x5)),W=(n$.multiply(_),gM(_),!1),A=!1,z=!1;do{if(E=y.model){(E=E5.getShape3dModel(E)||E5.getModel(E))&&this.render(z$,E,q);break}var e=y.mesh;if(!e)break;var M,f,E=L._picking;if(x5&&x5.s("static"))if((H=(H=L.getRenderLists().get(x5.getRenderLayer()).getModel3dInstancedBatchMap())&&H[L.getStaticInstancingKey(x5)])&&H.length){if(H.rendered&&H.rendered!==x5._id)break;if(M=pv(L,x5,n$,H,!1),E){if(H._highlightInvalid)break;f=function(y){var q=y.cachePick;if(q.length!==y.length||q.version!==y.csVersion){q.buffer=new T8(4*y.length);for(var _=0,s=q.buffer,p=y.cs,O=4*y.length;_<O;_+=4)s[_]=p[_],s[_+1]=p[_+1],s[_+2]=p[_+2],s[_+3]=p[_+3];q.length=y.length,q.version=y.csVersion}return q.buffer}(H)}H.rendered=x5._id}var H=!1,w=null,G=!1,Q=y.mat;if(Q){if(Q instanceof Array){var x=y.subMeshes;if(x){for(var r=x._drawRangeGroupByMat||function(y){for(var q=[],_=0;_<y.length;_++){var s,p=y[_].materialIndex;(s=q[p])||(q[p]=s=[]),s.push(y[_].start,y[_].count)}return y._drawRangeGroupByMat=q}(x),S=0;S<r.length;S++)r[S]&&this.render(z$,{mesh:e,mat:Q[S],instances:y.instances,drawRange:r[S]},q);break}}if("string"==typeof Q){if(x=vM(x5,Q)||r$[Q]){if(w5(x)&&!(x=E5.getMaterial(x)))break}else if(!(x=E5.getMaterial(Q)))break;Q=x}}else Q=I$;var X,g=!0===Q.transparent;if(!!L._45Q!=g)break;f$=Mt[Q.type];var T,i=!!(y.skeleton&&x5&&(X=L._updatedSkeletonDatas[y._skeletonId+"|"+x5._lastAnimHashKey]));if(i&&(L.getPrefabBoneTexture(y)?(T=y.boneTextureSize,z$.activeTexture(33984),uK(z$,L.getPrefabBoneTexture(y)),z$.texImage2D(3553,0,34836,T,T,0,6408,5126,X),uK(z$,M5)):(T=y.boneTextureSize=Math.round(Math.sqrt(X.length/4)),L.setPrefabBoneTexture(y,L.createTexture({data:X,width:T,height:T,type:5126,filter:9728,clampToEdge:!0})))),!E||Q.renderPickMap){var N=S5.for(z$),a=Q.type||"fixColor";if(!(K=n4[a])||K.isRaw)if(K)j=L.acquireProgram({type:a,cacheKey:a});else{if(!(K=E5.getShader(a)))break;if(!(K=I_(K))){n4[a]=n4.fixColor;break}K.isRaw=!0,n4[a]=K,j=L.acquireProgram({type:a,cacheKey:a},!0)}else{var n=x5?x5.s("3d.clip.direction"):0;switch(x5&&z$._blooming&&!x5.s("bloom")&&(a="fixColor",U$.cullFace=Q.cullFace,U$.flipSide=Q.flipSide,Q=U$),a){case"fixColor":j=L.acquireProgram({type:"fixColor",defines:{CLIP_DIRECTION:!!n,USE_INSTANCING:!(!y.instances&&!M)}});break;case"pbr":case"phong":var v,l,b=1,I=((x5||A$)&&-1!==(l=x5?x5.s("envmap.probe"):A$.envmapProbe||0)&&(v=!0,(b=x5?x5.s("envmap"):A$.envmap||0)&&(b*=L._envmapRenderer._envmapIntensity[l],w=l)),v||!(w=Q.envmap||Q.envMap)||(l=L.getTexture(w))&&l!==z$._emptyTexture||(w=null),L.isTransmissionEnabled(Q)),U=L._glPrograms.genPhysicalProgramKeyOfMat(Q,{clipDirection:n,isTransparent:g,enableTransmission:I,useInstancing:!(!y.instances&&!M),useDisplacement:!!Q.displacementMap&&L._glCapabilities.vertexTextures,aoMapUvChannel:qv("aoUvChannel",Q,f$)||1,useUvClip:!(!L._uvClipEnabled||"uv.left"!=n&&"uv.right"!=n),skeleton:i,alphaChannel:qv("alphaChannel",Q,f$),aoChannel:qv("aoChannel",Q,f$),roughnessChannel:qv("roughnessChannel",Q,f$),metalnessChannel:qv("metalnessChannel",Q,f$),toneMapping:L.getToneMapping(),rectsNum:L._87I.length,envMapCombine:qv("envMapCombine",Q,f$),envmap:w}),j=L.acquireProgram({type:a,cacheKey:L._sceneProgramDefinesMask+U.toString(),cacheKeyOfMat:U,extensions:I?{GL_EXT_shader_texture_lod:!0}:null});break;default:j=L.acquireProgram(Q)}}if(!j)break;z=!0,N.useProgram(j);var d,Z=N.directUniforms(),y5=N.directState(),K=!!Q.flipSide;if(x5&&(2===(d=x5._forceSingleFace)&&(K=!K),x5._flipSideInheirt&&(K=!K)),n$.determinant()<0&&(K=!K),y5.cullFace.enabled=!(!d&&!Q.cullFace),y5.cullFace.frontFace=K?2304:2305,(G=(H=j&&("pbr"===j.name||"phong"===j.name))&&L._glUbos.supportsUbo)?L._glUbos.updateAndBind("scene",j):(Z.uProjectMatrix=L._projectMatrix,Z.uViewMatrix=L._viewMatrix,Z.uCameraPosition=L._camera?L._camera.p3():L.getEye(),Z.uTime=L.__uptime),j._dirty){if(j._dirty=k5,H){var C,B=p5=u=C=t=h=V=K=F=void 0,F=L,K=Z,V=(V=F._headlightDirection)&&3===V.length?V:"shadow"===V?F.shadowMap.getDirection():i8(F.getCenter(),F.getEye()),B=F._lastLightUploadInfo.headlightColor;if(qq.color=yv(B,Math.PI*F._headlightRatioForPhysicalMaterial),K.hemisphereLight.direction=Q5.normalizeArray(F._transformDirectionToViewSpace(V)),K.hemisphereLight.groundColor=qq.groundColor,K._lastLightMask=k5,K._lastHeadlightAmbientIntensity=k5,F.lightProbe&&(K.lightProbe=F.lightProbe),(C=F._59O)&&C.length){for(h=0,t=C.length,u=[];h<t;h++)u.push({position:F._transformPointToViewSpace(C[h].p3()),color:_v(C[h]),distance:C[h].s("light.range"),decay:1,enable:!1});K.pointLights=u}if((C=F._spots)&&C.length){for(h=0,t=C.length,u=[];h<t;h++){var q5=C[h].s("light.angle");u.push({position:F._transformPointToViewSpace(C[h].p3()),color:_v(C[h]),direction:C[h].s("light.rotation.enable")?F._transformDirectionToViewSpace(kK([0,0,1],C[h])):F._transformDirectionToViewSpace(C[h].s("light.center"),C[h].p3()),decay:1,enable:!1,distance:C[h].s("light.range"),coneCos:H5(q5/2),penumbraCos:H5(q5/2*(1-C[h].s("light.exponent")))})}K.spotLights=u}if((C=F._dirs)&&C.length){for(h=0,t=C.length,u=[];h<t;h++)u.push({direction:C[h].s("light.rotation.enable")?F._transformDirectionToViewSpace(kK([0,0,1],C[h])):F._transformDirectionToViewSpace(null,C[h].p3()),color:_v(C[h]),enable:!1});K.directionalLights=u}if((C=F._87I)&&C.length){for(var _5,s5,p5=new Q5,h=0,t=C.length,u=[];h<t;h++)gB.fromArray(J8(C[h])),gB.premultiply(nB.fromArray(F._viewMatrix)),nB.identity().extractRotation(gB),_5=p5.set(.5*-C[h].s("light.size")[0],0,0).applyMatrix4(nB).toArray(),s5=p5.set(0,.5*C[h].s("light.size")[1],0).applyMatrix4(nB).toArray(),u.push({position:F._transformPointToViewSpace(C[h].p3()),color:_v(C[h]),halfWidth:_5,halfHeight:s5,enable:!1,disableSpecular:C[h].s("light.specular.disable")});K.rectAreaLights=u,E5.LTC_FLOAT_1&&((B=F.getGL())._LTC_1||(B._LTC_1=F.createTexture(E5.LTC_FLOAT_1)),B._LTC_2||(B._LTC_2=F.createTexture(E5.LTC_FLOAT_2)),K.ltc_1=B._LTC_1,K.ltc_2=B._LTC_2)}}Z.uClipperMatrix=L._boxClipperMatrixes,Z.uClipperClipInner=L._boxClipperClipInner,G||(L._fogDisabled||(Z.uFogColor=L._fogColor,Z.uFogDensity=L._fogDensity,Z.uFogNear=L._fogNear,Z.uFogFar=L._fogFar),Z.toneMappingExposure=L.getToneMappingExposure()),L.shadowMap.enable&&L.shadowMap.createShadow(Z)}else L.shadowMap.enable&&L.shadowMap.createShadow(Z,!0);L.rebindOITTexture(Z),L.flowMap.createFlow(Z),L._87I.length&&E5.LTC_FLOAT_1&&(Z.ltc_1=z$._LTC_1,Z.ltc_2=z$._LTC_2),H&&I&&z$._transmissionRTT&&(Z.transmissionSamplerMap=z$._transmissionRTT.texture,Z.transmissionSamplerSize=z$._transmissionRTT.getSize()),Q.uUvMatrix=l3(Q.uvRotation,Q.uvOffset,Q.uvScale,Q.uvAnchor)}var J,V=M?{aMatrixInstanced:M,aBatchColor:f}:y.instances,D=function(y,q,O){var _=dM(q);if(!_)return 0;if(A_(_)||!_._4HQ)for(var s in _._4HQ=!0,_)"is"!==s&&Hx(_[s])&&(_[s]=new T8(_[s]));if(O&&!O._complete_)for(var s in O._complete_=!0,O)Hx(O[s])&&(O[s]=new T8(O[s]));(q=S5.for(z$).directAttribs()).disable();var L,p=_.index||_.is,$=!p,k=0;return q.apply(_,function(y,q,_){var s,q=b$[q]||q;if(O&&(s=O[q])!==k5){if(!s.length)return null;var p=d$[_.desc.activeInfo.type];return k=k||s.length/p,UK(z$,null,s,null,p)}return(s=y[q])!=k5&&s.length?($&&($=!1,L=s.length/d$[_.desc.activeInfo.type]),dK(z$,null,s)):null}),p?(q3(z$,y._buffer.is,p),{length:p.length,instances:k,indexType:p instanceof Uint32Array?5125:p instanceof Uint8Array?5121:null,is:!0}):L||_.vs?{length:L||_.vs.length/3,instances:k,is:!1}:0}(L,e,V);if(!D)break;D.instances&&(Z=Z||S5.for(z$).directUniforms(),f&&(Z.uBatchColor=!0),A=Z.uUseInstance=!0),M?L3(L):(W=!0,L3(L,n$.getElements())),!E||Q.renderPickMap?(Z=Z||N.directUniforms(),x5?rK(z$,L,x5,H):A$&&(K=z$,B=L,$=A$,R=H,J=k=void 0,k=S5.for(K).directUniforms(),J=$.alphaTest,k.uAlphaTest=J===k5?X5.alphaTest:J,J=B._picking,k.shadowReceive=!J&&!1!==$.shadowReceive,mK(B,k,$.clipboxMask===k5?r4:$.clipboxMask),k.blackout=!(!K._blooming||$.bloom),J||(B._flowObjects.length&&B.flowMap.resetFlowUniform($.effectFlowMask===k5?r4:$.effectFlowMask,k),R||($.envmap!==k5?(k.uUseEnvMap=!0,k.roughness=$.roughness||0,B._setEnvmapByProbeId(k,$.envmapProbe||0,$.envmap)):(k.uUseEnvMap=!1,k.envMapIntensity=0),MK(B,k,$.lightMask===k5?r4:$.lightMask,$.headlightAmbientIntensity)),k.uFog=!0)),H&&(x5?sv(Z,L,x5._currentFaceLightMask!=M5?x5._currentFaceLightMask:x5.s("shape3d.light")?x5.s("light.mask"):0,x5.s("headlight.ambientIntensity")||L._headlightAmbientIntensity):A$?sv(Z,L,A$.light==M5?A$.lightMask===k5?r4:A$.lightMask:0,A$.headlightAmbientIntensity||L._headlightAmbientIntensity):sv(Z,L,0,0),w!=M5&&(v?(J=L._envmapRenderer._envmaps[w],Z.envmap=J?J.texture:z$._emptyTexture):Z.envmap=L._envmapRenderer.assureEnvmapFromEquirectangular(w),Z.envMapIntensity=b*qv("envMapIntensity",Q,f$)),i&&j3(Z,y,L.getPrefabBoneTexture(y),X)),L.resetSharedTextureIndex(),H?function(y,q,_,s,p,O){var L,$,k,M,E,H,w,Q,x,S,X,T=O.type,i=Et[T];if(_){if(!(X=(S=y._glUbos).attachUbo(T,O,y._renderId))){for($=0,k=i.length;$<k&&-1!==(M=i[$]);$+=2)H=O[M],E=i[$+1],H&&(H instanceof WebGLTexture||(H=y.textureAccessesByMaterial(H,s)),p[M]=H),$+=2*E;return S.updateAndBind(T,q)}}else X=p;for(L=!0,$=0,k=i.length;$<k;$+=2)if(-1===(M=i[$]))L=!1,$--;else{if(E=0,w=!1,-2===M?(E=(k-$-1)/2,$--,w=!0):(H=O[M],E=i[$+1],H&&(!L||H instanceof WebGLTexture||(H=y.getTexture(H,s)),L?p[M]=H:X[M]=H,w=!0)),w)for(x=(Q=$+2)+2*E;Q<x;Q+=2)(H=O[M=i[Q]])===k5&&(H=i[Q+1]),X[M]=H;$+=2*E}X.uUvMatrix=O.uUvMatrix;var N=O.uUv2Matrix;N&&(X.uUv2Matrix=N),_&&S.updateAndBind(T,q)}(L,j,G,x5,Z,Q):Z.apply(Q,function(y,q,_){if("envmap"!==q&&"envMapIntensity"!==q){if((p=(p=y[q])===k5&&f$?f$[q]:p)&&(35678===_||35680===_)&&!(p instanceof WebGLTexture))if(Hx(p))for(var s=p,y=s.length,p=new Array(y),O=0;O<s.length;O++)p[O]=L.textureAccessesByMaterial(s[O],x5);else p=L.textureAccessesByMaterial(p,x5);return p}})):i&&(Z=Z||S5.for(z$).directUniforms(),j3(Z,y,L.getPrefabBoneTexture(y),X));var c,R,O5=yq[Q.renderMode];if(x5&&L.onPreRenderData(x5,z$),c=y.drawRange)for(var S=0,L5=c.length;S<L5;S+=2)D.is?bK(z$,c[S],c[S+1],O5,D.indexType,D.instances):vK(z$,c[S],c[S+1],O5,D.instances);else D.is?bK(z$,0,D.length,O5,D.indexType,D.instances):vK(z$,0,D.length,O5,D.instances)}while(x5&&L.onPostRenderData(x5,z$),i&&(Z.uUseSkinning=!1),E&&((R=S5.for(z$).directAttribs()).aNormal=!1,R.aUv=!1,R.skinIndex=!1,R.skinWeight=!1),0);W&&p3(L),A&&(Z.uUseInstance=!1,Z.uBatchColor=!1),z&&L._prg&&(N.useProgram(L._prg),N.directAttribs().disable(),y5.cullFace.frontFace=2305,L.shadowMap.enable&&L.shadowMap.createShadow(null,!0),L.rebindOITTexture(),L._envmapRenderer.resetUniformCache(),L.flowMap.createFlow());var $5=y.comps;if($5&&$5.length)for(S=0,L5=$5.length;S<L5;S++)this.render(z$,$5[S],x5);if(gM(n$),n$=m,p=y.matDef)for(var O in p)r$[O]=Y&&Y[O]||k5;s!==k5&&(G$=s),UM(o)}},y.prototype.renderDepth=function(y,q,_,s,p){var O;if((e$=q.prefix)&&(G$=(O=G$)+e$+"."),!1===nM(q,"visible",e$&&_ instanceof iu&&_.s("model3dBindings")))O!==k5&&(G$=O);else{var L,$,y=IM(y,_),k=rM().copy(n$);if(s&&n$.fromArray(s),L=q.matDef)for(var M in L){var E=r$[M];E&&(($=$||{})[M]=E),r$[M]=L[M]}s=bM(q,x5),n$.multiply(s),gM(s);do{var H,w=q.model;if(w){(w=E5.getShape3dModel(w)||E5.getModel(w))&&this.renderDepth(z$,w,_,null,p);break}if(!(w=dM(q.mesh)))break;if(x5&&x5.s("static")){var Q=this.gv,x=Q.getRenderLists().get(x5.getRenderLayer()).getModel3dInstancedBatchMap();if((x=x&&x[Q.getStaticInstancingKey(x5)])&&x.length){if(x.rendered&&x.rendered!==x5._id)break;H=pv(Q,x5,n$,x,!0),x.rendered=x5._id}}if(A_(w),Q=q.mat){if("string"==typeof Q){if(x=vM(x5,Q)||r$[Q]){if(w5(x)&&!(x=E5.getMaterial(x)))break}else if(!(x=E5.getMaterial(Q)))break;Q=x}}else Q=I$;var S=H?{aMatrixInstanced:H}:q.instances}while(p(n$,w,Q,S,q),0);var X=q.comps;if(X&&X.length)for(var T=0,i=X.length;T<i;T++)this.renderDepth(z$,X[T],x5,null,p);if(gM(n$),n$=k,L=q.matDef)for(var M in L)r$[M]=$&&$[M]||k5;O!==k5&&(G$=O),UM(y)}};var L6=P.Light=function(){Kx(L6,this),this.s(G4,X5[G4]),this.s(hL,"sphere"),this.s("shape3d.reverse.cull",!0),this.s3(20,20,20)},$6=(zU("Light",WQ,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(y,q,_){L6.superClass.onStyleChanged.apply(this,arguments),y===G4&&this.s("shape3d.color",_)}}),B3.FrameState=function(y,q){this.renderState=S5.for(q),this.picking=!1,this.envmapReflectivity=.5,this.cameraPosition=k5,this.projectMatrix=k5,this.viewMatrix=k5,this.view=y,this.defaultProgram=k5,this.pickColorMap=k5,this._pvStack=[],this._renderStateStack=[]}),k6=($6.prototype.savePV=function(){var y=this.view;this._pvStack.push([Z8(this.projectMatrix),Z8(this.viewMatrix),y._18Q,Z8(y._7O)])},$6.prototype.restorePV=function(){var y,q=this._pvStack.pop();q&&(y=this.view,this.projectMatrix=y._projectMatrix=q[0],this.viewMatrix=y._viewMatrix=q[1],y._18Q=q[2],y._7O=q[3])},$6.prototype.setPV=function(y,q){var _,s=this.view,p=!1;y&&(this.projectMatrix=s._projectMatrix=y,p=!0),q&&(this.viewMatrix=s._viewMatrix=q,s._7O=Z8(q),p=!0),p&&(y=s.getWidth(),p=s.getHeight(),_=Z8(this.projectMatrix),s._18Q=iK(_,_,q),s._18Q._wh=y/p)},$6.prototype.syncEnv=function(y){var q=this.view;this.envmapReflectivity=q._envmapReflectivity||.5,this.cameraPosition=q.getEye(),this.projectMatrix=q._projectMatrix,this.viewMatrix=q._viewMatrix,this.pickColorMap=y,this.picking=q.getGL()._picking},$6.prototype.setGLState=(pq=[0,0,0,0],Oq=[!0,!0,!0,!0],Lq=[0,1],$q=[32774,32774],kq=[770,771,1,771],function(y,q){this.renderState.gl;var _=this.renderState.glState;_.dither=!1,q?_.color.mask=Oq:_.color.reset(),_.pixelStore.reset(),_.blend.color=pq,_.blend.equation=$q,_.blend.func=kq,_.cullFace.enabled=!1,_.scissor.enabled=!1,_.depth.enabled=!0,_.depth.clear=1,_.depth.func=515,_.depth.range=Lq,_.stencil.enabled=!1,_.polygonOffset.enabled=!1,y?(_.depth.mask=!1,_.blend.enabled=!0):(_.depth.mask=!0,_.blend.enabled=!1)}),$6.prototype.setUniforms=function(y){var q,_,s,p,O,L,$,k,M,E,H,w,Q,x,S,X,T,i=this.view,N=this.renderState,a=N.gl;(N=N.uniforms).uBrightness=1,N.uOpacity=1,N.uPartOpacity=1,N.uUseSkinning=!1,N.uUseInstance=!1,N.uTexture=!1,N.uBlendTexture=!1,N.uAlphaTest=X5.alphaTest,N.uTransparent=!!y,N.uFix=!1,N.uBatchColor=!1,N.uBatchBlend=!1,N.uBatchBrightness=!1,N.envMapIntensity=this.envmapReflectivity||.5,N.uCameraPosition=this.cameraPosition,N.uProjectMatrix=this.projectMatrix,N.uViewMatrix=this.viewMatrix,N.uEnvMap=null,mK(i,N,g4),N.uClipperMatrix=i._boxClipperMatrixes,N.uClipperClipInner=i._boxClipperClipInner,N.uEnvmapQuat=i._envmapExtraQuaternion,i._envmapRenderer.resetUniformCache(),this.picking||(q=i,y=a,y=S5.for(y).directUniforms(),Q=q._lastLightUploadInfo={c:[],g:[],e:[]},(a=q._headlightDirection)&&3===a.length?x=a:"shadow"===a&&(x=q.shadowMap.getDirection()),x=x?Q5.normalizeArray(q._transformDirectionToViewSpace(null,x)):[0,0,0],y.uHeadlightDirection=x,y.uHeadlightRange=q._headlightRange,a=y.uHeadlightAmbientIntensity=q._headlightAmbientIntensity,x=q._headlightIntensity,S=fl(q._headlightColor),1!==x&&(S=[S[0]*x,S[1]*x,S[2]*x]),y.uHeadlightColor=Q.headlightColor=[S[0],S[1],S[2],(x=q._headlightDisabled)?1:0],Q.c.push(S[0],S[1],S[2]),Q.g.push(x?-1:q._headlightGroup),Q.e.push(x?1:0),S=q._59O,x=q._spots,X=q._dirs,T=q._87I,S.length&&(_=[],s=[],p=[],S.forEach(function(y){$K(_,y,Q),ix(s,q._transformPointToViewSpace(y.p3())),p.push(y.s("light.range"))}),y.uPointColor=_,y.uPointRange=p,y.uPointPosition=s),x.length&&(O=[],L=[],$=[],k=[],M=[],E=[],x.forEach(function(y){$K(O,y,Q),ix(L,q._transformPointToViewSpace(y.p3())),y.s("light.rotation.enable")?ix(M,q._transformDirectionToViewSpace(null,kK([0,0,1],y))):ix(M,q._transformDirectionToViewSpace(y.p3(),y.s("light.center"))),$.push(y.s("light.range")),k.push(H5(y.s("light.angle")/2)),E.push(y.s("light.exponent"))}),y.uSpotColor=O,y.uSpotRange=$,y.uSpotAngle=k,y.uSpotExponent=E,y.uSpotPosition=L,y.uSpotDirection=M),X.length&&(H=[],w=[],X.forEach(function(y){$K(H,y,Q),y.s("light.rotation.enable")?ix(w,q._transformDirectionToViewSpace(null,kK([0,0,1],y))):ix(w,q._transformDirectionToViewSpace(y.p3()))}),y.uDirColor=H,y.uDirDirection=w),T.length&&T.forEach(function(y){$K([],y,Q)}),y._lastLightMask=r4,y._lastHeadlightAmbientIntensity=a,i._fogDisabled||(N.uFogColor=i._fogColor,N.uFogDensity=i._fogDensity,N.uFogNear=i._fogNear,N.uFogFar=i._fogFar))},$6.prototype.drawLayer=function(y,q){return this.view.renderLayers(y,!0)},$6.prototype.drawData=function(y,q,_){var s,p,O,L,$,k,M=this.view;M.isVisible(y)&&(p=(s=this.renderState).uniforms,(y=M.getData3dUI(y))&&(L=(O=s.gl)._picking,$=M._picking,k=y._pickId,_&&(y._pickId=_),O._picking=M._picking=!!_,p.uTransparent=!!q,y._42(s.gl,s.program,q?B:a),O._picking=L,M._picking=$,y._pickId=k))},B3.Graph3dView=function(y,q){var _,s,p=this;p.resetHeadlightProperties(),p.resetFogProperties(),p._webGLVersion=1,p._attributes=q||E5.graph3dViewAttributes,p._25I={},p._attributes&&(_=p._attributes.view)?_._ht=p:_=Ax(1,p),p._view=_,p._attributes&&(s=p._attributes.canvas)||(s=ex(p._view)),p._canvas=s,p.__startTime=Date.now(),p.__uptime=0,y5(s,"webglcontextlost",function(y){y.preventDefault(),p._26I&&p.dispose(),p._26I=M5,p._35O=!0}),y5(s,"webglcontextrestored",function(y){p._35O=!1,p.iv()}),p._40Q=new T6(p),p._43Q={},p._44Q=-1,p._boneViewMatrices=[],p._batchIndexMap={},p._batchModelMap={},p._wireframeIndexMap={},p._wireframeModelMap={},p._wireframeIndexMapSwap={},p._wireframeModelMapSwap={},p._polylineIndexMap={},p._polylineIndexMap={},p._polylineIndexMapSwap={},p._polylineIndexMapSwap={},p._8O=[],p._modelMatrixStack=[],p._7O=l8(),p._6O=l8(),p._modelMatrix=l8(),p._1o=new Z6(p),p._30O=new B6(p),p._31O=new K6(p),p._32O=new C6(p),p._raycaster=new Y6(p),p._highlightHelper=new O6(p),p._postProcessing=new Nt(p),p._41Q=[],p._42Q=0,p._frameRenderOptionStack=[],B3.VR?(p.vr=new B3.VR(p),p.isVREnabled=function(){return this.vr.enable},p.isVRPresenting=function(){return this.vr.isPresenting()}):(p.vr={enable:!1,isPresenting:N},p.isVREnabled=N,p.isVRPresenting=N),p.shadowMap=new q6(p),p.flowMap=new _6(p),p._33Q=!0,p._eye=DA(E5.graph3dViewEye),p._center=DA(E5.graph3dViewCenter),p._up=DA(E5.graph3dViewUp),p._lightChanged=!1,p._59O=[],p._spots=[],p._dirs=[],p._87I=[],p._boxClippers=[],p._boxClipperVersion=0,p._flowObjects=[],p._transmissionObjects=[],p._frameId=0,p._renderId=0,p._picking=!1,p._tempCameraQueue=[],p._batchInfoMap={},p._updatedSkeletonDatas={},p._renderLayerInfoMap={},p._renderLayerSettingsVersion=0,p._gatherRenderLayersByPriority(!0),p.overlappingBox=new sE(p),p._envmapRenderer=new B3.EnvmapRenderer(this),p._prefabRenderer=new B3.PrefabRenderer(this),p._depthGrabber=new s6(this),p.dm(y||new Nu),p._coreInteractor=new VE(this),p.setInteractors([new N6(p)]),p.enableQuickVisibleMode(),p._initView(),p._genBatchInstancedArrayFunc(),p.genProgramDefines(),p._setupPVMatrix()}),M6={box:1,sphere:2,cylinder:3,cone:4},E6={addRGB:"FLOW_BLEND_MODE_ADD_RGB",addRGBA:"FLOW_BLEND_MODE_ADD_RGBA",overrideRGBA:"FLOW_BLEND_MODE_OVERRIDE_RGBA",overrideRGB:"FLOW_BLEND_MODE_OVERRIDE_RGB",overrideA:"FLOW_BLEND_MODE_OVERRIDE_A",multiplyRGB:"FLOW_BLEND_MODE_MULTIPLY_RGB",multiplyRGBA:"FLOW_BLEND_MODE_MULTIPLY_RGBA"},H6=0,w6=(O("Graph3dView",o,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_shadow:1,ms_highlight:1,ms_quickVisible:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","editHelperDisabled","blockSelectable","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable","zoomToCenter",yL,qL,"firstPersonMode",HL,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightDirection","headlightColor","headlightIntensity","headlightAmbientIntensity","headlightRatioForPhysicalMaterial","headlightDisabled","headlightGroup","ortho","orthoWidth","syncEyeWithOrthoWidth","fovy","near","far",LD,OD,"up","aspect","fogDisabled","fogMode","fogDensity","fogColor","fogNear","fogFar","pickerResolution","dashDisabled","uvClipEnabled","transmissionEnabled","batchColorDisabled","batchInstancedDisabled","batchBlendDisabled","batchBrightnessDisabled","flowBlendMode","hoverDelay","batchInfoMap","renderLayerInfoMap","rotateMinPhi","rotateMaxPhi","sortable","opaqueSortable","sortFunc","toneMapping","toneMappingExposure"],_editable:!1,_sortable:E5.graph3dViewSortable,_opaqueSortable:E5.graph3dViewOpaqueSortable,_editHelperDisabled:E5.graph3dViewEditHelperDisabled,_blockSelectable:E5.graph3dViewBlockSelectable,_devicePixelRatio:k5,_boundaries:k5,_parallelShaderCompile:!1,_moveStep:E5.graph3dViewMoveStep,_rotateStep:E5.graph3dViewRotateStep,_toneMapping:k5,_toneMappingExposure:1,_rotateMinPhi:E5.graph3dViewMinPhi===k5?E5.graph3dViewRotateMinPhi:E5.graph3dViewMinPhi,_rotateMaxPhi:E5.graph3dViewMaxPhi===k5?E5.graph3dViewRotateMaxPhi:E5.graph3dViewMaxPhi,_pannable:E5.graph3dViewPannable,_rotatable:E5.graph3dViewRotatable,_walkable:E5.graph3dViewWalkable,_resettable:E5.graph3dViewResettable,_zoomable:E5.graph3dViewZoomable,_zoomToCenter:!0,_firstPersonMode:E5.graph3dViewFirstPersonMode,_mouseRoamable:E5.graph3dViewMouseRoamable,_gridVisible:E5.graph3dViewGridVisible,_gridSize:E5.graph3dViewGridSize,_gridGap:E5.graph3dViewGridGap,_gridColor:E5.graph3dViewGridColor,_originAxisVisible:E5.graph3dViewOriginAxisVisible,_centerAxisVisible:E5.graph3dViewCenterAxisVisible,_axisXColor:E5.graph3dViewAxisXColor,_axisYColor:E5.graph3dViewAxisYColor,_axisZColor:E5.graph3dViewAxisZColor,_ortho:E5.graph3dViewOrtho,_orthoWidth:E5.graph3dViewOrthoWidth,_syncEyeWithOrthoWidth:E5.graph3dViewSyncEyeWithOrthoWidth,_fovy:E5.graph3dViewFovy,_near:E5.graph3dViewNear,_far:E5.graph3dViewFar,_rectSelectable:E5.graph3dViewRectSelectable,_rectSelectBackground:E5.graph3dViewRectSelectBackground,_editSizeColor:E5.graph3dViewEditSizeColor,_autoMakeVisible:fU,_pickerResolution:E5.graph3dViewPickerResolution,_oitPassCount:3,_dashDisabled:E5.graph3dViewDashDisabled,_uvClipEnabled:E5.graph3dViewUvClipEnabled,_transmissionEnabled:E5.graph3dViewTransmissionEnabled,_batchColorDisabled:E5.graph3dViewBatchColorDisabled,_batchInstancedDisabled:E5.graph3dViewBatchInstancedDisabled,_batchBlendDisabled:E5.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:E5.graph3dViewBatchBrightnessDisabled,_useOIT:!1,_oitEnabled:!1,_flowBlendMode:E5.graph3dViewFlowBlendMode,addCamera:function(y){var q=o.freeze({id:this._42Q++,priority:y.priority||0,ignoreInPick:!!y.ignoreInPick,render:y.render});y.switch3DStatus&&(this._43Q[q.id]=!0),this._41Q.push(q),this._41Q.sort(function(y,q){return y.priority!==q.priority?y.priority-q.priority:y.id-q.id})},setEye:function(y,q,_){1===arguments.length&&(q=y[1],_=y[2],y=y[0]);var s=this._eye;s[0]=y,s[1]=q,s[2]=_,this.fp(LD,M5,s)},setCenter:function(y,q,_){1===arguments.length&&(q=y[1],_=y[2],y=y[0]);var s=this._center;s[0]=y,s[1]=q,s[2]=_,this.fp(OD,M5,s)},setUp:function(y,q,_){1===arguments.length&&(q=y[1],_=y[2],y=y[0]);var s=this._up;s[0]=y,s[1]=q,s[2]=_,this.fp("up",M5,s)},setVisibleFunc:function(y){var q=this._visibleFunc;this._visibleFunc=y,this.fp("visibleFunc",q,y),y?this.isQuickVisibleMode()&&(this.disableQuickVisibleMode(),this._quickVisiblePending=!0):this._quickVisiblePending&&(this._quickVisiblePending=!1,this.enableQuickVisibleMode())},getDevicePixelRatio:function(){return this._picking?this._1o._resolution:this._devicePixelRatio||sA},isTransmissionEnabled:function(y){return!!this._transmissionEnabled&&(!y||y.enableTransmission)},isDepthGrabberEnabled:function(){return this._depthGrabber.isEnabled()||this.getPostProcessing().isEnabled()},enableDepthGrabber:function(){this._depthGrabber.enable()},disableDepthGrabber:function(){this._depthGrabber.disable()},grabDepth:function(y){return this._depthGrabber.grab(y)},isFloatDepthTexture:function(y){return y&&y._internalFormat},isOITEnabled:function(y){return!!this._useOIT&&(!y||this._oitEnabled)},enableOIT:function(){var y=this;if(y._useOIT)return!0;if(y._useOIT=!0,!y.getGL())return!1;if(!y.isWebGL2())return!1;if(!y._glExtensions.get("EXT_color_buffer_float"))return!1;var q=Y.navigator;return!(q&&(/iPad|iPhone|iPod/.test(q.platform)||"MacIntel"===q.platform&&1<q.maxTouchPoints)||(y._oitEnabled=!0,y._depthPeelingRenderer||(y._depthPeelingRenderer=new p6(y)),y._depthPeelingRenderer.enableOIT(),y.iv(),0))},disableOIT:function(){return this._useOIT&&(this._useOIT=!1,this._oitEnabled&&(this._depthPeelingRenderer&&this._depthPeelingRenderer.disableOIT(),this._oitEnabled=!1,this.iv())),!0},setOITPassCount:function(y){this._oitPassCount=y,this.iv()},getOITPassCount:function(){return this._oitPassCount},rebindOITTexture:function(y){return!!this._oitEnabled&&this._depthPeelingRenderer.bindTexture(y)},isTransparentMask:function(y){return y.s("transparent.mask")},getCoreInteractor:function(){return this._coreInteractor},getHighlightHelper:function(){return this._highlightHelper},getRaycaster:function(){return this._raycaster},getAspect:function(){return this._aspect||this.getWidth()/this.getHeight()||1.2},getCanvas:function(){return this._canvas},setDataModel:function(y){var q=this,_=q._dataModel,s=q._selectionModel;_!==y&&(_&&(_.ump(q.handleDataModelPropertyChange,q),_.umm(q.handleDataModelChange,q),_.umd(q.handleDataPropertyChange,q),s||_.sm().ums(q.handleSelectionChange,q)),(q._dataModel=y).mp(q.handleDataModelPropertyChange,q),y.mm(q.handleDataModelChange,q),y.md(q.handleDataPropertyChange,q),s?s._21I(y):y.sm().ms(q.handleSelectionChange,q),q._postProcessing.handleDataModleChange(_,y),q._tryInvalidateEnvmap(),q.invalidateAll(!0),q.invalidateLight(),q.invalidateboxClipper(),q.invalidateFlowObjects(),q.invalidateTransmissionObjects(),q._49Q(),q.fp(BL,_,y),q._canvas.style.background=y.getBackground()||"")},handleDataModelPropertyChange:function(y){var q,_=y.property;"background"===_?(q=this._canvas.style.background,y=y.newValue||"",this._canvas.style.background=y,this.fp("canvasBackground",q,y)):"envmapType"===_?this._tryInvalidateEnvmap():"envmap"!==_&&"invalidateView"!==_||this.iv()},handleDataPropertyChange:function(y){var q=y.data,y=(this.invalidateData(q),y.property);_K(q)&&"s:light.type"===y?this.invalidateLight():"s:3d.clipbox"===y?this.invalidateboxClipper(q,!0):"s:effect.flow"===y?this.invalidateFlowObjects(q,!0):"s:shadow.cast"===y?this.shadowMap.tryUpdateBounding(q):"s:3d.visible"===y?this.invalidateQuickVisible(q):"s:shape3d.transmission"===y&&this.invalidateTransmissionObjects(q,!0)},invalidateboxClipper:function(y,q){var _=this._boxClippers,s=_.length;y?!!y.s("3d.clipbox")==(q=!!q)?_.indexOf(y)<0&&_.push(y):0<=(q=_.indexOf(y))&&_.splice(q,1):(_=this._boxClippers=[],this.dm().each(function(y){y.s("3d.clipbox")&&_.push(y)})),s!==(y=_.length)&&(this._updateBoxClipperMatrix(),mK=y?PK:An),this.iv()},_setupPVMatrix:function(){this._projectMatrix=BK(this),CK(this,this._7O),this._viewMatrix=Z8(this._7O)},_updateBoxClipperMatrix:(tq=/if[ \t]*\([^\0{}]*{/,function(){for(var y,q=this._boxClippers,_=this._boxClipperMatrixes=[],s=this._boxClipperClipInner=[],p=this._boxClipperGroups=[],O=this._boxClipperShapes=[],L=0,$=new G,k=0,M=q.length;k<M;k++){(y=q[k]).appendAnchorMatrix3d(E=J8(y,this.getMat(y))),_.push($.getInverse($.fromArray(E)).toArray()),s.push("inner"===y.s("3d.clipbox")),p.push(y.s("3d.clipbox.group"));var E=M6[y.s("3d.clipbox.shape")]||1;O.push(E),L|=1<<E-1}if(this._boxClipperVersion++,L!==this._boxClipperTypes){if(L){Vq||(H=(w=Zx(v4["clipbox.fs.body"],!0)).match(tq),hq=w.slice(0,H.index)+"if ($TEMPLATE) {"+w.slice(H.index+H[0].length),w=H[0],Vq=w.slice(w.indexOf("(")+1,w.lastIndexOf(")")).split("||").map(function(y){return y.trim()}));for(var H,w,Q=[],k=0;k<Vq.length;k++)L&1<<k&&Q.push(Vq[k]);this._clipboxShaderChunkFS=hq.replace("$TEMPLATE",Q.join(" || "))}else this._clipboxShaderChunkFS="";this._boxClipperTypes=L}}),_49Q:function(){this._4AQ||this._48Q||this.dm().size()<E5.graph3dViewDataNumWarningLine||(this._48Q=!0,console.log("Too many datas so than disable some feature to speed up.\nYou can set global Default.graph3dViewDataNumWarningLine to largeEnoughNum to avoid this, or call graph3dView.quitDataNumWarning() to quit.\n"),this.enableQuickVisibleMode(),this.getHighlightHelper().mouseOverData=null)},quitDataNumWarning:function(){this.disableQuickVisibleMode(),this._48Q=!1,this._4AQ=!0},invalidateFlowObjects:function(y,q){var _=this._flowObjects;y?!!y.s("effect.flow")==(q=!!q)?_.indexOf(y)<0&&_.push(y):0<=(q=_.indexOf(y))&&_.splice(q,1):(_=this._flowObjects=[],this.dm().each(function(y){y.s("effect.flow")&&_.push(y)})),this.iv()},invalidateTransmissionObjects:function(y,q){var _=this._transmissionObjects;y?!!y.s("shape3d.transmission")==(q=!!q)?_.indexOf(y)<0&&_.push(y):0<=(q=_.indexOf(y))&&_.splice(q,1):(_=this._transmissionObjects=[],this.dm().each(function(y){y.s("shape3d.transmission")&&_.push(y)})),this.iv()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(y){if(y=y.property,this.iv(),this._18Q=M5,"eye"===y)this._33Q=!0;else if("devicePixelRatio"===y)this._42(this.getDevicePixelRatio());else if("batchInstancedDisabled"===y){this._genBatchInstancedArrayFunc();var q,_=E5.getBatchInfoMap();for(q in _)_[q]&&_[q].instanced&&this.invalidateBatch(q);for(q in _=this._batchInfoMap)_[q]&&_[q].instanced&&this.invalidateBatch(q)}},_5O:function(y){var q=y.get3dUIClass();return q?new q(this,y):M5},getData3dUI:function(y){var q=this._25I[y._id];return q===k5&&(q=this._5O(y),this._25I[y._id]=q),q},invalidateAll:function(y,q){var _=this;if(y){for(var s in _._25I)(s=_._25I[s])&&s.dispose();_._25I={},_.iv(),Y3(_)}else Y3(_),_.dm().each(function(y){_.invalidateData(y)});_.shadowMap.tryInvalidateLater(y,q)},invalidateSelection:function(){var q=this;q.sm().each(function(y){q.invalidateData(y)})},invalidateData:function(y){var q=this.getData3dUI(y);q&&(q.iv(),this.iv()),Y3(this,y)},getShape3dText:function(y){return y.getStyle("shape3d.text")||this.getLabel(y)},invalidateBatch:function(q){var _=this;_._40Q.each(function(y){_._invalidateBatch(q,y.batchModelMap,y.batchIndexMap),_._invalidateBatch("T"+q,y.wireframeModelMap,y.wireframeIndexMap),_._invalidateBatch("O"+q,y.wireframeModelMap,y.wireframeIndexMap),y.markBatchInvalid()}),_.iv()},_invalidateBatch:function(y,q,_){var s=this,p=q[y];if(p){p.ds.forEach(function(y){var q=s.getData3dUI(y);q&&(q.iv(),q.invalidateWireframe()),delete _[y._id]});var O=s.getBatchInfo(y)||mn;if(!1!==O.keepData&&p.ms&&p.ms.length&&O.instanced&&!s.isBatchInstancedDisabled())return p.ds=[],p.ms=[],p.ics&&(p.ics=[]),void(p.ps&&(p.ps=[]));delete q[y]}},handleDataModelChange:function(y){var q,_,s=this,p=y.kind,y=y.data;"add"===p?(s.invalidateData(y),Qx(y)&&y.getEdgeGroup()&&y.getEdgeGroup().eachSiblingEdge(s.invalidateData,s),_K(y)&&s.invalidateLight(),y.s("3d.clipbox")&&s.invalidateboxClipper(y,!0),y.s("effect.flow")&&s.invalidateFlowObjects(y,!0),y.s("shape3d.transmission")&&s.invalidateTransmissionObjects(y,!0),s._49Q()):p===lD?(q=y._id,(_=s._25I[q])&&(_.dispose(),delete s._25I[q],s.iv()),y===s._currentSubGraph&&s.setCurrentSubGraph(M5),Y3(s,y),_K(y)&&s.invalidateLight(),y.s("3d.clipbox")&&s.invalidateboxClipper(y,!1),y.s("effect.flow")&&s.invalidateFlowObjects(y,!1),y.s("shape3d.transmission")&&s.invalidateTransmissionObjects(y,!1),y.isAnimationPlaying()&&y.stopAnimation()):p===jD&&(s.invalidateAll(!0),s.setCurrentSubGraph(M5),Y3(s),s.invalidateLight(),s.invalidateboxClipper(),s.invalidateFlowObjects(),s.invalidateTransmissionObjects())},toCanvas:function(y,q,_){for(var s,p=this.getGL(),O=(this.validate(),y&&(s=p.getParameter(3106),oK(p,y)),this._42(1,{renderAxis:!1,renderEdit:!1,renderGrid:!1}),this.getWidth()||1),L=this.getHeight()||1,$=new Uint8Array(O*L*4),k=ex(),M=k.getContext("2d"),E=(p.readPixels(0,0,O,L,6408,5121,$),rx(k,O,L,1),M.getImageData(0,0,O,L)),H=E.data,w=0;w<H.length;w+=4){var Q=w/4,x=K5(Q/O);H[Q=4*((L-1-x)*O+(Q-x*O))]=$[w],H[1+Q]=$[w+1],H[2+Q]=$[w+2],H[3+Q]=$[w+3]}return M.putImageData(E,0,0),y&&oK(p,s),this._42(this.getDevicePixelRatio()),q&&_?(E=(M=ex()).getContext("2d"),rx(M,q,_,1),E5.drawImage(E,k,0,0,q,_),M):k},toDataURL:function(y,q){var _,s=this.getGL(),q=(this.validate(),y&&(_=s.getParameter(3106),oK(s,y)),this._42(1,{renderAxis:!1,renderEdit:!1,renderGrid:!1}),this._canvas.toDataURL(q||"image/png",1));return y&&oK(s,_),this._42(this.getDevicePixelRatio()),q},isWebGL2:function(){return 2===this._webGLVersion},getGL:function(){var y,q,_,s=this._26I;if(s)return s;if(!this._35O){var p=this,O=p._canvas,L=p._attributes;if(!L||!1!==L.requestWebGL2)try{(s=O.getContext("webgl2",L)||O.getContext("experimental-webgl2",L))&&(p._webGLVersion=2,p._26I=s)}catch(s){}if(!s)try{s=O.getContext("webgl",L)||O.getContext("experimental-webgl",L)}catch(s){throw new Error("WebGL not supported")}if(s)return p._26I=s,O=p._frameState=new $6(p,s),p._glExtensions=new eM(s),p._glCapabilities=new fM(s,p._glExtensions),p._glUbos=new GM(p,s,p._glCapabilities,L&&L.forceNoUniformBuffer),p._glPrograms=new n_(p,s),p._2O={},s._emptyCubeTexture=(y=s,_=new Uint8Array(4),q=y.createTexture(),y.activeTexture(33984),y.bindTexture(34067,q),y.texParameteri(34067,10240,9729),y.texParameteri(34067,10241,9729),y.texImage2D(34069,0,6408,1,1,0,6408,5121,_),y.texImage2D(34070,0,6408,1,1,0,6408,5121,_),y.texImage2D(34071,0,6408,1,1,0,6408,5121,_),y.texImage2D(34072,0,6408,1,1,0,6408,5121,_),y.texImage2D(34073,0,6408,1,1,0,6408,5121,_),y.texImage2D(34074,0,6408,1,1,0,6408,5121,_),q),s._compiledShader={},s._emptyTexture=hK(s),s._emptyBlendTexture=hK(s),s._4NQ={},s._id=++H6,s._4MQ=[],s._4KQ={},O.setGLState(),p._buffer={vs:tK(s),ns:tK(s),is:tK(s),uv:tK(s),batchColor:tK(s),batchBlend:tK(s),batchBrightness:tK(s),lineDistance:tK(s)},p._1O=VK(p,s),s._sharedTexturePool=[],L=p._cube={vs:tK(s),ns:tK(s),is:tK(s),uv:tK(s)},IK(s,L.vs,X_),IK(s,L.ns,N_),IK(s,L.uv,i_),y3(s,L.is,T_),p._genBatchInstancedArrayFunc(),s._renderInfo={calls:0,vertices:0,faces:0,lines:0,points:0,textureCache:{time:0,count:0,pixels:0},frame:0,cacheTimeCost:0,reflectDepth:0},s._renderTargetStack=[],s._dynamicTexturePool={},s;throw new Error("WebGL not supported")}},getGLCapabilities:function(){if(this.getGL())return this._glCapabilities},getGLExtensions:function(){if(this.getGL())return this._glExtensions},getShaderChunk:function(y){var q;return"clipbox.fs.body"===y?this._clipboxShaderChunkFS||"":(q=v4[y])?Zx(q,!0):E5.getShaderChunk(y)},dispose:function(){var q=this,y=q.getGL();if(y){for(var _ in q._doBufferGC(y,!0),q._glPrograms.dispose(),rx(q._canvas,0,0),["_highlightHelper","shadowMap","flowMap","_envmapRenderer","_postProcessing","_depthPeelingRenderer"].forEach(function(y){(y=q[y])&&y.dispose()}),q.dm().each(function(y){q.getData3dUI(y).dispose()}),q._2O)q.deleteTexture(_);for(var _ in y)"string"==typeof _&&"_"===_[0]&&(YK(q,y[_]),delete y[_]);q._1o.dispose()}},disposeAllPrograms:function(){this._glPrograms.dispose()},getShadowMap:function(){return this.shadowMap},invalidateShape3dAttribute:function(y,q){delete y._complete_,(y=y[q])&&y._bufId&&delete y._bufId},getEnvmap:function(){return this._glCapabilities&&this._glCapabilities.maxVertexTextures<E5.graph3dEnvmapCapabilityRequire?null:this.dm().getEnvmap()},getEnvmapType:function(){var y,q=this.dm();return(q?q.getEnvmapType():y)||"legacy"},setEnvmapExtraQuaternion:function(y){this._envmapExtraQuaternion=y instanceof e.Quaternion?y.clone().inverse().toArray():null},invalidateEnvmap:function(y){return this._envmapRenderer.invalidateEnvmap(y)},invalidateEnvmapUsedByMaterial:function(y){return this._envmapRenderer.invalidateEnvmapUsedByMaterial(y)},isEnvmapUsedByMaterialReady:function(y){return this._envmapRenderer.isEnvmapUsedByMaterialReady(y)},_setEnvmapByProbeId:function(y,q,_){return this._envmapRenderer.setEnvmapByProbeId(y,q,_)},_tryInvalidateEnvmap:function(){var y=this.getEnvmapType();y!==this._lastProgramEnvmapType&&(this._envmapRenderer.changeEnvmapType(this._lastProgramEnvmapType=y),this.iv())},acquireProgram:function(y,q){return this._glPrograms.acquireProgram(y,q)},renderModel:function(y,q,_,s,p){p&&!1===p.restoreViewport||_&&!1===_.restoreViewport||q&&!1===q.restoreViewport||(O=(O=this.getViewport())&&DA(O));var O,y=this._postProcessing.blitScreen(y,q,_,s,p);return O&&this.setViewport(this.getGL(),O[0],O[1],O[2],O[3]),y},renderPrefab:function(){return this.renderModel.apply(this,arguments)},isGLTempRegisterLimited:function(){return this._glTempRegisterLimited},getBrightness:function(y){var q=y.s("brightness"),y=this.isSelected(y)?y.s("select.brightness"):M5;return q==M5?y:y==M5?q:q*y},getDataHighlightMode:function(y){return y.s("highlight.mode")},getWireframe:function(y){var q=y.s("wf.visible"),_=y.s("wf.width");if(!0===q||0<_&&"selected"===q&&this.isSelected(y))return{color:y.s("wf.color"),width:_,short:y.s("wf.short"),mat:y.s("wf.mat")}},getPartPosition:function(y,q,_,s){return s=s||mn,[(y=this.getData3dUI(y)._16O(s.autoRotate,q,M5,_||d5,s.t3,s.r3,s.rotationMode))[12],y[13],y[14]]},_transformPointToViewSpace:function(y){return y=[y[0],y[1],y[2]],C8(y,this._viewMatrix),y},_transformDirectionToViewSpace:function(y,q){var y=y?[y[0],y[1],y[2]]:[0,0,0],q=(C8(y,this._viewMatrix),q?[q[0],q[1],q[2]]:[0,0,0]),_=(C8(q,this._viewMatrix),q[0]-y[0]),s=q[1]-y[1],q=q[2]-y[2];return(y=Math.sqrt(_*_+s*s+q*q))?[_/y,s/y,q/y]:[_,s,q]},getWireframeGeometry:function(y){if(y.s("wf.geometry"))return{color:y.s("wf.color"),width:y.s("wf.width"),mat:y.s("wf.mat"),geometry:!0}},getBodyColor:function(y){return y.s("body.color")},getMat:function(y){return y.getMat?y.getMat():y.s("mat")},getFaceMat:function(y,q){return y.getFaceMat?y.getFaceMat(q):y.s(q+".mat")},getFaceBlend:function(y,q){return y.s(q+".blend")||y.s("all.blend")},getFaceColor:function(y,q){return y.s(q+".color")||y.s("all.color")},getFaceImage:function(y,q){return y.s(q+".image")||y.s("all.image")},getFaceBlendImage:function(y,q){return y.s(q+".blend.image")||y.s("all.blend.image")},getFaceDiscardSelectable:function(y,q){return(q=y.s(q+".discard.selectable"))==M5?y.s("all.discard.selectable"):q},getFaceUv:function(y,q){return y.s(q+".uv")||y.s("all.uv")},getFaceUvOffset:function(y,q){return y.s(q+".uv.offset")||y.s("all.uv.offset")},getFaceUvScale:function(y,q){return y.s(q+".uv.scale")||y.s("all.uv.scale")},getFaceUvRotation:function(y,q){return y.s(q+".uv.rotation")||y.s("all.uv.rotation")},getFaceUvAnchor:function(y,q){return y.s(q+".uv.anchor")||y.s("all.uv.anchor")},getFaceLight:function(y,q){return(q=y.s(q+".light"))==M5?y.s("all.light"):q},getFaceVisible:function(y,q){return(q=y.s(q+".visible"))==M5?y.s("all.visible"):q},getFaceOpacity:function(y,q){return(q=y.s(q+".opacity"))==M5?y.s("all.opacity"):q},getFaceTransparent:function(y,q){return(q=y.s(q+".transparent"))==M5?y.s("all.transparent"):q},getFaceReverseColor:function(y,q){return y.s(q+".reverse.color")||y.s("all.reverse.color")},getFaceReverseFlip:function(y,q){return(q=y.s(q+".reverse.flip"))==M5?y.s("all.reverse.flip"):q},getFaceReverseCull:function(y,q){return(q=y.s(q+".reverse.cull"))==M5?y.s("all.reverse.cull"):q},getFaceMaterial:function(y,q){return(q=y.s(q+".material"))==M5?y.s("all.material"):q},isPicking:function(){return this._picking},renderPickScene:function(){var y=this.getGL();this.syncRenderState(),this._picking=y._picking=!0,this.renderScene(),this._picking=y._picking=!1},invalidateCachedGeometry:function(y){this.getData3dUI(y).invalidateCachedGeometry(),this.invalidateData(y)},invalidateCachedWireframe:function(_){var y,s;_ instanceof P.Data?(y=(y=this.getData3dUI(_)).shapeModel||W_(y))&&(A3(y),_.iv()):_&&(A3(_),(s=this).dm().each(function(y){var q=s.getData3dUI(y);(q.shapeModel||W_(q))===_&&y.iv()}),this.iv())},isInteractive:function(y){return y.s("interactive")},redraw:function(){this.iv()},validateImpl:function(){var _,s,p,O,y=this,q=(y._lightChanged&&(y._lightChanged=!1,_=[],s=[],p=[],O=[],y.dm().each(function(y){var q;_K(y)&&("point"===(q=y.s("light.type"))?_.push(y):"spot"===q?s.push(y):"directional"===q?p.push(y):"rect"===q&&O.push(y))}),y._59O=_,y._spots=s,y._dirs=p,y._87I=O),y.getAspect());q!==y.__cachedAspect__&&(y._updateSkybox({property:"asceptChanged"}),y.__cachedAspect__=q),y._attributes&&!1===y._attributes.autoDraw||y._42(),y._1o.iv()},getRenderInfo:function(){var y=this.getGL();if(y)return y._renderInfo},getDebugTip:function(){var y,q,_=this.getRenderInfo();if(_)return y=(q=this.getGL())._validBufCount||0,y="Draw Calls: "+_.calls+"<br/>Vertices: "+_.vertices+"<br/>Faces: "+_.faces+"<br/>Lines: "+_.lines+"<br/>"+(_.points?"Points: "+_.points+"<br/>":"")+"Buffers: "+y+"<br/>Programs: "+(q._validProgramCount||0)+"<br/>Cache Models: "+o.keys(hn).length+"<br/>Shape3d Models: "+o.keys(Vn).length,this.isVRPresenting()&&(y+="<br/>VR fps: "+this.vr.getFps()),_.textureCache&&(q=_.textureCache.count,y+="<br/>2D Dynamic Textures: "+_.textureCache.count,0<q&&(y+="<br/>2D Dynamic pixels: "+(1e6<(q=_.textureCache.pixels)?Math.round(q/1e6)+"M":1e3<q?Math.round(q/1e3)+"K":Math.round(q)))),y},getFrameState:function(){return this._frameState},isBoundingBoxInView:(Bq=new P.Math.Box3,Fq=new P.Math.Matrix4,function(y){if(!(y=y instanceof P.Data?this.getData3dUI(y):y).mat)return!0;var q=y.getBoundingBox(!0);return Bq.copy(q).applyMatrix4(Fq.fromArray(y.mat)),this.getFrustum().intersectsBox(Bq)}),updateScene:function(){var q=this,_=(q.onPreUpdate(),q._81O=M5,q.overlappingBox.clear(),q.initSkeletonDatas(),q._40Q),s=(_.init(),q.getGL()),y=q.dm();if(y.isHierarchicalRendering())y.eachByHierarchical(function(y){(y=q.getData3dUI(y))&&y.update(q,s,_)});else for(var p,O=y.getDatas().getArray(),L=O.length,$=0;$<L;$++)p=O[$],(p=q.getData3dUI(p))&&p.update(q,s,_);this._updateBoxClipperMatrix(),_.onUpdated(),q.onPostUpdate()},_pushFrameRenderOptions:function(y){this._frameRenderOptionStack.push(this._currentFrameRenderOptions),this._currentFrameRenderOptions=y},_popFrameRenderOptions:function(y){this._currentFrameRenderOptions=this._frameRenderOptionStack.pop()},_getFrameRenderOptions:function(y){var q=this._currentFrameRenderOptions;return q&&q[y]},getRenderLists:function(){return this._40Q},_setCurrentFrameRenderId:function(y,q){var _=this._renderId++;y._renderInfo.renderId=_,this._glPrograms.setCurrentFrameRenderId(_),q&&this._glUbos.setCurrentFrameRenderId(_)},renderScene:function(y){var _,s=this,p=s.getGL(),O=s._picking,L=(O||s.onPreRender(),s._setCurrentFrameRenderId(p,!1),s.genProgramDefines(),s._frameState),q={},$=(O&&(q.BATCHINSTANCE=!s._batchInstancedDisabled||s._picking&&0<s._model3dInstancedBatchCount),s._prg=L.defaultProgram=s.acquireProgram({type:O?"pick":"legacy",defines:q}),s._pushFrameRenderOptions(y),!1!==s._getFrameRenderOptions("renderShadowMap")&&s.shadowMap.render(),s.flowMap.render(),s._envmapRenderer.onBeforeRender(p),s._44Q=-1,L.renderState),q=$.glState;function k(y,q){L.setGLState(y,q),L.setUniforms(y),L.renderState.attribs.disable(),_=$.directUniforms(),$.directAttribs().disable()}var M,y=s._prg,E=(s._setupPVMatrix(),this._glUbos.setCurrentFrameRenderId(this._renderId),s.isReflecting(p)||iK(s._projScreenMatrix=l8(),s._projectMatrix,s._viewMatrix),L.syncEnv(O?this.pickColorMap:k5),$.useProgram(y),k(!1,!0),p.clear(256),this._41Q),H=0,w=E.length;function Q(y){for(var q=!1;H<w;H++){var _=E[H];if(!O||!_.ignoreInPick){if(_.priority>=y)break;s._43Q[s._44Q=_.id]&&!l5[PD.length]||(_.render(p,s,L),k(),q=!0)}}return q}if(Q(E5.cameraPriority.skybox),O?(M=q.color.clear.slice(0),oK(p,[0,0,0,0])):(oK(p,[0,0,0,0]),q.blend.enabled=!1,q.depth.enabled=!1,q.depth.mask=!1,s._camera&&!1===s._camera.s("camera.renderSky")||s.drawSky(p,y),!1!==s._getFrameRenderOptions("renderReflector")&&s.drawReflectors(p)&&(s._setupPVMatrix(),L.syncEnv(),k(),s._setCurrentFrameRenderId(p,!0)),q.blend.enabled=!1,q.depth.enabled=!0,q.depth.mask=!0,(_.uTransparent=!1)!==s._getFrameRenderOptions("renderGrid")&&s._31O._42(p)),!p.textureBatch||l5[(ONE_FRAME_TIME-6)/2]){O||(s.shadowMap.enable&&s.shadowMap.createShadow(_),s.rebindOITTexture(_),s.flowMap.createFlow(_));for(var x=s._sortedRenderLayers,S=0,X=x.length;S<X;S++){var T=x[S],i=s.getRenderLayerInfo(T);!(s._camera||!i.ignore||i.renderForBloom&&p._blooming)||s._camera&&!s._camera.isLayerVisible(T)||(Q(i.priority)&&!O&&(s.shadowMap.enable&&s.shadowMap.createShadow(_),s.rebindOITTexture(_),s.flowMap.createFlow(_)),this.renderLayer(T))}Q(E5.cameraPriority.infinity),O||(s._renderBonesForDebug(p,q),s.flowMap.disableFlow(_)),MK(s,_,0,E5.graph3dViewHeadlightAmbientIntensity),_.uHeadlightColor=[1,1,1,0],_.uUseEnvMap=!1,_.uHeadlightDirection=[0,0,0],_.uHeadlightRange=0,q.depth.enabled=!1,_.uTransparent=!1,_.shadowReceive=!1,mK(s,_,g4),O?s.drawFilter||s._30O._42(p):(s._highlightHelper._42(p),this._renderAxisAndEditHelper(!1!==s._getFrameRenderOptions("renderAxis"),!1!==s._getFrameRenderOptions("renderEdit")),q.blend.enabled=!1,q.depth.mask=!0),q.depth.enabled=!0,O&&oK(p,M),IK(p,M5),y3(p,M5),s._44Q=-1,s._popFrameRenderOptions(null),s._glPrograms.disableAttributes(p),O||s.onPostRender()}},_renderAxisAndEditHelper:function(y,q){var _,s,p,O;(y||q)&&(_=this.getGL(),s=(p=(O=this._frameState).renderState).glState,p=p.directUniforms(),O.renderState.attribs.disable(),s.depth.enabled=!1,p.uTransparent=!1,p.shadowReceive=!1,s.blend.enabled=!1,s.depth.mask=!0,(O=!this._fogDisabled)&&(p.uFog=!1),y&&this._32O._42(_),q&&this._30O._42(_),O&&(p.uFog=!0),IK(_,M5),y3(_,M5))},renderLayers:function(y,q){for(var _=0,s=(y=q?Qu(y):y).length;_<s;_++)this.renderLayer(y[_])},renderSky:function(){var y=this._frameState,q=y.renderState,_=q.glState,s=this.getGL(),p=this._prg;this._setupPVMatrix(),iK(this._projScreenMatrix=l8(),this._projectMatrix,this._viewMatrix),y.syncEnv(),q.useProgram(p),y.setGLState(!1,!0),y.setUniforms(!1),y.renderState.attribs.disable(),s.clear(256),oK(s,[0,0,0,0]),_.blend.enabled=!1,_.depth.enabled=!1,_.depth.mask=!1,this.drawSky(s,p),_.depth.mask=!0,_.depth.enabled=!0,IK(s,M5),y3(s,M5)},addRenderLayerListener:function(y,q,_){this._renderLayerNotifier||(this._renderLayerNotifier=new Tu),this._renderLayerNotifier.add(y,q,_)},removeRenderLayerListener:function(y,q){this._renderLayerNotifier&&this._renderLayerNotifier.remove(y,q)},fireRenderLayerEvent:function(y,q){var _=this._renderLayerNotifier;_&&_.fire({layer:y,phase:q})},renderLayer:function(y){var q=this,_=q._picking;if(S=q._40Q.get(y)){q.fireRenderLayerEvent(y,"prepare");var s,p,O,L=q.getGL(),$=q.getRenderLayerInfo(y),k=(M=q._frameState.renderState).glState,M=M.directUniforms(),E=(!_&&q.isSortable()&&S.sort(q._sortFunc,q._projScreenMatrix,q.isOpaqueSortable()),S.resetModel3dInstancedDraw(),S.opaque),H=S.transparent,w=S.batchModelMap,Q=S.batchIndexMap,x=S.polylineModelMap,S=S.wireframeModelMap,L=q.getGL(),X=q._prg,T=(_||(k.blend.enabled=!1,k.depth.enabled=!0,k.depth.mask=!0),(M.uTransparent=!1)!==$.clearDepth&&L.clear(256),this.drawFilter);if(T){for(s=0,p=(O=E).length;s<p;s++)!0!==T(O[s].data)&&O[s].ui._42(L,X,a);if(_)for(s=0,p=(O=H).length;s<p;s++)O[s].ui._46Q(L);s_(q,w,Q)}else{for(s=0,p=(O=E).length;s<p;s++)O[s].ui._42(L,X,a);if(_)for(s=0,p=(O=H).length;s<p;s++)O[s].ui._46Q(L);s_(q,w,Q),q_(q,x),q_(q,S)}if(_||(k.blend.enabled=!0,k.depth.mask=!1),q._45Q=M.uTransparent=!0,T){for(s=0,p=(O=H).length;s<p;s++)!0!==T(O[s].data)&&O[s].ui._42(L,X,B);s_(q,w,Q,0,!0)}else{if(_||!q._oitEnabled||q.isReflecting(L)||L._blooming){for(s=0,p=(O=H).length;s<p;s++)O[s].ui._42(L,X,B);s_(q,w,Q,0,!0)}else q._depthPeelingRenderer.render(H,w,Q);q_(q,x,0,!0),q_(q,S,0,!0)}q._45Q=null,q.fireRenderLayerEvent(y,"post")}},onPreFrame:An,onPostFrame:An,onPreUpdate:An,onPostUpdate:An,onPreRender:An,onPostRender:An,onPreRenderData:An,onPostRenderData:An,_42:function(y,q){var _=this;if(!_._35O&&(!K||l5(K))){var s=_.getWidth(),p=_.getHeight();if(s&&p){var O=_.getGL();if(O){var L=_._canvas,$=(y?$=!0:y=_.getDevicePixelRatio(),_._picking||!$&&s===L.clientWidth&&p===L.clientHeight||(rx(L,s,p,y),$=y,s&&1<Math.abs(O.drawingBufferWidth-s*y)&&($=Math.min($,O.drawingBufferWidth/s)),($=p&&1<Math.abs(O.drawingBufferHeight-p*y)?Math.min($,O.drawingBufferHeight/p):$)!==y&&(_.setDevicePixelRatio(y=$),rx(L,s,p,y)),_._18Q=null),_._attributes&&!1===_._attributes.autoClear||O.clear(16384),O._renderInfo);if($){$.calls=0,$.vertices=0,$.faces=0,$.lines=0,$.points=0,$.textureCache={time:0,count:0,pixels:0},$.frame=++_._frameId,$.cacheTimeCost=0,$.reflectDepth=0,_.__uptime=(Date.now()-_.__startTime)/1e3,s=L.width,p=L.height,_._gatherRenderLayersByPriority(),_.onPreFrame(),_.syncRenderState(),_._glPrograms.checkParallelLinkStatus();do{if(_.isVREnabled()&&_.vr.render(O,s,p,q))break;_.updateScene();var k=_._4JQ}while((k||!_._postProcessing.render(O,s,p,q,0<_._transmissionObjects.length&&_.isTransmissionEnabled()||_._oitEnabled||_._depthGrabber.isEnabled()))&&(_.setViewport(O,0,0,s,p),k?_.renderPickScene(q):_.renderScene(q),0));_._33Q=!1,_.countFrame(),_.onPostFrame(),_._doBufferGC(O),_._glPrograms.scheduleProgramGC(_._shaderGCInterval||500)}}}}},drawImmediately:function(y,q,_){if(y){var s=this.getGL();if(!s)return!1;d4(s,y),this._42(q,_),yK(s)}else this._42(q,_)},_4IQ:function(y){this._4JQ=y,this.iv()},syncRenderState:function(){var y;(y=this._frameState)&&(y=y.renderState)&&y.syncLoss()},drawReflectors:function(y){y._renderInfo.reflectDepth++;var q,_,s=this._dataModel.getReflectors(),p=!1;for(q in s)_=s[q],this.isVisible(_)&&(_=this.getData3dUI(_))&&_.drawReflector&&_.drawReflector(y)&&(p=!0);return y._renderInfo.reflectDepth--,p},isReflecting:function(y){return y._renderInfo.reflectDepth},isRenderSceneForBloom:function(){var y=this.getGL();return!!y&&!!y._blooming},getPostProcessing:function(){return this._postProcessing},enablePostProcessing:function(y,q){return this._postProcessing.enableModule(y,q)},getPostProcessingModule:function(y){return this._postProcessing.getModule(y)},getPostProcessingValue:function(y,q){return(y=this._postProcessing.getModule(y))?y[q]:k5},setPostProcessingValue:function(y,q,_){var s=this.getPostProcessingValue(y,q),p=this._postProcessing.getModule(y);p&&s!==_&&("enable"===q?this.enablePostProcessing(y,_):p[q]=_,this.firePropertyChange("postProcessing."+y+"."+q,s,_))},setDofImageFromGraphView:function(y,q,_){return this._postProcessing.getModule("Dof").setImageFromGraphView(y,q,_)},setViewport:function(y,q,_,s,p){this._viewport=[q,_,s,p],S5.for(y).directState().viewport=this._viewport},getRenderState:function(){return S5.for(this._26I)},genProgramDefines:function(){var y=this,q=(q=y.getEnvmap())&&q.length,_=((q={NUM_DIR_LIGHTS:y._dirs.length,NUM_SPOT_LIGHTS:y._spots.length,NUM_POINT_LIGHTS:y._59O.length,MAX_BOX_CLIPPER:y._boxClippers.length,BOX_CLIPER_TYPES:y._boxClipperTypes,MAX_FLOW_OBJECT:y._flowObjects.length,FOG:!y._fogDisabled,FOG_EXP2:"exp2"===y.getFogMode(),UV_CLIP:!!y._uvClipEnabled,USE_ENVMAP:!!q,ENVMAP_TYPE_CUBE_UV:"legacy"!==y.getEnvmapType(),DASH:!y._dashDisabled,ENVMAP_ROTATE:null!=y._envmapExtraQuaternion,BATCHCOLOR:!y._batchColorDisabled,BATCHINSTANCE:!y._batchInstancedDisabled,BATCHBLEND:!y._batchBlendDisabled,BATCHBRIGHTNESS:!y._batchBrightnessDisabled})[E6[y.getFlowBlendMode()]||E6[E5.graph3dViewFlowBlendMode]]=!0,y.shadowMap.enable&&y.shadowMap.genShaderDefine(q),y._glPrograms);return _&&_.genPhysicalProgramKeyOfScene(y._programDefines=q),q},getViewport:function(){return this._viewport},setBufferGCInterval:function(y){this._bufferGCInterval=y},setShaderGCInterval:function(y){this._shaderGCInterval=y},_doBufferGC:function(y,q){var _,s,p=y._4NQ,O=0,L=0,$=y._renderInfo.frame,k=this._bufferGCInterval||10;for(_ in p)O++,(s=p[_])&&(q||$-s._fid>k?(y.deleteBuffer(s._buf),s._buf=null,p[_]=null):L++);if(L<O/2&&128<O){var M={};for(_ in p)p[_]&&(M[_]=p[_]);y._4NQ=M}y._validBufCount=L},_swapLineMap:function(){var y=this;A5=y._polylineModelMap,y._polylineModelMap=y._polylineModelMapSwap,y._polylineModelMapSwap=A5,A5=y._wireframeModelMap,y._wireframeModelMap=y._wireframeModelMapSwap,y._wireframeModelMapSwap=A5,A5=y._polylineIndexMap,y._polylineIndexMap=y._polylineIndexMapSwap,y._polylineIndexMapSwap=A5,A5=y._wireframeIndexMap,y._wireframeIndexMap=y._wireframeIndexMapSwap,y._wireframeIndexMapSwap=A5},_updateSkybox:function(y){var q,_,s,p,O,L,$,k,M;this._skybox&&y&&(y=y.property,q=!1,_=this._skybox,"eye"!==y&&"forceUpdate"!==y||(s=this._camera?this._camera.getEye():this._eye,_.p3(s[0],s[1],s[2]),q=!0),"near"!==y&&"far"!==y&&"forceUpdate"!==y&&"asceptChanged"!==y||(s=(s=_.__cachedS3__)||(_.__cachedS3__=_.getFinalScale3d()),y=s5(s[0],s[1],s[2])/2,p=("sphere"===_.s("shape3d")?_5(s[0],s[1],s[2]):B5(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]))/2,O=this._near,L=this._far,M=Math.tan(this.getFovy()/2)*O,$=this.getAspect()*M,$=B5($*$+M*M+O*O),$=1.01*_5($,B5(3)*O),k=1,y<$?k=$/y:L<=p&&(k=L*L/(O+L)/p),k!==1/0&&1!==k&&(_.__updatingSkybox__=!0,M=s.map(function(y){return k*y}),_.s3(M),_.setScale3d(1,1,1),q=!0,delete _.__updatingSkybox__)),q&&this.invalidateData(_))},getSkyBox:function(){return this.getSkybox()},setSkyBox:function(y){return this.setSkybox(y)},getSkybox:function(){return this._skybox},setSkybox:function(q){var _,y=this._skybox;y===q?q&&this._updateSkybox({property:"forceUpdate"}):(y&&(this._skyboxStyleMap&&y.setStyleMap(this._skyboxStyleMap),this._skyboxStyleMap=null,this._skyboxAnchor3d&&y.setAnchor3d(this._skyboxAnchor3d),this._skyboxAnchor3d=null,this._skyboxP3&&y.p3(this._skyboxP3),this._skyboxP3=null,this.handleDataModelChange({kind:lD,data:y})),this._skybox=q,this.ump(this._updateSkybox,this),q&&(q.removeFromDataModel(),this._skyboxStyleMap=P.Default.clone(q.getStyleMap()),this._skyboxAnchor3d=q.getAnchor3d(),q.setAnchor3d(.5,.5,.5),this._skyboxP3=q.p3().slice(0),q.s({"shape3d.reverse.flip":!0,"shape3d.reverse.cull":!1,"all.reverse.flip":!0,"all.reverse.cull":!1,"front.reverse.flip":!0,"front.reverse.cull":!1,"back.reverse.flip":!0,"back.reverse.cull":!1,"left.reverse.flip":!0,"left.reverse.cull":!1,"right.reverse.flip":!0,"right.reverse.cull":!1,"top.reverse.flip":!0,"top.reverse.cull":!1,"bottom.reverse.flip":!0,"bottom.reverse.cull":!1}),_=q.onPropertyChanged,q.onPropertyChanged=function(y){_.call(q,y),!q.__updatingSkybox__&&0<=["width","height","tall","scale","scaleTall"].indexOf(y.property)&&(q.__cachedS3__=k5)},this.mp(this._updateSkybox,this),this._updateSkybox({property:"forceUpdate"})),this.fp("skybox",y,q))},drawSky:function(y,q){var _,s,p,O,L,$,k,M,E,H,w,Q,x=this,S=x._skybox;S&&(O=p=0,x._camera&&!1===x._camera.s("camera.skybox.blur")||(p=S.s("skybox.blur.size"),O=S.s("skybox.blur.resolution"),0===p&&0===O||(k=O||x.getDevicePixelRatio(),(_=y._blurRTT)||(_=y._blurRTT=new B3.RenderTarget(x,null,null,{})),L=x.getWidth()*k,k=x.getHeight()*k,_.setSize(y,L,k),s=DA(x._viewport),x.setViewport(y,0,0,L,k),_.bind(y))),L=S5.for(y).directUniforms(),k=x._headlightIntensity,$=fl(x._headlightColor),q=x._prg,1!==k&&($=[$[0]*k,$[1]*k,$[2]*k]),L.uHeadlightColor=[$[0],$[1],$[2],1],(k=x.getData3dUI(S))&&((E=(M=x.isOrtho())||this._computedProjectMatrix)&&(H=x._projectMatrix,M&&(x._ortho=!1),L.uProjectMatrix=x._projectMatrix=BK(x,!0)),Q=S.p3(),w=(this._camera||this).getEye(),Q[0]===w[0]&&Q[1]===w[1]&&Q[2]===w[2]||(S._position.x=w[0],S._54O=w[1],S._position.y=w[2]),k.validate(),k._42(y,q,i),E&&(M&&(x._ortho=!0),L.uProjectMatrix=x._projectMatrix=H)),y.clear(256),L.uHeadlightColor=[$[0],$[1],$[2],x._headlightDisabled?1:0],0===p&&0===O||(_.unbind(y),0!==p&&(Q=x.getPostProcessingModule("Blur"))&&Q.drawImpl(y,_,p,!1,4<p?4:2<p?3:1<p?2:1),x.setViewport(y,s[0],s[1],s[2],s[3]),x.renderModel(null,{type:"blitScreen",image:_.texture,defines:{DITHERING:!1}},{clear:!1})))},getLogicalPoint:function(y){return p8(y,this._canvas)},isRectOverlapping:function(y){return this.getData3dUI(y)._rectOverlapping},getHitFaceInfo:function(y){y.target&&(y=this.lp(y));var q=this.getDataInfoAt(y);return q&&(y=this.intersectObject(y,q.data))?{data:q.data,face:y.part}:M5},unproject:function(y,q){var _=this.getWidth(),s=this.getHeight(),_=((y=y.target?this.lp(y):y).x-_/2)/_*2,y=-1*(y.y-s/2)/s*2,s=(q=q||0,l8()),p=BK(this),O=CK(this);return iK(s,p,O),SK(s),[(p=B8([_,y,q,1],s))[0]/p[3],p[1]/p[3],p[2]/p[3]]},getDataAt:function(y){return(y=this.getDataInfoAt(y))?y.data:M5},getDataInfoAt:function(y,q,_){return y.target&&(y=this.lp(y)),this._1o.get(px(y.x,y.y,q),!0,_)},getDataInfoDuringInteract:function(y,q){var _=this.getDataInfoAt(y);if(!this.isBlockSelectable()||!_||!_.data)return _;if(!q&&this.isSelected(_.data))return _;for(var s=_.data;(s=s.getParent())&&s instanceof P.Block&&this.isSelectable(s);){var p=this.isSelected(s);if(p&&q)break;if(_={data:s,part:_.part},p&&!q)break}return _},getDatasInRect:function(y,q){return this._1o.get(y,!1,q)},setEditable:function(y){var q=this._editable;this._editable=y,this.fp(XL,q,y)},isEditable:function(y){return y?!!this._editable&&!!W(y)&&!!y.s("3d.editable")&&(!this._editableFunc||this._editableFunc(y)):this._editable},isSelectable:function(y){return y.s("3d.selectable")&&this.sm().isSelectable(y)},isMovable:function(y){return(!Qx(y)||y.getStyle(rD)===tD)&&!!y.s("3d.movable")&&(!this._movableFunc||this._movableFunc(y))},isSizeEditable:function(y){return!!W(y)&&(!this._sizeEditableFunc||this._sizeEditableFunc(y))},isRotationEditable:function(y){return!(!W(y)||!1===y.IRotatable)&&(!this._rotationEditableFunc||this._rotationEditableFunc(y))},handleDelete:function(y){this._editable&&this.removeSelection()},zoomIn:function(y){this.setZoom(NA,y)},zoomOut:function(y){this.setZoom(1/NA,y)},setZoom:(jq=new Q5,Zq=new Q5,Kq=new Q5,Cq=new Q5,function(y,q){if(1!==y){var _=this;_._14o&&_._14o.stop(!0);var s,p=1/y,O=(jq.copy(_.getCenter()),Zq.copy(_.getEye()),_._ortho);if(O){if((s=_._orthoWidth)<_._moveStep&&1<y)return}else if(jq.distanceTo(Zq)<_._moveStep&&p<1)return;var L=!1;if(!1===_._zoomToCenter&&_._lastZoomLP&&(Kq.copy(Zq).sub(jq).normalize(),_._81O=null,Cq.copy(_.getHitPosition(_._lastZoomLP,jq.toArray(),Kq.toArray())),L=!0,_._lastZoomHit=Cq),q=Nx(q))return q.action=function(y){_.fi({kind:_._zooming?"betweenZoom":"beginZoom"}),_._zooming=1,y=(p-1)*y+1,O&&_.setOrthoWidth(s*y),L?(_.setEye(Kq.lerpVectors(Cq,Zq,y).toArray()),_.setCenter(Kq.lerpVectors(Cq,jq,y).toArray())):O||_.setEye(Kq.lerpVectors(jq,Zq,y).toArray())},q._37o=function(){delete _._14o,delete _._zooming,_.fi({kind:"endZoom"}),_.onZoomEnded()},_._14o=RA(q);O&&_.setOrthoWidth(s*p),L?(_.setEye(Kq.lerpVectors(Cq,Zq,p).toArray()),_.setCenter(Kq.lerpVectors(Cq,jq,p).toArray())):O||_.setEye(Kq.lerpVectors(jq,Zq,p).toArray())}}),setOrthoZoom:function(y,q){return this.setZoom(y,q)},getPositionInfo:function(y){var q=this._eye,_=this._center,s=this.getAspect(),y=y?a8(i8(_,q,!0),i8(y,q)):vA(q,_);return this._ortho?{length:y,height:(q=this._orthoWidth)/s,width:q}:{length:y,height:_=J5(this._fovy/2)*y*2,width:_*s}},getCenterInfo:function(){return this._81O||(this._81O=this.getPositionInfo()),DA(this._81O)},rotate:function(_,s,y,p){var O=this;if(_||s){p==M5&&(p=O._firstPersonMode),O._88O&&O._88O.stop(!0);var q=O._center,L=O._eye,$=O.getCenterInfo().length,k=p?q:L,M=p?L:q,E=i8(k,M),H=D5(E[0],E[2]),w=D5(B5(E[0]*E[0]+E[2]*E[2]),E[1]),Q=p?OD:LD;if(p&&(s=-s),y=Nx(y))return y.action=function(y){O.fi({kind:O._rotating?"betweenRotate":"beginRotate"}),O._rotating=1;var q=H+_*y,y=w+s*y,y=p?u-EK(O,u-y):EK(O,y);E[0]=$*p5(y)*p5(q),E[1]=$*H5(y),E[2]=$*p5(y)*H5(q),k[0]=M[0]+E[0],k[1]=M[1]+E[1],k[2]=M[2]+E[2],O.fp(Q,M5,k)},y._37o=function(){delete O._88O,delete O._rotating,O.fi({kind:"endRotate"}),O.onRotateEnded()},O._88O=RA(y);H+=_,w+=s,w=p?u-EK(O,u-w):EK(O,w),E[0]=$*p5(w)*p5(H),E[1]=$*H5(w),E[2]=$*p5(w)*H5(H),k[0]=M[0]+E[0],k[1]=M[1]+E[1],k[2]=M[2]+E[2],O.fp(Q,M5,k)}},pan:function(y,q,_,s){if(y||q){var p,O,L=this;s==M5&&(s=L._firstPersonMode),L._89O&&L._89O.stop(!0);var y=[($=CK(L))[0]*y,$[4]*y,$[8]*y],$=[$[1]*q,$[5]*q,$[9]*q],k=y[0]+$[0],M=y[1]+$[1],E=y[2]+$[2],H=L._center,w=L._eye;if(s&&(q=K3(L.getBoundaries(),w[0],w[2],w[0]+k,w[2]+E,B5(k*k+E*E)),k=q[0],E=q[1]),_=Nx(_))return p=DA(w),O=DA(H),_.action=function(y){L.fi({kind:L._panning?"betweenPan":"beginPan"}),L._panning=1,H[0]=O[0]+k*y,H[1]=O[1]+M*y,H[2]=O[2]+E*y,w[0]=p[0]+k*y,w[1]=p[1]+M*y,w[2]=p[2]+E*y,L.fp(LD,M5,w),L.fp(OD,M5,H)},_._37o=function(){delete L._89O,delete L._panning,L.fi({kind:"endPan"}),L.onPanEnded()},L._89O=RA(_);H[0]+=k,H[1]+=M,H[2]+=E,w[0]+=k,w[1]+=M,w[2]+=E,L.fp(LD,M5,w),L.fp(OD,M5,H)}},walk:function(q,y,_){if(q){var s,p,O=this,L=(_==M5&&(_=O._firstPersonMode),O._90O&&O._90O.stop(!0),O._center),$=O._eye,k=i8(L,$,!0);if(_){if(_=K3(O.getBoundaries(),$[0],$[2],$[0]+k[0]*q,$[2]+k[2]*q,F5(q)),!(q=vA(_)))return;k=[_[0]/q,0,_[1]/q]}if(y=Nx(y))return s=DA($),p=DA(L),y.action=function(y){O.fi({kind:O._walking?"betweenWalk":"beginWalk"}),O._walking=1,y*=q,$[0]=s[0]+k[0]*y,$[1]=s[1]+k[1]*y,$[2]=s[2]+k[2]*y,L[0]=p[0]+k[0]*y,L[1]=p[1]+k[1]*y,L[2]=p[2]+k[2]*y,O.fp(LD,M5,$),O.fp(OD,M5,L)},y._37o=function(){delete O._90O,delete O._walking,O.fi({kind:"endWalk"}),O.onWalkEnded()},O._90O=RA(y);$[0]+=k[0]*q,$[1]+=k[1]*q,$[2]+=k[2]*q,L[0]+=k[0]*q,L[1]+=k[1]*q,L[2]+=k[2]*q,O.fp(LD,M5,$),O.fp(OD,M5,L)}},handleScroll:function(y,q){CA(y);var _=this,s=_._moveStep,p=_.getDataInfoAt(y);if((p=p&&p.data)&&_.isInteractive(p)){var O=_.intersectObject(y,p);if(O&&(O=O.part,(O=r(p.s(O+".image")||p.s("shape3d."+O+".image")||p.s("all.image")||p.s("shape3d.image")))&&g(O.scrollable,p,_)))return}_.isFirstPersonMode()?_.isPannable()&&_.pan(0,0<q?s:-s):_.isZoomable()&&(_._lastZoomLP=_.lp(y),_.setZoom(q<0?1/aA:aA),_._lastZoomLP=_._lastZoomHit=null)},handlePinch:function(y,q){!this.isZoomable()||Math.abs(y-q)<E5.pinchZoomThreshold||this.setZoom(y<q?1/lA:lA)},setLightProbe:function(y){if(y){if(9===y.length)return this.lightProbe=y;if(27<=y.length){for(var q=this.lightProbe=[],_=0;_<9;_++)q[_]=[y[3*_],y[3*_+1],y[3*_+2]];return q}}return!1},getLightProbe:function(){return this.lightProbe},reset:function(y){this.setUp(E5.graph3dViewUp),this.moveCamera(E5.graph3dViewEye,E5.graph3dViewCenter,y)},moveSelection:function(y,q,_){this.dm().beginTransaction(),jU(this.sm().toSelection(this.isMovable,this),y,q,_),this.dm().endTransaction()},getMoveMode:function(y,q){return(q=q.s("3d.move.mode"))?q:GA(y)||tn[88]&&tn[89]&&tn[90]?"xyz":tn[88]&&tn[89]?"xy":tn[88]&&tn[90]?"xz":tn[89]&&tn[90]?"yz":tn[88]?"x":tn[89]?"y":tn[90]?"z":"xz"},handleTick:function(){var y,q=this,_=!1,s=q._moveStep,p=s,O=-1*q._rotateStep;q.isWalkable()||(p=0),q.isPannable()||(s=0),q.isRotatable()||(O=0),q._32Q&&(p*=y=(Un()-q._32Q)/50,s*=y,O*=y),q._31Q&&(uA(q._31Q),delete q._31Q,delete q._32Q),Cl()&&q.pan(-s,0,!(_=!0),!0),Fl()&&q.pan(s,0,!(_=!0),!0),Vl()&&(_=!0,GA()?q.pan(0,s,!1,!0):q.walk(p,!1,!0)),Bl()&&(_=!0,GA()?q.pan(0,-s,!1,!0):q.walk(-p,!1,!0)),hl()&&q.rotate(-O,0,!(_=!0),!0),ul()&&q.rotate(O,0,!(_=!0),!0),tl()&&q.rotate(0,-O/2,!(_=!0),!0),Jl()&&q.rotate(0,O/2,!(_=!0),!0),_&&(q._32Q=Un(),q._31Q=tA(q.handleTick,q))},handleKeyDown:function(y){!rA(y)&&ol[y.keyCode]?this.handleTick():Zl(y)?this.selectAll():Kl(y)?this.handleDelete(y):Dl(y)&&this.isResettable()&&this.reset()},checkDoubleClickOnNote:function(y,q,_){if(_===oD){if(q.s("note.toggleable"))return q.s(zD,!q.s(zD)),this.fi({kind:"toggleNote",event:y,data:q,part:_}),!0}else if(_===YD&&q.s("note2.toggleable"))return q.s(eD,!q.s(eD)),this.fi({kind:"toggleNote2",event:y,data:q,part:_}),!0;return!1},checkDoubleClickOnRotation:function(y,q,_){return _===t6?(q.setRotationX(0),!0):_===u6?(q.setRotationY(0),!0):_===J6&&(q.setRotationZ(0),!0)},onRotateEnded:function(){},onWalkEnded:function(){},getViewRatio:function(y){if(this.isOrtho())return this.getWidth()/this.getOrthoWidth();var q=this.getCenter(),_=this.getHeight(),s=this.getEye(),q=[q[0]-s[0],q[1]-s[1],q[2]-s[2]],y=[y[0]-s[0],y[1]-s[1],y[2]-s[2]];return _*Math.sqrt(q[0]*q[0]+q[1]*q[1]+q[2]*q[2])*(1/Math.tan(this.getFovy()/2))/(y[0]*q[0]+y[1]*q[1]+y[2]*q[2])},inViewSpace:function(y){var q,y=this._transformPointToViewSpace(y),_=this.getAspect(),s=this.getNear(),p=this.getFar();return!(-y[2]<s||-y[2]>p)&&(this.isOrtho()?(q=this.getOrthoWidth()/2,Math.abs(y[0])<=q&&Math.abs(y[1]*_)<=q):(q=Math.sqrt(y[0]*y[0]+y[1]*y[1]+y[2]*y[2])*Math.tan(this.getFovy()/2),Math.abs(y[1]<=q)&&Math.abs(y[0])<=q*_))},getPVMatrix:function(y){var q;return!y&&(q=this._18Q)||(q=BK(this),this._18Q=iK(q,q,CK(this)),this._18Q._wh=this.getWidth()/2/this.getHeight()),q},getFrustum:(Nq=new G,aq=new eU,lq=new Array(16),function(){for(var y=this.getPVMatrix(),q=!1,_=0;_<16;_++)y[_]!==lq[_]&&(q=!0,lq[_]=y[_]);return q&&aq.setFromMatrix(Nq.fromArray(y)),aq}),toViewPosition:function(y){var q=this.getWidth()/2,_=this.getHeight()/2,s=this.getPVMatrix();return{x:q+q*(y=B8([y[0],y[1],y[2],1],s))[0]/y[3],y:_-_*y[1]/y[3],z:y[2]/y[3]}},getHitPosition:function(y,q,_){var s=this.getWidth(),p=this.getHeight(),O=(y=y.target?this.lp(y):y).x-s/2,y=y.y-p/2,L=this.getCenterInfo(),$=CK(this),s=(q=q||[0,0,0],_=_||[0,1,0],O=O/s*L.width,y=-1*y/p*L.height,[$[0]*O,$[4]*O,$[8]*O]),p=[$[1]*y,$[5]*y,$[9]*y],L=[s[0]+p[0],s[1]+p[1],s[2]+p[2]],O=this.getCenter();return wK(this,q,_,[L[0]+O[0],L[1]+O[1],L[2]+O[2]])||[0,0,0]},intersectObject:function(y,q){return this._raycaster.intersectObject(y,q)},intersectObjects:function(y,q,_){return this._raycaster.intersectObjects(y,q,_)},serializePhysicalShader:function(){return this._glPrograms.serializePhysicalShader()},deserializePhysicalShader:function(y){return this._glPrograms.deserializePhysicalShader(y)},getLineLength:function(y){return this.validate(),(y=this.getData3dUI(y))&&y.getCache&&(y=y.getCache())?y[y.length-1].length:0},getLineOffset:function(y,q){var _=this.getData3dUI(y);if(_&&_.getCache&&(_=_.getCache())){var s,_=e_(_,q);if(y.s("shape3d")!==TD)return _;if(y.getScale3d&&1===(p=y.getScale3d())[0]&&1===p[1]&&1===p[2]&&(p=null),!(s=y.r3&&0===(s=y.r3())[0]&&0===s[1]&&0===s[2]?null:s)&&!p)return _;var p,q=new Q5(y.p3()),O=new Q5(_.point).sub(q),_=new Q5(_.tangent).add(O);return p&&(p=new Q5(p),O.multiply(p),_.multiply(p)),s&&(p=(new AB).setFromEuler(new bB(s,y.getRotationMode(),!0)),O.applyQuaternion(p),_.applyQuaternion(p)),{point:O.clone().add(q),tangent:_.sub(O).normalize()}}return M5},_genBatchInstancedArrayFunc:function(){var y=this._glCapabilities&&this._glCapabilities.instancedArray&&!this._batchInstancedDisabled,$=y?G3:r3,s=(this.batchInstancedModel=function(y,q,_,s,p,O,L){$(this,y,q,_,s,p,O,L)},y?n3:v3),O=(this.batchInstancedShapeFace=function(y,q,_){s(y,q,_)},y?b3:I3);this.batchInstancedFace=function(y,q,_,s,p){O(this,y,q,_,s,p)}},isLabelVisible:function(y){return!0},isNoteVisible:function(y){return!0},moveCamera:function(y,q,_){var s=this,p=[(p=s.getEye())[0],p[1],p[2]],O=[(O=s.getCenter())[0],O[1],O[2]];if(y=y||p,q=q||O,s._flyAnim&&s._flyAnim.stop(!0),!(_=Nx(_)))return s.setEye(y[0],y[1],y[2]),s.setCenter(q[0],q[1],q[2]),delete s._flyAnim,!0;var L=[y[0]-p[0],y[1]-p[1],y[2]-p[2]],$=[q[0]-O[0],q[1]-O[1],q[2]-O[2]];return _.action=function(y){s.setCenter(O[0]+$[0]*y,O[1]+$[1]*y,O[2]+$[2]*y),s.setEye(p[0]+L[0]*y,p[1]+L[1]*y,p[2]+L[2]*y)},_._37o=function(){delete s._flyAnim},s._flyAnim=RA(_)},flyTo:(Eq=new Q5,Hq=new Q5,wq=new Q5,Qq=new Q5,xq=new Q5,Sq=new G,Xq=new P.Math.Quaternion,Tq=new bB,iq=new rB,function(y,q,_){var s,p,O=this,L=(q=("boolean"==typeof q?{animation:q}:q)||{}).center,$=q.distance,k=q.direction,M=q.worldDirection,E=_||q.ratio||.8,H=q.xRatio||E,E=q.yRatio||E,w=((_!==k5||q.duration||q.frames)&&(q={animation:q}),[]),_=$===k5;if(L&&wq.fromArray(L),!L||_)if((y=1===(y=y||O.dm().getDatas()).length?wx(y)?y.get(0):y[0]:y)instanceof P.Node)L||wq.fromArray(y.p3()),_&&(Ov(w,O,y),s=w.length);else{if(!y.length)return;if(!(!_&&L||(w=[],y.forEach(function(y){Ov(w,O,y)}),s=w.length)))return;L||(iq.setFromPoints(w),wq.copy(iq.min).add(iq.max).multiplyScalar(.5))}O._flyAnim&&O._flyAnim.stop(!0),Eq.fromArray(O.getEye()),Hq.fromArray(O.getCenter()),O.setCenter(wq.x,wq.y,wq.z),Qq.subVectors(Eq,Hq),(k||M)&&(!M&&y instanceof P.Node?Xq.setFromEuler(Tq.set(y.r3(),y.getRotationMode(),!0)):Xq.set(0,0,0,1),L=Qq.length(),Qq.fromArray(M||k).applyQuaternion(Xq).setLength(L));var Q=new Q5(O.getUp()),x=e.fequal(Q.x,0,1e-5)&&e.fequal(Q.z,0,1e-5),S=(x&&0===Qq.x&&0===Qq.z&&(y=Qq.y,Qq.y=.999*y,Qq.z=.001*Math.sign(y)),0);if(_){var X,T,i,N=H,a=E;if(xq.copy(Qq),O.isOrtho()){var l=-1/0;for(O._eye[0]=Qq.x+wq.x,O._eye[1]=Qq.y+wq.y,O._eye[2]=Qq.z+wq.z,X=BK(O),iK(X,X,CK(O)),p=0;p<s;p++)i=w[p],T=B8([i.x,i.y,i.z,1],X),l=Math.max(l,Math.max(Math.abs(T[0])/N,Math.abs(T[1])/a));S=O.getOrthoWidth()*l}else{for(var j,Z,o=O.getNear(),K=10;K--;){for(O._eye[0]=Qq.x+wq.x,O._eye[1]=Qq.y+wq.y,O._eye[2]=Qq.z+wq.z,X=BK(O),iK(X,X,CK(O)),j=!0,Z=-1/0,p=0;p<s;p++){if(i=w[p],(T=B8([i.x,i.y,i.z,1],X))[3]<o&&K){Qq.multiplyScalar(2),j=!1;break}Z=Math.max(Z,Math.max(Math.abs(T[0])/N,Math.abs(T[1])/a)-T[3])}if(j)break}Qq.setLength(Z+Qq.length())}Qq.manhattanLength()<1e-6&&Qq.copy(xq)}else Qq.setLength($);var C,B,F,V,h,t,u,J,D,c,R,Y,M=Qq.add(wq);return(k=Nx(q.animation))?(O.setEye(Eq.x,Eq.y,Eq.z),O.setCenter(Hq.x,Hq.y,Hq.z),L=M.clone().sub(wq),(C=L.length())&&L.multiplyScalar(1/C),y=Eq.clone().sub(Hq),(B=y.length())&&y.multiplyScalar(1/B),_=(new G).lookAtDirection(y,Q),H=(new G).lookAtDirection(L,Q),F=(new AB).setFromRotationMatrix(_),V=(new AB).setFromRotationMatrix(H),h=(new Q5).subVectors(wq,Hq),S&&(t=O.getOrthoWidth()),u=new Q5,J=new Q5,D=new Q5,c=k.action,R=k._37o,Y=Hq.clone(),k.action=function(y,q){J.copy(Y).addScaledVector(h,y);var _=F.clone().slerp(V,y);u.set(0,0,1).applyQuaternion(_).setLength(B+(C-B)*y).add(J),D.set(0,1,0).applyQuaternion(_),O.setCenter(J.x,J.y,J.z),O.setEye(u.x,u.y,u.z),O.setUp(D.x,D.y,D.z),S&&O.setOrthoWidth((S-t)*y+t),c&&c(y,q)},k._37o=function(){delete O._flyAnim;var y=O.getUp(),q=x?E5.graph3dViewUp:Q.toArray();y[0]===q[0]&&y[1]===q[1]&&y[2]===q[2]||O.setUp(q),R&&R()},{lastEye:Eq,lastCenter:Hq,eye:M,center:wq,orthoWidth:S,animation:O._flyAnim=RA(k)}):(O.setEye(M.x,M.y,M.z),O.setCenter(wq.x,wq.y,wq.z),S&&O.setOrthoWidth(S),delete O._flyAnim,{lastEye:Eq,lastCenter:Hq,eye:M,center:wq,orthoWidth:S})}),getBoundingBox:(Mq=new G,function(y){if(0===(y=(y=y||this.sm().getSelection())instanceof P.Node?[y]:y).length)return M5;var _=[],q=(y.forEach(function(y){var q;W(y)&&(q=_,Mq.fromArray(J8(y,this.getMat(y))),y=y.getAnchor3d(),q.push((new Q5).set(0-y.x,0-y.y,0-y.z).applyMatrix4(Mq)),q.push((new Q5).set(0-y.x,0-y.y,1-y.z).applyMatrix4(Mq)),q.push((new Q5).set(0-y.x,1-y.y,0-y.z).applyMatrix4(Mq)),q.push((new Q5).set(0-y.x,1-y.y,1-y.z).applyMatrix4(Mq)),q.push((new Q5).set(1-y.x,0-y.y,0-y.z).applyMatrix4(Mq)),q.push((new Q5).set(1-y.x,0-y.y,1-y.z).applyMatrix4(Mq)),q.push((new Q5).set(1-y.x,1-y.y,0-y.z).applyMatrix4(Mq)),q.push((new Q5).set(1-y.x,1-y.y,1-y.z).applyMatrix4(Mq)))},this),[1/0,1/0,1/0]),s=[-1/0,-1/0,-1/0];return _.forEach(function(y){q[0]=Math.min(y.x,q[0]),q[1]=Math.min(y.y,q[1]),q[2]=Math.min(y.z,q[2]),s[0]=Math.max(y.x,s[0]),s[1]=Math.max(y.y,s[1]),s[2]=Math.max(y.z,s[2])}),{min:q,max:s}}),isShaderCompileParallel:function(){return!!this._parallelShaderCompile},enableShaderCompileParallel:function(){var y=this.getGLExtensions();return!!y&&!!y.get("KHR_parallel_shader_compile")&&void(this._parallelShaderCompile=!0)},disableShaderCompileParallel:function(){this._parallelShaderCompile=!1},setBatchInfo:function(y,q){var _=this._batchInfoMap[y];this._batchInfoMap[y]=q,this.fp("batchInfo",_,q)},getBatchInfo:function(y){return this._batchInfoMap[y]||Fn[y]},getStaticInstancingKey:function(y,q){if(!q&&(s=y._lastInstancingKey))return s;var _,q=y.s("shape3d"),s=Mx(q)?_=(_=q.uuid)?_:q.uuid=e.generateUUID():q;return s+=(y._flipSide?"_1_":"_0_")+y.s("static.group"),y._lastInstancingKey=s},setOrthoWidth:function(y){var q,_,s,p=this._orthoWidth;this._orthoWidth=y,this._syncEyeWithOrthoWidth&&(q=y/this.getAspect()/2/J5(this.getFovy()/2),_=(new Q5).fromArray(this.getEye()),s=(new Q5).fromArray(this.getCenter()),_.sub(s).setLength(q).add(s),this.setEye(_.toArray())),this.fp("orthoWidth",p,y)},getCamera:function(y){var q=this,_=((y=(y=y||q._mainCamera)||(q._mainCamera=new P.Camera)).s({"camera.type":q.isOrtho()?"ortho":"perspective","camera.aspect":q.getAspect(),"camera.fovy":q.getFovy(),"camera.ortho.width":q.getOrthoWidth(),"camera.near":q.getNear(),"camera.far":q.getFar()}),q.getEye());return y.p3(_.slice()),y.lookAt(q.getCenter(),q.getUp()),y},syncFromCamera:function(y){var q=this,_=new Q5(q.getEye()),s=new Q5(q.getCenter()),p=new Q5,O=s.sub(_).length(),L=(q.setEye(y.p3()),y.getEuler());return p.set(0,0,-1).applyEuler(L),_.copy(p).setLength(O).add(s.copy(y.p3())),q.setCenter(_.toArray()),_.set(0,1,0).applyEuler(L),s.set(0,1,0),Math.abs(p.cross(_).dot(s))<1e-5?q.setUp(s.toArray()):q.setUp(_.toArray()),q.setOrtho("ortho"===y.s("camera.type")),q.setAspect(y.s("camera.aspect")),q.setFovy(y.s("camera.fovy")),q.setOrthoWidth(y.s("camera.ortho.width")),q.setNear(y.s("camera.near")),q.setFar(y.s("camera.far")),!0},resetHeadlightProperties:function(){this._headlightColor=E5.graph3dViewHeadlightColor,this._headlightIntensity=E5.graph3dViewHeadlightIntensity,this._headlightRange=E5.graph3dViewHeadlightRange,this._headlightDirection=E5.graph3dViewHeadlightDirection,this._headlightGroup=E5.graph3dViewHeadlightGroup,this._headlightAmbientIntensity=E5.graph3dViewHeadlightAmbientIntensity,this._headlightDisabled=E5.graph3dViewHeadlightDisabled,this._headlightRatioForPhysicalMaterial=E5.graph3dViewHeadlightRatioForPhysicalMaterial},resetFogProperties:function(){this._fogDisabled=E5.graph3dViewFogDisabled,this._fogMode=E5.graph3dViewFogMode,this._fogDensity=E5.graph3dViewFogDensity,this._fogColor=E5.graph3dViewFogColor,this._fogNear=E5.graph3dViewFogNear,this._fogFar=E5.graph3dViewFogFar},_gatherRenderLayersByPriority:function(y){if(y||!(this._renderLayerSettingsVersion>=Lu)){var q,_=this,s=(_._renderLayerSettingsVersion=Lu,_._sortedRenderLayers=o.keys(_._renderLayerInfoMap));for(q in $u)0<=s.indexOf(q)||s.push(q);s.sort(function(y,q){return _.getRenderLayerInfo(y).priority-_.getRenderLayerInfo(q).priority})}},setRenderLayerInfo:function(y,q){Eu(0,y,this._renderLayerInfoMap);var _,s=this.getRenderLayerInfo(y),y=DA(s);for(_ in q)"mask"!==_&&(s[_]=q[_]);this._gatherRenderLayersByPriority(!0),this.fp("renderLayerInfo",y,s)},getRenderLayerInfo:function(y){return this._renderLayerInfoMap[y]||$u[y]},setRenderLayerInfoMap:function(y){var q,_=this._renderLayerInfoMap;for(q in this._renderLayerInfoMap={},y)this.setRenderLayerInfo(q,y[q]);this.fp("renderLayerInfoMap",_,this._renderLayerInfoMap)},getRenderLayerInfoMap:function(){return this._renderLayerInfoMap},getRenderLayerKeys:function(){return this._sortedRenderLayers}}),E5.registerTextureLoader=function(y){uq?uq.push(y):uq=[y]},E5.unregisterTextureLoader=function(y){if(uq)return 0<=(y=uq.indexOf(y))&&(uq.splice(y,1),0===uq.length&&(uq=null),!0)},function(y,q){return(5131!==q||y.isWebGL2()?q:null!==(y=y._glExtensions.get("OES_texture_half_float"))?y.HALF_FLOAT_OES:null)||5121}),Q6=function(y,q,_){if(!y.isWebGL2())return q;var s=q;return 6403===q&&(5126===_&&(s=33326),5131===_&&(s=33325),5121===_&&(s=33321)),33319===q&&(5126===_&&(s=33328),5131===_&&(s=33327),5121===_&&(s=33323)),6407===q&&(5126===_&&(s=34837),5131===_&&(s=34843),5121===_&&(s=32849)),6408===q&&(5126===_&&(s=34836),5131===_&&(s=34842),5121===_&&(s=32856)),33325!==s&&33326!==s&&34842!==s&&34836!==s||y._glExtensions.get("EXT_color_buffer_float"),s},x6=e.newIdGenerator(),S6=(o.assign(B3.Graph3dView.prototype,{getTextureMap:function(){return this._2O},setTextureStyle:function(y,q,_){return!(!(y=r(y))||!y.texture||(this.deleteTexture(y),y[q]=_,this.iv(),0))},setTexture:function(y,q,_){var s;_=_||"",(s=(s=this._2O[y])?s:this._2O[y]={})[_]=q},deleteTexture:function(y){if(this._2O){y&&y.uuid&&(y=y.uuid);var q=this._2O[y];if(q){delete this._2O[y];var _,s=this.getGL();for(_ in q)s.deleteTexture(q[_])}}},invalidateCachedTexture:function(y,q){var _=this.getData3dUI(y).invalidateCachedTexture(this.getGL());!1===q&&!_||this.invalidateData(y)},invalidateShape3dCachedImage:function(y){this.invalidateCachedTexture(y)},getTextureFromLoader:function(y){if(uq)for(var q,_=0,s=uq.length;_<s;_++)if((q=uq[_]).checkType(y))return q.getTexture(this,y)},getGLTextureFromLoader:function(y){var q=this.getTextureFromLoader(y);return q&&(q=this.createTexture(q),this.setTexture(y,q),q)},getPrefabBoneTexture:function(y){var q=this._26I;return q?q._4KQ[y._4LQ||(y._4LQ=x6.next())]:null},setPrefabBoneTexture:function(y,q){var _=this._26I;return _?(_._4KQ[y._4LQ||(y._4LQ=x6.next())]=q,!0):null},textureToCanvas:(Jq={type:"blitScreen",defines:{USE_LINEAR:!0}},Dq={type:"blitScreen"},function(y,q,_,s){var p=U4(y)?y:this.getTextureFromLoader(y);if(p&&(_=_||p.width,s=s||p.height,_&&s))return(p=(q=q===k5?"linear"===p.colorSpace:q)?Jq:Dq).image=y,q=new i6(this,_,s),this.renderModel(q,p),q.releaseTexture(),p.image=null,q.toCanvas()}),createTexture:function(y,q){var _,s,p,O,L,$,k,M=this.getGL(),E=A4,H=w6(this,y.type||y.textureType),w=y.format||E.RGBA,Q=Q6(this,w,H),x=(y.image?(_=(p=r(y.image)).naturalWidth||p.width,s=p.naturalHeight||p.height,x=!p||"VIDEO"!==p.tagName&&(!_||!s)):(p=y.data,_=y.width,s=y.height,(x=p===k5||!_||!s)||(O=!0)),x&&(p=null,_=s=0),y.minFilter||y.filter||E.LINEAR),S=y.magFilter||y.filter||E.LINEAR,X=y.wrapS||y.wrap,T=y.wrapT||y.wrap,i=(X||T||(X=T=!e.isPOT(_)||!e.isPOT(s)||y.clampToEdge||p&&p.clampToEdge?E.CLAMP_TO_EDGE:E.REPEAT),this.isWebGL2());return i||X===E.CLAMP_TO_EDGE&&T===E.CLAMP_TO_EDGE&&(x===E.NEAREST||x===E.LINEAR)||e.isPOT(_)&&e.isPOT(s)||!p||O||(L=y.scaleMode,$=e.nearestPOT(_),k=e.nearestPOT(s),"smaller"===L?(_<$&&($/=2),s<k&&(k/=2)):"larger"===L&&($<_&&($*=2),k<s&&(k*=2)),p=E5.resizeImage(p,$,k),_=$,s=k),q=q||M.createTexture(),M.activeTexture(33984),uK(M,q),M.pixelStorei(37440,!0===y.flipY),M.pixelStorei(37441,!1),O?M.texImage2D(E.TEXTURE_2D,0,Q,_,s,0,w,H,p):p&&M.texImage2D(E.TEXTURE_2D,0,Q,w,H,p),JK(M,10242,X),JK(M,10243,T),JK(M,10240,S),X!==E.CLAMP_TO_EDGE||T!==E.CLAMP_TO_EDGE?(JK(M,10241,9728===x?9984:9987),i&&y.mipmapMaxLevel!==k5&&JK(M,33085,y.mipmapMaxLevel),M.generateMipmap(E.TEXTURE_2D)):JK(M,10241,x),uK(M,M5),q},resetSharedTextureIndex:function(){this._sharedTextureIndex=0},textureAccessesByMaterial:function(y,q){var _,s,p=this._sharedTextureIndex;return 0===p?s=this._1O:(s=(_=this.getGL())._sharedTexturePool[p-1])||(_._sharedTexturePool[p-1]=s=VK(this,_)),(p=this.getTexture(y,q,k5,k5,s))===s&&this._sharedTextureIndex++,p},getTexture:function(y,q,_,s,p){if(!y)return M5;var O,L=this,$=L.getGL(),k=L._2O[y];if(!(O=k?k[(w=q?q.s("texture.mipmap.max"):w)||""]||k.default:O)&&null===(O=L.getGLTextureFromLoader(y)))return $._emptyTexture;if(!O){if(!(k=r(y)))return $._emptyTexture;if(s=s||{},q&&(s.mipmapMaxLevel=w=q.s("texture.mipmap.max"),E=q.s("texture.wrap"),s.clampToEdge="clampToEdge"===E||"repeat"!==E&&k5,s.flipY=q.s("texture.flipY")),k.uuid||(k.uuid=P.Math.generateUUID()),k.tagName||k.texture){if((E=k.texture)&&!r(k.image))return $._emptyTexture;if(k.dynamic)return(H=$._dynamicTexturePool[k.uuid])||(H=$._dynamicTexturePool[k.uuid]=$.createTexture()),E?this.createTexture(k,H):VK(L,$,k,H,s);E?(O=L._2O[k.uuid])?O=O[""]:(O=this.createTexture(k),L.setTexture(k.uuid,O)):(O=VK(L,$,k,k5,s),L.setTexture(y,O,w))}else{var M,E,H=q&&(q.s("texture.cache")||q.s("shape3d.image.cache")||k.textureCache);if((E=L.isVRPresenting())&&q&&(q._textureUpdateFrame===$._renderInfo.frame?H=!0:q._textureUpdateFrame=$._renderInfo.frame),H&&(O=(M=L.getData3dUI(q)).getCachedTexture(_))&&M.interactiveInfo&&O.interactiveInfo&&(M.interactiveInfo[O.interactiveInfo.key]=O.interactiveInfo.info),!O){var w=$._renderInfo.textureCache;if(H){if(w.time>E5.graph3dMaxVectorCacheTime)return L.redraw(),$._emptyTexture;if(!BA(k,q))return $._emptyTexture}q&&(1!==q.s("texture.scale")?i=q.s("texture.scale"):1!==q.s("shape3d.texture.scale")&&(i=q.s("shape3d.texture.scale")));var Q,x,S,X,T,i=i||1,N=(l=q&&(q.s("fixSizeOnScreen")||q.s("shape3d.fixSizeOnScreen")))?9728:9729;l?"number"==typeof l&&(i*=l<0?1:l):q&&(q.s("vector.dynamic")||q.s("shape3d.vector.dynamic"))&&(l=(M=M||L.getData3dUI(q)).getVectorDynamicSize());"billboard"===(a=q&&q.s("shape3d"))?Q=q.getTall()/q.getWidth():"plane"===a&&(Q=q.getHeight()/q.getWidth());var a=d8(k,q),l=l?(S=L._devicePixelRatio||sA,x=0<l[0]?l[0]*S:i*a*S,0<l[1]?l[1]*S:i*(Q?yu(k,q,L,Math.min(4096,a*Q)):yu(k,q))*S):(x=i*a,i*(Q?yu(k,q,L,Math.min(4096,a*Q)):yu(k,q)));1<=x&&1<=l&&(S=0,(H||E)&&(S=Date.now()),i=L._glCapabilities.maxTextureSize,x=Math.min(x,i),l=Math.min(l,i),a=Wl(x,l),(M=!M&&q?L.getData3dUI(q):M)&&M.interactiveInfo&&("object"==typeof(X=y)&&(X=X.uuid||(X.uuid=P.Math.generateUUID())),T=M.interactiveInfo[X]={},a.interactiveInfo=T.bodyInfo={compInfos:[],matrix:new mB,rect:{x:0,y:0,width:x,height:l}}),qu(a,k,0,0,x,l,q,L),a.interactiveInfo&&(a.interactiveInfo=null),a.restore(),w.count++,w.pixels+=x*l,q?(s.minFilter=C3(q.s("texture.filter.min")||q.s("texture.filter"))||N,s.magFilter=C3(q.s("texture.filter.mag")||q.s("texture.filter"))||N):s.minFilter=s.magFilter=N,H||E?(O=VK(L,$,Pl,null,s),M&&M.setCachedTexture(O,_),w.time+=Date.now()-S,T&&(O.interactiveInfo={key:X,info:T}),Pl=null):O=VK(L,$,Pl,p||L._1O,s))}}}return O}}),(((_=B3.EnvmapRenderer=function(y){this.gv=y,this._envmaps={},this._envmapHash={},this._probeCaptureTime={},this._envmapPoolCachedByImage=[],this._pingPongRenderTarget=null,this._equirectMaterial=null,this._blurMaterial=null,this._lastCaptureFrame=0,this._cubemapMaterial=null,this._envmapIntensity={}}).prototype={}).constructor=_).prototype.changeEnvmapType=function(y){"legacy"===y?(this.setEnvmapByProbeId=this.setEnvmapLegacy,this.onBeforeRender=this.onBeforeRenderLegacy):(this.setEnvmapByProbeId=this.setEnvmap,this.onBeforeRender=this.onBeforeRenderNew)},_.prototype.invalidateEnvmap=function(y){var q=this.gv;"legacy"!==q.getEnvmapType()&&q.getGL()&&(y?(delete this._envmapHash[y],delete this._probeCaptureTime[y]):(this._envmapHash={},this._probeCaptureTime={}),q.iv())},_.prototype.dispose=function(){var y,q=this,_=[q._pingPongRenderTarget,q._hdrDynamicComposeRTT];for(y in q._envmaps)_.push(q._envmaps[y]);YK(q.gv,_),q._envmaps={},q._envmapPoolCachedByImage=[],q._envmapHash={},q._pingPongRenderTarget=null,q._equirectMaterial=q._cubemapMaterial=q._blurMaterial=null,q._hdrDynamicComposeRTT=null,q._envmapLegacy=null,q._lastLegacyImage=null},_.prototype.onBeforeRenderLegacy=function(y){this.gv._picking||(this.assureTextureLegacy(y),this.assureEnvmapPoolForImage())},_.prototype.assureTextureLegacy=function(y){var q,_,s=this.gv.getEnvmap();s!==this._lastLegacyImage&&(this._envmapLegacy&&(y.deleteTexture(this._envmapLegacy),this._envmapLegacy=null),s?(q=E5.getImage(s))&&q.tagName&&(q=E5.resizeImagePOT(q,!0),_=this._envmapLegacy=y.createTexture(),y.activeTexture(33984),y.bindTexture(34067,_),y.texParameteri(34067,10240,9729),y.texParameteri(34067,10241,9729),y.texImage2D(34069,0,6408,6408,5121,q),y.texImage2D(34070,0,6408,6408,5121,q),y.texImage2D(34071,0,6408,6408,5121,q),y.texImage2D(34072,0,6408,6408,5121,q),y.texImage2D(34073,0,6408,6408,5121,q),y.texImage2D(34074,0,6408,6408,5121,q),y.bindTexture(34067,y._emptyCubeTexture),this._lastLegacyImage=s):this._lastLegacyImage=s)},_.prototype.setEnvmapLegacy=function(y,q,_){y.uEnvMap=this._envmapLegacy,y.envMapIntensity=_},_.prototype.onBeforeRenderNew=function(y){this.gv._picking||(this.assureTextureNew(y),this.resetUniformCache(),this.assureEnvmapPoolForImage())},_.prototype.isHDR=function(y){return"string"==typeof y&&(y.indexOf(".hdr")===y.length-4||y.indexOf(".HDR")===y.length-4)},_.prototype.isDynamicImage=function(y){return y&&y.comps&&y.comps[0]&&"__ht_envmap_bg__"===y.comps[0].type},_.prototype.isImageReady=function(y){var q;if(this.isHDR(y))q=E5.getHdrTexture(y);else if(q=E5.getImage(y),this.isDynamicImage(q)&&!this.isImageReady(q.comps[0].image))return!1;return q},_.prototype.assureTextureNew=function(y){var q=this,_=q.gv,s=_.getEnvmap(),p=q._envmapHash,O=q._envmaps,L=q._envmapIntensity,y=y._renderInfo.frame;if(this._lastCaptureFrame>=y||_._picking)for($ in s)M=s[$].intensity,L[$]=M==M5?1:M;else{for(var $ in s){var k=s[$],M=k.intensity;switch(L[$]=M==M5?1:M,k.type){case"sphere":(x=k.image)!==p[$]&&(x?q.isImageReady(x)&&(p[$]=x,Lv(O,$,q.fromEquirectangular(x))):(p[$]=x,Lv(O,$,null)));break;case"cube":if((S=k.texture)!==k5)p[$]!==S&&(p[$]=S,Lv(O,$,q.fromCubemap(S,k.encoding)));else{var E=k.images;if(E&&6===E.length&&(x=E.join(","))!==p[$]){for(var H=!0,w=!1,Q=0;Q<6;Q++){if(!E[Q]){w=!0;break}if(!E5.getImage(E[Q])){H=!1;break}}w?(p[$]=x,Lv(O,$,null)):H&&(p[$]=x,Lv(O,$,q.fromCubemap(E)))}}break;case"skybox":var x,S,X=_.getSkybox();if(X)if((x="sphere"===(S=X.s("shape3d"))?X._id+"_"+X.s("shape3d.image"):X._id+"_"+X.s("front.image"))!==p[$]){if("sphere"===S)H=q.isImageReady(X.s("shape3d.image"));else for(var H=!0,T=["front","back","left","right","top","bottom"],Q=0;Q<6;Q++)if(!E5.getImage(X.s(T[Q]+".image"))){H=!1;break}H&&(p[$]=x,Lv(O,$,q.fromSkybox()))}break;case"probe":var i,N,a=k.pos,l=k.size;(x=a[0]+"_"+a[1]+"_"+a[2]+"_"+l)!==p[$]&&(i=this._probeCaptureTime[x],N=Date.now(),i||(this._probeCaptureTime[x]=i=N),N-i>E5.envmapProbeMinWaitTime&&!rn&&!$_||N-i>E5.envmapProbeMaxWaitTime?(delete this._probeCaptureTime[x],p[$]=x,Lv(O,$,q.fromSceneProbe(a,l,k.filter))):_.iv())}}o.keys(O).forEach(function(y){s[y]===k5&&(delete p[y],Lv(O,y,null))})}},_.prototype.resetUniformCache=function(){this._frameUniformCache={}},_.prototype.setEnvmap=function(y,q,_){var s=y.uuid,p=this._frameUniformCache,O=(O=this._envmaps[q])&&O.texture;p[s]!==O&&(p[s]=O,y.uEnvMap=O),_&&(_*=this._envmapIntensity[q]||0),y.envMapIntensity=_},_.prototype.assureEnvmapPoolForImage=function(){for(var y=this._envmapPoolCachedByImage,q=0,_=y.length;q<_;q++)y[q][0]&&!y[q][1]&&this.isImageReady(y[q][0])&&(y[q][1]=this.fromEquirectangular(y[q][0]))},_.prototype.assureEnvmapFromEquirectangular=function(y){for(var q,_=this._envmapPoolCachedByImage,s=0,p=_.length;s<p;s++)if(_[s][0]===y)return(q=_[s][1])?q.texture:null;return _.push([y,null]),this.gv.iv(),null},_.prototype.invalidateEnvmapUsedByMaterial=function(y){if(y)for(var q=this._envmapPoolCachedByImage,_=0,s=q.length;_<s;_++)q[_][0]===y&&(q[_][1]=null);else this._envmapPoolCachedByImage=[];this.gv.iv()},_.prototype.isEnvmapUsedByMaterialReady=function(y){for(var q=this._envmapPoolCachedByImage,_=y==M5,s=0,p=q.length;s<p;s++)if(_){if(!q[s][1])return!1}else if(q[s][0]===y)return!!q[s][1];return _},_.prototype.fromEquirectangular=function(y){var q,_,s,p,O,L=this.isHDR(y)?(q=P.Default.getHdrTexture(y),"linear"):this.isDynamicImage(y)&&this.isHDR(y.comps[0].image)?(p=(_=y.comps[0]).image,_.image=null,s=this.gv.getTexture(y),_.image=p,p=this.gv.getTexture(p),O=(O=this._hdrDynamicComposeRTT)||(this._hdrDynamicComposeRTT=this._allocateTargets()),L=y.width,this.gv.renderModel(O,L,y.height,{type:"envmapDynamicCompose",offset:_.offset?(_.offset%1+1)%1:0,texture1:p,texture2:s}),O=O.texture,q=y,"linear"):(q=P.Default.getImage(y),"sRGB");return q?(this.rectSize=[1/q.width,1/q.height],y=O||this.gv.getTexture(y),this.fromTexture(y,null,L)):null},_.prototype.fromCubemap=function(y,q){if(q=q||"sRGB",U4(y))return this.fromTexture(y,!0,q);for(var _=this.gv.getGL(),s=_.createTexture(),p=(_.activeTexture(33984),_.bindTexture(34067,s),_.texParameteri(34067,10240,9729),_.texParameteri(34067,10241,9729),[]),O=fq/3,L=0;L<6;L++)p[L]=E5.resizeImage(P.Default.getImage(y[L]),O);return _.texImage2D(34069,0,6408,6408,5121,p[0]),_.texImage2D(34070,0,6408,6408,5121,p[1]),_.texImage2D(34071,0,6408,6408,5121,p[2]),_.texImage2D(34072,0,6408,6408,5121,p[3]),_.texImage2D(34073,0,6408,6408,5121,p[4]),_.texImage2D(34074,0,6408,6408,5121,p[5]),_.bindTexture(34067,_._emptyCubeTexture),this.fromTexture(s,!0,q)},_.prototype.fromTexture=function(y,q,_){var s=this._allocateTargets(),p=(this._pingPongRenderTarget||(this._pingPongRenderTarget=this._allocateTargets()),this.gv),O=p.getGL(),L=S5.for(O).directState(),$=L.depth.enabled,k=(L.scissor.enabled=!0,L.depth.enabled=!1,p.getViewport(O));return this._textureToCubeUV(y,s,q,_),this._applyPMREM(s),p.setViewport(O,k[0],k[1],k[2],k[3]),L.depth.enabled=$,L.scissor.enabled=!1,s},_.prototype.fromSkybox=function(){return this._fromCamera(function(y){y.s({"camera.onlySky":!0,"camera.skybox.blur":!1})})},_.prototype.fromScene=function(q){return this._fromCamera(function(y){y.s({"camera.onlySky":!1}),q&&q(y)})},_.prototype.fromNode=function(y){var q,_=this.gv.getData3dUI(y),s=_._42,p=(_._42=An,this.gv.getSkybox()),O=y.p3(),y=(p&&(q=p.p3(),p.p3(O)),this.fromScene(function(y){y.p3(O)}));return _._42=s,p&&p.p3(q),y},_.prototype.fromSceneProbe=function(q,_,s){var y,p,O=this.gv,L=O.getSkybox(),$=(L&&(y=L.p3(),L.p3(q)),s&&(p=O.isVisible,O.isVisible=function(y){var q=s(y);return q!==k5?q:p.call(O,y)}),this.fromScene(function(y){y.p3(q),y.s("camera.near",_)}));return s&&(O.isVisible=p),L&&L.p3(y),$},_.prototype._fromCamera=function(y){var q=this.gv,_=q.getCamera(),y=(y&&y(_),new i6(q,fq,fq,{cube:!0})),s=q.getGL(),p=q.getViewport(s),O=this.setEnvmapByProbeId,L=this.onBeforeRender,_=(this.setEnvmapByProbeId=function(y){y.envMap=s._emptyTexture},this.onBeforeRender=An,_.attachRenderTarget(y),_.render(q),_.detachRenderTarget(),this.setEnvmapByProbeId=O,this.onBeforeRender=L,q.setViewport(s,p[0],p[1],p[2],p[3]),this.fromTexture(y.texture,!0,"sRGB"));return y.releaseTexture(),_},_.prototype._allocateTargets=function(y){return new i6(this.gv,3*oq,3*oq,{textureType:5131})},_.prototype._textureToCubeUV=function(y,q,_,s){var p,O,L=this,$=L.gv,k="sRGB"===s?"USE_SRGB":"USE_LINEAR",k=(_?(null==L._cubemapMaterial&&(L._cubemapMaterial={}),null==(p=L._cubemapMaterial[k])&&((O={})[k]=!0,L._cubemapMaterial[k]=p={type:"envmapCubemap",internalDefines:!1,defines:O})):(null==L._equirectMaterial&&(L._equirectMaterial={}),null==(p=L._equirectMaterial[k])&&((O={})[k]=!0,L._equirectMaterial[k]=p={type:"envmapEquirect",internalDefines:!1,defines:O})),p.envMap=y,_||(p.texelSize=L.rectSize),Aq[0]);$.renderModel(q,{model3d:!0,mesh:k,mat:p,encoding:"linear"===s?1:0},{restoreViewport:!1,preRender:function(){L._setViewport(q,0,0,3*oq,2*oq)}})},_.prototype._applyPMREM=function(y){for(var q,_,s=1;s<Pq;s++)q=Math.sqrt(eq[s]*eq[s]-eq[s-1]*eq[s-1]),_=Wq[(s-1)%Wq.length],this._blur(y,s-1,s,q,_)},_.prototype._setViewport=function(y,q,_,s,p){var O=this.gv;O.setViewport(O.getGL(),q,_,s,p),O.getRenderState().directState().scissor.box=[q,_,s,p]},_.prototype._blur=function(y,q,_,s,p){var O=this._pingPongRenderTarget;this._halfBlur(y,O,q,_,s,"latitudinal",p),this._halfBlur(O,y,_,_,s,"longitudinal",p)},_.prototype._halfBlur=function(y,q,_,s,p,O,L){var $=this,k=$.gv,M=$._blurMaterial;if("latitudinal"===O||"longitudinal"===O){M||($._blurMaterial=M={type:"envmapBlur",internalDefines:!1,defines:{n:mq}});for(var E,H=zq[_]-1,w=p/(H=isFinite(p)?Math.PI/(2*H):2*Math.PI/(2*mq-1)),Q=isFinite(p)?1+Math.floor(3*w):mq,x=[],S=0,X=0;X<mq;++X)i=X/w,E=Math.exp(-i*i/2),x.push(E),0==X?S+=E:X<Q&&(S+=2*E);for(X=0;X<x.length;X++)x[X]=x[X]/S;M.envMap=y.texture,M.samples=Q,M.weights=x,M.latitudinal="latitudinal"===O,L&&(M.poleAxis=L),M.dTheta=H,M.mipInt=Rq-_;var T=zq[s],i=3*Math.max(0,oq-2*T),N=(0===s?0:2*oq)+2*T*(Rq-cq<s?s-Rq+cq:0),p=Aq[s];k.renderModel(q,{model3d:!0,mesh:p,mat:M},{restoreViewport:!1,preRender:function(y){$._setViewport(q,i,N,3*T,2*T)}})}},cq=4,Rq=8,oq=Math.pow(2,Rq),Pq=Rq-cq+1+(Yq=[.125,.215,.35,.446,.526,.582]).length,mq=20,q=1/(_=(1+Math.sqrt(5))/2),Wq=[new Q5(1,1,1),new Q5(-1,1,1),new Q5(1,1,-1),new Q5(-1,1,-1),new Q5(0,_,q),new Q5(0,_,-q),new Q5(q,0,_),new Q5(-q,0,_),new Q5(_,q,0),new Q5(-_,q,0)],_=function(){for(var y=[],q=[],_=[],s=Rq,p=0;p<Pq;p++){var O=Math.pow(2,s),L=(q.push(O),1/O);Rq-cq<p?L=Yq[p-Rq+cq-1]:0==p&&(L=0),_.push(L);for(var $=-(L=1/(O-1))/2,k=1+L/2,M=[],E=[],H=[],w=0;w<6;w++){var Q=w%3*2/3-1,x=2<w?0:-1;M.push(Q,x,0,Q+2/3,x,0,Q+2/3,1+x,0,Q,x,0,Q+2/3,1+x,0,Q,1+x,0),E.push($,$,k,$,k,k,$,$,k,k,$,k),H.push(w,w,w,w,w,w)}y.push({position:new T8(M),uv:new T8(E),faceIndex:new T8(H)}),cq<s&&s--}return{_lodPlanes:y,_sizeLods:q,_sigmas:_}}(),Aq=_._lodPlanes,zq=_._sizeLods,eq=_._sigmas,fq=E5.EnvmapTextureSize,E5.setCompType("__ht_envmap_bg__",function(y,q,_,s,p){var O,L,$,k=_.image;(k=k&&E5.getImage(k))&&(O=q.x,L=q.y,$=q.width,q=q.height,0!=(_=((_.offset||0)%1+1)%1*$|0)&&(y.save(),y.beginPath(),y.rect(O,L,$,q),y.clip(),y.translate(_,0),E5.drawImage(y,k,O-$,L,$,q,s,p)),E5.drawImage(y,k,O,L,$,q,s,p),0!=_&&y.restore())}),["left","front","right","back","top","bottom"]),X6=B3._RenderList=function(h){var t=[],u=[],J={},D={},c={},R={},o={},Y={},P={},m={};return{opaque:t,transparent:u,init:function(){for(var y in t.length=0,u.length=0,P={},m)m[y].length=0},push:function(y,q){if(q){var _,s,p,O,L=y,$=L.gv,k=L.data,M=L.shapeModel;if(M)if(k.s("static")&&(X=!0),M.model3d)S=_=s=!0;else{(Q=k.s("shape3d.top.material"))&&(T3(Q)?s=!0:_=!0),(Q=k.s("shape3d.bottom.material"))&&(T3(Q)?s=!0:_=!0),(Q=k.s("shape3d.from.material"))&&(T3(Q)?s=!0:_=!0),(Q=k.s("shape3d.to.material"))&&(T3(Q)?s=!0:_=!0),(Q=k.s("shape3d.material"))&&(T3(Q)?s=!0:_=!0);var E,H,w=k.s("shape3d.transparent")||k.s("points.transparent");for(Hx(M)||(E=g(M.transparent,k,$),M=[M]),p=0,O=M.length;p<O;p++)H=M[p],(H=(H=(H=g(H.transparent,k,$))===k5?E:H)===k5?w:H)?s=!0:_=!0}for(p=0,O=S6.length;p<O;p++){var Q,x=L[S6[p]];x&&((Q=$.getFaceMaterial(k,S6[p]))?T3(Q)?s=!0:_=!0:x.transparent?s=!0:_=!0)}var q=!1,S=($.isLabelVisible(k)&&(L.labelInfo&&(q=!0,k.s(cD+".transparent")?s=!0:_=!0),L.label2Info&&(q=!0,k.s(RD+".transparent")?s=!0:_=!0)),$.isNoteVisible(k)&&(L.noteInfo&&(q=!0,k.s(oD+".transparent")?s=!0:_=!0),L.note2Info&&(q=!0,k.s(YD+".transparent")?s=!0:_=!0)),{opaque:_=!(s=L._38o?_=q=!0:s)||_,transparent:s,model3d:S,staticModel3d:X});q&&k instanceof vQ&&(S.blockRenderable=!0),L._renderParams=S}var X=y.data,q=X._id;if((S=P[q])!==k5)return S;S=y._renderParams;if(!S||!1===S.visible||X instanceof vQ&&!S.blockRenderable)return P[q]=!1;if(P[q]=!0,X.isAnimationPlaying()&&(y.shapeModel&&h.updateSkeleton(X,y.shapeModel),X.isAnimationPaused()||h.iv()),y={ui:y,model3d:S.model3d,data:X,z:0,id:q},h._glCapabilities&&h._glCapabilities.instancedArray&&S.staticModel3d&&y.ui.mat&&h.isVisible(X)&&X.s(uL)){for(var T=h.shadowMap.enable,i=h.getStaticInstancingKey(X,!0),N=m[i],a=0!==(i=(N=N||(m[i]={ms:[],ds:[],cs:[],highlightColors:[],length:0,msVersion:0,shadowVersion:0,csVersion:0,highlightVersion:0,shadow:[],cache:{version:-1,length:-1,id:-1,buffer:null},cacheShadow:{version:-1,length:-1,id:-1,buffer:null},cachePick:{version:-1,length:-1,buffer:null},cacheHighlight:{version:-1,length:-1,buffer:null}})).length),l=!1,j=16*i,Z=0,K=N.ms,C=y.ui.mat;Z<16;Z++)K[j+Z]!=C[Z]&&(l=!0,K[j+Z]=C[Z]);l&&(N.msVersion=N.msVersion+1),N.ds[i]=q,T&&(T=X.s("shadow.cast"),!l&&N.shadow[i]===T||(N.shadow[i]=T,N.shadowVersion=N.shadowVersion+1));for(var B=k3(null,h.pickColorMap,h.isSelectable(X),y.ui,DD,!0),l=!1,F=4*i,Z=0,V=N.cs;Z<4;Z++)V[F+Z]!==B[Z]&&(l=!0,V[F+Z]=B[Z]);if(l&&(N.csVersion=N.csVersion+1),N.length++,h._model3dInstancedBatchCount++,a)return B&&(e3(B,D[q],J),e3(B,R[q],c),e3(B,Y[q],o)),!0}return S.opaque&&t.push(y),S.transparent&&u.push(y),!0},getModel3dInstancedBatchMap:function(){return m},resetModel3dInstancedDraw:function(){for(var y in m)m[y].rendered=null},batchModelMap:J,batchIndexMap:D,polylineModelMap:c,polylineIndexMap:R,wireframeModelMap:o,wireframeIndexMap:Y,beginFillHighlightMaskColor:function(y){var q,_=h.dm();for(q in m){var s=m[q],p=s.ds;if(p&&s.length){for(var O=s.highlightColors,L=!1,$=!1,k=0,M=s.length;k<M;k++)for(var E=y(_.getDataById(p[k]),!0)?[0,0,0,0]:($=!0,[0,1,1,1]),H=4*k,w=0;w<4;w++)O[H+w]!==E[w]&&(L=!0,O[H+w]=E[w]);L&&(s.highlightVersion=s.highlightVersion+1),s._csBackup=[s.cs,s.csVersion,s.cachePick],s.cs=s.highlightColors,s.csVersion=s.highlightVersion,s.cachePick=s.cacheHighlight,s._highlightInvalid=!$}}},endFillHighlightMaskColor:function(){for(var y in m){var q=(y=m[y])._csBackup;q&&(y.cachePick=q[2],y.csVersion=q[1],y.cs=q[0],y._csBackup=k5,y._highlightInvalid=k5)}},ivBatch:function(y){y?(P3(J,D,y,h),P3(c,R,y,h),P3(o,Y,y,h)):(J=this.batchModelMap={},D=this.batchIndexMap={},c=this.polylineModelMap={},R=this.polylineIndexMap={},o=this.wireframeModelMap={},Y=this.wireframeIndexMap={}),this.markBatchInvalid()},ivModelBatch:function(y){y?P3(J,D,y,h):(J=this.batchModelMap={},D=this.batchIndexMap={}),this.markBatchInvalid()},ivPolylineBatch:function(y){y?P3(c,R,y,h):(c=this.polylineModelMap={},R=this.polylineIndexMap={}),this.markBatchInvalid()},ivWireframeBatch:function(y){y?P3(o,Y,y,h):(o=this.wireframeModelMap={},Y=this.wireframeIndexMap={}),this.markBatchInvalid()},markBatchInvalid:function(){this._batchInvalid=!0},isBatchInvalid:function(){return this._batchInvalid},onUpdated:function(){this._batchInvalid=null},sort:function(y,q,_){var s=1<u.length;if(_=_&&1<t.length,s||_){for(var p,O,L,$,k=q[2],M=q[6],E=q[10],H=q[14],w=q[3],Q=q[7],x=q[11],S=q[15],X=0;X<2;X++){if(0===X){if(!_)continue;$=t}else{if(!s)continue;$=u}for(var T=0,i=$.length;T<i;T++)(L=(O=$[T].data)._position)?(p=L.x,O=O._54O,L=L.y,$[T].z=(k*p+M*O+E*L+H)/(w*p+Q*O+x*L+S)):$[T].z=0}_&&t.sort(function(y,q){var _=y.model3d;return _!==q.model3d?_?1:-1:y.z!==q.z?y.z-q.z:y.id-q.id}),s&&u.sort(y||$v)}}}},T6=B3._RenderLists=function(s){var p={};function _(y,q){var _=p[y=y||"main"];return!_&&q?p[y]=new X6(s):_}return{init:function(){for(var y in p)p[y].init();s._model3dInstancedBatchCount=0},onUpdated:function(){for(var y in p)p[y].onUpdated()},get:_,push:function(y,q){return _(y.data.getRenderLayer(),!0).push(y,q)},each:function(y){for(var q in p)y(p[q])},lists:p}},i6=B3.RenderTarget=function(y,q,_,s){var p,O=this;null!=q&&q.canvas?(p=q,q=_,_=s,s=arguments[4]):p=y.getGL(),s=s||{},s.cube?s.samples=0:s.samples=Math.min(y._glCapabilities.maxSamples,s.samples&&1<s.samples&&2===y._webGLVersion?s.samples:0),O.options=s,O.uuid=P.Math.generateUUID(),O.gv=y,O.init(y,p,s),O.format=s.format||6408,O.textureType=w6(y,s.textureType),O.generateMipmaps=!!s.generateMipmaps,O.depthInternalFormat=s.depthFormat||33189,s.samples&&!y._glCapabilities._maxSamplesChecked?O.setSize(p,q||1,_||1):O.setSize(p,q,_)},qn=(o.assign(B3.RenderTarget.prototype,{isRenderTarget:!0,bind:function(y,q){var _,s,p,O=this.options;O.autoSize&&(_=(p=this.gv).getDevicePixelRatio(),s=p.getWidth()*_,p=p.getHeight()*_,this.setSize(y,s,p)),O.cube?d4(y,this.frame[q]):d4(y,this.options.samples?this._MSAAFbo:this.frame),y._renderTargetStack.push(this)},unbind:function(y){y._renderTargetStack.pop(),yK(y),this.options.samples&&(y.bindFramebuffer(36008,this._MSAAFbo),y.bindFramebuffer(36009,this.frame),y.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,16384,9728),y.bindFramebuffer(36008,null),y.bindFramebuffer(36009,null))},isBinding:function(y){if(!(y=y.frameStack)||!y.length)return!1;var q=y[y.length-1];if(this.options.cube){for(var _=0;_<6;_++)if(this.frame[_]===q)return!0;return!1}return q===(this.options.samples?this._MSAAFbo:this.frame)},grabDepth:function(y){var q=this,_=this.gv.getGL();if(!_)return null;var s,p,O,L=q.options,$=L.samples;if(y&&!$)return q.depth;var k=q.depthInternalFormat,M=q.width,E=q.height;return y?(p=(s=(s=_._grabDepthRboFrame)?s:_._grabDepthRboFrame={frame:_.createFramebuffer()}).depthRbo)||(p=s.depthRbo=_.createRenderbuffer()):(O=(s=(s=_._grabDepthTextureFrame)?s:_._grabDepthTextureFrame={frame:_.createFramebuffer()}).depthTexture)||(O=s.depthTexture=q.gv.createTexture({empty:!0,wrapS:L.wrapS||33071,wrapT:L.wrapT||33071,filter:9728})),s.width===M&&s.height===E&&s.format===k||(d4(_,s.frame),y?(_.bindRenderbuffer(36161,p),_.renderbufferStorage(36161,k,M,E),_.framebufferRenderbuffer(36160,36096,36161,p),_.bindRenderbuffer(36161,null)):(_.activeTexture(33984),uK(_,O),_.texImage2D(3553,0,k,M,E,0,6402,36012===k?5126:33190===k?5125:5123,null),_.framebufferTexture2D(36160,36096,3553,O,0),uK(_,null),O._internalFormat=k),yK(_),s.width=M,s.height=E,s.format=k),_.bindFramebuffer(36008,$?this._MSAAFbo:this.frame),_.bindFramebuffer(36009,s.frame),_.blitFramebuffer(0,0,q.width,q.height,0,0,q.width,q.height,256,9728),_.bindFramebuffer(36008,null),_.bindFramebuffer(36009,null),y?p:O},isCube:function(){return this.options.cube},init:function(y,q,_){var s=_.samples,p=_.cube,O=this.texture=q.createTexture(),L=p?34067:3553,O=(q.activeTexture(33984),q.bindTexture(L,O),q.texParameteri(L,10242,_.wrapS||33071),q.texParameteri(L,10243,_.wrapT||33071),s?9728:9729);if(q.texParameteri(L,10241,_.minFilter||O),q.texParameteri(L,10240,_.magFilter||O),q.bindTexture(L,null),p){this.depth=[],this.frame=[];for(var $=0;$<6;$++)this.depth[$]=q.createRenderbuffer(),this.frame[$]=q.createFramebuffer()}else this.depth=q.createRenderbuffer(),this.frame=q.createFramebuffer();this.assureTexture()},assureTexture:function(){this.gv.setTexture(this.uuid,this.texture,"default"),P.Default.setImage(this.uuid,null)},releaseTexture:function(){return this.release()},release:function(){var y=this,q=y.gv.getGL();if(y.gv.deleteTexture(this.uuid),y.options.cube)for(var _=0;_<6;_++)q.deleteRenderbuffer(y.depth[_]),q.deleteFramebuffer(y.frame[_]);else q.deleteRenderbuffer(y.depth),q.deleteFramebuffer(y.frame),y._MSAAFbo&&(q.deleteRenderbuffer(y._MSAARbO),q.deleteFramebuffer(y._MSAAFbo))},getUUID:function(){return this.uuid},getTexture:function(){return this.texture},getSize:function(){return[this.width,this.height]},setSize:function(y,q,_){var s=this;if(q=Math.round(q),_=Math.round(_),q&&_&&(s.width!==q||s.height!==_)){s.width=q,s.height=_;var p=36161,O=s.options.samples,L=s.options.cube,$=L?34067:3553;if(O){var k=s.gv._glCapabilities;if(!k._maxSamplesChecked){for(y.bindRenderbuffer(p,s.depth),y.getError();1<O&&(y.renderbufferStorageMultisample(p,O,s.depthInternalFormat,q,_),y.getError());)O=Math.floor(O>>1);O<=1&&(O=0,y.texParameteri($,10241,s.options.minFilter||9729),y.texParameteri($,10240,s.options.magFilter||9729),y.renderbufferStorage(p,s.depthInternalFormat,q,_)),k._maxSamplesChecked=!0,k.maxSamples=s.options.samples=O,y.bindRenderbuffer(p,M5)}}if(O&&(s._MSAAFbo||(s._MSAAFbo=y.createFramebuffer(),s._MSAARbO=y.createRenderbuffer()),y.bindRenderbuffer(p,s._MSAARbO),y.renderbufferStorageMultisample(36161,O,32856,q,_),d4(y,s._MSAAFbo),y.framebufferRenderbuffer(36160,36064,p,s._MSAARbO),y.framebufferRenderbuffer(36160,36096,p,s.depth),yK(y),y.bindRenderbuffer(p,null)),y.activeTexture(33984),y.bindTexture($,s.texture),L)for(var M=0;M<6;M++)s.setupFrameBufferTextureAndDepth(y,s.frame[M],s.depth[M],34069+M);else s.setupFrameBufferTextureAndDepth(y,s.frame,s.depth,3553);s.generateMipmaps&&(2===gv._webGLVersion||e.isPOT(q)&&e.isPOT(_))&&(y.generateMipmap($),k=s.options.minFilter||(O?9728:9729),y.texParameteri($,10241,9728===k?9984:9987)),y.bindTexture($,null)}},setupFrameBufferTextureAndDepth:function(y,q,_,s){var p,O=this.format,L=this.textureType;(p=this.options.data)&&(this.options.data=null),y.texImage2D(s,0,Q6(this.gv,O,L),this.width,this.height,0,O,L,p||null),d4(y,q),y.framebufferTexture2D(36160,36064,s,this.texture,0),this.setupRenderBufferStorage(y,_),yK(y)},setupRenderBufferStorage:function(y,q){y.bindRenderbuffer(36161,q);var _=this.options.samples;_?y.renderbufferStorageMultisample(36161,_,this.depthInternalFormat,this.width,this.height):(y.renderbufferStorage(36161,this.depthInternalFormat,this.width,this.height),y.framebufferRenderbuffer(36160,36096,36161,q)),y.bindRenderbuffer(36161,null)},readPixels:function(y,q,_,s,p){var O,L=this.gv.getGL();d4(L,this.frame),O=5121===this.textureType?(p=p||new Uint8Array(4*_*s),5121):(p=p||new Float32Array(4*_*s),5126);try{L.readPixels(y,q,_,s,6408,O,p)}finally{yK(L)}return p},readPixelsAsync:function(y,q,_,s,p,O){if(!this.gv.isWebGL2())throw new Error("readPixelsAsync only work on WebGL2");var L,$,k,M,E,H,w=this.gv.getGL();d4(w,this.frame),L=5121===this.textureType?(p=p||new Uint8Array(4*_*s),5121):(p=p||new Float32Array(4*_*s),5126);try{var Q=tK(w),x=(w.bindBuffer(35051,Q),w.bufferData(35051,p.byteLength,35041),w.readPixels(y,q,_,s,6408,L,0),w.bindBuffer(35051,null),w.fenceSync(37143,0));w.flush()}finally{yK(w)}$=w,k=x,M=0,E=10,H=function(y){w.deleteSync(x),y&&(w.bindBuffer(35051,Q),w.getBufferSubData(35051,0,p),w.bindBuffer(35051,null)),w.deleteBuffer(Q),O(y?p:null)},function y(){var q=$.clientWaitSync(k,M,0);37149==q?H(!1):37147==q?m5(y,E):H(!0)}()},toCanvas:function(y,q){var _,s=this.width,p=this.height,O=this.readPixels(0,0,s,p),L=((q=q||w.createElement("canvas")).width!==s&&(q.width=s),q.height!==p&&(q.height=p),(_=y?((Gq=Gq||w.createElement("canvas")).width!==s&&(Gq.width=s),Gq.height!==p&&(Gq.height=p),Gq.getContext("2d")):q.getContext("2d")).createImageData(s,p));if(O instanceof Float32Array){for(var $=O.byteLength/O.BYTES_PER_ELEMENT,k=new Uint8Array($);0<=--$;){var M=O[$];M<0?M=0:1<M&&(M=1),k[$]=255*M}O=k}return L.data.set(O),_.putImageData(L,0,0),y&&(_=q.getContext("2d"),VA(_,{width:s,height:p,comps:[{scaleY:-1,type:"image",name:Gq,rect:[0,0,s,p]}]},k5,0,0,s,p)),q}}),B3.Interactor=function(y){this.gv=this.g3d=y}),N6=(O("Interactor",o,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()},fi:function(y){this.gv.fi(y)},startDragging:function(y){L8(this,y)}}),B3.DefaultInteractor=function(y){Kx(N6,this,[y])}),a6=(O("DefaultInteractor",qn,{getState:function(){return this._62O},setState:function(y){this._62O=y},handle_contextmenu:function(y){CA(y)},handle_mousewheel:function(y){this.gv.handleScroll(y,y.wheelDelta/40)},handle_DOMMouseScroll:function(y){2===y.axis&&this.gv.handleScroll(y,-y.detail)},handle_keydown:function(y){this.gv.handleKeyDown(y)},handle_mousedown:function(y){this.handle_touchstart(y)},handle_touchstart:function(y){CA(y);var q=this,_=q.gv,s=WA(y),p=(O=_.getDataInfoDuringInteract(y))?O.data:M5,O=O?O.part:M5,L=_.sm(),$=ll(y),k=eA(y);_.setFocus(y)&&(q._62O=M5,q._57I=M5,q.pendingClickThrough=M5,q.__lastClientPoint__=gA(y),p?rA(y)?L.co(p)?L.rs(p):L.as(p):L.co(p)?p instanceof vQ&&p.isClickThroughEnabled()&&WA(y)&&(q.pendingClickThrough=gA(y)):L.ss(p):s&&(rA(y)?_.isRectSelectable()&&(q._62O=dD):q._57I=gA(y)),q._31Q&&(uA(q._31Q),delete q._31Q,delete q._32Q),q._62O||(_.isFirstPersonMode()&&(GA(y)||AA(y)||2<k?q._62O="pan":_.isMouseRoamable()||xl(y)?(q._62O="roaming",q.foward=$&&WA(y),q._32Q=Un(),q._31Q=tA(q.tick,q)):s||(q._62O="roaming")),q._62O||(s&&$&&o6[O]?(q._62O=O,q.p3=p.p3()):s&&$&&W(p)&&_.isSelected(p)?_.isMovable(p)?(q._62O="move",q.p3=p.p3(),q.movedata=p):_._39Q(p)&&(q._62O="none"):xl(y)&&(2<k?q._62O="pan":2===k&&(q.dist=TU(y),q._62O="pinch")))),q.point=_.lp(y),L8(q,y),fA(y)?_.handleDoubleClick(y,p,O):_.handleClick(y,p,O))},tick:function(){var y=this.gv,q=y._moveStep;this.point&&y.isWalkable()&&(this._32Q&&(q*=(Un()-this._32Q)/50),y.walk(this.foward?q:-q),this._32Q=Un(),this._31Q=tA(this.tick,this))},handle_mouseup:function(y){this.handle_touchend(y)},handle_touchend:function(y){var q=this._57I;q&&(vA(q,gA(y))<=1&&this.gv.sm().cs(),this._57I=M5),(q=this.pendingClickThrough)&&(vA(q,gA(y))<=1&&(q=this.gv.getDataInfoDuringInteract(y))&&q.data instanceof vQ&&q.data.isClickThroughEnabled()&&(q=this.gv.getDataInfoDuringInteract(y,!0))&&(y.clickThrough=!0,this.gv.sm().ss(q.data)),this.pendingClickThrough=null)},handleWindowMouseMove:function(y){this.handleWindowTouchMove(y)},handleWindowTouchMove:function(q){var _,s,y=this,p=y.gv,O=y._62O,L=y.point,$=p.dm(),k=p.lp(q),M=k.x-L.x,E=k.y-L.y,H=p.getWidth(),w=p.getHeight();if(H&&w){var Q=gA(q),Q=Au(p,Q,y.__lastClientPoint__),Q=vA({x:0,y:0},Q),x=-O5*M/H,S=-O5*E/w;if("roaming"===O)y.rotate(q,x/2,S/2);else if(O===t6||O===u6||O===J6)p._86O||$.beginTransaction(),p.fi({kind:p._86O?"betweenEditRotation":"beginEditRotation",event:q}),p._86O=1,p.sm().each(function(y){var q;W(y)&&p.isRotationEditable(y)&&(q=F5(x)>F5(S)?x:S,O===t6?y.setRotationX(y.getRotationX()+q):O===u6?y.setRotationY(y.getRotationY()+q):O===J6&&y.setRotationZ(y.getRotationZ()+q))});else if("move"===O||o6[O]){if(O===D6||O===c6||O===R6)p._87O||$.beginTransaction(),p.fi({kind:p._87O?"betweenEditScale":"beginEditScale",event:q}),p._87O=1;else{if(!p._moving){if(Q<E5.touchMoveThreshold)return;$.beginTransaction()}p.fi({kind:p._moving?"betweenMove":"beginMove",event:q}),p._moving=1}var X,T,Q=y.p3,$=p.getPositionInfo(Q),i=CK(p),N=O===F6?"x":O===V6?"y":O===h6?"z":O===D6?"sx":O===c6?"sy":O===R6?"sz":p.getMoveMode(q,y.movedata),M=M/H*$.width,E=-1*E/w*$.height,H=[i[0]*M,i[4]*M,i[8]*M],w=[i[1]*E,i[5]*E,i[9]*E],$=H[0]+w[0],i=H[1]+w[1],H=H[2]+w[2],w=[Q[0]+$,Q[1]+i,Q[2]+H],a=i8(p.getEye(),w,!0);if("xyz"===N?(X=w,p.moveSelection($,i,H)):"xz"===N?(X=wK(p,Q,[0,1,0],w))&&p.moveSelection(X[0]-Q[0],0,X[2]-Q[2]):"xy"===N?(X=wK(p,Q,[0,0,1],w))&&p.moveSelection(X[0]-Q[0],X[1]-Q[1],0):"yz"===N?(X=wK(p,Q,[1,0,0],w))&&p.moveSelection(0,X[1]-Q[1],X[2]-Q[2]):"x"===N||"sx"===N?(a[0]=0,(X=wK(p,Q,a,w))&&(T=X[0]-Q[0],"x"===N?p.moveSelection(T,0,0):p.sm().each(function(y){W(y)&&p.isSizeEditable(y)&&(_=y.getScaleX()+T/100,s=_/y.getScaleX(),y.setScaleX(_),GA(q)&&(y.setScaleY(y.getScaleY()*s),y.setScaleTall(y.getScaleTall()*s)))}))):"y"===N||"sy"===N?(a[1]=0,(X=wK(p,Q,a,w))&&(T=X[1]-Q[1],"y"===N?p.moveSelection(0,T,0):p.sm().each(function(y){W(y)&&p.isSizeEditable(y)&&(_=y.getScaleTall()+T/100,s=_/y.getScaleTall(),y.setScaleTall(_),GA(q)&&(y.setScaleY(y.getScaleY()*s),y.setScaleX(y.getScaleX()*s)))}))):"z"!==N&&"sz"!==N||(a[2]=0,(X=wK(p,Q,a,w))&&(T=X[2]-Q[2],"z"===N?p.moveSelection(0,0,T):p.sm().each(function(y){W(y)&&p.isSizeEditable(y)&&(_=y.getScaleY()+T/100,s=_/y.getScaleY(),y.setScaleY(_),GA(q)&&(y.setScaleX(y.getScaleX()*s),y.setScaleTall(y.getScaleTall()*s)))}))),!X)return;y.p3=X}else O===dD?(($=y.div)||($=y.div=zx(),gx(y.getView(),$),$.op=L,$.style.background=p.getRectSelectBackground()),p.fi({kind:p._rectSelecting?"betweenRectSelect":"beginRectSelect",event:q}),p._rectSelecting=1,$.rect=bA($.op,k),h($,$.rect)):"pinch"===O&&2===eA(q)?(p.fi({kind:p._pinching?"betweenPinch":"beginPinch",event:q}),p._pinching=1,T=TU(q),p._lastZoomLP||(p._lastZoomLP=(H=(i=q).touches[0],i=i.touches[1],a=H.clientX,H=H.clientY,{x:(a+i.clientX)/2,y:(H+i.clientY)/2})),p.handlePinch(T,y.dist),y.dist=T):"pan"===O||GA(q)||AA(q)?y.pan(q,M,E):"none"===O||p.isFirstPersonMode()||y.rotate(q,x,S);y.point=k}},pan:function(y,q,_){var s,p,O=this.gv;O.isPannable()&&(p=O.getWidth(),s=O.getHeight(),p&&s&&(p=q/p*(q=O.getCenterInfo()).width,_=-1*_/s*q.height,O.fi({kind:O._panning?"betweenPan":"beginPan",event:y}),O._panning=1,O.pan(-p,-_)))},rotate:function(y,q,_){var s=this.gv;s.isRotatable()&&(s.fi({kind:s._rotating?"betweenRotate":"beginRotate",event:y}),s._rotating=1,s.rotate(q,_))},handleWindowMouseUp:function(y){this.handleWindowTouchEnd(y)},handleWindowTouchEnd:function(y){var q,_,s,p,O,L=this,$=L.gv,k=$.dm(),M=L.div;M&&((q=$.getDatasInRect(M.rect)).isEmpty()||(_=$.sm(),s=_.toSelection(),p=GA(y),O=y.altKey,q.each(function(y){_.co(y)?p&&!O||s.remove(y):(!O||p&&O)&&s.add(y)}),_.ss(s)),$8(M)),$._moving&&(delete $._moving,$.fi({kind:"endMove",event:y}),$.onMoveEnded(),k.endTransaction()),$._panning&&(delete $._panning,$.fi({kind:"endPan",event:y}),$.onPanEnded()),$._rotating&&(delete $._rotating,$.fi({kind:"endRotate",event:y}),$.onRotateEnded()),$._86O&&(delete $._86O,$.fi({kind:"endEditRotation",event:y}),k.endTransaction()),$._87O&&(delete $._87O,$.fi({kind:"endEditScale",event:y}),k.endTransaction()),$._pinching&&(delete $._pinching,$.fi({kind:"endPinch",event:y}),$.onPinchEnded()),$._rectSelecting&&(delete $._rectSelecting,$.fi({kind:"endRectSelect",event:y}),$.onRectSelectEnded()),$._walking&&(delete $._walking,$.fi({kind:"endWalk",event:y}),$.onWalkEnded()),$._lastZoomLP=$._lastZoomHit=null,L.dist=L.point=L._62O=L.p3=L.movedata=L.div=L._57I=L.pendingClickThrough=L._32Q=L._31Q=L.foward=M5,L.__lastClientPoint__=M5}}),B3.MapInteractor=function(y){Kx(a6,this,[y]),this._keepHorizon=!0,this._threshold=2,this._touchScaleThreshold=.05,this._touchRotateThreshold=.03,this._touchScaleCheckAccuracy=.01,this._panButton="right",this._minPhi=0,this._maxPhi=5*Math.PI/12}),l6=(O("MapInteractor",qn,{setUp:function(){a6.superClass.setUp.call(this);var y=this.gv;this.__oldMinPhi__=y.getRotateMinPhi(),this.__oldMaxPhi__=y.getRotateMaxPhi(),y.setRotateMinPhi(this._minPhi),y.setRotateMaxPhi(this._maxPhi)},tearDown:function(){a6.superClass.tearDown.call(this);var y=this.gv;y.setRotateMinPhi(this.__oldMinPhi__),y.setRotateMaxPhi(this.__oldMaxPhi__),delete this.__oldMinPhi__,delete this.__oldMaxPhi__},handle_contextmenu:function(y){CA(y)},handle_mousewheel:function(y){this.gv.handleScroll(y,y.wheelDelta/40)},handle_DOMMouseScroll:function(y){2===y.axis&&this.gv.handleScroll(y,-y.detail)},handle_keydown:function(y){this.gv.handleKeyDown(y)},handle_mousedown:function(y){this.handle_touchstart(y)},handle_touchstart:function(y){CA(y);var q,_,s,p=this.gv;p.setFocus(y)&&(q=(_=p.getDataInfoAt(y))?_.data:M5,_=_?_.part:M5,this.__lastClientPoint__=gA(y),s=this.editing={point:p.lp(y),data:q,part:_},xl(y)?s.touch=!0:(s.touch=!1,s.clickLeft=WA(y),AA(y)?s.pan=!0:s.pan="left"===this.panButton===s.clickLeft),q&&p._39Q(q)&&(s.preventDefault=!0),L8(this,y),fA(y)?p.handleDoubleClick(y,q,_):p.handleClick(y,q,_))},handle_mouseup:function(y){this.handle_touchend(y)},handle_touchend:function(y){},handleWindowMouseMove:function(y){this.handleWindowTouchMove(y)},handleWindowTouchMove:function(y){var q=this,p=q.gv,_=q.editing;if(_){var s=p.lp(y),O=_.point,L=s.x-O.x,O=s.y-O.y;if(!_.moved){if(Math.abs(L)<q.threshold&&Math.abs(O)<q.threshold&&!(y.touches&&1<y.touches.length))return;_.moved=!0}if(!_.preventDefault){_.point=s;var $,k,M,E,H,w,Q=_.part;if(o6[Q]){var s=_.data,x=p.dm(),S=p.getWidth(),X=p.getHeight(),T=-O5*L/S,i=-O5*O/X;if(Q===t6||Q===u6||Q===J6){p._86O||x.beginTransaction(),p.fi({kind:p._86O?"betweenEditRotation":"beginEditRotation",event:y}),p._86O=1;var N=F5(T)>F5(i)?T:i;p.sm().each(function(y){W(y)&&p.isRotationEditable(y)&&(Q===t6?y.setRotationX(y.getRotationX()+N):Q===u6?y.setRotationY(y.getRotationY()+N):Q===J6&&y.setRotationZ(y.getRotationZ()+N))})}else{var a,l,j,Z,s=s.p3(),L=L/S*(C=p.getPositionInfo(s)).width,O=-1*O/X*C.height,K=[(C=CK(p))[0]*L,C[4]*L,C[8]*L],C=[C[1]*O,C[5]*O,C[9]*O],K=[s[0]+(K[0]+C[0]),s[1]+(K[1]+C[1]),s[2]+(K[2]+C[2])],C=i8(p.getEye(),K,!0);if(Q===D6||Q===c6||Q===R6)p._87O||x.beginTransaction(),p.fi({kind:p._87O?"betweenEditScale":"beginEditScale",event:y}),p._87O=1,(a=wK(p,s,C,K))&&(V=0,Q===D6?l="X":Q===c6?(l="Tall",V=1):Q===R6&&(l="Y",V=2),(j=["X","Y","Tall"]).splice(j.indexOf(l),1),Z=GA(y),F=(a[V]-s[V])/100,p.sm().each(function(q){var y,_,s;W(q)&&p.isSizeEditable(q)&&(y=q["getScale"+l](),q["setScale"+l](_=y+F),Z&&(s=_/y,j.forEach(function(y){q["setScale"+y](q["getScale"+y]()*s)})))}));else if(Q===F6||Q===V6||Q===h6){if(!p._moving){var B=gA(y),B=Au(p,B,q.__lastClientPoint__);if(vA({x:0,y:0},B)<E5.touchMoveThreshold)return;x.beginTransaction()}p.fi({kind:p._moving?"betweenMove":"beginMove",event:y}),p._moving=1;var F,V=0;Q===F6?V=0:Q===V6?V=1:Q===h6&&(V=2),C[V]=0,(a=wK(p,s,C,K))&&(F=a[V]-s[V],(B=[0,0,0])[V]=F,p.moveSelection.apply(p,B))}}}else _.touch?2!==(x=y.touches.length)?q.pan(y,L,O):x<=1||(K=(C=y.touches)[0].clientX,a=C[0].clientY,B={x:(s=C[1].clientX)-K,y:(V=C[1].clientY)-a},x=_.lastCenter,C=Math.atan2(B.y,B.x),$=0,(M=_.theta)==M5?M=_.theta=C:($=C-M,_.thetaStarted||Math.abs($)>q.touchRotateThreshold?(_.thetaStarted=!0,_.theta=C):$=0),M=u*(a+V)/2/p.getHeight(),C=0,(k=_.phi)==M5?k=_.phi=M:(C=M-k,_.phiStarted||Math.abs(C)>q.touchRotateThreshold?(_.phiStarted=!0,_.phi=M):C=0),k=Math.sqrt(B.x*B.x+B.y*B.y),(M=_.vlen)?(B=K-x.x,H=a-x.y,w=s-x.x,x=V-x.y,B=Math.sqrt(B*B+H*H),H=Math.sqrt(w*w+x*x),(x=q._sign2(B-(w=M/2)))*(B=q._sign2(H-w))<0||0===x&&0===B?(E=1,_.vlen=k):(E=E||k/M,_.scaleStarted||Math.abs(E-1)>q.touchScaleThreshold?(_.vlen=k,_.scaleStarted=!0):E=1)):(M=_.vlen=k,E=1),1!==E&&p.setZoom(E),(C||$)&&q.rotate(y,$,-C),_.lastCenter={x:(s+K)/2,y:(V+a)/2}):_.pan?q.pan(y,L,O):(S=p.getWidth(),X=p.getHeight(),S&&X&&(T=-O5*L/S,i=-O5*O/X,q.rotate(y,T,i)))}}},_sign2:function(y){return Math.abs(y)<this._touchScaleCheckAccuracy?0:0<y?1:-1},handleWindowMouseUp:function(y){this.handleWindowTouchEnd(y)},handleWindowTouchEnd:function(y){var q,_,s=this.editing;this.editing=null,s&&(q=this.gv,s.moved||!s.clickLeft&&!s.touch?(q._panning=null,q._rotating=null,q.fi({kind:s.pan?"endPan":"endRotate",event:y})):(_=(_=(s=q.getDataInfoDuringInteract(y))&&s.data)instanceof vQ&&_.isClickThroughEnabled()&&(s=q.getDataInfoDuringInteract(y,!0))?s.data:_)?q.sm().setSelection([_]):q.sm().clearSelection(),s=q.dm(),q._moving&&(delete q._moving,q.fi({kind:"endMove",event:y}),q.onMoveEnded(),s.endTransaction()),q._86O&&(delete q._86O,q.fi({kind:"endEditRotation",event:y}),s.endTransaction()),q._87O&&(delete q._87O,q.fi({kind:"endEditScale",event:y}),s.endTransaction()))},pan:function(y,q,_){var s=this.gv;if(s.isPannable()){var p=s.getWidth(),O=s.getHeight();if(p&&O){var L=s.getCenterInfo(),q=-q/p*L.width,p=+_/O*L.height,_=(s.fi({kind:s._panning?"betweenPan":"beginPan",event:y}),s._panning=1,this.keepHorizon);if(!(_=(O=this.editing.touch)&&y.touches&&1<y.touches.length||!O&&GA(y)?!_:_))return s.pan(q,p);(q||p)&&(O=[(L=CK(s))[0]*q,L[4]*q,L[8]*q],y=[L[1],0,L[9]],(_=Math.sqrt(y[0]*y[0]+y[2]*y[2]))&&(y=[y[0]/_*p,0,y[2]/_*p]),q=O[0]+y[0],L=O[1]+y[1],_=O[2]+y[2],p=s._center,O=s._eye,p[0]+=q,p[1]+=L,p[2]+=_,O[0]+=q,O[1]+=L,O[2]+=_,s.fp(LD,M5,O),s.fp(OD,M5,p))}}},rotate:function(y,q,_){var s,p,O=this.gv;O.isRotatable()&&(p=O._center,s=O._eye,s=i8(s,p),p=D5(B5(s[0]*s[0]+s[2]*s[2]),s[1]),_=EK(O,p+_)-p,O.fi({kind:O._rotating?"betweenRotate":"beginRotate",event:y}),O._rotating=1,O.rotate(q,_))}}),o.defineProperties(a6.prototype,{panButton:{get:function(){return this._panButton},set:function(y){this._panButton=y}},minPhi:{get:function(){return this._minPhi},set:function(y){this.gv.setRotateMinPhi(this._minPhi=y)}},maxPhi:{get:function(){return this._maxPhi},set:function(y){this.gv.setRotateMaxPhi(this._maxPhi=y)}},keepHorizon:{get:function(){return this._keepHorizon},set:function(y){this._keepHorizon=y}},threshold:{get:function(){return this._threshold},set:function(y){this._threshold=y}},touchScaleThreshold:{get:function(){return this._touchScaleThreshold},set:function(y){this._touchScaleThreshold=y}},touchRotateThreshold:{get:function(){return this._touchRotateThreshold},set:function(y){this._touchRotateThreshold=y}}}),B3.GlobeInteractor=function(Q,y){function s(y){return Q._81O=null,y=Q.getHitPosition(y,Q.getCenter(),H.copy(Q.getEye()).sub(i.copy(Q.getCenter())).toArray()),w.origin.copy(Q.getEye()),w.direction.copy(y).sub(w.origin).normalize(),w.intersectEllipsoid(N)}function x(y,q){var _;T&&(_=Date.now(),T.deltaTime=T.lastTime?_-T.lastTime:1e3,T.lastTime=_,T.lastAxis=y,T.lastAngle=q),q&&(p.setFromAxisAngle(y,q),Q.setEye(H.copy(Q.getEye()).applyQuaternion(p).toArray()),Q.setCenter(H.copy(Q.getCenter()).applyQuaternion(p).toArray()),Q.setUp(H.copy(Q.getUp()).applyQuaternion(p).toArray()))}function S(y){return Math.abs(y)<.01?0:0<y?1:-1}Kx(l6,this,[Q]);var O,X=y.radius||6378137,$=this,T=null,p=(rq||((rq=zx()).style.border="",rq.style.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEyUlEQVRYR62XW0xcVRSG/58cmIG2HmstE9N4SX2xtVqBCISoFS/RmDSpKQSvTWNixUStQSqVyBQYJUGttrQVtYkPatuQPmhivMUHqbUBZ2itl1qjTzZpImNUZhDLsUeWWXgOOd2cgcGyk3mYs/de69trr70uxP8YIlJKMi0i9wIgyf0iEiM5PFdxzGeDiBQAuB7AjQBuALCN5NcGQDmANgBfeL8UyYnZ5M8KICJ3AXgAwAlfOMl/VHAQwPtveYAKuQLA2yQ/ngliRgAR2QogA2AvSdcUZAIE50VEYR4BsIDkC7kgQgFE5GIAuwDsJnkk1+aZAPw9IqLX1gjgcZK/m7KmAXjK4wBaSf4ZplxEIgCuA3Cz3gSAfgDHSf6dY/0FAJ4D0G5ChAEcAPBwmHIRqXNd90nLsiocx/k+k8n8oK/Atu2rIpHIStd1v7QsawfJd0Ouywawh6T609Q4B8C788NhZnddt29sbGxBd3f39q6urtNhJ43H48uam5u3lJSUjFiWdV8IxE0Aqki+6M9NAXjefjnJXsOZogBGBgYGttbU1Hw427PS+cHBwbVVVVUJAItJOoa8xwD8RPIT/T4J4L3zfQAeNL1dRMZra2ur+/v7/8pHub+mvr7+wr6+vs8KCgoWGABFAN4EsEHjhA9QBeA2ks8HF6vZk8nkQL4nNwGTyeTa8vLycsuy7jcg1Mk/IpnyAZoBaOQ6FHg+ddlsdqNt201zObm5NpvN7ly0aNHrJN8LyL4FwGqSr/gAOrnej3C60HXdw/F4PJ7L4fKFSiQSl7W0tLQVFRWtCQDoNRwguZ6aWABcorE9sEDf+QjJ1fkqmmmdiHwHoCToXyKiceR0rkhY5TjOq9FoVLPdeY/x8fG+SCSySe/cFKYWCFOyPJ1Or4zFYh3nrR3A8PBwe2lp6TcAfg4DmBYwAFyRTqdXxWKx9nkE+DYUIEyBiFQ6jvNaNBq9Zz4AZruCGIBlJI8ZXpolee18AORwwgoAp/xnqMmjPuilZ8+ePZRIJNo7OztD436+YB0dHZe2trY+W1hYWGsccD/JOh/gKQBHSWpanRwicnc2m91k2/bmfJWFrRsdHd29cOHCXSTfD8i+FcA1JHcEQ/HtJDVnTw3XdfcPDQ0dra6unto8F5hUKrWurKxslWVZG4L7RGQbgA9IDgWT0VsANprJaGJi4kxDQ8OagwcPjsxFeWNj49Le3l6N91qMTA2vmNnr6fovGXkmvxPAlST3hGz4LZVKbausrMzLEnryioqKNpJLzCpJRJ4AcJLkp6rHLEieBjBA8rB5Wtd1942NjS3p6el5qa2t7VSYNdThmpqaWoqLi38xze4dUku4CpLb/f1hJZnWBY+SzJpKRGSdV5LVOI5zIpPJnNQ1tm2viEQiV7uue8SyrJeDDhew8GIAO0me4w9hABdp8ahNBkktyacNr+Qu84pSndfX81VY6e6dXJV3AoiT/CMoMFcyUogeAG+Q/DyX8+VZlqvZHwKw2VQ+zQdCTL4FwBkPZFrJPUtjoildG5PC4J2bOvJpze7QWhHAj4HWbBImpDXTQsPvH5cDeMf39lxWnBXAU6TNqcZu7fn0lyB53GhOdf6ZQHN6bF6a0xxOuJTkrwbA5LdcJ831/V8SOUYQxYGhRwAAAABJRU5ErkJggg==)"),new AB),H=new Q5,i=new Q5,k=new Q5,w=new GB,L="number"==typeof X?{x:X,y:X,z:X}:X,N={center:new Q5(0,0,0),radius:L};$._showCrossIcon=function(y){gx($.getView(),rq),h(rq,{x:y.clientX-16,y:y.clientY-16,width:32,height:32})},$._hideCrossIcon=function(){$8(rq)},$._scrollImpl=function(y,q){(T={point:Q.lp(y),screen:gA(y),hit:s(y),type:"right"}).hitNormalize=T.hit?T.hit.clone().normalize():new Q5,y={clientX:T.screen.x,clientY:T.screen.y+10*q},$._handleMoveImpl(y),$._endMoveImpl(y)},$._startMoveImpl=function(y){O&&(O.stop(!0),O=null),(T={point:Q.lp(y),screen:gA(y),hit:s(y)}).hitNormalize=T.hit?T.hit.clone().normalize():new Q5,xl(y)?1===y.touches.length?T.hit&&(T.type="left"):2===y.touches.length&&(T.type="touch2"):(WA(y)?T.hit&&(T.type="left"):zA(y)?T.type="right":AA(y)&&T.hit&&(T.type="middle"),!T.hit||"right"!==T.type&&"middle"!==T.type||$._showCrossIcon(y)),T.type&&L8($,y)},$._handleMoveImpl=function(y){if(T)switch(T.type){case"left":return $._handleLeft(y);case"right":return $._handleRight(y);case"middle":return $._handleMiddle(y);case"touch2":return $._handleTouch2(y)}},$._endMoveImpl=function(y){var _,s,p;T&&(this._hideCrossIcon(),"left"!==T.type&&"middle"!==T.type||(_=T.lastAngle/(T.deltaTime||30)*1e3,s=T.lastAxis,p=T.lastTime,O=RA({action:function(){var y=Date.now(),q=(y-p)/1e3;p=y,_*=Math.pow(Math.abs($.decelerationRate),3*q),Math.abs(_)<.01?(_=0,O&&O.stop()):x(s,_*q)},duration:5e3})),T=null)},$._handleLeft=function(y){if(!T.finished){var q=gA(y),_=function(y,q){Q._81O=null,w.origin.copy(Q.getEye());for(var _,s,p=Q.getCenter(),O=H.copy(Q.getEye()).sub(i.copy(Q.getCenter())).toArray(),L=1,$=16,k=0,M=1,E={x:0,y:0};$--;){if(E.x=q.x+(y.x-q.x)*L,E.y=q.y+(y.y-q.y)*L,_=Q.getHitPosition(E,p,O),w.direction.copy(_).sub(w.origin).normalize(),(s=w.intersectEllipsoid(N))&&1===L)return{hit:s};s?k=L:M=L,L=(k+M)/2}return{hit:s,out:L<1}}(q,T.lastScreen||T.screen);if(T.lastScreen=q,!_.hit)return T.finished=!0,void $._endMoveImpl(y);(q=_.hit).normalize();var s=T.hitNormalize,p=Math.acos(q.dot(s));x(q=q.cross(s).normalize(),p),_.out&&(T.finished=!0,$._endMoveImpl(y))}},$._handleRight=function(y){var q,_=(T.lastScreen||T.screen).y;(y=(T.lastScreen=gA(y)).y-_)&&(_=Math.min(.5,y*$.scaleSpeed),H.copy(Q.getEye()),y=(y=T.hit)||H.clone().divide(L).normalize().multiply(L),i.copy(H).lerp(y,_),Q.setEye(i.toArray()),H.copy(Q.getUp()),i.normalize(),y=H.clone().cross(i).normalize(),k.copy(Q.getCenter()),k.sub(y.multiplyScalar(k.dot(y))),Q.setCenter(k.toArray()),T.hit&&(_=s(T.screen),y=T.hitNormalize,_&&(_.normalize(),q=Math.acos(_.dot(y)),_=_.cross(y).normalize(),q&&x(_,q))))},$._handleTouch2=function(y){var q,_,s,p,O,L,$,k,M,E,H,w;2===y.touches.length&&(q=(y=y.touches)[0].clientX,_=y[0].clientY,w={x:(s=y[1].clientX)-q,y:(y=y[1].clientY)-_},E=T.lastCenter,L=Math.atan2(w.y,w.x),p=0,(O=T.theta)==M5?O=T.theta=L:(p=L-O,T.thetaStarted||.03<Math.abs(p)?(T.thetaStarted=!0,T.theta=L):p=0),O=Math.sqrt(w.x*w.x+w.y*w.y),(L=T.vlen)?(H=q-E.x,k=_-E.y,M=s-E.x,E=y-E.y,H=Math.sqrt(H*H+k*k),k=Math.sqrt(M*M+E*E),(E=S(H-(M=L/2)))*(H=S(k-M))<0||0===E&&0===H?($=1,T.vlen=O):($=$||O/L,T.scaleStarted||.05<Math.abs($-1)?(T.vlen=O,T.scaleStarted=!0):$=1)):(L=T.vlen=O,$=1),w=i.copy(Q.getEye()).clone(),1!==$&&Q.setEye(w.setLength((w.length()-X)/$+X).toArray()),p&&x(w.normalize(),p),T.lastCenter={x:(s+q)/2,y:(y+_)/2})},$._handleMiddle=function(y){var y=gA(y),q=T.screen,_=((T.screen=y).y-q.y)/180*Math.PI*$.rollSpeed,s=(i.copy(Q.getCenter()).sub(H.copy(Q.getEye())).normalize(),H.copy(Q.getUp()).cross(i).normalize(),i.copy(Q.getEye()).sub(T.hit).applyAxisAngle(H,_).add(T.hit),i.clone()),p=(i.copy(Q.getCenter()).sub(T.hit).applyAxisAngle(H,_).add(T.hit),i.clone()),O=i.copy(Q.getUp()).applyAxisAngle(H,_).clone(),L=!1,_=(0<_&&(k.copy(O),i.copy(p).sub(s).normalize(),H.copy(s).multiplyScalar(-1).normalize(),0<H.dot(k)-i.dot(k)&&(L=!0)),L||0<=k.copy(T.hit).sub(s).dot(T.hitNormalize)&&(L=!0),L||(Q.setEye(s.toArray()),Q.setCenter(p.toArray()),Q.setUp(O.toArray())),-(y.x-q.x)/180*Math.PI*$.rotateSpeed);x(T.hitNormalize,_)}}),j6=(O("GlobeInteractor",qn,{handle_contextmenu:function(y){CA(y)},handle_mousewheel:function(y){this._scrollImpl(y,y.wheelDelta/40)},handle_DOMMouseScroll:function(y){2===y.axis&&this._scrollImpl(y,-y.detail)},handle_keydown:function(y){this.gv.handleKeyDown(y)},handle_mousedown:function(y){this.handle_touchstart(y)},handle_touchstart:function(y){CA(y);var q,_,s=this.gv;s.setFocus(y)&&((q=(_=s.getDataInfoAt(y))?_.data:M5)&&s.isInteractive(q)||this._startMoveImpl(y),_=_?_.part:M5,fA(y)?s.handleDoubleClick(y,q,_):s.handleClick(y,q,_))},handle_mouseup:function(y){this.handle_touchend(y)},handle_touchend:function(y){},handleWindowMouseMove:function(y){this.handleWindowTouchMove(y)},handleWindowTouchMove:function(y){this._handleMoveImpl(y)},handleWindowMouseUp:function(y){this.handleWindowTouchEnd(y)},handleWindowTouchEnd:function(y){this._endMoveImpl(y)}}),o.defineProperties(l6.prototype,{rotateSpeed:{get:function(){return this._rotateSpeed||.3},set:function(y){this._rotateSpeed=y}},rollSpeed:{get:function(){return this._rollSpeed||.1},set:function(y){this._rollSpeed=y}},scaleSpeed:{get:function(){return this._scaleSpeed||.002},set:function(y){this._scaleSpeed=y}},decelerationRate:{get:function(){return this._decelerationRate||.04},set:function(y){this._decelerationRate=y}}}),function(y){return[((y|=2147483648)>>16&255)/255,(y>>8&255)/255,(255&y)/255,(y>>24&255)/255]}),Z6=function(y){this.gv=y,this.gv.pickColorMap={_pickIdUsed:2e3}},K6=(w8(Z6,o,{_iv:!0,iv:function(){this._iv=!0},get:function(y,q,_){if(this.validate(),!this.gv.getGL())return M5;var s,p,O=this._resolution,L=this.renderTarget,$=Math.round(y.x*O),k=Math.ceil(y.width*O),M=Math.ceil(y.height*O),y=L.getSize()[1]-Math.round(y.y*O)-M,E=K5(k/2),H=L.readPixels($,y,k,M),w=0,Q=H.length,x=q?M5:new n,S=q?M5:{};if(q){for(;w<=E;w++)for(var X=E-w,T=E+w,i=X;i<=T;i++)for(var N=X;N<=T;N++)if((i===X||i===T||N===X||N===T)&&(s=this.info(H,4*(i*k+N)))&&(!_||!1!==_(s)))return s}else for(;w<Q;w+=4)!(s=this.info(H,w))||_&&!1===_(s)||S[(p=s.data)._id]||(x.add(p),S[p._id]=p);return x},info:function(y,q){return this.gv.pickColorMap[(y[q]<<16)+(y[q+1]<<8)+y[q+2]+((127&y[q+3])<<24)]},getResolution:function(){return this._resolution},dispose:function(){YK(this.gv,this.renderTarget),this.renderTarget=null},validate:function(y){var q,_,s,p,O=this.gv,L=O.getGL();L&&(_=this._resolution=O._pickerResolution*O.getDevicePixelRatio(),q=Math.round(_*O.getWidth()),_=Math.round(_*O.getHeight()),(s=this.renderTarget)?s.setSize(L,q,_):this.renderTarget=s=new i6(O,q,_),this._iv&&(p=this._iv=!1,O._40Q.each(function(y){!p&&y.isBatchInvalid()&&(p=!0)}),p&&O.updateScene(),s.bind(L),L.clear(16384),O.overlappingBox.clear(),O.setViewport(L,0,0,q,_),O.renderPickScene(),s.unbind(L)))}}),function(y){this.gv=y}),C6=(w8(K6,o,{gap:0,size:0,_42:function(y){var q,_=this,s=_.gv,p=s._gridGap,O=s._gridSize;if(s._gridVisible){if(_.gap!==p||_.size!==O){for(var L=[],$=s._gridSize/2,k=p*$,M=0;M<2*$+1;M++){var E=6*M,H=6*(2*$+1)+E;L[E]=-k,L[1+E]=0,L[2+E]=M*p-k,L[3+E]=k,L[4+E]=0,L[5+E]=M*p-k,L[H]=M*p-k,L[1+H]=0,L[2+H]=-k,L[3+H]=M*p-k,L[4+H]=0,L[5+H]=k}_.vs=new T8(L),_.gap=p,_.size=O}L3(s),WK(y),fK(y),(O=!s._fogDisabled)&&((q=S5.for(y).directUniforms()).uFog=!1),gK(y,1,s._gridColor,s._buffer.vs,_.vs),vK(y,0,_.vs.length/3,1),O&&(q.uFog=!0),GK(y),AK(y)}else _.vs=_.gap=_.size=M5}}),function(y){this.gv=y}),B6=(w8(C6,o,{_42:function(y){var q,_,s,p,O=this.gv,L=O._buffer.vs,$=O._axisXColor,k=O._axisYColor,M=O._axisZColor,E=O._originAxisVisible,H=O._centerAxisVisible;(E||H)&&(_=e5?4:6,L3(O),WK(y),fK(y),E&&(s=O.getCenterInfo(),p=s5(s.width,s.height)/5,gK(y,1.5,$,L,new T8([0,0,0,p,0,0,E=.8*p,q=.05*p,0,E,0,q,E,-q,0,E,0,-q,E,q,0,0,0,0,0,p,0,q,E,0,0,E,q,-q,E,0,0,E,-q,q,E,0,0,0,0,0,0,p,q,0,E,0,q,E,-q,0,E,0,-q,E,q,0,E])),vK(y,0,2,1),vK(y,1,6,_),gK(y,M5,k),vK(y,7,2,1),vK(y,8,6,_),gK(y,M5,M),vK(y,14,2,1),vK(y,15,6,_)),H&&(E=(q=O._center)[0],_=q[1],H=q[2],s=O.getPositionInfo(q),p=s5(s.width,s.height)/20,gK(y,1.5,$,L,new T8([E,_,H,E+p,_,H,E,_,H,E,_+p,H,E,_,H,E,_,H+p])),vK(y,0,2,1),gK(y,M5,k),vK(y,2,2,1),gK(y,M5,M),vK(y,4,2,1)),GK(y),AK(y))}}),function(y){this.gv=y}),F6="edit_tx",V6="edit_ty",h6="edit_tz",t6="edit_rx",u6="edit_ry",J6="edit_rz",D6="edit_sx",c6="edit_sy",R6="edit_sz",o6={},Y6=(o6[F6]=101,o6[V6]=102,o6[h6]=103,o6[t6]=104,o6[u6]=105,o6[J6]=106,o6[D6]=107,o6[c6]=108,o6[R6]=109,w8(B6,o,{_42:function(y){var q,_,s,p,O,L,$,k,M,E,H,w,Q,x,S=this,X=S.gv,T=X.sm().ld();!T||!X.isEditable(T)||X.isEditHelperDisabled()||!W(T)||X.isFirstPersonMode()&&(X.isMouseRoamable()||v5)||(L3(X),q=X.isMovable(T),_=X.isRotationEditable(T),s=X.isSizeEditable(T),p=X._axisXColor,O=X._axisYColor,L=X._axisZColor,$=X._editSizeColor,w=T.p3(),X=(k=X.isOrtho()?(k=X.getCenterInfo(),s5(k.width,k.height)/8):vA(X.getEye(),w)/10)/(X.isPicking()?5:10),M=.4*(k*=.7),E=w[0],H=w[1],w=w[2],x=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],q&&S._17O(y,T,F6,p,x,[E,H-X,w,E+k,H-X,w,E+k,H,w,E+k,H,w,E,H,w,E,H-X,w,E,H-X,w+X,E+k,H-X,w+X,E+k,H-X,w,E+k,H-X,w,E,H-X,w,E,H-X,w+X]),Q=E+k,s&&S._17O(y,T,D6,$,x,[Q,H-X,w,Q+M,H-X,w,Q+M,H,w,Q+M,H,w,Q,H,w,Q,H-X,w,Q,H-X,w+X,Q+M,H-X,w+X,Q+M,H-X,w,Q+M,H-X,w,Q,H-X,w,Q,H-X,w+X]),Q+=M,_&&S._17O(y,T,t6,p,x,[Q,H-X,w,Q+M,H-X,w,Q+M,H,w,Q+M,H,w,Q,H,w,Q,H-X,w,Q,H-X,w+X,Q+M,H-X,w+X,Q+M,H-X,w,Q+M,H-X,w,Q,H-X,w,Q,H-X,w+X]),x=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],q&&S._17O(y,T,V6,O,x,[E,H,w,E,H+k,w,E-X,H+k,w,E-X,H+k,w,E-X,H,w,E,H,w,E,H,w,E,H,w-X,E,H+k,w-X,E,H+k,w-X,E,H+k,w,E,H,w]),Q=H+k,s&&S._17O(y,T,c6,$,x,[E,Q,w,E,Q+M,w,E-X,Q+M,w,E-X,Q+M,w,E-X,Q,w,E,Q,w,E,Q,w,E,Q,w-X,E,Q+M,w-X,E,Q+M,w-X,E,Q+M,w,E,Q,w]),Q+=M,_&&S._17O(y,T,u6,O,x,[E,Q,w,E,Q+M,w,E-X,Q+M,w,E-X,Q+M,w,E-X,Q,w,E,Q,w,E,Q,w,E,Q,w-X,E,Q+M,w-X,E,Q+M,w-X,E,Q+M,w,E,Q,w]),x=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],q&&S._17O(y,T,h6,L,x,[E,H,w,E,H,w+k,E,H-X,w+k,E,H-X,w+k,E,H-X,w,E,H,w,E,H-X,w,E-X,H-X,w,E-X,H-X,w+k,E-X,H-X,w+k,E,H-X,w+k,E,H-X,w]),Q=w+k,s&&S._17O(y,T,R6,$,x,[E,H,Q,E,H,Q+M,E,H-X,Q+M,E,H-X,Q+M,E,H-X,Q,E,H,Q,E,H-X,Q,E-X,H-X,Q,E-X,H-X,Q+M,E-X,H-X,Q+M,E,H-X,Q+M,E,H-X,Q]),Q+=M,_&&S._17O(y,T,J6,L,x,[E,H,Q,E,H,Q+M,E,H-X,Q+M,E,H-X,Q+M,E,H-X,Q,E,H,Q,E,H-X,Q,E-X,H-X,Q,E-X,H-X,Q+M,E-X,H-X,Q+M,E,H-X,Q+M,E,H-X,Q]))},_17O:function(y,q,_,s,p,O){var L=this.gv,$=L._buffer,k=(M=S5.for(y)).directUniforms(),M=M.directAttribs();L._picking&&(L.pickColorMap[L=o6[_]]={data:q,part:_},k.uFixPickReverseColor=j6(L)),zK(y,M5,!0,M5,!0,M5,!1),k.uDiffuse=s,M.aPosition=IK(y,$.vs,new T8(O)),M.aNormal=IK(y,$.ns,new T8(p)),fK(y),vK(y,0,12),GK(y),eK(y)}}),P.Raycaster=function(y){this.gv=y,this.maxTriangleTest=1/0,this.backfaceCulling=!0,this.triangleTestEpsilon=1e-9}),P6=(zU("Raycaster",o,{getTriangleTestEpsilon:function(){return this.triangleTestEpsilon},setTriangleTestEpsilon:function(y){return this.triangleTestEpsilon=y,this},getBackfaceCulling:function(){return this.backfaceCulling},setBackfaceCulling:function(y){return this.backfaceCulling=y,this},intersect:function(y){var q=this.gv.getDataAt(y);return q?this.intersectObject(y,q):null},intersectObjects:function(q,y,_){var s,p,O,L,$=this,k=1/0,M=q.origin||(new Q5).fromArray($.gv.getEye()),E=$.maxTriangleTest,H=[],w=(y.forEach(function(y){_&&!1===_(y)||!1!==y.s("intersect")&&H.push(y)}),M.distanceToSquared2([0,0,0]));return H.sort(function(y,q){return(y.p3?M.distanceToSquared2(y.p3()):w)-(q.p3?M.distanceToSquared2(q.p3()):w)}),$.countTriangles=0,H.forEach(function(y){$.countTriangles>E||(s=$.intersectObject(q,y))&&(p=M.distanceToSquared(s.world))<k&&(O=y,L=s,k=p)}),$.countTriangles=0,{data:O,intersect:L}},intersectObjectAndRecordTriangle:function(y,q){return this._4GQ=!0,y=this.intersectObject(y,q),this._4GQ=!1,y},intersectLastTriangle:function(y,q){if((y=this.getRay(y)).applyMatrix4(q.inverseMatrix),!(y=y.intersectPlane(q.plane)))return null;var _=vB.uvIntersection(y,q.p1,q.p2,q.p3,q.uv1.clone(),q.uv2.clone(),q.uv3.clone());return{world:y.clone().applyMatrix4(q.matrixWorld),local:y.clone(),uv:_}},getRay:function(y){if(y instanceof GB)return y;var q,_=this.gv,y=_.unproject(y),s=new Q5,p=_.getEye(),O=new Q5;return _.isOrtho()?(q=new Q5(p),O.copy(_.getCenter()).sub(q).normalize(),_=s.copy(y).sub(q).dot(O),s.copy(O).setLength(-_).add(q.copy(y))):(s.copy(p),O.copy(y).sub(s).normalize()),new P.Math.Ray(s,O)},intersectObject:function(y,q){return this._intersectObjectImpl(this.getRay(y),q)},_intersectObjectImpl:(gq=new G,nq=new G,vq=new GB,bq=new Q5,Iq=new Q5,Uq=new Q5,dq=new Q5,y4=new Q5,q4=new Q5,_4=new Q5,s4=new Q5,p4=new f,O4=new f,L4=new f,$4=new Q5,k4={vs:X_,is:T_,uv:i_},(M4=a_.slice(0)).push("csg"),function(y,q){var _,s,p,O,L,$,k,M,E,H,w,Q,x,S=this.gv.getData3dUI(q),X=((J=q.mat||S.mat)?gq.fromArray(J):gq.identity(),nq.getInverse(gq),vq.copy(y).applyMatrix4(nq),"body");if(!(J=(J=(J=!(J=S.shapeModel)&&(q instanceof P.Polyline||q instanceof P.Edge)&&S.lineShapeModel?S.lineShapeModel:J)||W_(S))||(P.CSGNode&&q instanceof P.CSGNode||P.CSGShape&&q instanceof P.CSGShape?(p=!0,[S.left,S.front,S.right,S.back,S.top,S.bottom,S.csg]):q instanceof P.Node&&!(q instanceof P.Shape)?(_=!0,k4):(s=!0,[S.left,S.front,S.right,S.back,S.top,S.bottom]))))return console.log("Can not find shape model."),null;Hx(J)||(J=[J]);var T,i,N,a,l,j,Z,K=1/0,C=["","top_","bottom_"],B=!1,F=this.backfaceCulling,V=this.triangleTestEpsilon,h=[];for(N3(J,S,h),O=0,L=h.length;O<L;O++)if((i=h[O])&&(j=i.matrix,i=i.mesh))for($=0,k=C.length;$<k;$++)if(H=i[(N=C[$])+"vs"],w=i[N+"is"],Q=i[N+"uv"]||i[N+"tuv"],H){if(a=i[N+"boundingBox"]){if(!(Z=vq.intersectBox(a)))continue;if(vq.origin.distanceTo(Z)>K)continue;l=!1}else i[N+"boundingBox"]=a=new P.Math.Box3,l=!0;for(M=0,E=w?w.length:H.length/3;M<E;M+=3)this.countTriangles++,w?(Iq.fromArray(H,3*w[M]),Uq.fromArray(H,3*w[M+1]),dq.fromArray(H,3*w[M+2])):(Iq.fromArray(H,3*M),Uq.fromArray(H,3*(M+1)),dq.fromArray(H,3*(M+2))),j&&(Iq.applyMatrix4(j),Uq.applyMatrix4(j),dq.applyMatrix4(j)),l&&(a.expandByPoint(Iq),a.expandByPoint(Uq),a.expandByPoint(dq)),(x=vq.intersectTriangle(Iq,Uq,dq,F,V,bq))&&(T=vq.origin.distanceTo(x))<K&&(K=T,y4.copy(x),q4.copy(Iq),_4.copy(Uq),s4.copy(dq),""!==N?X=N.slice(0,-1):_?X=a_[Math.floor(M/6)]:s?X=a_[O]:p&&(X=M4[O]),Q&&(B=!0,w?(p4.fromArray(Q,2*w[M]),O4.fromArray(Q,2*w[M+1]),L4.fromArray(Q,2*w[M+2])):(p4.fromArray(Q,2*M),O4.fromArray(Q,2*(M+1)),L4.fromArray(Q,2*(M+2)))))}if(!isFinite(K))return null;var t,u,y=y4.clone().applyMatrix4(gq),q=this._4GQ,J=(B&&(q&&(u={inverseMatrix:nq.clone(),matrixWorld:gq.clone(),p1:q4.clone(),p2:_4.clone(),p3:s4.clone(),uv1:p4.clone(),uv2:O4.clone(),uv3:L4.clone(),plane:(new P.Math.Plane).setFromCoplanarPoints(q4,_4,s4)}),t=vB.uvIntersection(y4,q4,_4,s4,p4,O4,L4)),kv()),S=kv(q4.applyMatrix4(gq),_4.applyMatrix4(gq),s4.applyMatrix4(gq)),y=((q=0<vq.direction.dot(J))&&(J.multiplyScalar(-1),S.multiplyScalar(-1)),{world:y,local:y4.clone(),worldNormal:S,normal:J,uv:t,part:X,backface:q});return u&&(y.triangleInfo=u),y})}),B3.Data3dUI=function(s,p){this.gv=s,this.s=function(y,q,_){return(q=q==M5?_:q)==M5?p.getStyle(y):g(q,p,s)},this.data=p}),m6=(w8(P6,o,{I3d:!0,ms_icons:1,_iv:!0,_cacheBoundingBox:k5,iv:function(){this._iv=!0},update:function(y,q,_){var s=this,p=s.data;if(y||(q=(y=s.gv).getGL(),_=y._40Q),s.needValidate(q)&&y.isVisible(p)){var O,L,$,k=p._id,M=p._47Q?null:s.s("batch"),E=p.getRenderLayer(),H=(E=_.get(E,!0)).batchIndexMap,w=E.batchModelMap,Q=y.getBrightness(p),x=Q!=M5&&1!==Q,w=m3(H,w,p,M,y),M=M?y.getBatchInfo(M)||mn:M5,S=s.validate(w,M);if(w&&(!M.ms||!M.ms.length)&&(O=(M=H[k]).size=w.vs.length/3-M.begin,$=w.rs))for(Q=x?Q:1,L=0;L<O;L++)$.push(Q);(H=y.getWireframeGeometry(p))?z3(y,p,H):W(p)&&(k=y.getWireframe(p))&&z3(y,p,k),s.labelInfo=s.label2Info=s.noteInfo=s.note2Info=s._38o=M5,s._24O(cD,"getLabel"),s._24O(RD,"getLabel2"),s._26O(oD,"getNote"),s._26O(YD,"getNote2"),s._15O(),s.interactiveInfo=y.isInteractive(p)?{}:M5,!E.push(this,!0)&&p instanceof vQ&&s._46Q(q),!1!==S&&(s._iv=!1)}else _.push(this,!1)},clearWireframeGeometryCache:function(){this.gv.invalidateCachedWireframe(this.data)},invalidateWireframe:function(){var y=this.data,q=y.getRenderLayer();(q=this.gv._40Q.get(q))&&q.ivWireframeBatch(y)},_46Q:function(y,q){var _,s,p,O,L=this.data,$=this.gv;$.isVisible(L)&&(O=L._id,s=(_=$._40Q.get(L._renderLayer,!0)).batchIndexMap[O],p=_.polylineIndexMap[O],O=_.wireframeIndexMap[O],(s||p||O)&&(q=q==M5?k3(y,$.pickColorMap,$.isSelectable(L),this,DD,!0):q)&&(e3(q,s,_.batchModelMap),e3(q,p,_.polylineModelMap),e3(q,O,_.wireframeModelMap)))},_42:function(y,q,_){var s=this,p=s.data,O=s.gv;if(O.isVisible(p)){var L,$,k,M,E,H,w,Q,x,S,X=O._picking;if(X)L=O.pickColorMap;else{if(O.isTransparentMask(p)||O.isReflecting(y)&&!1===p.s("3d.reflectable"))return;L=k5}if(P6.getTitle===k5)for(var T in P6.getTitle=0,E5)if(T.length===RD.length+1&&T[RD.length]===$L[4].toUpperCase()&&T[RD.length-1]===$L[RD.length+1].toUpperCase()){P6.getTitle=Jx;break}if(!P6.getTitle||l5[RD.length+2]){if(P6.getHead===k5)for(var T in P6.getHead=0,El){var i="box-sizing";6===T.length&&T[0]===$L[4]&&T[3]===i[0]&&T[4]===i[1]&&T[5]===i[2]&&(P6.getHead=qx)}if(!P6.getHead||l5[RD.length]){if(P6.getTitle2===k5)for(var T in P6.getTitle2=0,El)6===T.length&&T[0]===zL[1].toUpperCase()&&T[1]==="uv"[0]&&(P6.getTitle2=yx);P6.getTitle2&&!l5[xL.length]||O[uD[0]+kL[0]]&&O[uD[0]+kL[0]].enable&&!l5[TD[0]]||(O.isTransmissionEnabled()&&s.s("shape3d.transmission")&&!X&&($=y._renderTargetStack[y._renderTargetStack.length-1])&&!$.isCube()&&(y._transmissionRTT||(y._transmissionRTT=new i6(O,0,0,{autoSize:!0})),$.unbind(y),O.renderModel(y._transmissionRTT,null,null,{type:"blitScreen",transparent:O._45Q,image:$.texture}),$.bind(y)),$=p._id,Q=(k=O._40Q.get(p._renderLayer,!0)).batchIndexMap,x=k.batchModelMap,M=O.isSelectable(p),w=!(H=!1),Q=Q[$],X&&(S=k3(y,L,M,s,DD,Q))&&!O._45Q&&(e3(S,Q,x),e3(S,k.polylineIndexMap[$],k.polylineModelMap),e3(S,k.wireframeIndexMap[$],k.wireframeModelMap)),Q||(H||(H=!0,w=rK(y,O,p)),w&&(X||!O._45Q||O._oitEnabled||O.isReflecting(y)||y._blooming||!s.s("transparent.separate")?s.drawBody(y,q,_):(x=S5.for(y).directState().cullFace,p._forceSingleFace=2,x.frontFace=p._flipSide?2305:2304,s.drawBody(y,q,_),p._forceSingleFace=1,x.frontFace=p._flipSide?2304:2305,s.drawBody(y,q,_),p._forceSingleFace=k5,x.frontFace=2305))),O.isLabelVisible(p)&&((E=s.labelInfo)&&(X&&k3(y,L,M,s,cD),H||(H=!0,rK(y,O,p)),s._28O(E,cD,_)),(E=s.label2Info)&&(X&&k3(y,L,M,s,RD),H||(H=!0,rK(y,O,p)),s._28O(E,RD,_))),O.isNoteVisible(p)&&((E=s.noteInfo)&&(X&&k3(y,L,M,s,oD),H||(H=!0,rK(y,O,p)),s._29O(E,oD,_)),(E=s.note2Info)&&(X&&k3(y,L,M,s,YD),H||(H=!0,rK(y,O,p)),s._29O(E,YD,_))),(E=s._38o)&&(H||(H=!0,rK(y,O,p)),s._99O(y,E,L,M,_)),H&&((S=S5.for(y).directUniforms()).uBrightness=1,S.uClipDirection=0,S5.for(y).directState().cullFace.frontFace=2305,y._blooming&&(S.blackout=!1)))}}}},_formatClipUniforms:function(y,q,_){switch(y){case"uv.right":y=7;break;case"uv.left":y=8;break;case"left":y=2;break;case"top":y=3;break;case"bottom":y=4;break;case"front":y=5;break;case"back":y=6;break;default:y=1}var s,p,O;return y%2==0&&(q=1-q),7===y||8===y?(s=this.shapeModel)&&s.internalUvScale&&(q*=s.internalUvScale):_ instanceof P.Shape?(s=_.s3(),p=_.p3(),O=_.getAnchor3d(),q=y<3?(q-O.x)*s[0]+p[0]:y<5?(q-O.y)*s[1]+p[1]:(q-O.z)*s[2]+p[2]):(q-=.5,(O=_._clipPercentageTranform)&&(q=(q+O[0])*O[1])),[y,q]},prepare:function(){var y=this,q=y.data;if(!(q instanceof vQ)){var _,s,p,O=y.gv,L=O.getGL(),$=q._id,k=y.s("batch"),M=O._batchIndexMap,E=O._batchModelMap,H=O.getBrightness(q),w=H!=M5&&1!==H;if(y.needValidate(L)){L=m3(M,E,q,k,O),E=k?O.getBatchInfo(k)||mn:M5;if(y.validate(L,E),L&&(!E.ms||!E.ms.length)&&(_=(k=M[$]).size=L.vs.length/3-k.begin,p=L.rs))for(H=w?H:1,s=0;s<_;s++)p.push(H);W(q)&&((E=O.getWireframeGeometry(q))?z3(O,q,E):(M=O.getWireframe(q))&&z3(O,q,M)),y.labelInfo=y.label2Info=y.noteInfo=y.note2Info=y._38o=M5,y._24O(cD,"getLabel"),y._24O(RD,"getLabel2"),y._26O(oD,"getNote"),y._26O(YD,"getNote2"),y._15O(),y.interactiveInfo=O.isInteractive(q)?{}:M5,y._iv=!1}}},dispatchBoundingBoxChanged:function(){this._cacheBoundingBox=k5},getBoundingBox:function(y){if(this._cacheBoundingBox)return this._cacheBoundingBox;E4||(E4={vs:X_,is:T_,uv:i_},H4=new Q5,w4=new Q5,Q4=new Q5,x4=new Q5,S4=new Q5);var q,_,s,p,O,L,$,k,M=this,E=M.data,H=M.shapeModel;if((H=(H=!H&&(E instanceof P.Polyline||E instanceof P.Edge)&&M.lineShapeModel?M.lineShapeModel:H)||W_(M))||(P.CSGNode&&E instanceof P.CSGNode||P.CSGShape&&E instanceof P.CSGShape?(isCSG=!0,H=[M.left,M.front,M.right,M.back,M.top,M.bottom,M.csg]):E instanceof P.Node&&!(E instanceof P.Shape)?H=E4:(M.left||M.front||M.right||M.back||M.top||M.bottom)&&(H=[M.left,M.front,M.right,M.back,M.top,M.bottom])),!H)return k5;Hx(H)||(H=[H]);var w,Q,x,S,X,T,i=["","top_","bottom_"],N=new P.Math.Box3,a=!1,l=(M._needRecoverPosition?(x4.set.apply(x4,E.p3()),T=E.s3(),S4.set(1/(T[0]||1),1/(T[1]||1),1/(T[2]||1))):(x4.set(0,0,0),S4.set(1,1,1)),[]);for(N3(H,M,l),q=0,_=l.length;q<_;q++)if((w=l[q])&&(Q=w.mesh))for(x=w.matrix,s=0,p=i.length;s<p;s++)if($=Q[(X=i[s])+"vs"],k=Q[X+"is"],$){if(!(S=Q[X+="boundingBox"]))for(Q[X]=S=new P.Math.Box3,O=0,L=k?k.length:$.length/3;O<L;O+=3)k?(H4.fromArray($,3*k[O]),w4.fromArray($,3*k[O+1]),Q4.fromArray($,3*k[O+2])):(H4.fromArray($,3*O),w4.fromArray($,3*(O+1)),Q4.fromArray($,3*(O+2))),x&&(H4.applyMatrix4(x),w4.applyMatrix4(x),Q4.applyMatrix4(x)),H4.sub(x4).multiply(S4),w4.sub(x4).multiply(S4),Q4.sub(x4).multiply(S4),H4.isNaN()||S.expandByPoint(H4),w4.isNaN()||S.expandByPoint(w4),Q4.isNaN()||S.expandByPoint(Q4);N.expandByBox(S),a=!0}return a?(this._cacheBoundingBox=N,o.freeze(N),o.freeze(N.min),o.freeze(N.max),y||Y3(M.gv,E),N):k5},needValidate:function(y){return this._iv},validate:function(y,q){},_16O:function(y,q,_,s,p,O,L,$,k){return j8},drawBody:function(y,q,_){},dispose:function(){this.disposeGLContent();var y,q=this._pickId;q&&(y=this.gv.pickColorMap)[q]&&delete y[q]},getBodyColor:function(y){var q=this.data;return this.gv.getBodyColor(q)||(y?q.getStyle(y):M5)},disposeGLContent:function(){this._cachedTextures&&this.gv.invalidateCachedTexture(this.data)},getCachedTexture:function(y){var q=this._cachedTextures;return q?q[y||"main"]:null},setCachedTexture:function(y,q){return(this._cachedTextures||(this._cachedTextures={}))[q||"main"]=y},invalidateCachedTexture:function(y){var q=this._cachedTextures;if(!q)return!1;var _,s=!1;for(_ in q){var p=q[_];p&&(s=!0,y.deleteTexture(p))}return this._cachedTextures={},s},invalidateCachedGeometry:function(){},_24O:function(y,q){var _,s,p=this.data,O=this.gv,L=this.s,$=O[q](p);$!=M5&&(_=L(y+".scale"),s=L(y+".max"),q=(O=this[y+"Info"]={label:$,textureScale:L(y+".texture.scale"),color:O[q+"Color"](p),font:L(y+".font"),align:L(y+".align"),background:O[q+"Background"](p)}).rect=nx(O,$),0<s&&s<q.width&&(O.labelWidth=q.width,q.width=s),q.x=q.y=0,q.width*=_,q.height*=_,O.mat=this._16O(L(y+".autorotate"),L(y+".position"),q,L(y+".face"),L(y+".t3"),L(y+".r3"),L(y+".rotationMode")),p=q.width/2,$=q.height/2,O.vs=new T8([-p,$,0,-p,-$,0,p,-$,0,p,$,0]),q.width/=_,q.height/=_)},_26O:function(y,q){var _,s=this.data,p=this.gv,O=this.s,L=p[q](s);L!=M5&&(_=O(y+".scale"),L=(p=this[y+"Info"]={note:L,textureScale:O(y+".texture.scale"),expanded:O(y+".expanded"),font:O(y+".font"),color:O(y+".color"),align:O(y+".align"),borderWidth:O(y+".border.width"),borderColor:O(y+".border.color"),background:p[q+"Background"](s)}).expanded?(q=O(y+".max"),(s=nx(p,L)).width+=6,s.height+=2,0<q&&q<s.width&&(p.labelWidth=s.width,s.width=q),{x:-s.width/2,y:-8-s.height,width:s.width,height:s.height+8}):{x:-6,y:-18,width:12,height:18},p.mat=this._16O(O(y+".autorotate"),O(y+".position"),M5,O(y+".face"),O(y+".t3"),O(y+".r3"),O(y+".rotationMode")),p.rect=L,1!==_&&((L=DA(L)).x*=_,L.height*=_,L.y=-L.height,L.width*=_),q=L.x,s=L.y,O=L.width,y=L.height,p.vs=new T8([q,-s,0,q,-s-y,0,q+O,-s-y,0,q+O,-s,0]))},eachShapeModel:function(y,q){var _,s,p,O,L=this,$=L.data,k=(q=(q=(q=!(q=q||L.shapeModel)&&($ instanceof P.Polyline||$ instanceof P.Edge)&&L.lineShapeModel?L.lineShapeModel:q)||W_(L))||($ instanceof P.Node&&!($ instanceof P.Shape||P.CSGNode&&$ instanceof P.CSGNode)?cubeSM:[L.left,L.front,L.right,L.back,L.top,L.bottom,L.csg]),Hx(q)||(q=[q]),[]);for(N3(q,L,k),_=0,s=k.length;_<s;_++)(O=k[_])&&(p=O.mesh)&&(O=O.matrix,A_(p),p.vs&&y(p.vs,p.is,p.ns,p.uv,O),p.top_vs&&y(p.top_vs,p.top_is,p.top_ns,p.top_uv,O),p.bottom_vs&&y(p.bottom_vs,p.bottom_is,p.bottom_ns,p.bottom_uv,O),p.from_vs&&y(p.from_vs,p.from_is,p.from_ns,p.from_uv,O),p.to_vs&&y(p.to_vs,p.to_is,p.to_ns,p.to_uv,O));return!0},_28O:function(y,q,_){var s,p,O;_(this.s(q+".transparent"))&&(_=y.rect,s=y.textureScale,O=_.width*s,p=_.height*s,1<=O&&1<=p&&(O=Wl(O,p),1!==s&&(O.translate(_.x,_.y),O.scale(s,s),O.translate(-_.x,-_.y)),zu(O,y),O.restore(),x3(this,q,y.mat,y.vs,!0)))},_29O:function(y,q,_){var s,p,O,L,$;_(this.s(q+".transparent"))&&(_=y.rect,s=y.textureScale,p=_.x,O=_.y,$=_.width*s,L=_.height*s,1<=$&&1<=L&&(_.x=_.y=0,$=Wl($,L),1!==s&&$.scale(s,s),eu($,y),$.restore(),_.x=p,_.y=O,x3(this,q,y.mat,y.vs,!1)))},_99O:function(y,q,_,s,p){if(q){var O,L=this.gv,$=this.data,k=L._buffer,M=L._1O,E=q.icons,H=S5.for(y).directAttribs();for(O in E){var w=E[O],Q=q.rects[O];if(Q&&p(g(w.transparent,$,L))){L._picking&&k3(y,_,s,this,O);var x=g(w.shape3d,$,L),S=x?[x]:g(w.names,$,L),X=S?S.length:0,T=g(w.textureScale,$,L)||1,i=g(w.light,$,L);i==M5&&(i=!!x),zK(y,g(w.blend,$,L),i,g(w.opacity,$,L),g(w.reverseFlip,$,L),g(w.reverseColor,$,L),g(w.reverseCull,$,L));for(var N=0;N<X;N++){var a,l,j,Z=S[N],K=Q[N];Q3(this,K.mat),x?Y_(L,$,W_(this,x),this):(Z=r(Z))&&(a=K.width*T,l=K.height*T,1<=a&&1<=l&&(j=Wl(a,l),VA(j,Z,g(w.stretch,$,L),0,0,a,l,$,L),j.restore(),VK(L,y,Pl,M),fK(y,M,g(w.discardSelectable,$,L),k.uv,Q_),H.aPosition=IK(y,k.vs,K.vs),H.aNormal=dK(y,k.ns,x_,M5),q3(y,k.is,S_),bK(y,0,S_.length),GK(y,M))),p3(L)}eK(y)}}}}}),B3.Node3dUI=function(y,q){Kx(m6,this,[y,q])}),W6=(w8(m6,P6,{_16O:function(y,q,_,s,p,O,L,$,k){var M,E,H=this.data,w=H.getFinalScale3d(),Q=((H.hasOwnProperty("_anchor")||H.hasOwnProperty("_anchorElevation"))&&(M=[-((M=H.getAnchor3d()).x-.5)*w[0],-(M.y-.5)*w[1],-(M.z-.5)*w[2]]),H.s("part.boundingBox")&&(Q=this.getBoundingBox(!0))&&(E=Q.max.clone().sub(Q.min),Q=Q.max.clone().add(Q.min).divideScalar(2),(M=M||[0,0,0])[0]+=Q.x*w[0],M[1]+=Q.y*w[1],M[2]+=Q.z*w[2],w[0]*=E.x,w[1]*=E.y,w[2]*=E.z),H3(q,w,_,s,$,k));return M&&(Q[0]+=M[0],Q[1]+=M[1],Q[2]+=M[2]),w3(l8(),Q,H.p3(),s,p,O,L,y,H.getFinalRotation3d(),H.getRotationMode())},clear:function(){var y=this;y.faceMat=y.mat=y.shapeModel=y.left=y.right=y.front=y.back=y.top=y.bottom=y.csg=M5},needValidate:function(y){return this._iv?(this._validateFrameId=y._renderInfo.frame,!0):!(!this.data._47Q||(y=y._renderInfo.frame,this._validateFrameId===y))&&(this._validateFrameId=y,!0)},invalidateUnstableWireframe:function(){this.data._47Q&&this.invalidateWireframe()},validate:function(y,q){var _,s,p,O=this,L=O.gv,$=O.data,k=O.shapeName=O.s(hL),M=W_(O,k),E=(O._updateAutoRotation(),O._updateFixSize2d(),O._updateOverlapping(),O.dispatchBoundingBoxChanged(),O.invalidateUnstableWireframe(),J8($,L.getMat($),!M||O.s("shape3d.scaleable"))),H=($.appendAnchorMatrix3d(E),M!==O.shapeModel);O.clear(),O.mat=$.mat=E,$._flipSide=G.determinantOfArray(E)<0,!M&&k||(k=null,(O.shapeModel=M)&&M.model3d&&((s=$.s("3d.clip.direction"))&&$.s("3d.clip.percentage")&&(p=M.position,_=M.scale,(p||_)&&(s="left"===s||"right"===s?0:"front"===s||"back"===s?2:1,k=[p?-p[s]:0,_?1/_[s]:1])),H&&M.playAutomatically&&!$.isAnimationPlaying()&&$.playAnimation()),$._clipPercentageTranform=k,y?M?q.instanced?L.batchInstancedModel($,M,O,O.getBodyColor(),[E],y):r3(L,$,M,O,O.getBodyColor(),[E],y):(p=O3(E),q.instanced?L.batchInstancedFace($,y,q,E,p):I3(L,$,y,q,E,p)):M||(O._cubeUvs=null,O.vf(qD,0),O.vf(_D,16),O.vf(d5,8),O.vf(yD,24),O.vf(sD,32),O.vf(pD,40)))},_updateAutoRotation:(c4=new bB,R4=new G,o4=new Q5,Y4=new Q5,P4=new Q5,function(){var y=this.data,q=this.s("autorotate")||this.s("shape3d.autorotate");if(q){var _=this.gv;if(o4.copy(this.s("shape3d.autorotate.up")||_._up),Y4.copy(_._eye).sub(P4.copy(_._center)),"string"==typeof q){for(var s=0,p=q.length;s<p;s++)Y4[q[s]]=0;_=Y4.normalize().dot(P4.copy(o4).normalize()),1-Math.abs(_)<1e-5&&(q.indexOf("x")<0?Y4.x+=1e-4:q.indexOf("y")<0?Y4.y+=1e-4:q.indexOf("z")<0&&(Y4.z+=1e-4))}R4.lookAtDirection(Y4,o4),c4.set(0,0,0,y.getRotationMode(),!0).setFromRotationMatrix(R4),(_=y._dynamicRotation)&&Math.abs(_[0]-c4.x)<1e-5&&Math.abs(_[1]-c4.y)<1e-5&&Math.abs(_[2]-c4.z)<1e-5||(y._dynamicRotation=[c4.x,c4.y,c4.z])}else y._dynamicRotation&&delete y._dynamicRotation}),_updateFixSize2d:function(){var y,q,_,s,p,O,L=this.data,$=this.s("fixSizeOnScreen")||this.s("shape3d.fixSizeOnScreen");$?(_=this.gv,y=J8(L,_.getMat(L)),O=C8([0,0,0],y),O=_.toViewPosition(O),isNaN(O.x)||isNaN(O.y)||(q=C8([1,0,0],y),q=_.toViewPosition(q),y=C8([0,1,0],y),_=_.toViewPosition(y),y=q.x-O.x,q=_.y-O.y,y&&q&&(_=L._dynamicScale3d||[1,1,1],O=r(L.s("shape3d.image")),0<$[0]&&(s=$[0]),0<$[1]&&(p=$[1]),s&&p||($=0<$?$:1,s=s||(d8(O,L)||L.getWidth())*$,p=p||(yu(O,L)||L.getTall())*$),O=Math.abs(y/s),$=Math.abs(q/p),Math.abs(O-1)<.001&&Math.abs($-1)<.001||(L._dynamicScale3d=[_[0]/O,_[1]/$,_[2]])))):L._dynamicScale3d&&delete L._dynamicScale3d},_updateOverlapping:function(){var y=this.s("hide.overlapping.group");if(y){for(var q,_=this.gv,s=this.data,p=J8(s,_.getMat(s)),O=1/0,L=1/0,$=-1/0,k=-1/0,M=(s=s.getAnchor3d()).x,E=s.y,H=s.z,w=0;w<8;w++){if(q=C8([(w>>2)-M,(w>>1&1)-E,(1&w)-H],p),q=_.toViewPosition(q),isNaN(q.x)||isNaN(q.y))return;O=Math.min(O,q.x),$=Math.max($,q.x),L=Math.min(L,q.y),k=Math.max(k,q.y)}this._rectOverlapping=_.overlappingBox.isOverlapping(y,{x:O,y:L,w:$-O,h:k-L})}else this._rectOverlapping&&(this._rectOverlapping=k5)},getVectorDynamicSize:function(){var s,p,O,L,$,k,y,q,_,M,E=this.s("shape3d"),H=this.data;if("billboard"===E||"plane"===E||(q=H._currentCubeElementId)!=M5)return s=this.gv,p=J8(H,s.getMat(H)),y=H.getAnchor3d(),O=.5-y.x,L=.5-y.y,$=.5-y.z,k=Math.min(this.s("vector.dynamic.maxsize"),s._glCapabilities.maxTextureSize)/s.getDevicePixelRatio(),y=function(y,q){y[0]+=O,y[1]+=L,y[2]+=$,q[0]+=O,q[1]+=L,q[2]+=$;var y=s.toViewPosition(C8(y,p)),q=s.toViewPosition(C8(q,p)),_=y.x-q.x,y=y.y-q.y;return Math.min(k,Math.sqrt(_*_+y*y))},"billboard"===E?(_=y([-.5,0,0],[.5,0,0]),M=y([0,-.5,0],[0,.5,0])):"plane"===E?(_=y([-.5,0,0],[.5,0,0]),M=y([0,0,-.5],[0,0,.5])):H._currentCubeElementId!=M5&&(E=3*T_[q+1],H=3*T_[q],q=3*T_[q+2],_=y([X_[E],X_[1+E],X_[2+E]],[X_[q],X_[1+q],X_[2+q]]),M=y([X_[E],X_[1+E],X_[2+E]],[X_[H],X_[1+H],X_[2+H]])),[_,M]},vf:function(y,q){if(this.gv.getFaceVisible(this.data,y)){(y=S3(this,y)).mat&&(this.faceMat=!0);var _=y.uv;if(_)for(var s=(s=this._cubeUvs)||(this._cubeUvs=new T8([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0])),p=0;p<8;p++)s[q+p]=_[p];return y}},_billboardInView:(h4=[-.5,-.5,0,-.5,.5,0,.5,-.5,0,.5,.5,0],t4=[-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,.5],u4=new rB,J4=new Q5,D4=new G,function(y){if(!this.mat)return!0;var q=this.gv.getFrustum(),_="billboard"===y?h4:t4;u4.makeEmpty(),D4.fromArray(this.mat);for(var s=0,p=_.length;s<p;s+=3)u4.expandByPoint(J4.fromArray(_,s).applyMatrix4(D4));return q.intersectsBox(u4)}),drawBody:function(y,q,_){var s=this;if(s._rectOverlapping)return!0;var p=s.shapeModel;if(p||!s.shapeName){if(("billboard"===(O=s.s("shape3d"))||"plane"===O)&&!s._billboardInView(O))return!0;var O=s.gv,L=s.data,$=O._cube,k=S5.for(y).directAttribs();if(!n5){var M=s.mat;if(M)for(var E=0;E<M.length;E++)s.mat[E]=M[M.length-E-1]}if(p&&p.model3d)s.s(uL)&&s.gv._prefabRenderer.render(y,p,s.data,s.mat);else{if(L3(O,s.mat),!(!y._picking&&s.s("shape3d.reflector")||s.s("effect.flow")))if(p)Y_(O,L,p,s,s.getBodyColor(),_);else for(k.aPosition=IK(y,$.vs,M5),k.aNormal=IK(y,$.ns,M5),y3(y,$.is),E=0;E<6;E++)s._18O(y,a_[E],6*E,_,!1);if(p3(O),s.faceMat)for(E=0;E<6;E++)s._18O(y,a_[E],6*E,_,!0)}}},_18O:function(y,q,_,s,p){var O,L,$,k,M,E,H,w,Q,x=this[q];x&&(O=this.data,!(k=(L=this.gv)._picking?null:x.material)&&!s(x.transparent)||p&&!x.mat||!p&&x.mat||(O._currentCubeElementId=_,(s=O.s("polygonOffset"))&&DK(y,s),k?(k={mesh:{vs:X_,is:T_,ns:N_,uv:x.uv?this._cubeUvs:i_,_complete_:!0},drawRange:[_,6],mat:k},O._currentFaceLightMask=x.light?O.s("light.mask"):0,L._prefabRenderer.render(y,k,O,p?x.mat:null),O._currentFaceLightMask=null,k=L._cube,($=S5.for(y).directAttribs()).aPosition=IK(y,k.vs,M5),$.aNormal=IK(y,k.ns,M5),y3(y,k.is)):(p&&L3(L,x.mat),$=S5.for(y).directUniforms(),k=L.getTexture(x.texture,O,q),q=x.uv,M=x.uvScale,E=x.uvOffset,H=x.uvRotation,w=x.uvAnchor,Q=x.discardSelectable,k?q?fK(y,k,Q,L._buffer.uv,this._cubeUvs,E,M,H,w):fK(y,k,Q,L._cube.uv,M5,E,M,H,w):fK(y),zK(y,x.blend,x.light,x.opacity,x.reverseFlip,x.reverseColor,O._forceSingleFace||x.reverseCull),$.uDiffuse=x.color||X5["color.empty"],bK(y,_,6),eK(y),GK(y,k),p&&p3(L)),s&&cK(y),O._currentCubeElementId=null))},disposeGLContent:function(){m6.superClass.disposeGLContent.apply(this,arguments),this.data.s("shape3d.reflector")&&(YK(this.gv,this._reflectorRenderTarget),this._reflectorRenderTarget=null,this._reflectNormal=null)},drawReflector:(X4=new Q5,T4=new Q5,i4=new bB,N4=new G,a4=new Q5,l4=new Q5,j4=new Q5,Z4=new Q5,K4=new G,C4=new G,B4=new fB,F4=new zB,V4=new zB,function(y){var q=this,_=(q._reflectorInfo=null,q.data);if(_._reflecting)return!1;var s=q.gv;if(s._picking)return!1;if(s._camera&&!s._camera.isLayerVisible(_.getRenderLayer()))return!1;var p,O=s._camera||s,L=_ instanceof IQ,$=q._reflectorRenderTarget,k=s._canvas.width,M=s._canvas.height;if($?$.setSize(y,k,M):$=q._reflectorRenderTarget=new B3.RenderTarget(s,y,k,M),L?(p=_.getPointsMatrix3d().getElements(),(k=_.p3())[1]+=(1-_.getAnchorElevation())*_.getTall(),X4.copy(C8(k,p)),(M=q._matWithExtraction)&&(p=M)):X4.copy(_.p3()),T4.copy(O.getEye()),N4.makeRotationFromEuler(i4.set(_.r3(),_.getRotationMode(),!0)),!q._reflectNormal){if(L&&_.getThickness()<0){if(!q.shapeModel||!q.shapeModel.top_vs)return!1;w={vs:q.shapeModel.top_vs,ns:q.shapeModel.top_ns}}else{if(!(w=W_(q,q.s("shape3d"))))return!1;!w.ns&&w.length&&(w=w[0])}if(!w.ns||!w.vs)return!1;q._reflectNormal=[w.ns[0],w.ns[1],w.ns[2]],q._reflectorModel={model3d:!0,mesh:{pos:w.vs},mat:{type:"reflector",cacheKey:"reflector"}}}if(a4.copy(q._reflectNormal),a4.applyMatrix4(N4),l4.subVectors(X4,T4),0<l4.dot(a4))return!1;l4.reflect(a4).negate(),l4.add(X4),j4.copy(O.getCenter()).negate().add(X4),j4.reflect(a4).negate(),j4.add(X4),Z4.copy(O.getUp()),Z4.reflect(a4);var E,H,k=s._camera,w=0<(M=s)._tempCameraQueue.length?M._tempCameraQueue.pop():new P.Camera;s.getCamera(w),(s._camera=w).p3(l4.toArray()),w.lookAt(j4.toArray(),Z4.toArray()),s._18Q=M5,$.bind(y),s.setViewport(y,0,0,$.width,$.height),(O=_.s("shape3d.reflector.background"))?(S=RK(y,!0),oK(y,O)):oK(y,[0,0,0,1]),S5.for(y).glState.depth.mask=!0,y.clear(16640);var M=(M=_.s("shape3d.reflector.clip"))===k5?.003:M,Q=BK(s),x=CK(s),M=(B4.setFromNormalAndCoplanarPoint(a4,X4.add(a4.clone().multiplyScalar(M))),B4.applyMatrix4(C4.fromArray(x)),F4.set(B4.normal.x,B4.normal.y,B4.normal.z,B4.constant),C4.fromArray(Q).getInverse(C4),V4.set(Math.sign(F4.x),Math.sign(F4.y),1,1).applyMatrix4(C4),F4.multiplyScalar(2/F4.dot(V4)),_._reflecting=!0,_.s("shape3d.reflector.shadow")),x={renderAxis:!1,renderEdit:!1,renderGrid:!1};"disabled"===M?(x.renderShadowMap=!1,x.renderShadow=!1):"scene"===M?x.renderShadowMap=!1:x.useReflectorSelfShadowMap=!0,w.setProjectMatrix(Q),s.renderSky(),Q[2]=F4.x-Q[3],Q[6]=F4.y-Q[7],Q[10]=F4.z-Q[11],Q[14]=F4.w-Q[15],w.setProjectMatrix(Q),w.s("camera.renderSky",!1),s.renderScene(x),K4.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),K4.multiply(C4.fromArray(s._projectMatrix)),K4.multiply(C4.fromArray(s._viewMatrix)),O&&oK(y,S),$.unbind(y),s._tempCameraQueue.push(w),s._18Q=M5,s._camera=k,(M=_.s("shape3d.reflector.blur"))&&(Q=s.getPostProcessingModule("Blur"))&&Q.drawImpl(y,$,M,3<=M,_.s("shape3d.reflector.blur.iterations")),(x=s.getPostProcessingModule("Glitch"))&&x.enable&&x.onlyReflector&&($=x._42(y,$));var S=(O=q._reflectorModel).mat;return S.tDiffuse=$.texture,S.color=fl(_.s("shape3d.reflector.color")||"rgb(128,128,128)"),S.textureMatrix=K4.toArray(),S.modelMatrix=L?p:J8(_),S.viewMatrix=CK(s),S.projectionMatrix=BK(s),(k=this.s("shape3d.transparent"))&&(H=(E=S5.for(y).glState).depth.mask,E.depth.mask=!1),s.renderModel(O,{clear:!1,restoreViewport:!1}),k&&(E.depth.mask=H),_._reflecting=!1,s.getRenderState().useProgram(s._prg),!0})}),function(y,q){Kx(W6,this,[y,q])}),A6=(w8(W6,m6,{drawBody:function(y){}}),function(y,q){Kx(A6,this,[y,q])}),z6=(w8(A6,P6,{_25Q:1,validate:function(y,q){var _=this,s=_.s;if(s(hL)!==TD||s("batch")!=M5||!_.info||_._geometryVersion!==_.data._geometryVersion){var p=_.gv,O=_.data,L=s("edge.width"),$=O._40I,k=O._41I;if(_._geometryVersion=O._geometryVersion,_.shapeModel=_.info=_.lineShapeModel=M5,$&&k){var M=O.isLooped(),E=s(rD);if(F=E5.getEdgeType(E)){if(!(F=F(O,gu(_,p,O,M,E),p,_._19Q)).points||F.points.isEmpty())return;for(var H=_.info={},w=F.segments,Q=(B=F.points).size(),x=$.getElevation(),S=k.getElevation(),X=0;X<Q;X++){var T=B.get(X);T.e==M5&&(T.e=x+(S-x)*X/(Q-1))}var i=sK(B.get(0)),N=sK(B.get(Q-1)),a=(Q-(K=Q%2))/2;H.c1=sK(B.get(a-1)),H.c2=sK(B.get(a)),0!==K&&(H.p3=H.c2),H.s1=i,H.s2=sK(B.get(1)),H.t1=sK(B.get(Q-2)),H.t2=N}else{var l,j,Z,K,C,B=new n,H=_.info={},F=s("edge.offset"),k=s("edge.center"),V=s("edge.source.t3"),h=s("edge.target.t3"),t=E3(p,O,"source"),u=E3(p,O,"target");if(!t||!u)return p.invalidateData(O),delete _.info,!1;V&&(t[0]+=V[0],t[1]+=V[1],t[2]+=V[2]),h&&(u[0]+=h[0],u[1]+=h[1],u[2]+=h[2]),E===tD?(w=s("edge.segments"),(Q=(V=H.points=s(GD)||Xu).size())?(i=sK(V.get(0)),N=sK(V.get(Q-1)),!k&&F&&(h=F,l=i8(i,t,!0),F=s5(h,vA(t,i)),t=[t[0]+l[0]*F,t[1]+l[1]*F,t[2]+l[2]*F],l=i8(u,N,!0),F=s5(h,vA(N,u)),u=[u[0]-l[0]*F,u[1]-l[1]*F,u[2]-l[2]*F]),1===Q?H.p3=i:(a=(Q-(K=Q%2))/2,j=sK(V.get(a-1)),Z=sK(V.get(a)),0!==K&&(H.p3=Z),H.s1=t,H.s2=i,H.t1=N,H.t2=u)):(!k&&F&&(l=i8(u,t,!0),C=vA(t,u),F=fu(F,C),t=[t[0]+l[0]*F,t[1]+l[1]*F,t[2]+l[2]*F],u=[u[0]-l[0]*F,u[1]-l[1]*F,u[2]-l[2]*F]),j=t,Z=u),B.add({x:t[0],y:t[2],e:t[1]}),B.addAll(V),B.add({x:u[0],y:u[2],e:u[1]})):(h=gu(_,p,O,M,E),_._19Q||(h=-h),M?(a=t[0],K=t[1],i=t[2],j=[a-h,K+(N=$.getTall()/2+h),i],Z=[a+h,K+N,i],B.add({x:a-h,y:i,e:K}),B.add({x:a-h,y:i,e:K+N}),B.add({x:a+h,y:i,e:K+N}),B.add({x:a+h,y:i,e:K})):(l=i8(u,t,!0),C=vA(t,u),V={x:t[0],y:t[2]},p={x:u[0],y:u[2]},E=(O=xK(M5,V,p,h)).x-V.x,M=O.y-V.y,F=fu(F,C),l[0]*=F,l[1]*=F,l[2]*=F,j=[t[0]+l[0]+E,t[1]+l[1],t[2]+l[2]+M],Z=[u[0]-l[0]+E,u[1]-l[1],u[2]-l[2]+M],k?(B.add({x:t[0],y:t[2],e:t[1]}),B.add({x:j[0],y:j[2],e:j[1]}),B.add({x:Z[0],y:Z[2],e:Z[1]}),B.add({x:u[0],y:u[2],e:u[1]})):(B.add({x:j[0],y:j[2],e:j[1]}),B.add({x:Z[0],y:Z[2],e:Z[1]})))),H.c1=j,H.c2=Z}H._lastPointsSegments={points:B,segments:w},s(hL)===TD?H.list=_.createTubeModel(B,w,L/2,y):H.list=_.createLineModel(B,w,L,"edge","edge.dash")}}},invalidateCachedGeometry:function(){this.info=M5}}),function(y,q){Kx(z6,this,[y,q]),this._needRecoverPosition=!0}),e6=(w8(z6,m6,{drawBody:function(y,q,_){var s=this._matWithExtraction||this.mat;if(s&&(!this.s("shape3d.reflector")||y._picking)){var p=this.gv,O=this.shapeModel;if(L3(p,s),O)Y_(p,this.data,O,this,this.getBodyColor(),_);else for(var L=0;L<6;L++)X3(this,y,q,a_[L],_);p3(p)}},validate:function(y,q){var _,s,p,O=this,L=O.s,$=O.data,k=$._thickness/2,M=$.isClosePath(),E=$.getPoints(),H=$.getSegments(),w=L(tL),Q=y&&y.uv;if(O.invalidateUnstableWireframe(),O.clear(),O.dispatchBoundingBoxChanged(),O._updateAutoRotation(),E5.extractShapeTranslation||E5.extractVerticesTranslation?(s=new e.Vector3($.p3()),(E=DA(E)).forEach(function(y){y.x-=s.x,y.y-=s.z}),O._vsTranslation=(new e.Matrix4).setPosition(s),p=$.getShapeElevation,$.getShapeElevation=function(){return-(this.getTall()||0)*(this._anchorElevation-.5)}):O._vsTranslation=null,k<0){O.s("shape3d.reflector")&&(O._reflectNormal=null);try{var x,S,X=L("shape3d.image.projection");X&&X[4]&&(x=(t=$.p3())[0],S=t[2],X=[x+X[0],X[1]+S,x+X[2],X[3]+S]),_=O.shapeModel=EQ(E,H,L(cL),L(RL),w,L(oL),$.getTall(),$.getShapeElevation(),M,X)}catch(y){_=O.shapeModel={}}L(uL)||(delete _.vs,delete _.ns,delete _.uv),L("shape3d.top.image")||L("shape3d.top.material")||delete _.top_uv,L("shape3d.bottom.image")||L("shape3d.bottom.material")||delete _.bottom_uv}else if(L(hL)===TD)B=bl(E,H,w,M),(_=O.shapeModel={vs:[],uv:[]}).sum=L(oL)||Px(B)||1,_.len=0,L(cL)&&!M&&(_.top_vs=[],_.top_uv=[]),L(RL)&&!M&&(_.bottom_vs=[],_.bottom_uv=[]),O._12O(B,k);else{var T,i,N,a,l,j,Z,K,C,B=bl(E,H,w,M),F=O.vf(d5,Q,!1,q);if(k&&(l=O.vf(yD,Q,!1,q),j=M?M5:O.vf(qD,Q,!1,q),Z=M?M5:O.vf(_D,Q,!1,q),K=O.vf(sD,Q,!1,q),C=O.vf(pD,Q,!1,q)),k){for(var V=0,h=B.length;V<h;V++)B[V]=O._tryRemoveBezierPoints(B[V],k);O._12O(B,k)}else F&&B.forEach(function(y){if(0<(a=y.length))for(T=y[0],N=1;N<a;N++)i=y[N],O.addV(F.vs,T,i),T=i});O._20Q(B),y||(F&&(F.ns=FK(F.vs),z_(F,"vs"),z_(F,bD)),k&&(l&&(l.ns=FK(l.vs),z_(l,"vs"),z_(l,bD)),j&&(j.ns=FK(j.vs),z_(j,"vs"),z_(j,bD)),Z&&(Z.ns=FK(Z.vs),z_(Z,"vs"),z_(Z,bD)),K&&(K.ns=FK(K.vs),z_(K,"vs"),z_(K,bD)),C&&(C.ns=FK(C.vs),z_(C,"vs"),z_(C,bD))))}var t=O.mat=$.getPointsMatrix3d().getElements();$._flipSide=G.determinantOfArray(t)<0,O._vsTranslation?t=O._matWithExtraction=(new e.Matrix4).fromArray(t).multiply(O._vsTranslation).toArray():O._matWithExtraction=null,y&&(U3(O,t,y,_,q),O.clear()),p!=M5&&($.getShapeElevation=p)},_20Q:function(y){var q,_,s,p,O,L,$,k,M,E,H,w,Q,x=this,S=x.front,X=x.back,T=x.top,i=x.bottom,S=S?S.tuv:M5,X=X?X.tuv:M5,T=T?T.tuv:M5,i=i?i.tuv:M5,N=0,a={front:0,back:0,top:0,bottom:0};(S||X||T||i)&&(Q=x.s(oL),q=Q||Px(y)||1,H=x.s("all.uv.union"),y.forEach(function(y){if(0<(_=y.length)){for(E in a)(!1===(w=x.s(E+".uv.union"))||w==M5&&!1===H)&&(a[E]=0,Q||(q=Px([y])));for(L=y[0],s=1;s<_;s++){for(E in $=y[s],k=vA(L,$),a)N=a[E],p=N/q,a[E]=N+=k,O=N/q,"back"===E&&(M=p,p=1-O,O=1-M),x._14O(x[E],p,O);L=$}}}))},_14O:function(y,q,_){var s,p,O,L,$,k,M,E;y&&(E=y.uv,(y=y.tuv)&&(E=E?(s=E[0]+(E[6]-E[0])*q,p=E[1]+(E[7]-E[1])*q,O=E[2]+(E[4]-E[2])*q,L=E[3]+(E[5]-E[3])*q,$=E[2]+(E[4]-E[2])*_,k=E[3]+(E[5]-E[3])*_,M=E[0]+(E[6]-E[0])*_,E[1]+(E[7]-E[1])*_):(O=s=q,k=L=1,M=$=_,p=0),y.push(O,L,$,k,M,E,M,E,s,p,O,L)))},_13O:function(y){var q=y.uv;(y=y.tuv)&&(q?y.push(q[2],q[3],q[4],q[5],q[6],q[7],q[6],q[7],q[0],q[1],q[2],q[3]):y.push(0,1,1,1,1,0,1,0,0,0,0,1))},_tryRemoveBezierPoints:function(q,y){var _=q.length;if(_<4)return q;for(var s,p,O,L,$=!1,k=function(y){return q[y]},M=function(y){return q[_-1-y]},E=0;E<=1;E++)for(s=(O=E?M:k)(0),p=O(1),w=2;w<_-1;w++)(L=O(w)).remove||(L.b&&xK(s,p,L,y).adjust?$=L.remove=!0:(s=p,p=L));if(!$)return q;for(var H=[],w=0;w<_;w++)q[w].remove||H.push(q[w]);return H},_12O:function(y,q){var _,s,p,O,L,$=this.s("shape3d.point.epsilon"),k=this;y.forEach(function(y){if(0<(L=y.length))for(_={p:y[0],n:!0},O=1;O<L;O++)s=y[O],(p=O<L-1?y[O+1]:M5)&&Math.abs(s.x-p.x)<$&&Math.abs(s.y-p.y)<$||k.addPoint(_,s,p,q,y)})},addPoint:function(y,q,_,s,p){var O,L,$,k,M,E,H=this,w=y.p,Q=y.f,x=y.b,S=H.s("shape3d.side")||H8,X=H.s("shape3d.start.angle"),T=H.s("shape3d.sweep.angle"),i=H.shapeModel,N=H.data.isClosePath();if(y.n&&(y.n=!1,Q=N&&2<p.length?xK(p[p.length-2],w,q,s):xK(M5,w,q,s),x=QK(w,Q),i?i.top_vs&&H._10O(x,Q,S,X,T,i.top_vs,i.top_uv):(O=H.left)&&(H.addV(O.vs,x,Q),H._13O(O))),N=_?xK(w,q,_,s):N&&2<p.length?xK(w,q,p[1],s):xK(w,q,M5,s),p=QK(q,N),i){var a,l,j=i.vs,Z=i.uv,s=i.sum;for(Z&&(a=i.len/s,i.len+=vA(w,q),l=i.len/s),$=H._9O(x,Q,S,X,T),k=H._9O(p,N,S,X,T),M=0;M<S;M++)ix(j,$[E=M+1]),ix(j,k[M]),ix(j,$[M]),ix(j,k[M]),ix(j,$[E]),ix(j,k[E]),Z&&Z.push(a,E/=S,l,L=M/S,a,L,l,L,a,E,l,E);!_&&i.bottom_vs&&H._10O(p,N,S,X,T,i.bottom_vs,i.bottom_uv,!0)}else!_&&(O=H.right)&&(H.addV(O.vs,N,p),H._13O(O)),(O=H.front)&&H.addV(O.vs,Q,N),(O=H.back)&&H.addV(O.vs,p,x),(O=H.top)&&H.addH(O.vs,Q,N,p,x,!0),(O=H.bottom)&&H.addH(O.vs,x,p,N,Q);y.p=q,y.f=N,y.b=p},_10O:function(y,q,_,s,p,O,L,$){for(var k,M,E=this.data,H=this._9O(y,q,_,s,p),w=(y.x+q.x)/2,Q=(y.y+q.y)/2,x=E.getShapeElevation(),S=0,S=0;S<_;S++)$?(ix(O,H[S]),ix(O,H[S+1])):(ix(O,H[S+1]),ix(O,H[S])),ix(O,[w,x,Q]),L&&(M=$?(k=O5*(S+1)/_+s,O5*S/_+s):(k=O5*S/_+s,O5*(S+1)/_+s),L.push(.5-.5*H5(M),.5-.5*p5(M),.5-.5*H5(k),.5-.5*p5(k),.5,.5))},_9O:function(y,q,_,s,p){var O,L,$=this.data,k=[],M=(y.x+q.x)/2,E=(y.y+q.y)/2,H=$.getTall()/2,w=$.getShapeElevation(),Q=0;for(p==M5&&(p=O5);Q<=_;Q++)L=H5(O=p*Q/_+s),k.push([M+(y.x-M)*L,w+H*p5(O),E+(y.y-E)*L]);return k},addV:function(y,q,_){var s=q.x,q=q.y,p=_.x,_=_.y,O=(L=this.data).getShapeElevation(),L=L.getTall()/2;y.push(s,O-L,q,p,O-L,_,p,O+L,_,p,O+L,_,s,O+L,q,s,O-L,q)},addH:function(y,q,_,s,p,O){var L=($=this.data).getTall()/2,$=$.getShapeElevation()+(O?L:-L);y.push(q.x,$,q.y,_.x,$,_.y,s.x,$,s.y,s.x,$,s.y,p.x,$,p.y,q.x,$,q.y)},vf:function(y,q,_,s){var p,O=this.gv.getFaceVisible(this.data,y);return(_||O)&&((p=S3(this,y,s)).vs=[],p.tuv=O?[]:M5,p.visible=O),p}}),function(y,q){Kx(e6,this,[y,q])}),f6={},G6=(w8(e6,m6,{validate:function(){var y=this,q=y.gv,_=y.data,s=y.s,p=fl(s("points.color")),O=s("points.size"),o=s("points.uv.offset"),L=s("points.image"),$=(!L||/\.(png|jpg|gif|jpeg|bmp|svg)$/i.test(L)||Rn.test(L)||(f6[L]||(f6[L]=y._createCachedImage(L)),L=f6[L]),_._modelDirty),k=s("points.model");if(k){if(y._lastShapeModel!==k||!y.shapeModel){var M=W_(y,k);if(!M)return;var H=[],w={},Q=e.requestVector3();y.eachShapeModel(function(y,q,_,s,p){for(var O=0,L=y.length;O<L;O+=3){var $=y[O],k=y[O+1],M=y[O+2],E=(p&&(Q.set($,k,M).applyMatrix4(p),$=Q.x,k=Q.y,M=Q.z),$+"_"+k+"_"+M);w[E]||(w[E]=!0,H.push($,k,M))}},M),e.releaseVector3(Q),y._setShapeModelPoints(new T8(H)),y._lastShapeModel=k,$=!0}x=y.shapeModel.vs.length/3}else{var E=_.getPoints(),x=E.length;if($||_._pointsDirty||!y.shapeModel){for(var S=[],X=0;X<x;X++){var T=E[X];T&&S.push(T.x,T.e,T.y)}y._setShapeModelPoints(new T8(S)),_._pointsDirty=!1,$=!(y._lastShapeModel=null)}}if(M=s("points.transparent"),y.info={mat:J8(_),size:O,diffuse:p,opacity:s("points.opacity"),texture:L,transparent:M,alphaTest:M?0:s("alphaTest"),uvScale:s("points.uv.scale"),uvOffset:o,discardSelectable:s("points.discard.selectable")},$||_._colorsDirty){var i=!1,N=_.getColors();if(N&&0<N.length)for(var a=[],X=0;X<x;X++)for(var l=N[X],Y=l?(i=!0,fl(l)):p,P=4*X,j=0;j<4;j++)a[P+j]=Y[j];y.shapeModel.cs=i?new T8(a):null,_._colorsDirty=!1}if($||_._sizesDirty){var Z=!1,K=_.getSizes();if(K&&0<K.length)for(var C,B=[],X=0;X<x;X++)0<=(C=K[X])?(B.push(C),Z=!0):B.push(O);y.shapeModel.ss=Z?new T8(B):null,_._sizesDirty=!1}if($||_._offsetsDirty){var F=!1,V=_.getUvoffsets();if(V&&0<V.length)for(var h,t,u=[],X=0;X<x;X++)h=V[t=2*X],t=V[1+t],h!=k5&&t!=k5?(u.push(h,t),F=!0):u.push(0,0);y.shapeModel.os=F?new T8(u):null,_._offsetsDirty=!1}if($||y._lastPointNumber!==x){this.dispose();for(var J=q.pickColorMap,D=y._startPickId=J._pickIdUsed,S=(J._pickIdUsed=D+x,[]),X=0;X<x;X++){var c=D+X,R=j6(c);S.push(R[0],R[1],R[2],R[3]),J[c]||(J[c]={data:_,part:X})}y.shapeModel.ps=new T8(S),y._lastPointNumber=x}_._modelDirty=!1,this.dispatchBoundingBoxChanged()},_setShapeModelPoints:function(y){var q=this.shapeModel,_=this.shapeModel={vs:y};return q&&(y=y.length,y=Math.round(y/3),q.cs&&q.cs.length==4*y&&(_.cs=q.cs),q.ss&&q.ss.length==y&&(_.ss=q.ss),q.os&&q.os.length==2*y&&(_.os=q.os),q.ps&&q.ps.length==4*y&&(_.ps=q.ps)),_},_createCachedImage:function(y){var q=ex(),_=q.getContext("2d"),_=(rx(q,128,128,1),qu(_,{width:128,height:128,comps:[{type:y,background:"white",borderWidth:0,rect:[0,0,128,128]}]},0,0,128,128),P.Math.generateUUID());return Cn[_]=q,_},drawBody:function(y,q){var _,s,p=this.gv,O=p._picking;O&&!p.isSelectable(this.data)||(_=this.shapeModel,s=this.info,_&&_.vs&&_.vs.length&&(s={type:"points",renderMode:"points",renderPickMap:!0,transparent:s.transparent,modelMatrix:s.mat,modelViewMatrix:iK([],p._viewMatrix,s.mat),projectionMatrix:p._projectMatrix,viewMatrix:p._viewMatrix,scale:p.getHeight()/2,size:s.size,diffuse:s.diffuse,opacity:s.opacity,map:p.getTexture(s.texture,this.data),alphaTest:s.alphaTest,resolution:p.getDevicePixelRatio(),discardSelectable:s.discardSelectable,uvScale:s.uvScale,blackout:y._blooming&&!this.data.s("bloom"),picking:O,useColor:!O&&_.cs!=M5,useSizeArray:_.ss!=M5,uUvOffset:s.uvOffset,useUvArray:!O&&_.os!=M5},p._prefabRenderer.render(y,{model3d:!0,mesh:{position:_.vs,pickColor:O?_.ps:null,color:O?null:_.cs,aUvOffset:!O&&_.os?_.os:null,sizeArray:_.ss},mat:s}),(O=S5.for(y)).useProgram(q),O.directAttribs().disable(),p.shadowMap.enable&&p.shadowMap.createShadow(),p.rebindOITTexture(),p.flowMap.createFlow()))},dispose:function(){e6.superClass.dispose.call(this);var y=this._startPickId,q=this._lastPointNumber;if(y&&q){for(var _=this.gv.pickColorMap,s=0;s<q;s++){var p=y+s;_[p]&&delete _[p]}delete this._startPickId,delete this._lastPointNumber}}}),function(y,q){Kx(G6,this,[y,q]),this._needRecoverPosition=!0}),r6=(w8(G6,P6,{_25Q:1,needValidate:function(y){return m6.prototype.needValidate.call(this,y)},_updateAutoRotation:function(){return m6.prototype._updateAutoRotation.call(this)},invalidateUnstableWireframe:function(){this.data._47Q&&this.invalidateWireframe()},validate:function(y,q){var _,s,p,O,L,$=this,k=$.data,M=$.s,E=k.getPoints(),H=E.size(),w=($.dispatchBoundingBoxChanged(),$._updateAutoRotation(),$.invalidateUnstableWireframe(),k.p3()),Q=$.mat=l8(),x=(XK(Q,w),GQ(Q,k.getFinalRotation3d(),k.getRotationMode()),k.getScale3d()),S=k._dynamicScale3d;S&&(x[0]*=S[0],x[1]*=S[1],x[2]*=S[2]),TK(Q,x),XK(Q,N8(w)),k._flipSide=G.determinantOfArray(Q)<0,M(hL)===TD&&M("batch")==M5&&$.shapeModel&&$._geometryVersion===k._geometryVersion||($._geometryVersion=k._geometryVersion,$.shapeModel=$.info=$.lineShapeModel=M5,1<H&&(S=$.info={},x=k.getSegments(),_=k.getThickness(),s=sK(E.get(0)),p=sK(E.get(H-1)),S.c1=sK(E.get((L=(H-(O=H%2))/2)-1)),S.c2=sK(E.get(L)),0!=O&&(S.p3=S.c2),S.s1=s,S.s2=sK(E.get(1)),S.t1=sK(E.get(H-2)),S.t2=p,M(hL)===TD?(E5.extractPolylineTranslation||E5.extractVerticesTranslation?(w=new e.Vector3(k.p3()),(E=DA(E)).forEach(function(y){y.x-=w.x,y.e-=w.y,y.y-=w.z}),$._vsTranslation=(new e.Matrix4).setPosition(w),$._matWithExtraction=(new e.Matrix4).fromArray(Q).multiply($._vsTranslation).toArray()):($._vsTranslation=null,$._matWithExtraction=null),S.list=$.createTubeModel(E,x,_/2,y)):S.list=$.createLineModel(E,x,_,"shape.border","shape.dash")))},invalidateCachedGeometry:function(){this.shapeModel=this.info=this.lineShapeModel=M5},drawBody:function(y,q,_){var s,p,O,L,$,k,M,E,H,w,Q=this,x=Q.shapeModel;x&&(p=Q.mat,(E5.extractPolylineTranslation||E5.extractVerticesTranslation)&&Q._matWithExtraction&&(p=Q._matWithExtraction),s=Q.gv,L3(s,p),p=Q.s("3d.clip.direction"),s._uvClipEnabled&&("uv.left"===p||"uv.right"===p)&&(O=Q.s("3d.clip.percentage"))<1?($=L=!0,A_(x),k=x.top_vs,M=x.bottom_vs,E=x.vs,H=(w=S5.for(y)).directUniforms(),w=w.directAttribs(),"uv.left"==p?(O<1&&(L=!1),O<=0&&($=!1)):(O<1&&($=!1),O<=0&&(L=!1)),x.top_vs=x.bottom_vs=k5,w.aUv=dK(y,s._buffer.uv,x.uv,M5,2),Y_(s,Q.data,x,Q,Q.getBodyColor(),_),w.aUv=!1,H.uClipDirection=0,x.vs=k5,L&&(x.top_vs=k),$&&(x.bottom_vs=M),Y_(s,Q.data,x,Q,Q.getBodyColor(),_),x.vs=E,x.top_vs=k,x.bottom_vs=M):Y_(s,Q.data,x,Q,Q.getBodyColor(),_),p3(s))}}),E5.meshTypeMap={box:function(){return E5.createBoxModel()},sphere:function(y){return E5.createSphereModel(y.side,y.sideFrom,y.sideTo,y.from,y.to,y.resolution,y.smooth)},cylinder:function(){return E5.createCylinderModel(side,sideFrom,sideTo,from,to,top,bottom,smooth)},cone:function(){return E5.createConeModel(side,sideFrom,sideTo,from,to,bottom,resolution,smooth)},torus:function(){return E5.createTorusModel(side,sideFrom,sideTo,from,to,radius,resolution,smooth)}});for(W4 in ax(E5,{invalidateMeshAttribute:function(y){y&&y._bufId&&(y._bufId=null)},invalidateMesh:function(y,q){if(y){if(q)for(var _ in y)E5.invalidateMeshAttribute(y[_]);delete y._4HQ,delete y._complete_}}}),ax(k6,{invalidateMeshAttribute:function(y){E5.invalidateMeshAttribute(y),this.iv()},invalidateMesh:function(y,q){E5.invalidateMesh(y,q),this.iv()}}),u_)r6[W4]=u_[W4];r6.bone=(m4=new Array(5),function(y){for(var q=y.ratio||.1,_=y.resolution||8,s=null,p=0;p<5;p++){if(m4[p])return m4[p].ratio==q&&m4[p].resolution==_&&(m4[p].active=Date.now()),m4[p].mesh;s=p}if(!s)for(var O=1/0,p=0;p<5;p++)m4[p].active<O&&(O=m4[p].active,s=p);var L=[],$=[];for(q*=.5,L.push(0,0,0,0,0,.5),p=0;p<_;p++){var k=p/_*Math.PI*2;L.push(Math.cos(k)*q,Math.sin(k)*q,q),0<p&&($.push(0,p+2,p+1),$.push(p+1,p+2,1))}return $.push(0,2,_+1),$.push(_+1,2,1),m4[p]={active:Date.now(),resolution:_,ratio:q,mesh:{vs:L,is:$}},m4[p].mesh});var g6,n6,v6,b6,I6=!(n6=1),U6={},d6={},yt={},qt=function(){tA(qt);var y=Date.now(),q=y-g6;g6=y;try{_t(q/1e3)}catch(y){}},_t=function(y){var q,_,s={};for(q in U6){var p,O,L=(O=U6[q]).speed,$=O.time,k=(O.paused?p=O.time:(p=O.time+y*L,O.time=p),O.duration),M=O.loop,L=("once"===M?L<0&&p<=O.end||0<=L&&p>=O.end?(p=O.end,O.iteration=1):p=e.modToPositive(p,k):(Math.floor(p/k)!==Math.floor($/k)&&O.iteration++,"pingpong"===M?k<(p=e.modToPositive(p,2*k))&&(p=2*k-p):p=e.modToPositive(p,k)),_=O.animation,O.displayTime=e.roundFloat(p,3));L+=O.shift,($=s[_])?$.push(q,L):s[_]=[q,L]}for(_ in s){h=V=K=a=N=C=T=X=S=Z=B=x=j=w=void 0;var E=_,H=s[_],w=d6[E][1];if(w){var Q,x,S,X,T={},i=H.length/2,N={},a=yt[E];if(a){for(var l=a.clips,j=0,Z=l.length;j<Z;j++)T[l[j].time]=j;for(j=0;j<i;j++)(X=T[S=H[2*j+1]])!==k5&&(N[X]=!0)}else a=yt[E]={clips:[]};for(var Z=w.length,K=-1,C=0;C<i;C++)if(Q=H[2*C],(X=T[S=H[2*C+1]])!==k5)U6[Q].clip=a.clips[X];else{for(;N[++K];);(x=a.clips[K])?x.time=S:x=a.clips[K]={time:S,datas:[]};for(var B=x.datas,j=0;j<Z;j++)for(var F=w[j].evaluate(S),V=(V=B[j])||(B[j]=[]),h=0,t=F.length;h<t;h++)V[h]=F[h];T[S]=K,U6[Q].clip=x}}}},st=e.newIdGenerator(),pt={add:function(E,y,q,_,s){(p=E.tag)||(p=E.tag=st.next()),d6[p]||(d6[p]=function(){for(var y,q,_=E.tracks,s=_.length,p=new Array(s),O={},L=0;L<s;L++){var $=_[L],k=$.type,M=$.name.split(".");switch((q=O[M[0]])||(q=O[M[0]]=[]),M[1]){case"scale":q[2]=L;break;case"quaternion":q[1]=L;break;default:q[0]=L}switch(k){case"linear":y=new yM($.times,$.values);break;case"quaternion":y=new qM($.times,$.values);break;case"cubic":y=new _M($.times,$.values);break;case"cubicSpline":y=new sM($.times,$.values,3);break;case"cubicSplineQuaternion":(y=new sM($.times,$.values,3)).isQuaternion=!0;break;default:y=new dt($.times,$.values)}p[L]=y}return[O,p]}());var p,O=n6++,L=E.duration;return y===k5&&(y=E.speed||1),_===k5&&(_=E.loop||"repeat"),U6[O]={time:q||0,start:q||0,loop:_,shift:E.start||0,duration:L,animation:p,animationName:E.name,clip:s,iteration:0},Mv(U6[O],y),I6||(I6=!0,g6=Date.now(),qt()),O},stop:function(y){var q=U6[y];return!!q&&(delete U6[y],q)},changeAnimationInfo:function(y,q,_){return!!(y=U6[y])&&("speed"===q?(Mv(y,_),!0):"forwardTime"===q&&(y.time+=_,!0))},getAnimation:function(y){return U6[y]},getAnimationMap:function(){return U6},getAnimationTracks:function(){return d6},getFrameAnimationData:function(){return yt}},Ot=(ax(WQ,{playAnimation:function(y,q,_,s){return!!(y=y||this.getDefaultAnimationName())&&(!!(y=this.getAnimation(y))&&(this._animationPlaying&&(p=pt.stop(this._animationId)),y=this._animationId=pt.add(y,q,_,s,p?p.clip:null),this._animationPlaying=!0,this._animationPaused=!1,this._lastAnimIteration=0,this.fp("animationStart",null,!0),y));var p},changeCurrentAnimationSpeed:function(y){return pt.changeAnimationInfo(this._animationId,"speed",y)},forwardAnimation:function(y){return this.invalidateView(),pt.changeAnimationInfo(this._animationId,"forwardTime",y)},backwardAnimation:function(y){return this.forwardAnimation(-y)},stopAnimation:function(){var y=this._animationId;return y&&pt.stop(y),this._animationPlaying=!1,this._animationPaused=!1,this._animationId=k5,this._lastAnimIteration=0,this.fp("animationStop",null,!0),y},pauseAnimation:function(){if(this._animationPaused)return!1;var y=this._animationId;return!!y&&(!!(y=pt.getAnimation(y))&&(y.paused=!0,this._animationPaused=!0,this.fp("animationPause",null,!0),!0))},resumeAnimation:function(){var y;return!!this._animationPaused&&(!!(y=this._animationId)&&(!!(y=pt.getAnimation(y))&&(y.paused=!1,this._animationPaused=!1,this.fp("animationResume",null,!0),!0)))},isAnimationPlaying:function(){return this._animationPlaying},isAnimationPaused:function(){return this._animationPaused},getAnimationNames:function(){return E5.getShapeModelAnimationNameList(this.s("shape3d"))},getAnimation:function(y){return E5.getShapeModelAnimation(this.s("shape3d"),y)},getDefaultAnimationName:function(){return E5.getShapeModelDefaultAnimationName(this.s("shape3d"))},getAnimations:function(){return E5.getShapeModelAnimations(this.s("shape3d"))},getCurrentAnimationState:function(y){var q=this._animationId;if(!q)return null;var _=pt.getAnimation(q);if(!_)return null;switch(y){case"time":return _.displayTime||0;case"name":return _.animationName;case"loop":return _.loop;case"speed":return _.speed;case"duration":return _.duration;default:return{time:_.displayTime||0,name:_.animationName,loop:_.loop,speed:_.speed,duration:_.duration}}}}),ax(iu,{isAnimationPlaying:N}),ax(E5,{getShapeModelAnimations:function(y){return(y=y&&b4(y))&&y.model3d&&(y=y.animations)?y:null},getShapeModelAnimation:function(y,q){var _=E5.getShapeModelAnimations(y);if(_)for(var s=0,p=_.length;s<p;s++)if(_[s].name===q)return _[s];return null},getShapeModelAnimationNameList:function(y){var q=E5.getShapeModelAnimations(y);if(!q)return null;for(var _=q.length,s=new Array(_),p=0;p<_;p++)s[p]=q[p].name;return s},getShapeModelDefaultAnimationName:function(y){var q,_=E5.getShapeModelAnimations(y);if(!_)return null;for(var s=0,p=_.length;s<p;s++){if(_[s].default)return _[s].name;!q&&0<_[s].duration&&(q=_[s].name)}return q}}),v6={},{request:function(y){var q;return(q=v6[y])?q.length?q.pop():new Float32Array(y):(v6[y]=[],new Float32Array(y))},release:function(y){var q,_=y.length;(q=v6[_])?q.push(y):v6[_]=[y]}}),Lt=e.newIdGenerator(),$t=(o.assign(B3.Graph3dView.prototype,{initSkeletonDatas:function(){var y,q=this._updatedSkeletonDatas;for(y in q)Ot.release(q[y]);this._updatedSkeletonDatas={},this._isSkeletonUpdated={},this._boneViewMatrices.length=0,this._boneViewMatrices._bufId=null},_renderBonesForDebug:function(y,q){0<this._boneViewMatrices.length&&(q.depth.enabled=!1,q.depth.mask=!1,this._prefabRenderer.render(y,{mesh:{type:"bone"},instances:{aMatrixInstanced:new Float32Array(this._boneViewMatrices)},mat:{type:"fixColor",color:"red",cullFace:!0}}))},updateSkeleton:function(y,q){var M=this;if(q||(q=b4(y.s("shape3d")))&&q.model3d){var _=y._animationId;if(_=pt.getAnimationMap()[_]){var s=_.clip;if(s){var p=_.iteration,O=(p!==(O=y._lastAnimIteration||0)&&(y._lastAnimIteration=p,y.fp("animationIteration",O,p)),_.time),L=y._lastAnimHashKey=_.animation+"|"+O;if(!this._isSkeletonUpdated[L]){this._isSkeletonUpdated[L]=!0;for(var E,H,w,Q,x,$,k,S,X,T=y.s("3d.bone.visible"),i=(T&&(H=e.requestVector3(),w=e.requestVector3(),Q=e.requestMatrix4().fromArray(y.mat),x=e.requestMatrix4()),s.datas),N=pt.getAnimationTracks()[_.animation][0],a=e.requestMatrix4(),l=[],j={},Z=(E5.traverse(q,function(y,q){y.skeleton&&l.push(y);var _,s,p,O,L,$=y.name,k=($&&(L=N[$])&&((O=L[0])!==k5&&(_=i[O]),(O=L[1])!==k5&&(s=i[O]),(O=L[2])!==k5&&(p=i[O])),(O=y.matrixWorld)||(O=y.matrixWorld=new G),y.transformData);L&&k?i3(O,k,_||y.position,s||y.quaternion,p||y.scale):O.composeFromArray(_||y.position,s||y.quaternion,p||y.scale),q&&(O.premultiply(q.matrixWorld),T&&q.isBone&&(L=M._boneViewMatrices,q.matrixWorld.getPosition(H),H.applyMatrix4(Q),O.getPosition(w),w.applyMatrix4(Q),E=2*H.distanceTo(w),x.lookAt(w,H).setPosition(w.set(0,0,0)).scale(w.set(E,E,E)).setPosition(H),L.push.apply(L,x.getElements()))),j[$]=O,y.skeleton&&(y.skeleton._tempMatrixInverse=a.copy(O).invert().toArray())},null,"comps"),T&&(e.releaseVector3(H),e.releaseVector3(w),e.releaseMatrix4(x),e.releaseMatrix4(Q)),e.releaseMatrix4(a),M._updatedSkeletonDatas),K=0,C=l.length;K<C;K++){var B,F,V,h,t=(h=(V=l[K]).skeleton.bones).length;for(($=Z[(S=(S=V._skeletonId)?S:V._skeletonId=Lt.next())+"|"+L])||(B=Math.sqrt(4*t),(F=e.nearestPOT(B))<B&&(F<<=1),F=Math.max(F,4),$=Z[S+"|"+L]=Ot.request(F*F*4)),k=V.skeleton.boneMatrixInverses,X=0;X<t;X++)G.multiplyMatrixArray($,j[h[X]],k,16*X,0,16*X);$.bindMatrixInverse=V.skeleton._tempMatrixInverse,delete V.skeleton._tempMatrixInverse}}}}}}}),{cullFace:!1,flipSide:!1,transparent:!1,uvRotation:0,uvScale:[1,1],uvOffset:[0,0],uvAnchor:[0,0]}),kt=function(y,q){if(Mx(q))return q;var _,s,p=w5(q);return(_=(_=p?y.s(q):_)||(p&&(s=y.s("matDef"))?s[q]:_))||(y=y.s("shape3d"),(y=w5(y)?E5.getShape3dModel(y):y)&&y.model3d&&(p||(_=y.mat),(s=y.matDef)&&(!_&&p?_=s[q]:w5(_)&&_ in s&&(_=s[_])))),w5(_=_||q)?E5.getMaterial(_):_},Mt=(ax(WQ,{getMaterial:XQ=function(y,q){if(y=kt(this,y),q===k5||!y)return y;var _=y[q];return _===k5&&(q in $t?_=DA($t[q]):(y=Mt[y.type])&&(_=DA(y[q]))),_},setMaterial:y=function(y,q,_){var s,p,O=kt(this,y);if(O){if(w5(q))s=O[q],p=O[q]=_;else if(Mx(q)){for(var L in s={},q)s[L]=O[L],O[L]=q[L];p=q}this.fp("material",M5,{material:O,materialName:y,property:q,oldValue:s,newValue:p})}}}),ax(rQ,{getMaterial:XQ,setMaterial:y}),{}),Et=(ax(Mt,{pbr:{diffuse:[1,1,1],emissive:[0,0,0],roughness:1,metalness:0,opacity:1,map:null,alphaMap:null,alphaChannel:"A",alphaTest:k5,roughnessMap:null,roughnessChannel:"R",metalnessMap:null,metalnessChannel:"G",emissiveMap:null,aoMap:null,aoMapIntensity:1,aoChannel:"B",aoUvChannel:1,normalMap:null,normalScale:[1,1],lightMap:null,lightMapIntensity:1,envMap:null,envMapIntensity:1,displacementMap:null,displacementScale:1,displacementBias:0,rimColor:[0,0,0],rimPower:0,fresnelIntensity:1,enableTransmission:!1,transmission:1,thickness:0,ior:1.5,specularIntensity:1,specularColor:[1,1,1]},phong:{diffuse:[1,1,1],emissive:[0,0,0],specular:[17/255,17/255,17/255],shininess:30,opacity:1,map:null,alphaMap:null,alphaChannel:"A",alphaTest:k5,specularMap:null,emissiveMap:null,aoMap:null,aoMapIntensity:1,aoChannel:"B",aoUvChannel:1,normalMap:null,normalScale:[1,1],lightMap:null,lightMapIntensity:1,envMap:null,envMapCombine:"add",envMapIntensity:1,refractionRatio:.98,displacementMap:null,displacementScale:1,displacementBias:0,fresnelIntensity:1}},!0),{}),Ht={aoMap:["aoMapIntensity"],normalMap:["normalScale"],lightMap:["lightMapIntensity"],displacementMap:["displacementScale","displacementBias"],enableTransmission:["transmission","thickness","ior","specularIntensity","specularColor"]};for(b6 in Mt){var wt,Qt,xt=[],St=[],Xt=Mt[b6],Tt={},it=[];for(Qt in Xt)"envMap"!==Qt&&"envMapIntensity"!==Qt&&Qt.indexOf("Channel")!==Qt.length-7&&"enableTransmission"!==Qt&&"envMapCombine"!==Qt&&("map"===Qt||Qt.indexOf("Map")===Qt.length-3?(wt=Ht[Qt])&&wt.length?(xt.push(Qt,wt.length),wt.forEach(function(y){Tt[y]=!0,xt.push(y,Xt[y])})):xt.push(Qt,0):(wt=Ht[Qt])&&wt.length?(Tt[Qt]=!0,St.push(Qt,wt.length),wt.forEach(function(y){Tt[y]=!0,St.push(y,Xt[y])})):it.push(Qt));xt.push(-1),(xt=xt.concat(St)).push(-2),it.forEach(function(y){Tt[y]||xt.push(y,Xt[y])}),Et[b6]=xt}P.Default.getMaterialDefaultStyle=function(){return Mt},n4.pbr=["?0t0w!/Imjbodujtt;z!ihqm=t!mf4e-v!mmdjohji$u\v\v!!\v\vS0C0Q!!$fQoSjFgGfJeY$\v\v!","~0!0<!eIJj!o>u!ts;p!mhpmDthmb4s-G!`mmjhh!i\vu?-z!eppjcu/\vt!g\v/0u0j!p$=Q!SfFeGvJmYd\vo!j\v$$\ve!f\vg?jzoefp!cQ/CtSg\v/!h\vp$ge=f!gfjeovfm!dToUjB$O\vE!B\vS?Ez\ve!p\vc$/jtgge/fqgb!NVxTpFm`gU=S!BfOeTvNmJdToTjJ$P\vO!\v<!*\ve$Je)fmgfjyoffU!uJvPqSu\vv!P\vp$Uesfbgfjoojfm!!T>Q!FeDJV!M\vB?Sz\ve!p\vc$/ftoge/jhgo\vj!q\vq$bjNofdompvue=f!!f=edvpmndnopjo$?\v\v!!\v\v?$zjeopdcm/vtegf/!u=vqqbudvlpj=o!hf?e\vv!m\vd$ojjo$d\vm!v\vegfj!e=ovfc$p\vt!/<iufbbped?s\vb!f\vm$dj/gmobejfsgf!uVbTnF!`+V!CsPb\vm!vvdofjqgTpusbnp!dnsbbuf5m!dv!W,j!f*xdNdbGu!s+j!yu<b!pvdosjbgfpmsdn/!mwbfjds4f!uebjng!g.v!t1f/<2!)v!o+j!gupishnj!Mwhfodj4p!hfunvjpt!t>j!wufi<h!jvMohjogjppshnu!vgpm!p<b*ud!dsWpOvuhpieo!f-t1t:<G!uvbopjdgspbsfnm!dg/mmpbbjus!fnufbunb!m-o1fGtutb<p!dvsobjfgmpds/nm!bgjmspfbuub!np)qlbddjjmuizd<T!`vGo!j>g!pdsdnG!!w4fddf4w!!s<j*n*DspjmEpxsf<j!wv/ozjsgupfsnnp!fghm!p-bmub!nssjpnOQupbxpfdss<b!f\vm$dj/gzesfugf!nVpTfFh`)BuMpQeI)BfUuFbTsUv\vu!bvto!j>g!pdsdnW!Ogumppeb!uu!bbpmmqgi!b\vUUfBtPuD<S!B\vF$MfDo`eFjTgV\v!!g\vf$efgoje$j\vg!\v\v!g\vj$ejogfe$f\vg!!<VsTbFm`vVdWf\vq!Twobfsfzijto!h,!!wqfndp3D!zwhVswf<o!F\vo$fjfgietf!g+!!VuWi`hDjMMJhQo\vj!pwhbusvzpj!o>h!!ugimhpjbMuh!owjVpwhMupvdpb!m<V*<s!p\vm$pfDooefjfgi\vt!/\vm$bfjosefjugb\vn!)\v4$yjbgn!!e+f!g8j6o2f/e1)!V.T!F1`/M2J!H>I!UqNnBpQD*z!h}s}f!oeFfogfjfoifte!)uVbTpFm`gB!P\vNOBFQF*I\vT!`wFbTsVz!jgofhe!gwjf$d\v3!!<wfVdwo3b<j!e\vb$Sffowejjtgt\vj!n\vF$mjbguepfug!!,V!TsFb`mNvBdQf\vq!Tvmobjugppus!n,!!tfbtnvqgmgfjsE3mEb!unpbuq!<>!!\vu$ifhojeMjhgo\vj!p\vh$ujvgpe!f4gd!fVwT!F\v`?BzMeQpIcB/NtBgQ/\vo!pvjotjtgjpnstno!btsbun=q!mffesv3mEd!objm$q\vi!b<Nsbbqm<v!d\vf$qfTouedjfgs\vj!e\vo$jj/gueifhgj!MVeTfFu`dBfPmNgBfQs\v!!,v!osjbgmpvsdnf!qtTbundqfmsfjse3/Eu!ibhpjNMbeqf<u!d\vf$mjggfose!f>g!!sVbTmFv`dVfCqPT\vm!bvuopjug!p4sdnf!wg!m<pfbtuv!gbgpjNEbuqdJfosujfeootjj/uuzi<h!j\vM$effouedjfgm\vg!f\vs$!f,o!efjtgv\vg!g\vj$Ejugdeffsgj!eV/TuFi`hMjJMHeIfUuNdBfQm\vg!fvso!j>g!pfstnv!gtgbjnEqmmbfusp3uE!!4mdjfhwi!u\vN?bzqe<p!c\v/$tjgg/oqebfNgp!bV=T!Ff`eVvCmPd\vo!jv$o\vj!g<p*ssnf!xgpmQpnbjus!!m-jnhjisu)NxbpqqJ!o+u!fsoptmjpuDzn<j!s\v!$>f,o!efjdgo\vb!j\ve$bfSofewjjgt\vt!j\vn$Fjmgbeufpgu!!V<T*F*`sFjNEJxTfTjJwW/FzNsBuQf\vn!pvfohj!g-pmsbnn!stpbon/qzmsfusf3nEp!ffhn)jutptej)wtfcNbb!q.<!!1\v/$2f!o>enjjgs\v!!u\vb$pjmogd!m\vv?ezfe!p=cc/ttegg/to?p\vn!n\vp$Djtgueifhgj!mV=T!Ff`eOvPmSdNoBjM$N\vB!Q\v\v?!zveopjcg/ptsgn/!StCbQntqumifhsj3mE=!!ofpesvnmbdmoNjb$q\v<!!\v\vg$jjegoofe$f\vg!!<VcThFs`/VsCpPm\vp!Dvfowjjgtptsjnn!fw!f>d+3!!fodposbnjbembTSdfbwmjft<t!j\vn$Ffmobeujpgu\v!!<\v{$zfyo/e*jsgp\vm!p\vD$fjwgj!tatejfngfj)osfbef)oVjTMFp`UUCBHOSHtF!O>U!*c!h%s%/!s)pemfpgDjfowfjet)tUjBnOfH!F<O*UwTVQwB!D-Fq`bONPfSwNjBtMtNjBnQf*)!E}3}f!sevfugyjfouf!e>!!)sVpTmFp`DDfMwFjBtStDjPnBfU!`5OdPfSwN!B\vMQNBBNQF*W*J\vT!TwJfNdF4`!FqTfVs!ugvfsecgOjp$s\vn!b\vmg3jBesocf)$w\vf!d<4*!ofpzjfu`dqfpstj-E!fwdfbdg4!!-tOvqsbgn`!o-pmsbnn-s!pwof!d-4o!pnjbuqjOt-p!QgxmfpjbWuw!!g.b)dcfsEBj3smfbdnusjppOoc*s!v|u!swffqd!4>!!rm1b!n>s!pwof!d<4f)mebGdeTym)bfnzsfp`oq!p>t+/!yz*y-/!OeqGbeny!)<f1z/f2`!q.p!t1//z3*!-+!!e{Gzeyy/)*fwzVfw`!q-pqtb/N{m*b*n<s!pwof)dE43!frs2v!u>y!fwuf!d>4!)OeqGbenz!)4fdzffw`!q\vpQtB/NyM*B-N!SePGOe`zF)TfVz!fg`fqepgtj/$z\v*!-<!oepGjeuzj)tfpzQfw`Nqwp.t!/>{!*o*p<j!uwjftdp3Q!xtfuj1W!w>!!4edGfewy!)<wmVbwn/stpuo*!<>!!wmfbdn3s!ptOuz2s!u>f!nepGfehz!)4wdVfww/!t\vug*j<e!owff$d\v4!!<Oo!p>j!utdvfssgj`Eofpdsbng<!!+w!fmdb4n!srp2oq!f>s!qm!b>n!sdpsop!t\vtE)FrE2J-T!`OF*M<C!VwPfEd!4g!fre1gqjf$s\vq!!<>*!mdbsnpstptO)wO)-f!{rj1m*b<n!swpfod!4>!!Um!b>n!srp2oq!f4sdqf!w+!!<t1u/12/!y.!!,;!!r11/q2f!s@q!!h+o!jtdub2G/uyo<p!swGf`dm4h!!C>!!>o!prj2uqdffssqj!E+f!dtbug1!/uzb!p,m!gr!1\vqgfjseqo!f+$!\vt!u\v2g/jze<o!fg$m\vp!b<uc!/etftuf!o>m!bnubfyN)mefpyuf)uU!->!+U!*s-p!uedpbuG)tCt-f!oCm*b*u<f!ng!m\vp*bCu`!MtFdObOmBfI!D>`!Q)BeNfTuT!F>O>M!B1U/F1N*)!e@f!o1j/g1f!e;!!ggjbmdff$E\vj!s<fhd/utjtpfoo!m+b!ujfoNwmffsytffut!r>s+u!)sepfuud*b<G!tstffuovmsbou!fonp!s\vn*bHm`jM{FfO)OUB!I+D!`)QnBbNqTOT/FyO!M+B!UtFdNb)meff*o!j,g!fCe!!+g!j)mnfb$q\vO!/<zs!/+t!ttfdobmmbfu*f!N,m!fOy!f+u!!n>b+q!Os/p{u*d<b!G~t!t\vf$ofmobeujfgn\v!!\v\v*$Sj`gMeFfOgO!BVITDF``QSBPNVTHTIFOOFMTBTUNFBNQ)\ve!fvoojjggfpes!ng!jt$b\vn!q<m*fwsV3wE!!-sqpbvNhtitoffotmtbNubfqn<)!E\v3$ffsoveujygf\vu!!\v>$!jtgteffogm!bVuTfFN`mNfFyUfBuM!O5FdTfTwN!B\vQQ\vB!NvToTjFgOpMsBnU!FtNb`nFqTmVf!sg3fEe!gnjf$u\vb!m<otfttftoNmbbqu<f!n\v!$>f!osepjugd\vb!Gwtbtsfzojmobhu!fwnf!du4b!pwmOgp!s\vngbjme<o!fw$b\vs!z\vjgojhe!owff$d\v4!!<wcN/wtQtpftojiuhjvppoS<m!f\vy$fjug!!>e+f!gsjpoufdeb)GVtTtFf`oFiOhWvNpBsQ!*\v!*}C}`!MNFBOYO`BCIPDY``QDBMNJTQTQFFOSI!H?V!P1S!)}e}f!oejfggfjeo!fgej)mVfT$F\v`!U<ShB/OtTtNfJoTiThJvPpOS*m\vf!ywfbus!z>j+o!hs!pwufddb4G!twtXfposimhevQppst!j\vu*jHp`oM<F!O\vO$BfIoDe`jQgB\vN!T\vT$FjOgI!HeVfPgSj)oeffeo)jDgMfJeQ!`gEjJmSfF$D\vU!J<PsO/*t\vt!fwobishzvjpoShm!fwyffdu4!!>w+M!psdpbumdQbpGttjtufjopioh<v!p\vs$!f\vo*eSj`gM\vF!O\vO$BjIoDd`mQvBeNfT!T=FdOmIjHqVEPjSs)fedfuojjpgof/eg!tg/ji$f\vb!e<?*\vw!V\vw$!j-oqdbmNvtetff!o=idhmvjpqsc)pEy3/fgstv/uiyffbue!?>\v!!t\vt$fjooidhmvvpeSfm!f=ygfpuh!/5gdtf/wi!f\vbQeB?N\vT!T\vF$OjIoHdVmPvSe`fF!T=Vt!igbfeepgxjN$b\vq!/<gttt/fiofibhev?p\vs!!\v>$!jsopdumdvbeGft!t=fgomiphxvNpbsq!/ugbtp/migf!b\veg?j\ve!o\vf$$j\vo!d<mevsebfd!t=jfeo!d*puetjfoUhb?i\vq!m\vb$!j=o!dbm/vsepfm!p=DdfvtcvfgFgojweS)f!ggmjf!d\vuUjTpFoUGBTI?Q\vM!B\v`$FjToVd!mgvfeefg!j=$f\vo!w\vngbjqeQoifz$t\vj!d\vbgmj/egotf/$i\vf!b<ec?/\v*!w\vV$wj!o-dqmbvNebfi!q=mmbj)hEi3uftsDvpunynfpuo!/>g+t!/bi/fsbpem?p\vD!f\vt$vjgogdjmev!e\vf*!C=`mMjFhOiOuBtIQDC`SQ/BgNtB/IiQfMbBe)?e\vf!o\vj$gjfoed!mgvjemff!$=\vu!s<bho/t*nwjVtwt!j-pqob/Ngbti/qimfbb)eE?3\vf!s\vv$ujyofdum!v>e+f!!b=/usppomfpNDbfqtqvjgoghj/eg!t\v/*iHf`bMeF?O\vO!B\vI$Dj`oQdBmNvBeIfQ!M=Bp)jeuf/ogjtg/fief!bgej?m\vf!$w\vp!j<es!/n*bwjVow)!*-!q|b!N\vb$ijqomdbm)vEe3ff!s=vdumyjfquE!j>s+f!dbu/jsppom/pgDtf/tcvpgegzj?e\v!!\v\v*$Sj`oMdFmOvOeBfI!D=`dQmBjNqBcIpQyM/Bg)te/fcopjegzf?e\v!!gwjfmdf5$!\ve!j<gbg/v*twfVDwp!m-pqsb!N>b!iwqfmdb5))Ee3jfgsgvvutyff-u!!p>q+b!dbj/uszp*m<p!DSfftgvmgfgdjuef!e\vM*jBh`iMuF!OsOfBgImDf`dQuBfNeBMIjQhMiBu)!e>f!oSjfggfmef!dgujf$e\vM!j\vhQiBuN)BwIfQdM4B)`1F/T1V*!-g!fwefgdj4$)\v1!/\v1g*j-e!owff$d\v4!)<1s/p1m*p-D!mwffydf4u)!1>/+1!*s*p<m!pwDffdt4v!gugpjueb!m<F*nsjptmtpjDwmffSybfeuj)bsobdffo!j>M!pfUnCjHtSttj!w>f!<s!p\vm$pjDgmeffygf!uV!T<F*`wNVBwQ!\v-!qwbfnd)5E!3uffsyvfumyDfpum!p>s!"],n4.phong=["?0t0w!/Imjbodujtt;z!ihqm=t!mf4e-v!mmdjohji$u\v\v!!\v\vH0O0P!I$QQ!SfFoGjJgYf\ve!$\v","~0!0<!eIJj!o>u!ts;p!mhpmDthmb4s-G!`mmjhh!i\vu?-z!eppjcu/\vt!g\v/0u0j!p$=Q!SfFeGvJmYd\vo!j\v$$\ve!f\vg?jzoefp!cQ/ItPgO/Hh\vp!g\v=$!jfoedvmmvdeofj!$=\vd!p\vn?nzpeop?c\v/!t\vg$/jqobdNmxvpemfg!==!qfbedvlmjdoohj?$\v\v!!\v<$*jeoJd)mmvfeyff!U=uvvcqputv/PipfUbseb?f\vo!j\vm$!j>g!oeeJf!g\v!?VzTeFp`cV/CtPg\v/!hvoojjqgqpbsNnf!owpfud=4!!feejvgmgdvotjf$<\v!!v\vo?jzgeppscn/!twgf/du4v!qfunvjpt=t!jfwefv<m!dvoojj$g\vp!s\vn?!zwefpdc4/!ttgq/fhdovpmibQsq<b!nvwoojfg=p!sfne!vgmmdpobju$!\vt!i<jfodjoobfjtetb<S!fvwojjtgtpjsnnF!mgbmuppbuu!!,p!qsbbdmjvudzf<q!T\vu$djfgsejfego!jV/TuFi`hBjMMQeIfBuUdFfTmUg\vf!sv!o,j!gspbsmnv!dgfmqpTbuud!fbsmjqei/buUifhtjuM<e!f\vu$dffomegjfgs\v!!,v!ofjtgvpgsgnj!Ewufddf4s!jveDobjn/fusibhQjpMtejfuujdpfom<g!fvso!j,g!pfstnv!gngbjuE5u!dvfWsjjfex/NubiuhsjjMye<f!u\vd$ffmogefjsg!\v>!!\vu$ijhgjeMfhgo!jVpThFu`vVpW!\v4!dwfbws!z\vj?ozhe!pwcf/dt3g!/wqVbwN<p!b\v=$!jfgeevfmgd!oVjW$`\vD!M\vJ?Qz\ve!pwcb/stzgj/oohp!ngnmppDbtuu!iwhVjwmM=p!dfbemvVm<d!o\vj$$f\vo!e\vj?gz\ve!p\vc$/ftoge/jhgo\vp!i\vQ$tjugi!hejfmg=j!offeev)mVdToFj`$M\vJ!H\vIgUjNeBoQf*$!\v}!}<!cehfsg/jsopfmep)DVfTwFj`tBtPjNnBfQ!*>\v+!!wfbdsozbjjoehb!Swffwdj3t!twjVnwF3m<b!u\vp$uf!o<e{jzgy\v/!*\vs$pjmgpeDffgw!jVtTtFj`nNfB)Qs\vb!fvoojjMgppUsCnH!Sttb!n>q!mcfhss3/Es!pnmbpqD<f!w\vj$tftojenjfg!\v<!*\vw$Vjwg!e-fqgb!NVfTwFj`tBtMjQnIfB)NEB3Qf\vs!vvuoyjfgup!s>n!!stpbmnpqDmffwsj3tEt!jbnmfq!i5bdNfbwq!<\v!Q\vB$NfFoWeJjTgT\vJ!N\vF$`jFgTeVf!gg!fVeTgFj`$B\vP!N\vBgQj\ve!ovfo$j\vg!p<s*no!ptjbundqfmsfjsE3fEd!bbgp!N-bOqq<b!n\v!$-jmgbonesfpgo!!V-ToFp`jVuCjPt\vp!QvxofjjgWpws!n.!)gcmspBb3um!bbnpsNpbOqcJsovuufsoftqj!u>z!<m!b\vn$sfpooe!j<gf\vm!b\vd$Tfmobenjsgp\vo!!\v>$+j!gzeyf/gO!qVbTnF!`<M1J/H2I!U.N!B1Q/\v3!!v+o!j{gzpys/n*!wtVbwn!q-mqfbsN3mEb!nmsjphoi)uEN3bfqs<v!u\vy$fjug!o>e!fOgq!bVnT!F4`dVfCwP!\v\v!QvBoNjMgBpNsSnP!Og`mFpTbVu!!gmfjehgiju$N\vb!q<JoopujfuojttjpuQzw<N!w\v.$!f>o!eojpgj\vu!j\vt$pfQoxefjjgW\vw!!\v4$djfgwe!f<gm!bVnTsFp`oF!N>J!TmTbJnWsFpNOBzQs\vu!fvnopjfghp!s4nd!ftwb!n\vqgmjfeso3fE$!\vf!n<jotptjjuwdffNsbjqE<f!d\vb$gf!o+e!jmgb\vn!s\vp$oj!o>d!mmvbenfs!p=oc!t\veEgFtE?J\vT!`\vF$MjCgVePfEg!!gVfTeFg`jO$P\vS!N<B*MmNbBnQs\vp!Ovwo)jfg{pjsmnb!ntsbpnoq!m>f!sm3bEn!soppos!n4bdmfNwb!q<<1!/\v2$!j.g!o;e!f1g/!2V!T@F!`hVoCjPd\vb!GvuoojpgspGs`nm!hw!f>d!3o!pojpusdnfbsmjTEdfbdmbfg<!!u\vb$pfmoge!j\vgg\vj!e\vo$ff$o\ve!j<g1\v/!2\v!$>j!gi!uaheoffgsjuoTfseb)mVvTdFf`qUtB!O\vHfFtOmUf*$!\v%!%<!s)/esfbgmjvodffeq)TUmBfOyHfFuO!U>T!QiBuDhFo`fOsPuSTNsBbMmNvBdQf*q!t}!}<!*ewfVgwj!o-fqeb!N)sVbTmFv`dDfMqFtB)SED3PfBsUv`uOyPfSuN!B>M!NsBbQm*v*d\vf!qwTfmdf4y!fquf!s5udvfswc!O\vpQsBnNbSmB3MBVsDcF)QwTf`dF4T!Vf!zgff`eqgpjt$-\v!!w<fidu4h!otfvssugT`sobpmsvnd-f!qwtf!du4b!pnmbgq!O\v-g!jgemopfb$u\v!!g<bedsfbEdjtsjfed!u*juptof*U!b|i!qwmfbd!4=!!rb1/!s>p!mwpfDdf4t)vegGgejye))f!zgfj`!q\vpUtT/FyU*B-I!QeMGBe`yF)TfVz!fg`fqepgtj/$z\v*!-\v!gejGeeoyf)$f\vz!f\v`gqjpeto/f{$*\v*!<<!cw/f*dw4V!wr!2-!q>b!Nwbfidq4m)be)GEe3zf)sfvzufy`fqup!t>/+y!*b-/!sepGmepzD)fftzvfg`gqjpet!/\vz**C-`!MeFGOeOzB)IfDz`fQ`BqNpBtI/Q{M*B*)<e!fwofjdg3f!et!ug1j!m>f!$e\vG!e<yh)/w*VwwV/wt!u-*q<b!Nwbfidq3m!bt)uE23!f>s!veuGyefzu)!w>V+w!/bt/us*p<m!pwDffdt4v!gOg!j>e!!t\vv*sHg``MoFpOsOnB<I!Dw`fQdB4N!BrI2QqMfBs)qe!f>o!jdgsfpet!tg)jrm2f-$!\vO!*<<s!/w*fwdV4w!!r-1qqbfNsbqi!q>m!bd)sEp3tfts)vOu-y!fru1!*><+!!wbf/ds4p!mUp!D>f!trv2gqgfjseq!!\v+*!St`uM1F/OyO!B,I!Dr`1QqBfNsBqI!Q+M!Bt)ue2f/oyj<g!fwef!dg4j!mCf!$>\v!!r<2bq/f*swqV!w+!!-tqub1N/bzi!q,m!br)1Eq3ffssqv!u+y!ftuu!2>/+z!<b!/gsmppmbpuD!fetfvug!g>j!en!b\vy*)Be`pMuF)OUO-B!IUD*`-Q!BeNpBuI)QCM-B!)Ce*f*o<j!ggfmep!bguj!$t\vd!b\vmQfB!N>B!I)QeMfBu`!F>T>V!!1g/f1e*g!j@$!\v1!/\v1g!j;e!ogfb$d\vf!E<jsspfmdpuDjmpfoy!f+u!!j>o+w!fssptmfptDrfstuv)gegfjue*!<<!*ssfpumvpsDom!foypfsun)bsmbjf{ofj)MUp!U+C!H)Sntb!q>O!/syp!m+p!Dtmdfbymffu*!!<,*!wCV!w+!!-)qnbbnq)OE/3zf!s+v!utydfbum!f>*!!s,p!mOp!D+m!fnybfquO!/5{d*f<w!!~\v!Q\vB$Nf`oFeTjVg!\vg!fwebgsjz$j\vo!h<!fwwfjdt4t!jwnOfp!s>n!bfmd<o!bwjbesbzSjfowhj!twtfjdn4F!mwbNuwpQup!t4jdufjwp!o<<*!*\v1$/e1f)g4jdoffw!!F-O*W1N/B1Q)`4NdPfEwF!`-S*F1G/M1F)D4UdJfPwO!\v-!*\v1$/j1g)!4edffgwj)oufieh)jVMTeFf`uFdOfWmNgBfQS*!!>}!}u!iNhBjYM`eCfPuYd`fDmMgJfQsQ!FuSi!h?j!M1e\vf!uwdbfsmzgjfoSh!!<w*fzdu4j!dwbXqpps!m-efQtpvtgjgujjep)o5<d!f\vw$!f>o!esjpgm\vp!D\vf$tjvgg!gejfeg!j5odffew)!V\vT?Fz`eFpOcW/NtBgQ/*y\vp!cvqojjmgdp=s!nf!egvmmpdbouj!$f\vo!w\vN?bzqeJpocu/ftogt/joupzj<u!dvfosjjgEpqsjnm!dg=m!pfbeuv!mgdmojjq$F\vo!w|N!b*q)<o!j\vb$nj!geejfpgw!!F\vO?WeNbBfQi`/UtZgQ/Fu`jDpV=C!Ff\ve!vvmodjogjp$s\vn!!\vt?benbqfmif/stDgv/chfo!jfqoqwbnNbfqo<p!u\v=$!ffmetvfm\vd!ovjo$j\vg!p\vs?nT!Gtobpnjqumdffsm3gEf!SfwoowFnfbcqv<d!=\v!$ffeovemjdgo\vj!$\v\v$!j\vggojeefogf!$V\vT!F<`qVbCNPs\vb!mvvodjfgqpts!nE!3gsmfpmbqun!bstf!gnssbpdgujjopvo!S\vbQuBjNpS<B!M\vV$DfFoQeTj`gF\vT!V\v!$gffoeegjjg$\v\v!!\v\v$?jegb!feif/gtjgo/fheo)pDiMQJtQu`iEhJjSmF=D!UfJePvOm*d\vo!jw$b\vs!z\vj?oehb!fwif/dt4g!/woMppndnbpmDQtputijhujjmp=o!<f!e\vv$mfdooejj$g\v\v!!\v\v?$hjoojdempvdeoff!==!dfmejvqmEdjosjf$d\vu!j\vp?oe/bgfti//itfgb/eq?b\vN!x\vp$mjgo=d!mfveevfm!d=odjm$j\vq!c\vp?ye/bgfti//itfgb/eq?b\vN!x\vp$ejboidtm=v!effe!v=mgdpohj/$g\vt!/\vi?feb"],n4.hueSaturation=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gxp/ssnp!mtpbdn!q-m*fmst3iE)!cjhnsb3hmft<i!)w5bdsfzwj!o>h!!swpfmdp3D!hwbVswG<`!m\vh$!e<f*g!j*offh!oNbBSYt`tSfBoOuHiFh!j8m\v!!-\v^$1e]ftgtjfoofu!iShBjOmH!F-`{B/MmMt!i1)\vt!tvfoojugiphsjnm!`gqmbpnb!u-!*ifvhfo]bNSBoYp`jSuBbOsHvFu^b<t!!v-o^j1g]pospnj!ugbmspvbuub!tt!b-uzv/smbtuij)poop]jNuBbYs`vSuBbOtH`Fq^b<n!!v-o*jfghposbnS!fgvmip!b-u^!1m]jfhviiu!o-fyt/tm]tNiB)Yf`vSiB`OqHbFn^!<)!4gdmfpwb!u>!!nmbtqi`!i~v!f~)!g<mlpbbfus!cj!o<W^bsmfvufo-v!pgdm`pfbvui!]itvtffBomumi-h!jgmm!p>b!uf!hiovbfSStbtofhofu*i!h|j!mg!m<p^bsuf!uwobvmpvdf`!f>v!ij]ooWpbjmuvbfs!v,u!b)ti!v>f!Bfmhmo!b,S!oipvjfuSbbsovhufb*t!!0<!^3s/f1u<o!vjpgd!`)fwvbim]vffv!i=!!>1!/f1h*o!bsSffuvvis!o|!!w*bfmhvofb!s,!!>2>/!1s<f!ufomvtpfd!`jfgv!i))w!bgmjv!f|!!?*!,2,/s1f*u!osvfpudv`sfov!iw!b<mFvHfO!B.S!`2Y/B1N<!!=f!mstffu!osvfpudv`sfov!iw!b<m1v!f><!!s~f!ugomvppbdu`!fnvbiq!`utobju)v!ssbpugj!p<o2)!g,m!pfbhuo!bjso!W>b!mfvhfo-b!sg!m<p1b!u>!!tfbhuovbssb!u*j7p!o>B?m!mf-h!ogbmsp)b!ug!jt!b~u!v~s!b<uljbpfosScb!o<hsff*u!o|v!pgdm`pfbvui!!w>b!mfvhfo!b>s!!j|o!W*b6m/v1f!!,+!!*)s2f/u1o!v,p!dt`bfuvvis)buubjppmogB!m=m!!i,)!!tgbju!v|s!b*u,j,psofSuboovhpfd*`<f!vsif!u<vFsHoO!BdSm`bYnBqN)!w=b!msvffu-o!v1p/d1`-f!v2i/!1<*1<!!>~!!sgfmupobvup!dn`bfqv`im!juhoiju)o!fstptg)!g<mfphboub!SjtotWfbomuvifh-j!mg!m-pfbhuo!bmSjohpijuuobfstvtuBbmtm!--!fghmopbbSuf!vmij!huibupomfgt!t<S1b!o>h!ff*h!o|b!sg!mupobju!!<we!m>p!imtjfhsiiuuo`fftvtiB!mumb!p,m!gm!j<h1i/u7o!f+t!tyS/bmothif!<>!!jig!!u)bwp!m=g!!1</*1{*z!ys/fsupvmspod!)jmotWib3mcvhfs!!+>!!)mwt!i,!!42d/f1w*!<<!*fwmVtwf!!-sffhubvnsjo)!Ej3ofWsbvmuvyff!u,!!>)!ws!p+m!p)d2!/51d!f.w!!j|o!W*b)movjfb*n*!<e!j~p!wg!m~p!b<u*!mi!v-ft3!s-hic))4gdmfpwb!uo!sgv2u-f!sg!m~p!b<u1!/g73!-0!!gim!p>b!ui!!i~v!f<*1!/|7!!j>g,!!)ii!v|f!!*=1!/11/!1=*!!ii)v!fg!j,!>~!!2</b1u<m!ffEmdt!f0!!j*gh!!).i!vsf)!!?,!!21//15*!!>i!vif!!|.!>f!t2m/f1!<~!!g<mbpubmuf!Esdf!t0<!!*jsg!!.)!)c7)/!1,!!+1!/i3v!f>*!!i=!!|2!/*1y*b!Nsdf!t>!>>!!hg)2!!g,j!!)fgt3m!f.!!~g!2<*b!u+m!f7E/d1!!0+!!*icv!f.<!!hf)m!t>f!!ij!g|!!)*)y3b/N1d!!+>!>i!vsf)*!!g=j!!2</*1**o!jsNfdt!!,>!!ygb3N<d!)f!m.t!f1!/j3g)!!)0)!4b/u1m!f+E!di!v;f!**!o=j!N3d/!1,*!!ysbfNtd!)>!!0g!2b!u,m!f)Egd3!!@.!!6g/21*!!=+!!m)!)>3!/t1!!<0o!j4N/d1!*.!!.y!biNvdf!*>!!+b!u7m/f1E<d!!fumbtpfm!gs!f|t!!*>o!jgN2d<!!?s!fyubvNsdo)!!sgfjt!<<!1~/!3w!f0d!4*!oijtNmd3!s,h!cy)bwNfdd)4!!>i!tmm!*<!*|*!cw!f-dh4)!ysbhnc!<-!sj)gy!b)ni!t>m!/yzb!N>d>!!u1b/p1m*g!!|<!*s*hcc!!->h!)wofjdn4!)-ist)mo/j{n*!<>!!~o!jfNmdt!fu!b|p!mggm!p<bcu/!dg!3><!!cj!gu!b)pimtgm!/<{h!/=d!!1>/!6h*!!ugb3p!m>g!!i<tsm//d{!!>+!!s)!2u/b1p!m,g!!i<t1m//1z!*><!!mf!mutbfp!mgg3!!<>1!/i1t!m>/!{t!!,u!biptmmg/!z<!1./!2i.t!m>/!zi!!+u!biptmmg/!{|<!!*gdm!p4bduf!wg)2m!t>i!33c/h1s!!+4!diftwm!/~{!!<.c!hgs3!<o!ssvhucf/ss!!~>!!<i*v*f13/s4h0c1)/g22)-!!.g!3y-/!mittim!/-y3!g,!!-)22g/)1c0h4s/31f*v*i<!!>s!hcc//chh!s>!!<i*vyf/3msthic!)-g32g-!"],n4.blitScreen=["?$TjWoodfmfvsedfT!u=jcm","~v!o\vjggjpesonf!$t\vb!n<q*mcfhss3/Es!pjmnpbDhhfb<s!Gw`bmshz)jhoohj!swffidu3j!ew!V>w!<c!h\vs$/jsgpemfpgD!hVbTsFG``MmJhO!F\vBHSO\vJ!S\vF$IjUoJdEm!vgeffe!g=jf$o\vd!p\vegjjoeho?f\v$!\v\v!$<f*oweVjwg!\v-!f\vh$bjngje)fEg3!fEsJvUuIyFfSuJ!O>H!\vs!p\vm$pjDohdbmsvGe`fm!h=!d\vpfntnmpfo$?\v\v!!<w*f*dw4V!we!j-ufihfbsnjjo)hE)3wffsdv4u!ydfpum)pCsH*S!t|p!Ugsmbpfbouj!Mh!s>j!es`pqmpptDjhubjspGo`!m>h!!s\vbSoBeF)OhJmM``GFsTbVh!Dgpfpesgej/$y\vz!*|<!!*w)fodj4b!ne!jeujipfws!`\vtgijjegouf`$S\vH!C~!!><!CwHfSd`4u)g1j/i3t6`!s0f!i3u6j6e/!1,-!!s.p1m/p3d6!!o0s!v3u6f6s/!1<-*!o1p/j3u6j!t0p!q3`6e6j/s1h*!<-!CeHjSu`iufgsj`itti`jsgfui`uSjHeC!!+>!!1n/j3y.)!3-/C1H!S+`!uegjjuiitf`s"],n4.pick=["~0!0<!e$fQnSsFpGgJtYo\vb!svuo!j+g!pysjns!ucbpNpxmf!jvWUmffyeupvNsvf!<+!!vyojjsgupbsNnu!dnfbkup4s!QvvV!w>N!boupsjjuyj<t!pvQo`jmghp!s\vng!jnebouf5$!\vv!Q~s!p<ksfpdmupNDbiudsujbyC<b!!v>o!jsgppmspnD!indbuub5C!wv!N|p!e*fsmpNmbpuDsijdyu<b!Cvvo)j!ggpjs!n\v!SnPbMuP5D!IvDNUpBeCf!mgWfjefgxjN$b\vu!s\vjgyj<e!obfu$u\vs!j~c!v<u*f*!1w/f2d!4-!wbVObp)s4ndbfmw<!!+b!uyujssjucbvNuwfV!vw)f3dd4f!wb!Q>p!twjVuwj!p|o!<*!fbsuvuusyjfcUvvu)f!!gwjf!d\v3f!tbmVfw$<\v!!\v<$*jyg/ewfVgb!!C-B*U*D1I/D2P!M-PwSV\vb!)v4odjfgwp!s+n!!ycjpspumb!NvwCVbvu)d3idDfpwm)p4sd<f!wb!u>u!swjVcwv!u\vfQ!JwMfDd`5W!Vb!CgbfuedgijD$p\vm!p\vsg<j!ewobfs$z\vj!o<h*!ewffnds5p!gwtCobbusdui!D+p!mypjss<u!b\vN$mffoeepjNgv\v)!4\vd$fjwg!e>f!go!pVjWu`jDtMpJQQe\vm!swpbXswz!j\vo1h!!>waf!dS4F!QwQVJwM<D!`\vY$PfCm`tYfB\vN!!wgbjs$z\vj!o\vhg!jwefodf3$!\vw!V~w!<<!e\vf$nfsopegjtgo\vb!s\vu$!j+g!eeffgd!oCbBuUtDoIJJyOjTsUuBbONDbF!\v>!!veofjngsppsgnt!ocbpspum!!|v!V*tffdJoobtuutbooJdfft<V!v\v)$!egfjg!j\voFfD!OVBTUFT`OJJOITDUUBBOCD!JgOfHe\vg!j\v$$\vj!o~d!m\vv?ezfe!p=cj/ottwu/bhoodjjooohj/lwtt=/!iffebvem?d\vo!j\v$$\vf!o|e!j*gh\vo!jwobosjzljTofht!Vwvf)d!4g!jw!X<p*smmbenQspptOjbu)j4pdof<w!!w>b!smzbjnoshp!Owufddf4k!cwpM!p4ddbfmwQ!p<t*joupjjpuoj<t!p\vQ$be)f4gdjfowf!!>V!ToFp`jTuLjJtOpOQJmObHd\vp!M\vw$!e<f*g1j/o2f!!-CoPpOjFu`jUtFpYQUbV)S5Fd\vf!wv!o>j!gepfsnns!pcgptpomb!svuV!t5fdTflwj!o|o!j*oehj<p!w\v)$ojjobdnm!veejfp!w=!t\vl?jeobofjio/ht/w","~0!0~!!$<QeSsFbGdJtYj\ve!!v|o!j*g1p/s1n!!>c>p!pbm/!svpEmjptDdhbbsseGT`fmmhf)d!ugbjc!m\vfg<j!evoofj$g\vp!s<ns!pwmfpdD5f!tvsGfjwyfQSjlddljSQfywjfGsvt!f>D!psmppmsp<D!hvbosjGg`pmshn!!\vgfmtpmbfu$!\vv!B~m!q<isbpUmfptDuf<t!svfowjfgSplsdnj!QcypjpGmv!!v>U!ssbpomtpqDbhsbfsoGu`<m!hv!o|j!gfptsmnf!!c~p!p<ms!pvmUpfDyiudvusbfC<w!!\v>$!jsgpemfpgD!hVbWs`GD`MmJhQ!\v|!!w*bsspzmjpoDhi!dwufbdC4v!)w!Vgwj<!!\v\vS$PfMmPtDfI\vD!UwBbCs!zgjfoehg!jw$f\vd!3\v!?wzVewp<c!/\vt$gf/oyepjcgq\vj!mvdo=j!gfpesvnm!dtobjn$q\vm!f\vs?3zEe!pvcT/btngq/mofpsj<u!d\vf$sejfEgqjjomfd!=D!MfJeQv`mEdJoSjF$D\vU!J~P!O~\v!!~\v!$<jeosdbmdvtejfe!!=|d!m*juqtEfjUsbfidqumjBpvo!/>g=t!/bi/fsbpem?p\vD!wwvb)s!zgjjo!h|!!wfftdm4f!!w~M!p~d!b<meQspbtdjtujjep!o|<!!*w1b/s1z!j>o>h!!bw/fsdp4m!pwDXwpvs)m!egQjp!t|j!u*jupoof<s!b\vq$tjogbesfUgv!)C!BgUjD!I\vDgPjMePoSf\v$!\vv!o<j*gwpVswn!!-cspfpmmq!nvbCTbvu)dEi3Dfpsmvpusy<f!uw!b>s!zsjpomhp!Dwwfvd!5\v!fwtCmbfu$d\vi!D<p*mzpys/<w!V\vw$!f-osefjmgq\vn!b\vT$vj)oEd3mfvsevfu!y=fdum!j>q!csppym/pgDtw/vi!f\vbQeJ?M\vD!`wWpVj!eg!fnebgjjo$)\v*!!||!!*wffmdc5b!uvdwfDmpfmTpess<b!djtgj!E)vvaU!f%y%u!vfs"],n4.envmapDynamicCompose=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*g1p/s2n!!-tcbhnsq/m*fbsi3qEm!bu!f-ycuhvss/f32s<p!mvpodj!g-pcshns!/t2bsnpqmmpfds)3yEj!nu)f5ydufvws!f>3!<s!pvmopjDghpbssnG!`gmmhp!b<ub!/p3gsgptmfpud<!!>w!bbsizqjmobh!!uwbfpdm3g!!w<V*w*<w!V\vw$!j-o3dfmsvveufy!f=uf)oEd3pfesjvouhy?f\vu!)wspbjfeo!jnMbpjUoC)H*S!t|!!>w!f3ds5p!mdppdm!p5sd2f!w>!!<u*f*yzu/vwsVfw3!E-)uufftygugvps!f.2!-y!/wwfVdw3)"],n4.blurH=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jngvpts!n>!!tsbpnmqpmDfhsb3sEG!`jmnhb!h<f2<6!1w/b1s!z+j!o*h*!zw/fwdV3w!!w-Vfwv<m!bvwo!j+g!p1s/n5!!g,m!pyb/uw!Vwwb)m3vdff<w!!w-pfjheb!nnjb)jEo3)f*s!v|u!ywffud!5>!,t!vnnv!t>!!<w9f2d:51)/11/!1+*!<*!*tzv/nw!V,w>!!-uffvymubvws!f+3!E1)/j4n!b,h!fy-/!wwVfwd)33)dwfVww!/-yf!h.b!n5j/)1E!3+f!swvbumyvffu-!!>w,V!wn/vzt*!*<!6+5!313/21/612!<+!!t*v*nz!/,w>V!wu!f-yfuvvmsbfw3!E+)!j1n/b3h!f,-!!yw/fwdV3w))w3Vdwf/wy!!-.f!h4b/n1j!)+E!3wfbsmvvufy-f!uw!V>w,/!zn*v*t!!+<!214/612:/219!<+!!t*v*nz!/,w>V!wu!f-yfuvvmsbfw3!E+)!j1n/b2h!f,-!!yw/fwdV3w))w3Vdwf/wy!!-.f!h3b/n1j!)+E!3wfbsmvvufy-f!uw!V>w,/!zn*v*t!!+<!414/7223/315!6+<!!*t*vzn/!w,V>w!!u-fyy/uwvVswf)33Ed)fjwn!b-hffh-b!nwjf)dE33)fwsVvwu/yyf!u.!!>2,/!1n!v+t!!w<b2m4v6f2-/!1w!V+w!/*z*"],n4.blurV=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jngvpts!n>!!tsbpnmqpmDfhsb3sEG!`jmnhb!h<f2<6!1w/b1s!z+j!o*h*!fwvfmdb3w!!w+V!w1</!5v!o,j!gzp/swnV!wg!m-pyb/uw!Vwwb)m3vdff<w!!w-pfjheb!nnjb)jEo3)f*s!v|u!ywffud!5>!,t!vnnv!t>!!<w9f2d:51)/11/!1+*!<*!*tfvvnm!b,w>!!+u!f1y/u4v!s,f!3zE/)wjVnwb!h-fy-/!wwVfwd)33)dwfVww!/-yf-h!bwnVjw)/Ez3!f.s!v5u/y1f!u+!!>w,b!mnvvft*!*<!6+5!313/21/612!<+!!t*v*nf!v,m>b!wu!f+y!u1v/s3f!3,E!)zj/nwbVhwf!--!yw/fwdV3w))w3Vdwf/wy!--!fwhVbwn/jz)!E.3!f4s/v1u!y+f!uw!b>m,v!fn*v*t!!+<!214/612:/219!<+!!t*v*nf!v,m>b!wu!f+y!u1v/s2f!3,E!)zj/nwbVhwf!--!yw/fwdV3w))w3Vdwf/wy!--!fwhVbwn/jz)!E.3!f3s/v1u!y+f!uw!b>m,v!fn*v*t!!+<!414/7223/315!6+<!!*t*vzn/!w,V>w!!u-fyy/uwvVswf)33Ed)fjwn!b-hffh-b!nwjf)dE33)fwsVvwu/yyf-u!!w>V,w!/nzv!t.!!<22/416!2+/!1w!b+m!v*f*"],n4.blurDownSample=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j1g/p5s!n0!!t*b*n*q1m/f2s!3-E1!/j1n)b3hdff<w!!w+b!sfz{jjoThm!fwyffdu3!!,w!VwwV<w!!v-ofjhgbpnsjn)!Ew3ffds3v!uuyffyuf!m,T!j*{*f1</!2w.p!j-e1!/n1b)j3od)f*w!!|+!!hfm{`jGTsmbfhyDfpum!p,s!!w>V!w)!u-ffyhubvnsjf)3EE3)fjsnvbuhyff-u!!w,V!w*!*,1!/u1f!y-f1m/T2j.{)f3!d+f!ww!f+d!3f){2j/T1m-f!y1f/u1!*,*!!w,V!wu!f-yfuhvbsnfj3)E"],n4.flow=["~v!o<j*g1p/s2n!!-c1p/p1m!!-v1t/f3Y![+<!!wbVuwu)s5jdcfvwu!f>!!wofpdj4u!jqtpptQj`umjhp!o<<*!zw/bospzjjuojht!pwqf!d-3y!/woVpwj<u!jwtppjqe)!3ndbfjwo!)>*!!w|V!wj!gf!t)mvft!f<Y*[{*/!owpVjwu!j>t!pwqf!d-3y)/qopptjju","~d!p<oztuuj!tgomfpubouj!!q+j!3b!/>s!p7m/p3d9!4+2!9s6p4m<p!dv!o>j!gsppsmnp!DthbbnsqGm`fmsh3!E<!ejonfbmhcf!<+!!v*o*jzgyp/s*n*!1n/b2u!4-!wvvw)N4bdufswj!y+<!!yvjosjugbpNswnv!)j)o3ud!ftwi!b-qffh<b!nvjo)jEg3pfssnv!uwyffdu5!!>c!msfpomep<d!!v5odjfgwp!s~n!!<g*mfpmbhuo!bj!o-u!f*o3tjjqu!z+<!!fwmbhsozBjeophn!)wtfpdd3!!+w!V1w/<3!!w+p!j*ew!Vnwb)jiou)h*o!f|m!)w3fddf3w!!v>w!<w!vg!m<p6b/u1!!b+o!hqmffu!t>!!.b!u*bqof)uwtV!w-/fzm-h!owbV)we/pyn*!!>0!!fqmjh3o!B,e!p1n/!6u<b!pjmgg!!)<t*i2b!q,f!!f>q>b!i1t*)!u|b!pvmwg!!>0!!w1V/w2!!,>!!1q/f6u<t!!~u!bfpmmtgf!!|j!gf!t)mtfi!b~q!f<!*>f>m!h2o*b!!|-!1v/w3!!>+!!w*fwdV3w))mifuoh"],n4.fxaa=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jbg/p*swnV!wt!b-nfqhmbfnsj3)EE!3jfnsbvhufy<f!uv!o>j!gbp/ssnp!mwpfDdh3b!ssGf`tmphm!v<u*j!p*o1</!1w)b5sdzfjwo!h-!1w/f1d!3-!1w/V1w!<-!1\v/$1e!f-g4j4o9f1!/G1Y!B-B7`7R2V/B1M!J-U6Z8`/Q11!!-2*/11/\v1!)\v5$deffwg!j-o*f1!/G1Y)B5Bd`fRwV!B-M*J1U/Z1`)Q52d!f2w/!6-\vo!p\vj$uevfmgpjtoffs!!G-YfBhBb`nRjV!B-MfJhUbZn`jQ!3-!f3h/b1n\vj!!\v-$*e1f/g1j)o5fd!fGwY!B-Bw`VRwV!B)MsJfUeZb`iQT4m!f5y/j1Q\vb!b\vy$Ge!f>g!jsopfm!pGDYhBbBs`GR`VmBhM!J|U!Z*`)Qo5j!b2n3!/e1j\vp!w\v!$~e!f<g*jNobfn!vGmy!b-b{Czpyp/m*!Nctpppqm!\v-!y\vf$ue)fqgpjUoyff!UGbybbybGG)m5pubbup!mgGmbpbbyuG\v!!o\vs$veuffgsj!o<fo!hGjyTbibuGhmopfbmu!3+!!wyfjdq3c\vv!T\vu$fetfgggjPomff!yGjyqb!b>G,m!pzb/uN4t!pwqf!d*4o\vb!q\vT${esfpgij)ogfj!!G<yobhbjGTmipubhuo5f!mw!f+d!5y\vj!q\vc$veTfugfjtogfg!PGmyfbybjTqb!u>),y!*y!/dNmtbpnqq!)*yo-b!q1T/{1s-p!i2a/)1g*j\v!!<\v*$Ieyfjgqjcovft!!G-yebpbpUHfuyf!ttgbgnPqmmffysj3qE)\vy!b\vn$!e>f!gyjjoqfc!vGTyubfbtUgfgyPUmpfqy)juq-!!uqb*p!muGfbybuyvGs!f<31E/)1u!-;!!qu-f!t1g/g1P*m\vf!y\vj$qe!f@g!joobfq!TGeypbpbhU!f>y!Pegpgp)Huu-f!tqg-g!Ppm-f!ysj*q!!uufbypumvGsbfb3yEG)!u<-y!jqq!c,v!T)zpu!j+m!bsv*R-b!b1y/g1!*+\v!!HGyyjbqbcGvmtp!b>u!!IGyyjbqbcMvvtn!bu)bGpymbGbbGbmypGb!u<56!/s1h!c,b!**!*|q!dsSfiuuvhsoof!Msohbcqbt/.z)<!!+~!!uGtyeb)b!G>m!pubfut5g!gGPymbfbyQjjqy!fumbTpimbGebfbsy)G!!G<yGbybjGqmcpvbtu!3+!!qGpytj-q!cGvytb!b>G!mHpybjuq5c!vgty!bubbDppmoGtbpbmyfGQ!p<tQQopbtq-T!eGpypbhb!U;f!yO!oubfqyT-e!pGpyhb!b@U!fOyo!pgjyubdbfDspjoet!p>m!fo4b7q1TUefpypFhy!qmCpjpbCtbObfyhGP!o<f*-Q!uGtyeb!b-UOfuyt!eg)yobjbnD!p>o!tuptmef!4u7b1pUmfGybFbyyqGC!j<bQtuOtfeh!U=x!pO-u!tGey!b>b!GOmoppbjuu3d!fgsyjbeb!RmvpbpmCjbubzySGd!q<Gisubhnoff-M!oGbyqbtb0G1m/p2b!u>5!!qgdySbibuDhpooftMpombfqStd!quGbspbmnGfbPbqyuG-!!<Gpysbfb[GUmMpNbbun5v!mg!y>bab!D*p1o/t1p!m=f!SQdeqoGFsbbnnvfmP)q!u>3!-Q!oGbyqbTbeGpmpphb!um5p!pgCybbbbyDGp!o<t*pOmuft4e7!1,S!dQquGtseb)n!f>P!qiuu3h-o!fGMyobbbqGtm!pubbup!mgGybbbbyRGv!b<mpjsufz[TUvMcNqbjnyv-m!!G>yab!b*G1m/p1b!u=!!gOyebobFRbvnbvmmj)u!z>F!eOhofbUqiTsefptpihp!mmep-p!CGbybbybGG!m<pzb/uN!tgpyqb!b.R!vzb/mQjtupzqF!e>h!fQUuitsef!t*iopbmqeTN{jsop-i!aG)ygbjb!G<mzp/bOut!pgqy!b.b!Dzp/oNttppmqf!F>e!hOfuTtieb!s*qoobfqtTt{-s!pGiyab)bgGjm!p<byu/!Ngtypbqb!D.p!oyt/pQmtfpFqe!h>f!UQiustfet!iupbmpem-G!bGbyybGb!G<myp/bOut!pgqy!b.b!Dyp/oNttppmqf!F>e!hOfuUties!futbippmmGebNbjyoG-!!~G!y~b!b~G!m<p5bQu`5Z!UgJyMbBbVDRp`oBtBpYmGf!4+7!1zD/pQoOtgugEpj!s>!,*!!z|/!QGtypbqb!G*mQpfboup3e!aq)pgtjN!<<!5qQp`tZNU/JyM!B>V!Rq`pBtB/YyG<!!+q!pyt/NQ/Ozg!g>p!!q>p,t!/yz/<Q!tGpyqb!b*GQmfpobpue5a!)sghjc!z<N*!Q>f!oGpyebab)U!f}y}U!p*qO)fuofpye-a!)q!p>t!NQ*O<f!o\vp$ee!f<g5jQo`fZ!UmJvMnBbVNR!`sBhBcYzGN!/+z!\vz!/GQyObgbgGpm!p>b.u!!zm/vOntbpTq!!>*!OGfyobpbeMav)ngbj)!G<y5bQb`UZfUyJPMgBgV)Ru`fByB-Y!Gq!p+t!Ny-/!QGOygbgbpG!m>p.b!uy3/)O1t/p1q-!!*2O/f1o*p-e!ag)ygbjb!R<vebfmmjbudzTSudoqfGjsebbnsfh/!y>z?*!**<Q!eGoyFbbbnGvmmp)btuc!bm!v>n!bQFf!o>p!eG!y<bebfMmvbndbT)uGoyfbjbeUbfsyhP!g>g?)!u*fOye-o!FqbpntvNm-)!tGcybb!b>G!mOpfboup3e)!2</61/-1!!1+/!1O*O-b!ngvymb!b.R!vQbemojFubznSvdmq!G>s!bQnefo/Fybzn*v*m<!!*GQyfbobpGemap)bguj!!m<v6n/b1O!!+>!!OGOybbnbvMmv!n.b!)OGeyobFbbUnfvymP!g>g!)OuefoyF-b!nqvpmt!N*-O!fGoypbebaG)mgpjb!u<3*)*1z/y1/-Q.t2p/q1!*--y!fguy)bqbpRUvybfmUjbubzySGd)qbGnsvbMnbfb/yyGz!*>*!<Q!eGoyFbbbnGvmmp!b*uQ!fmovpnebaX)!g>j!!G<y*b*bzMyv/nObt)pGqy!b-byUffuy)PqgpgU)yuffUyb-b!yqGp)tbNn-v!MGbybbybGG!m>p!bOue3o)F.b2n/v1m-!!*1O/f1o*p-e!ag)ygbjb!R|v!b*mQjOufzoSpdeq)Ggsjb!n<f4/Qy`zZ*U*J<M!BGVyRb`bBGBmYpGb!u+!!nzb/yQTONg!g>p!!n>b,y!)zm/vQntbpTq-!!*mQvfnobpNe*a<)!gGjy!b<b4GQm`pZbUuJ!MnBjVoRT`NB!B>Y!Gn!j+o!)ym/vQnObgTg-p!!m>v,n!byN/*Q<t!pGqy!b*bQGfmoppbeua!)ngbjy!F<T*NQ!f>o!pnebay))!m}v}n!b*FO-f!onpbeyaT)N!*><!!QGOyfbobpGem!p<b4uQ!`nZjUoJFMTBNV!R>`!BnBjYoG)!m+v!nzb/FQ-O!gngjpo!T>N.*!<z!/GOytbpbqG!m*pObfuo!pnebay)XgOj!!><!4nQb`yZ)UmJvMnBbVOR-`!BmBvYnGb!X+*!<y!/GQyObgbgGpm!p>b.u!!yn/jOotXpOq!!>*!Onfjoop)emav)ngbjO!-<!emfvmnbbdXT*u<o!fGjyebbbsGhm!p>b?u!!*sQbeoohFfbNnbvym!)>t!cnbb!y>)!nQbfyoXpOe-!!<nebfymFbTdNT*u<o!fGjyebbbsGhm!p>b?u!!*sObeoohFfbNnjvom!)>t!cnbj!o>)!nOjfooXpOe-!!<n6j/o1F!T+N!*O<O!bGnyvbmb!G.m!pQbeuo!Fsbbnovhmf!N>b!yQTedobFmbfnev!m>!!*sQbfoohpfeNab)yg!j+!!<g6y/b1b!R+v!bOmOjbunzvFme!h.f!UOiesofFtbinpvmme!<>!!GOyebobFGbmnpvbmu!!*sObfoohpfe!a>)!gsjb!o<h*f*Nzbyy/!Q.t!psqb!o-hyffNuj)oq<p!UGyyfbUbbGbmypGb)ub!nsvbMobhbfyNGb!y>D!mQbenoqFfben!v>m!!n*bQyf)ogpyebab)Rgvjb!m<j*u*zzFye/hOftUpiqs!f-tyifpum)eqNpjUoy-f!UsbbboyhGf)NbbnyvTMdbbbmyfGe!*><!!OGeyobFbbCnpvpmm!!*fObfsompzeFay)jguj!!>|!!s*bQoOhffo!p=e!)sgbjo!h<f3NQb`yZDUmJbMnBqVfRe`<B!BjYgG)!f+b!szm/zQFOygjgup*!!>s,f!uzv/sQot!psqh!c*zQNf<o!pGeyab)bgGjm!p<b3uQ!`mZvUnJbMOBXV!R>`!BGByYbGb!M+v!nyb/)QGOygbgbpU!f>y,P!gyg/)Qutfpyq-!!*qQpftoNp-e!aG)ygbjb!G<m*pQbfuo3p)e.a2)/!1}-}.!2*/O1f*o-p!egay)b!b>R!vQbOmfjoupzeS!d<q3GQs`bZnUfJ/MyBzV*R*`<B!BGYyGb!b+G!mzp/bQuO!gmgvpn!b>T.F!!z>/!OGtypbqb!M*vOnfbo)pGeyab)bgUjf!y<P3gQg`)ZuUfJyM-B!VqRp`tBNB-Y!GG!y+b!byG/mQpObgug3p)!2>/.1!-y!/2O/t1p*q-!!*gOyfbobpRevab)mgjju!z<SedfqmGbsdbTnufo/fyjze*b*s<h!!G>y?b!b*GQmepobFub!nmvvmn)btOcFb!!>>!!GQyfbobpMev!n<be)fGmybbdbTUufoyfPjgegb)suhf!y>-?!!q*pOteNo-F!bGnyvbmb)Gtmcpbb!u>3!)O2f/o1p-e.!2</61/*1-!!+g!yObObbRnvvbmm!j.u!zQSedoqFGbsnbvnmf!/>y!zQ*e*o<F!bGnyvbmb!G*mQpfboup!emav)ngbjT!X<!6>/!1G!y+b!bOMOvbnnbv)mG!y.b!bOUefoyFPbgngv)mu!f>y!-O!eqopFtbNn-v!mG!y*bObfGomppebau)3g)j.!2</*1*-z!y2//Q1t*p-q!!g-yybfbuR)vqbpmUjyufzUSbdbqyGGs)bbnnfv/Mybzb*y*G<!!>G!yQbeboGFmbpnbvum!!m*vQnfboOpTe!a>)!gmjv!n<b*O*!z,y!/mOvtnpbqT!<-!yGfyub)bqGpmUpybfuU!bmbvynGb)XbFn!v>M!bmbvynGb!X>!!,O!emovFnbbnFv<m!!G*yObfboGpmepab)ug!jt!v|c!q*jQyOSfdoqpSeb)oghjf!!<>2!Q2`/Z1U0JsMbBoVhRf`<B!BGYyGb!b+G!mzp/bQuO!gtgvpc!q>j,y!OzT/XQFt!p>q!!m*vQnfboOpTe!a,)!gmjv!n<b2XQF`<Z!UGJyMbBbVGRm`pBbBuY!Gf!e+h!fyI/pQsO{g2g!p>!!>),.!3y//1Q!t+p!qm!v*nQbfNo*p!e,a!)mgvjn!b<O*TQ<f!oGpyebab)G!m}p}b!u*!OffeohpfeWaf)s!u>2!!Q>O!f)o.p3e/!1m!p+p!CmbvbnybGN!*<!2,Q!`mZvUnJbMXBFV<R!`GByBbYbGG!m+p!bzu/!QmOvgngbpO!F>T.F!!z>/!Omtvpnqb!O*FO!f,o!pmevan)bgTjF!<<!2GQy`bZbUGJmMpBbVuR!`mBvBnYbGO!X+O!Fy!/>Q!Omgvgnpb!O>X.!!,y!/mOvtnpbqO!F*<O!fGoypbebaG)mgpjb!u<!effemhbfdITpuso{f3j!e>b!s)h.!3>/?1!!*+Q!emovFnbbnFv*m!),t!cmbv!n>b!OQFfToFp<e!!GmypbpbCGbmbpybGu!!<feefhmfbWdfTsuuo3f!j>e!b)s.h3!/>1?!!+*!OmevonFbbOn*v!m,)!tmcvbn!b>O!XOOfFo<p!eG!ymbpbpGCmbpbbyuG!!m<v6n/b1O!X+T!XO!O>b!nmvvmn!b>O.X!!Q,e!omFvbnnbvTmX!<<!6G/y1b!b+G!mOpObbun!vmmv!n>b.T!XOTeFo!F>b!nmvvmn!b<T1X/!1,!!=m!vNnNbbTnFv<m!!G>y!bpbsGfm[pUbMuN!bfnevhmf!Imppsp{C5b!b>y!G)!b<cFty)jfqechvftI!p+s!{E2y*j!q+c!v3t/!1>*!!G,y!jbqcctv)tf!euhbfpImpGsb{b3y*G<!!<G6y/b1b!G+m!pObOub!nfvemh!f.W!fNsbun5v!m>!!>)!bNcNtb)nfvemh!fuWbfpsmuG2b*b!y+G!!3</11/*5!0,1!/b2c!t+)!fueohffjWefbssuh3!*><!!eGfymbbbdGTmupobfuj!efbeshhf!Iupbsp{m4G!b>b!y)G.!3</T1T!b+n!vmmv!n>b!XO*O!b,n!vmmv!n*bOOsXjTbXq<a!)Ggyjb!b<G*m*pQbtup!qf!e-hyffWuf)squp4U!y>f!U)b.b3y/G1)!b+n!vmMvbnbbyTG*!!>,!!QmevonFbbTnXvTmF!<u!bGpymbGbbGbmypGb!u<!DfyejhqfcIvpts!{+!!>D!ybjcqtc)vfte!h>f!IFpysj{q4c*v!t,!!ufbephmfGIbpbsy{G5!<<!*G*yObtbpGqm!p-byuf!uf)eqhpfUWyffsUub!b>y!Gb)cbtn)vfMebhbfyWGf!s>u!4O*e!o,F!bfnevhmf!Wufbspum5G<b!bGyyGb!b<G1m/p4b!u,!!t*vDcyqjjqycOvXtT+X*O1F/T3F.!)>)!!m>v!nEbyOjXqTcXv!t,!!umbvpnmbGObFbTyFG<!!<G1yQb`bZGUmJpMbBuV!Rm`fBoBhYuGi!T+j!hzo/!Q>O!gggypb!b,R!vzb/mCjtupzqS!d>q!Gzs/bQntfp/qy!<<!1GQy`bZbUCJpMpBmV!Ri`pBsB{YTGq!b+o!!y>/!QfOeghgfpI!p,s!{y!/?C>t!pfqe!h>f!Wyf/sQut<p!qG!y<bQbtGpmqp!b3uu!btpvmcGqbjbyyBG!!><!1tQv`cZqUjJyMOBTVXRF`!B+B!Y3G/!1+!!,z!/tQvOcgqgjpy!O.X!TzX/OCFtTpFq<!!>j!gz)/aOitppsq{!T<q1bQo`*Z!UmJvMnBbVOR!`>B!BmYvGn!b+X!<y!/jQgO)gagipp!s.{!Tyq/bCot*p!qm!v>n!byT/!O>t!pmqv!n<bOFt<p!qj!g3)uibppsm{GTbqbbyoG*!!<m6f/o1h!u+i!TojhhjoT!i>u!hgoyfbmb!R>v,b!mzj/uCztSpdqq!G*sobbnqfT/{zs<p!iG)ygbjb!G<m6p/b1u!!+t!vochqjjTyiCu!h>o!f)mt!v>c,q!jyy/BC!t+p!q)!2*/o1b0q2T3{/s1p*i*a!).g!jm!v<nzb/Nf<n!bGsyGbqbdGSmzpubjum!bhvsRbbebjyfgo!u;O!!1>/!1m!v@n!b*Oo!b.q!Tm{vsnpbiN)<!!>G!yzb/bQGOmgpgbpu!!<hys/bfenjbfsoGuqTd!S>z!umjvmnbbvTR!b.b!ymgv!n;b!N1</!1G!y@b!b*GombpqbTu{!smpvinab)O!O>!!>y!/mQvOngbgOp!!,<!QmOvgngbpN!<3!uGbypbmbGGbmbpybGu!!<mzv/nNbtTpTq!!>>!!mzv/nCbtTp!q,!!<myv/nNbtNp<q!!G>y!byb/CCptppmq!!q<bCjtspOq!!>3!ubbcptm)GhbsbbyeGj!f<o*ufOh*o!b?S>q!dbScytj)qhcsvbte!j+f!o*uCTy*j<q!cGvytb)btGcmbp)buub!ThbsbbyeGj!f>o!uD!y>j!qncbvyt)!bucbtp)mhGsbbbeyjGf!o<uoOh*j-T!ibuchto)fhms.b!e>j!foohujTT*i*u<h!ojfgm)!q*bOjs"],n4.points=["~v!o<j*g{p/sonp!jnubjut5p!Qnwpne!f.m!N0b!ufsmjbyd<t!)v!o>j+g!pfs{nj!Tnubouj5p!Qn`pmehf!m*WfjwfjxuNdbfuqstjsyf<Q!tvjo)j!ggpjs!n<!*n1b/u25!!.q!s>p>k!f^d!u4j!p]o^N!b3u!s]jyyj<s!uvboNjogppjsund!fnkbpus5q!)w!j>f!xfNwbjuusdjfyq<t!svfoQjtgjp!smnp!pgcm!p~b!u<!otpdjbumvfm<p!tvfosj!g+p!sfn{!jwtf!d>3!!fv{VjwTPugogjtpfQu`<m!hv!o|j!gfptsmnf!!c~p!p<mo!pvjtufvVmwpBtsfssb!z+<!!zbbusussBjfc{vjutf!!>w!ffd{4j!TqupotjjpuQj`pmoh<!!|v!o*jzgbpsssnB!fc{pjpTmf!tvvt)f!Dgpjm!p<so<p!jbuujutspjQcwvnu!f+!!wyfjds5u!bdNpomppjsu<d!fwkbpsszqj!o>h!!owpfjdu5j!twpDQp`mmphs!<<!obpujuusjjtcpvQuwfn!!w+f!dy3j!sbuVbwNPxgfgjtWfmuf<e!pwnb!s>z!joophj!uwjftdp3Q!wwnP!g<g*t1f/u2<!!-veofjngsppsgnt!ocbpspum)!5qdjfdwl!j>o!ho<p!jbuujutspjQcwvnu!f5!dwffwd!5<!*qojpdjluDjptmppqs)<4!dvfowj!g>p!senf!ngsmppgbtuo!btsju{!f4<d!fvwo!j~g!p<s*nu!fgtmgpgbPuw!Vsbf)t3pdmfvwu!j>p,o!<u!fvtogjggPpws!n|!!c*pzpbms!svBtwfVTfjt{vf)B!sgsjb!z<<*!ubfutugsgjPcwvVuvf)!3gdmfpwb!u>!!tujf{tfgBgsPswb!z~<!!<cspppmmp!dj!t>Q!fssptmqpfDdwu!j|w!f*NsbpumspjDyf)tnvb)u!5g!jn!*f!t|m!fs!f~u!v<ssop!mnp]D!l3d!j^q]!!>4!!s^p!m>p>D!w.!!|2!/*1h<o!j~l!dwjpqj)e!!gnjb!j|o!)*","~$!e~f!g<jsopfm!pVDTfFt`vNgBgQj\ve!!v>o!jsgppmspnD!hwbfsdG5`!mehj!g|g!vfttfm<f!!v~o!j<gsppsmnp!Dgwm!p>b!us!ppmqpbDdhjbuszG<`!mvho!j<gepssbnd!tgjmep!b*u1!/b1m!q>i>b!Ubf/tsup<m!pvDofjtgvpgsgnj!ec)p!pgmj!!v|t!f*Dhpomjplsd<j!qw)b!sgzjj!o<he!swbfddt5j!ew!D*pumtpfsU<b!ivqomjbg!p=s!nb!/cspppmmp!Dqfjtdvlgjgojhe<)!!vgojj!g\vpgsjne!ocfp$p\vm!!~e!j<t*dwbvs!e-Tqfbmnf)dEu3bfcsmvfu<y!f\vu$!j>o+d!msvpemfp!D=fctmvpgpgnjTef!m<fudfutjgwgfP/wg!t>/,i!fwbve!?<\vf!mvbodjTgwpvs!n+!!wefsdp3p!DvuwoTjdpbQm`fm<h!!w>b!swzvj!o3hd!fwwf!d|3!!*wfPmgcgbtufduf<m!f\vT$ejsgb!detfjgejao!f}e})!VhToFj`lNdBjQq*a\v)!!vgojj!g\vp*sQnB!Nt`bFnTqVm)fesf3oEj!gnfbeq!<g!j\v$$\vf!o~e!j<g*\vz!uwjpdjbeq!pn!b+j!ob)/*f!t|v!g\vg$jjeo!d-m{vzeyf/!f=tcvmgpgpjneT)f5mdffdwu!j>w!fs/pgmtp/Dcfptevzg?g\vj!ew!f|d!5f!temjfg!g~v!t<f*Dzpumjpdsb<q!pj!g+!!)ba/qsjpdmlpjDowh!!-%{%z!yv/tsfpDmppmDpws)*5!d|f!we!j>g!gsvptmfpD"],n4.bokeh=["?$TjWoodfmfvsedfT!u=jcm","~w!b\vsgzjjeoohf!$w\vf!d<31!/w2V!w><!!bv/osjpgmppsDnh!btsbGn`qmmhf!s\v3BEI!QuMDBp`mFpEsJ<S!SvFoWjPg!pgsfne!gtjb$n\vq!m<f1s/32E5!!u0E!fmqpudi!<>!!vsopjmgppDshnb!sgGm`pmbhu!!<n*b5yscvmmvcsg<p!ev!o+j!g*pusdnf!sgsmppdbuud!fbqttqbf!d+u!<*!5v/o1j!g-p1s/n1!)g3mdpfbwu)!!b,q!fzsyu/vwsVfw<!!-vsopjmgppDsun)!Ec3pfpsmv!uvytffuH!3>e,<!!mvpodj!g<p*s5ns!vgmmcpgbpue!!u+i!s*futdifpsmsep<d!uvdofjqgtpbs!n+!!g*m:p3b/u1!.o!f-b:s3</!1v.o)j3gdpfswn)!!g,m!pzbyu/!wgVbws!<-!svpomjpgDpus)nE!3gfmspvbuuy!fgup!d>v,t!<m!pvdo!j<g*p5ssnv!mgcmgppbeu!!+s!b*ouhdff<s!svpodjugdpfsqnt!bg!m+p!b*u1!/e1f!o-t5j/u1z.<)!3\vd$fjwo)d!m,v!ezfy!/=wqVbwd!l-jsophm?p\vD!uw)pEj3ef!snvbujyof)u*!!>|,!!wmfpdd3!!<e*p5gscvmmvcsg<p!ew!f+d!3*!ubdtfqsfsdpuddupdsfsqftdbu!!+>!!*w:f3d/31)!2-/:13-/!1b.t)q3fddfuw*)<!!,\v!$zjyg/!weVfwg!j-osfpem)pVDTuF)`EE3FfQsUvIu*y\vf!u\v!$>j,g!!mepfdg!j<o*f5es)vVmTcFg`pPeS!U+I!P*`uDdBfNsFsSpBd*u\vd!f\vq$tjbg!!+e!f*g5j/o1f.e!)-V1T/F1`)G3MdPfBwU)`!U,F!YzUyV/SwFV*w\v!!-gsmppmbpuD!uw)jEf3xf[s!v>u!ypfsuu!i>p,h!smbpqdi!j<d*E5fsqvumicUgppWej!f+x![*)uudffysusvpsdfu3dEf)qutEbf!q+u!i*-:!3w/V1w.*!/-s:-3!/o1f)b3sd-f!wg)b!s,*!<z!y\v/$wfVmwt!f-\vs!pgmmppDbuu)!Ew3jffsxv[u!y>f!up!s>u,i!pmhpsdb!q<i*j5dsEvfmqcugipUep!W+j!f*xu[d)fvsosqpbdduldSfHqCtBbU!p+E!f*q1u/i1)!u-f5y/u1v)s3fd3fEw))u!E,f!qzuyi/-w!VwwV!w-*s*p-m!poDfub)sE-3!fgsbvsu*y<f!u\v!$>f,o!emjpgd\v!!<\v*$5fsmvtmfc\vg!p\ve$!j+g!!*eufdgfjsosfped)uVdTfFq`tGbM!P+B!U*`:U3F/Y1U!V-S:F3*/\v1!)g3mdpfbwu)!!w,j!fzxy[/!w>V!wq!f-sstpqmfpdDuuj)wEf3EffsqvuuiyUfpuW!j>f,x![m)pudf!y<u*v8ssfv3mEc)gupEef!q+u!i*-u!dwfVsws*p/dsu-d!foqftbbs!-+!!g*b5s/*1<!!-\v1$/f1m)t3fd\vf!wg)m!p,b!uz!yw/jwfVxw[!!->s!pqmfpsDtuq)fEd3ufjswvfuEyffquu!i>U,p!Wmjpfdx![<)*v8osqvbmdclgSpHeC!B+U!p*Eufdqfusis)pudfuydufvqstfb3!E+)!u*E:f3q/u1i.-!!-w:V3w/*1*.-)!3odffbws)-!!,g!bzsy*/<w!V\vw$!f-osepjmgp\vD!u\v)$Ef3ofesjvgu\vy!fgum!p>b,u!!mgpbdd!u<p*s8!s>v!m)cggppdev!t+!!,*!uwdjffsxs[p*d<u!djfgq!t)bg!b+d!u*p1s/!1=!!-15//11*.!)g3bddfuwp)s!!,>!!znyj/ow)Vgwb!d-usppsm!p,D!us)bEo3hffs-v!u1y/f1u*!<>!,f!mmtpfd!!g<b*d8uspvsm!c>g!pneb!y+)!g*buddufpsss!p.d!usdbfoqhtfb-!!+1!/*1:*3</!1g!b-d:u3p/s1!.>)!32d/f1w!).!!,f!yzqy)/.weVfwo!t-jsupzm!p+D!ue)fEo3tfjsuvzu!y+f!ug!b>d,u!pmsp!d+!!<g*b8dsuvpmsc*g<p!ee!p+g!c*muvdsf!s>s!pwdfudd3f!q)tdbm!b+n!q*)5g/b1d.u!p-s1-/!1.)n3bdyfcwm)v!s,-!!znyb/ywcVmwv!s-*s*p<m!p\vD$uf)mEt3ff\vs!vwufydf5u!!u>f,y!fmmp!d>!!<u*f8ysuvvmscfg3pEe)!u+E!f*quudif-s!swpfddu3d)fwqVtwb/!y+-!!*2:/31/!1..!!w-V:w3//z1*)*3<d!fgwm)p!b,u!!zbym/qwiVbw<!!-jsgp!m)pvDtuf)HE33ef*s!v|u!ybfmuq!i>b,!!>m!ptdn!p<p*u8istvumfcqg)puei!s+f!t*iupdmfes-s!pudiusdfftqitpbm!e+!!,*!11//11!2--1!5u/f1y)f3md/fbw*)<!!,~!!zfym/twfV!w|!!-bsmpqmipbD!u>)!Eu3ffysfvmu/ybf<u!!~>!,e!pmgpcdm!v<s*!8>s!vwmfcdg3p!e)!d+m!b*nuqd)fbsmsqpidbu!d+f!qbtqbf!s+u!v*s:f3-/!1.!n-b:y3c/m1v)s3-d!fnwb)y!c,m!vzsy*/*w<V!w\v!$-fsopemjpgD\vu!)wEf3df3s!veupygfcum!v>s,:!!m>p!de!p<g*c:msvvsm!c+g!p1e/!:+<!!*wufddf3s!seppdgucdmfvqst8b!!>+!!e*p8g4c/m1v.s!!-+6!21//18)<3!dwffwd)3!!,e!pzgyc/mwvVsw5!!->s!pemppgDcum)vEs3!f+s!v1u/y5f<u!!w>f,d!5m!pddp!m<!*>:!swvfmdc5g)p1e/!1+*!<*!uddpfms!s,p>d!uudffyqutvbs!f+3!E*)6u2D/p1m.p!s--8!4w/V1w./)y3zd*f<w!)d!p,m!!z,y>/!wuVfwy!u-vsspfm3pED)uu)DEp3mfpssv-u!ywfVuw!/>y,z!!m,p!d)!w<f*d:3s)v1m/c1g-p!e1!/+5!**!u+d!fbstsqpfdduuddfpqstsbf!d+u!**!6+2!/e1p!g-c8m4v/s1*)<3!ddfpwm)!!,,>!!zuyf/ywuVvws!f-3sEp)mupDDpum)pEs3-f!swvVuwy/fyuz!!>,,!!)mwpfdd!3<)*1:/s2v6m-c!g1p/e4!8+*!!*+u!dbftsqsfpdduuddpfsqstfbd!u+*!!*+8!4e/p1g!c-m6v2s/*1<.!)d3pdmf!w,)>!!,u!fzyyu/vwsVfw3!E-)supDmppmDpus)-E!3wfVswv/uyyzf!u,!!>),w!fmdp3d)!1</*3::s-v!m1c/g3p:e*!!++!!*butdqffsdsupddpusdsffqdtub*!!++!!*e8p4g/c1m.v!s-*6<2!/d1p.m)!3,d>f!wu)f!y,u!vzsyf/3wEV)wu!D-psmppmsp-D!uw)VEw3/fyszv!u,y!f)uw!f>d,3!)m.p1d/!4<8*-:!s1v/m2c6g*p!e+!!+b!t*qufddfusdsppsdsufddfuq*t!b+!!+e!p*g6c2m/v1s.*!<-!8d4p/m1!),3>d!fuwf)y!u,v!szfy3/Ew)VuwD!p-msppsm-p!DwuV)wE/3yfzs!v,u!y)fwuf!d>3,)!1m/p5d1!-<!*1:/s1v*m!c+g!pbet!q+f!d*uuddpfssssfpdduu*d!f+q!tebp!g+c!m*v6s2*/<1!!d-p8m4!/,1>.!)u3fdyfuwv)s!f,3!Ez)yu/DwpVmwp!s--s!pwmVpwD/uy)zE!3,f!s)vwufydf3u)!1>/,4!8m-p!d.!1</*2:6s*v!m+c!gbpteq!f+d!u*dupdsfssfsdpud*u!d+f!qetpbg!c+m!v*s8*4</!1d!p-m6!2,/>1!)u3fdyfuwv)s!f,3!Ez)yu/DwpVmwp!s--s!pwmVpwD/uy)zE!3,f!s)vwufydf3u)!1>/,3!:m-p!d.!1</*3s:v*m!c+g!pbet!q+f!d*uuddpfssssfpdduu*d!f+q!tebp!g+c!m*v8s4*/<1!.d!p-m6!2,/>1!)u3fdyfuwv)s!f,3!Ez)yu/DwpVmwp!s--s!pwmVpwD/uy)zE!3,f!s)vwufydf3u)!.>1,/!2m6p-d!!.<1*/s4v8m*c!g+p!eb!t+q!f*duuddfpsssspfdduud*f!q+t!be!p+g!c*m:v3s/*1<.!!d-p:m3!/,1>.!)u3fdyfuwv)s!f,3!Ez)yu/DwpVmwp!s--s!pwmVpwD/uy)zE!3,f!s)vwufydf3u)!1>/,1!-m!p.d1!/<5**s!v+m!cbgtpqef!d+u!d*pusdsffsdsup*d!u+d!feqptgbc!m+v!s**6<2!/d1p.m!!-,8>4!/u1f.y)u3vdsffw3)E!),u!Dzpym/pwsV-w!!w-Vswp/mypzD!u,)!E)3wffsdv3u)y.f1u/!2>6,-!!m1p/d4!8<**!s+v!mbctgqpfed!u+d!p*susdffdsus*p!d+u!defpqgtcbm!v+s!**<1!/d1p!m-!5,/>1!.u)f3ydufvws)f!3,E!)zuyD/pwmVpws!--!swpVmwp/Dyuz)!E,3!f)swvfudy3f)u.!1>/,3!:m-p!d1!/<3*:s*v!m+c!gbpteq!f+d!u*dupdsfssfsdpud*u!d+f!qetpbg!c+m!v*s6*2</!1d!p-m8!4,/>1!)u3fdyfuwv)s!f,3!Ez)yu/DwpVmwp!s-"],n4.glitch=["?$TjWoodfmfvsedfT!u=jcm","~v!o~j!g<p*swnV!wj!o-uf!hcbznqj<)!!vEo3jfgspvsuny!ftub>nsqpmmfpsD3hEb!sjGn`bmhhf!<|!!vfotjmgfp!s~n!!<txbpnoqtm!f,ss3pEm!puDEhjbtsqG<`!mvho!j>g!psspnm!pgDmhpbbsuG!`bmnhp!v<o*u3</!1v+o*j*g/p1s6n+!egfmfptb!u+!!btozh-meff<f!tv!o+j!gtpys)n3!dgfmwp)beuo!btsf)f5ed<f!wv+oujogvppsnnb!+g/m1p1b3u!!>t!fxfpeo`ty!<5!dvfowj!g<p*sbn/!bghmdp!b-uc!/tcfdf!e-`hz/<b!hvdo!j-gsp/ssnd!)g5mdpfbwu!!>e!jstpumppsDuhjbpsoG``ym<h!!v<o*jugfptsgng!pg!m.p!bqu!!-efjhtbunpjs)uEj3pfos`vzu<y!fvuo!j>g!pcsdn!!5gdmfpwb!u<!*dqp!m-`fth<b!nwjb)sEz3jfoshv!uwyffdu3!!>w!Vbwh<d!!d5pdoftwu!!<g*mupfbtug!gVpo!q,b!dql!E-pfxhobtndjb)mEf3!f>s!v3u6y6f/u!!0>!!3s6d7!/5<d!fdwp!o<t*u*!fwmfhdo4b!)Qobjdtl!G-b*dfumphsotb!)>t!pwdf)d34d)f3w6!7+/!!u+o!v3p6n7b/!!>+!!u3f6t7g/g-p!!336d7f/w!!+<!*3/6670/e-f!f3t6)7+/z*`<e!fdfpto+tmub!nwsfpdo5>!,Vzo/qqb!d<l*G/b6d0uepfsftt!)>+!yV`oeqfbfdtl+Empbxnostpdob>m,fy!/0q!!w~f!d~5!)<Q*byd`loGpbjduusppsutt-j!e2!/,*!<y!/gqm)p!b.u!!/v2o!q>b!dyl/SqH!C|B!UfptEmffq!u~i!)<dyp`ootpuj!ujsop!uwtfjde5>!yw/*q!!||!*s/f1u?vzs`oe!fefptu))gwj-!!|V!o*qebfdfltG+btd`umppsdt.*z<`!o~p!jgumsppbuut!jseb?oye/)qw!f%d%3!!td`pm*p|d!,szf`uovpsjou!sgpsubtdjue)=tyj/oq))egpju!)~d!p~/!y<zz!`-owpfjdu3s)p2u3t/j:e9!:>9!-z8/9q/!3|4!4f*t*m*f!!+~!!5<4*8z6`9o/p6j5u6s4p*u<t!j~e!!w,p!jze/!qn)b!j.o!)/*2!!|>!!jzg/!q)!c|z*q/=12?*y!`|e!fwfftd)3g!jq!!|>!!*weVfwf<t!+gtm`pmbpud!.yyt`!o>p!jgumspppust)jhem?`zG/sqb!h%D%p!pts`em/pyd!,0y!`1o/p6j*u<s!pgumtpjbeu=!zz/tq!)>g!jg!m<p*p*se)fhfmt`+GesfbfhtD+pqp!s-eq/tzj!E0u!)1!/E63*f<s!vgumypfbuu)!ioupqsfnEbpmU!B>C!HvSolqdb"],n4.bloomBlur=["?$TjWoodfmfvsedfT!u=jcm","~w!b\vsgzjjeoohf!$w\vf!d<3*!bw/Vywj<Q!fvsovjugypfsun!!-tnbvnTqumifhsj3fEx!!d0p!mnpvsTUfftyvugvgsjfe<)!5vdofjwg!p>s!ns!pwmfpdD3h!busfGy`Tmjh{!f\v<f!tvmofj$g\vp!s<n*!1w/f2d!3-!nevjTsufidhujjfpxo!<0!!gnmvpTbfut!vhgbgvjtet)j5bdofQwe!g>)!jsop!mgpmDphbbus!Gy`-m!hj!o\v!BgImQpMbBu`!FtEjJhSnSbF*W!P|!!gsffeugvjs$o\v!!1~/!4<:x9!:+5!!1+/!3f!y>q,)!.n1v/T6u!i+h!jyf!x+!!<yx!!0+!!)*t3jfhmnqbn!b+t!!t,j!h2nfbm*q*n!b0t!)t!j>h,n!bn<v!T~f!twvpgjgej!en!b<jcoh)s*/!*|u!fwtfgdg3P!wjvo!w.T!jw{Vfw!!>-!f2s/v1u!y0f!UusfpymTpjd{)fE<3!fgsmvpubyuf!ug!T>j!h3nfbm!q>n!bgtm!p4bduf)wT!J<HcNhBs*/<*!ugfmtpgbguP!wxvf!j,h!iwuVTwv!n-!f>s!vhubyvftUtsjpbmopQde)gE)31f/s1v-u!ygfTuj!h>n!b2*f<m!qwnfbdt5!!4udffywu!v<syf!Q+j!yf!{>j!Tuwfoyju!v+s!fo3pEj)uddpfmspjseU!f>y!uuvfstfg-g!PwwVvw!*3<d!fwwf!d<4*!benjhgjgTvgt!f-Tyv)ng!e>Q!oubfjytutvvsbfhQ!j>y!/xs!hucb!p+m!gx!f<j*hji)uuTbvpnm<g!!g>p!sy!!)ujbopum!gj!!|>!!*2,<,!jj!!<=T!VLJFESBOSF`M"],n4.bloomHighPass=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gbpisqnm!bt!b-nmqfmyffsu3!E-!supEmjpgDguvvtqfu<v!pv)oyjjgnp!s>n!!sgpmmppbDuh!bmsvGn`jmohp!t<j*uwz!U-iisufetjiXpimuep<p!nvto!j,g!pesmnp!igtmfpsbiuU!ztunjptppuoijXnjvemu!i-<e!mwpbistzfjsoihU!zwufjdt3p!owjVnwv<m!)wqpfjuet!inubpjpon)t*!!>|!!bwifqdm5b!!uufbypfmmg!!><!*u1f/y1u!v-s1f/31E!)-u1E/j1g!g-v1t/f1-)!5wdVfww*!<>!!wsfpdm4p!Dmuvvnqbu!v>p!!w5fddf4w)!1</*3b:n:v-m!!1-/{6z9y8/-m!f1y/f2u2)5u*p<e!!g>m!pwb!u"],n4.bloomComposite=["?$TjWoodfmfvsedfT!u=jcm","~w!b<s*z*jwoVhw!!w-f6df3s!vwuVywf<U!svvomjcg)pEs3nf!stvbunyqfmuf!s+3!E*!1c/m2v!s-UsfpymupvDsufo2j<U!nvpopjmgcp)s5nd!ftwb!n+q!m*f3s/31E)!scpmuvdsbUGfnypupvmsCfq3s<f!mv!o,j!g*pwsVnw!!t-b5nfqsmvfusy3fEU!scvmmvcs)UEf3yfusvvsufy4f<u!!v+o!j*g1p/s2n!!-tsbpnmqpmDfuso3jEU!ncpmpvmscU)f5ydufvws!f+5!<*!5v/o1j)gsppsund!btGbnnpqpmmfCsq3sEf!mc!m,v!s*UwfVywu!v-s4ff6s<v!uvyofjUgspvsmnc!)tEb3nfqsmvfusy3fEu!!e+j!s*u1U/f2y!u-vsspfm<p!DvuoojjgUpnspnp!mgcm)p5bduf!wc!m+p!p*n7T/u1s)fsophuudib<G!nvpopjmgCpqssnf!mg!m,p!b*uw!Vcwm!p-p3nfSsbveujyvftU<s!vvmocj)gEp3sfns!vwufydf4u!!c+m!p*p1n/U2j!o-usDppmmppDsu<o!jgUmnppbpum!cm)f5sdqfCwm!p+p!n*G9b/d1u)pssp)uddpboGtnup!pjmoC!qgsmfpmb!u,!!g*bwdVuwp!s-*2!f|s!vgumypfbUus!vnmjcs)sEp3sfGsbvduuypfsu!!>+!!2*/13/!2.!!-gsbpdmuppDsu<o!jsUfnupvpsmoc!)n5jdyf)wg!b+d!u*p1s/-2!)nsjpsusdpbsGGnbpdpumpCsq-s!fcmm)p!p+n!Sibuehjovfts*u<T!n~p!pwmpcj!e>!!nsbpjmop)D*h!b|s!Gh`m"],n4.highlightHard=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jsgppmspnD!fthbenfq!m>f!ss3pEm!pjDnhbbhsfG<`!mvho!j~g!p<sens!bwdftdj3e!!u|f!y*u6v/s1f!T=j!{ffh<e!fv)o!jggjp!s<n*!fghmepfb!u-!1f/e2h!f-X:j/e1u)iq<f!uvtoijugpppsnnt!!w>f!df5h!effe!h<f*Dwp!m+p!sw<!!,w!bis!z+j!oih)!uwsfrdt3!!>w!Vfwh<e!fg!mupbbpum!gh!f<uuDiphmj)Swqfpdu3,!udiphpjsse+*1!/|3!,sufiuhvjsSon!puufuypucv,sufg3fEM)qjpnub.hufg-f!md+p1p/s3e.*u/gbf<M!n~p!uwuppjce.!!n>b!jio!)u*b!p|m!gw!f<du3i!hdjdS!n>p!uwuVpwc<,!ngpmupubpuc!+d1f/o3u,fusg!f>M!nhpfuuuDppcm,)udidh*j<S!qgpmup.bqup!ue+y1!/>3!.fueghffMXqjpeuu.i!!>0!!wu!fuybupvmsgf!T<j*{*fz/ey!<-!ygem)p3bduf!we,zd!d>)!mfpeDhuffXhj!e>u!iu!i0h!juSfnypuuvuspfcT!ju{bfp/mzg<!!<w*f*dz3e!!d-p1p/s1e)<3!dgfmwp,bdud!)umppqDMuffghu!!>>!!nhpfuuuDppcm!)udbdp,mwgf!d<3*)*.zeey!--!y.ee.z)*3*d<f!wg,mdpdb)um!puDpuqf!h>!!>h!fuugDfpMmn)pdudu,pwcf!du3b)p1m/g1!-<!*.*e1z/*1*!<-!ygem)p3bduf!wu,pdqdS)jmhpiDuu!f>h!!h>f!uuDiphmj)sd!du,bwpfmdg3!)<e*y*-1!/.1e!z-*y*e<.!)g3mdpfbwu,!dmdf)gmup!D>u!fh"],n4.highlightEdgeDetection=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gep)s5nd!ftwb!n+q!msfpsm3pEd!!j>n!bshpfm<p!DwhbbsszGj`omhh!!w<f*d*33!gwgVjwe<!!-v2ogjggjpes)n3!dwffwd)3i!uuhfoyfTmj!{>f!<e!!vuobjpgmpgs!n<!6w/f1d+5*!sd/p5mdp!s.<!!sw/p4jde)!!n>b!j3og)g*j!e|!!uwbfpdm3g!!j<o6w/T1j+{*fs!/>3!d2!/.1!!s0/!2udf)y!T>j!{2fg<g!jwef!du5b!pvmwgP!g<g*txfzu/!u>f!twgfgdP5w)v2!/.1!-w!V1w/!1--f!h1b/n1j-)!E23/f1s*v!u+y!fwuf!d>5!)5jdo!w5Tdjf{wf!-<!*jxozw/Tujf{tfg*g<P!wwvf!d,5!!wdV2w!!>-!fuhfbynujv)sEf33fEs)vjunybfhuf!->!!w4Vdw!!5,d!fvww!P<g*gztyf/uu/fytzg*g<P!wwvf!d.5!!wdV3w!!>-!fuhfbynujv)sEf3"],n4.highlightBlur=["?$TjWoodfmfvsedfT!u=jcm","~$!e<fngvjToufi!hNjBfYx`!S0B!EnJvVTTf!t5v\vg!gwjbes!z>j!oshp!mwpfDdh3b!swGV`wm<h!!v~o!j<gbpusmnf!et!b>n,q!muffst3gEg!Pjwnvb!h<f*<x!!v+o!j1g/p3s)n!!>w,f!dn3v!TuufiyhTjjf{xf!<<!*vxo!j+g!p*s3nf!mwqfndb3t!!e,j!s2ffdmuqjnpbot<)!)v!o>j,g!pnsvnT!fgtmvpgbguj!es!b<e*juvftt<g!ggPmwpvb!u.!!hwbVvwt!t-jfbhobQnejg))Ej3of!sgvmupybfuu!!y>-!!3jfom!qgnmbptb!u5!dtfjwh!n<b**u!f|t!gsgfPuwvvs!o,!!1w/V4w:!9-:f5h!b+n!jf)yEq3)f.s1v/u6y!f+u!!y>!!+2!fym!q0n!b)tt!j5hdnfbw!!+<!*ttjvhjnebb*s*!!-0y!/tujfhtngbg<P!w~v!)wgpejQeo!bnjbtjtov)b*h!!|>!!wxf!du3b!pjmogw!T|j!{*f,!,>j!!2</T1V!J0E!BuSf`yYTBjN{!f><=!!gjm!p<b2u!!>x!fjj!huioujT)v!ns!p>g!!h<bbvutmtfjeb!o>Q!eugf)t1g/g1P-w!vs!b3edjfvwt!*<<*!TwVfJdE5B!Se`jYgBgNv)tufbTpvmng!!>0!!utfvyjuevbssf!3+E!)fj{njbThwfo-j!!w+V!wo*p!j+u!dxffsjjhei!u>T!vbnu<m!fwef!d3"],n4.highlightFinalBlend=["?$TjWoodfmfvsedfT!u=jcm","~w!b<sszpjmophD!mwbfodj3g!!w>V!ws<p!mvpoDjhgbpssGn`!mthb!n<qfmvfmsb3WEf!hjenfb!h+f!<w!wv!o+j!gipushno!ftsbunTqfmhfesf3!E>!!fsephmfpUDfmybuovjsgf!25<d!fvwo!j<gsp/s*nw!Vtwb!n-qfmhfbsn3jE)!Ef3efhsfvUufyyfuuv!s>f!3w<w!!vuobjpgmpgs!n<!xgpmmpHbfuh!effe!h+f!T3ufsvfmobhWufih<e!fv!o,j!g2pfsvnm!bgWmfphbeuf!!f>e!hffvHmmbpWxf<h!ewfp!j5ed!fnwb!j<o*)w*V!w|!!-w3ffds5v!ufyefhUffWhbemfv)fE23!f>s!vuufyyfuuv!s>f!33Ef)vfmebhWffUhfeyfu!v5sdff2w-!!<w*Vw"],n4.fixColor=["~b!u<u*s1j/c2v!u-fe!fwnfsdp4g!tboQbpstuj)u5jdpfow<!!+\v!$yjjosdumbvNexff!j=WjmofteupbNovd!j+o!hy/jwstu/biNfubdef?k\vp!svQovj!g>p!sonp!jnubjut5p!Qv`Nmphe!f\vmgWjjefoxfN$b\vu!s<j*yo<p!jvuojjtgppQsbn)!4ndbfuw5!!>v!NoppejfumjNtbpuQsmjbyd<p!Mvwo!j\vggpjseno!fn$b\vu!5<!*vyQ/swpVkbf!d-u*N*b1u/s2j!y-<w!V\vb$)j4gd!fNwB!Y+`!CyPjYs`uDbMNJwQVQvF)S3!d?f!w1)\v4!dwfbws!z>j!owhV!ww!f\vdQ4J!MwDX`pWsVm!egQfpetgjju$j\vp!o\v<*!O\vP$JfUoDeFjSgJ\vE!`\vQ$JjMgD!)eeffgojjogffee)!DgMjJ$Q\v`!E\vJgSjFeDoUfJ$P\vO!*<\v*!*w1b/s2z!j-oehf!nwsfpdg4t!owbMspud)b5mdQfpwt!j+u!jypjos<u!b\vN$mjfgeepfNgv!)V4Wd`fDwM!J>Q!\vo!pbjuuujstjpcQveumfs!pwXfwd!3\v!1b!V?w!<S!FvQoQjJgMpDs`nY!PnCb`uY4B!Nv!VgwjN$b\vu!s\vjgyj<e!owfb$s\vz!j<o*h*!1w/f2d!4-!ewfVnws<p!g\vt$ofboseuj)g5\vd!f\vw$!f+o!eejfgd\vo!bwuptjoeJ!ynjbsjuob)N*b!)|4!dwffwd!4>!!uesfbnostpggptsonbfseu!!>\v!HwOfJdD4O)BbUQTpOtJj`uFjTpVo!*g<f!e\vg$j","~v!o<jsgppmspnd!!w>f!ds5p!mdppDmhpbss<G!`\vm$hj!g\v!?NzBeYp`cC/PtYg`/DyMpJcQqQjFmSd!=?!!f1e\vv!mwdbosjz$j\vo!h\v!?wzfedp4c!/wtXgp/sompejQupdtfjsujjEpqoj<m!d\v=$!ffoeevjmgd\vo!j\v$$\vj!g|!!e*f)gojjobfne!)eDjMpJwQ!`\vE?JeSbFfDiU/JtPgO/*y\vp!cwqbjsmzdj=o!hf!ewvfmdd4o!jw$M\vp!d\vb?meQbpftij/utjgp/oo<p!j\vu$djfgsejfEgq!jVmWd`=D!MfJeQv\vm!dwobjs$z\vj!o\vhg!jwefodf4$!\vw!V\vwg<j!e\vo$f"],n4.shadowMap=["~0!0<!o$pQjSuFjGtJpYQ\vw!nv!o+j!gypjssnu!bnNboup5j!undpfekfpmsWqj!f>x!Nobpujsujjyt<p!Qv`omjhg!p\vsgnj!enobfu$5\v!!q<s*pekffndsupjgptooNbbsuus!j+y!<y!jbsuuubsNjmcfveupfn!)w4fddf4w!!q>p!tojpujjupjot<p!QveomjsgppXswn!!\vc1p!p?m!!SvFVQtQfJJMoDt`uYbPoCd`fY<B!Nb!ugujs$j\vc!v<ueff!nnsbpug5t!obbNsbuu!s+j!yyJjostuubbNoxdffjeW<m!f\ve$pjng!!>N!BoYp`jCuPjYt`pDQMwJnQ!Q5FdSf!w?!!~1!\v<!evfonjsgppgstno!bnsbuu!5+!!nepfedfombNubtuosJjyyj<s!uwbbNsbz!j>o!he!fwnfsdp4g!twoXbpssum!e|Q!p*tfjduojbpuot<o!J\vf$tfVove)j!gg\vj!!\v~$!e<f*g1j/o2f!!-V{TzFy`/T*LeJfOoOoJjOlHt\v!!+\v!$fetfsgfjwoofJ!yCjPsOuFb`NUeFoYjUcV)S)F5\vd!fvwo!j>g!pesfnn!scppgptmo!bvsVut!f<Txl/juoiohjjofhX<o!j\vl$tj!o+d!myvfeufs!f=Wtoljjloto!j+o!hX/uwbtN/fiofpbce!?>\v,!!webfsozojjolht!!w<f{d/4u!iwhMjpfdXbomjQlptt!j+u!jypfou<s!fwWpojjel!tn!b+j!o[)u*b!N|f!owpfcd!5>!,u!sebfootogjplstn!f<ez!/>u!iwhfjdf5X)oqjplttj!u+j!pyof-u!s2f/W1o*j<l!tw!M+p!dZbumbQNpftojpucj!p>o,!!>e!fwofodj4l)tq!p<tyj/uujiphoj*f<X!ojjgl!t)!v+V!tyffTulsjfoWoojjolht*!!+|!!YnubbuN5f!ocppco!f>N,b!ueYf!o>o!jhlftu!C<p*o1f/N1b)u5sdjfyw)!t>l!jeofJoooejflyt/!y5*d<f!wn!b<ue5f!ncsppogftNobbusZu!!>+!!hyfjusCupboNfeNobjucs!j>y!)ytflujsofJWooejflyt/!z5*d<f!wn!b<uy5j!scupboNfeNobjuc[!!+>!!yhjfsuuCbpNoofjNlbtu!s+j!yf)ttslfjwooJJoyejfsyu/b{N*e<o!jncb!u>5!!ycjpsoufbNNboujXl!t>!!<hXfuubCNpfoofpNcb!u+s!jxy/)utilhjjofJXooejflyt/!x>*,<!!ynjbsuu5b!NtoljjlotN!b<u[sujbyN!f>o!pncb!u+5!){1//u1i*h<j!ftXlojjolNtb!u>s,j!yy!j,s>u!btNlojjolXtf!j<hZiuub/Nyf!o+p!cc!p+o!fzN/buuiYh<j!ftXlojjolNtb!u>s,j!y","~0!0<!*${Q/SeFsGpJpYD\vh!b\vs$Ge`fmghj)oBfC!HDSMpJUQi`uEqJfSEFlDdUbJqP!O>\v!!swpbmspzDjhobhs!Gw`fmdh4!!\vw?Mzpedpbcm/Qtpgt/jyupjcpqoj<m!d\v=$!jfoedvmmvdeofj!$=\vq!b\vd?lzjeophc?/\vt!g\v/$ojpojdumdvfesfj!E=qdjmmjdq=E!jfsefvdmudjopjo$/\vg!t|/!i*f)boej?b\vn!!\ve$jjpowd!m\vvgejfe!o=fd$m\vj!q<coppyj/ugjtt/piQfebmes?p\vX!w\v!$4jdgf!wN!BhYo`jCzPsYb`wD!M\vJ1Q!Q?F!S"],n4.reflector=["~b!u<u*s1j/c2v!u-ft!pwqf)d54d!fqwp!t+<!!yvjosjugbpNsmnf!enpbnu!5+!!uyfjysuuvbsNfxNfbjuws!j+y!<y!jvsoujbgNpospnj!undbfuk5p!snqp!e>f!moNpbjuusjjtyp<Q!`vmohj!g<p*s1n/!2n!b-ut5p!qw)j5fdxfNwb!u+s!jyyj<s!uvboNjmgfpespnn!!n+b!uy5j!squsbpNkffsdvuujypfouN!b>u!swjVyw<!!|w!b*s)zojjobhn!!wefjdp5w!!w<Vw","~v!o<j*gbp/sfnt!bwcf!d-4*!sdppmmppds!<-!cvhosj/gfptsbnc!)tzbbnmqsmffwsP3eEo!fumEcj)g5gdvftwf!<>!!wsbpsmzpjDohhb!swGf`dm5h!!w<Vews<b!dgtmjpeb!u*!/c2m!f?o!ezP/wwfVsum!b}z})!g/m2p!b?u!!yc/bwtVfu-!!}g}m!p1b/u!!=c!mzf/oweV*u!!|}!}s!f1u/v!s=o!)yc/bwtVfu!)=!!g1j/!6<!x@/!w)V3w/!10!!+z!yc/bwtVfw!!+>!!cwmVfuo!e3*d!f;w!!)<2*/w1V!w.!!-3f/t1v!g+g!j)E2u/)1k!p.s!QcEb3tffs*v!u+y!f)u2!/>1!!f.t!bccm!f5odef*w*!*|<!!*~)!owjfbdn4!!ecjmpfwo!e~P!w<f*s*mcb/ze)owffmdc4!!-ccb/tfft-b!cw)fzdb4m!scfmwfPoeeo*f!m|c!!s-f*uhv/seoo!fwmfcd!4-)hc/mfftobecP)wzfbsmmsbfzw)Pcebotffm/cs!--!*csm/feo"],n4.envmapCubemap=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbssDGv`cmfh!!f\vogwjNeboqf<$!\v\v!$<jcohdsm/v*e*f*!{=zf/oodppjeujdofhs?j\vE!uwvpqjuev!Pnwb!j-oy)/*o!p|j!uhdmf`sGjsEbuhvDqpumvpPsw!!>)!4wdffdw5!)-1q/b1N-w!o1f/)1f-c!v1D/f1s-v!u2y/f1u*)<s!b\vf$ojjgMepfUgm!fVyTfFU`qMbJNOwFoBfS!\v>!!hcmh`sG/ssbphmDppDmhpbss/Gs`hmch!!>\v!fntbmqfU$f\vy!f<mcUhpsM/j*o*f*b{sz)/uofpyjuuvdsffsDjvEcufv)qfuovwPNwb!q--y!/wofpdj4u)d!fwsPjvEuuqv"],n4.envmapEquirect=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbss3GE`!mfho!w<N*bzq/<g!!v-onjcg!p-snnu!)wyfjdn3!!>u!fcyhfsm/Tsjp{mfp<D!h\vb$sjGo`dmmhv!e<f*!y=/fgo!d-psecj!o-hm?c\v)!y\vj$ne!f>g!jnocf!!4SdFfDwJ!Q<S*PyD/BgM!`-QsJu!!1-/m4u2)9y4j1n:!9>9!7n2u9!448d:f1w8!\v\v!g\vj$eeoffg$j\vo!f<!cShFsD/J*Q*SwPvD!B-Mq`bQNJw3o!f1)/!2E63:f2s6v5u:y5f4u1):s2b9f:o6j4M6p\vU!mwffydf3U!qfbrNvwjosff!d>u!Vmwc)!j4od!fwwf!d<4y!/efj{sj*T!m|f!ygfmup!b>u.!!vy!/>w!vb!u<bcoh)se/j*s*/w{v-!!-.qebjNsw/oyf*)!!+E!3SfFsDvJuQySfPuD)BsMb`fQoJj3M!p,U!m1f/y6f<U!qgbmNpwbouf!!w>!!>s!c1!/46d!f.w!!b<tzj/of){djmTbmnfqy)feuj!s>/,z!-z!/.w!v2!/<1c-h!s2//*1**w*v!!+-!qSbFNDwJoQfS)P!DEB3Mf`sQvJu<y!fsuf)usvbsfoo!jwMfpdU3m)fvy-f!Uwq*b<N!w~o!fw!p>j!es!un!b4jdof)w*!!<|y!/hfm{`jGTsmbfhyDfpum!p>s,!!>y!/wwfvd!5<)c1h/s1/-*!*1w/v1!--!q1b/N1w-o!f2)/!1E*3<f!swvfudy4f!up)vsubqfvoujEMjpsUfmdfuyjfpUoq!b>N!woopfs!n>b!mmju{!f4)dwfPwv!u\vqfvtumEfj$s\vf!d<ucjhpso/**<*!wwvf!d-3q!bvNww!o>f!)f!rEv3jfssfvduuyVfwu))psvbufqovjuMEpjUsmffdyufjUpqob*n<!!>w!fmdc3!!4gd!f>w!!g<syb/dfu{)jvTwm!f0y!fuuf!y>f.m!Tyj/{wfv!!.<!c1h/s6/**<*!wvvw!!-.q>b!Ngw!o+f!)u!fEy3ffmsTvju{yff<u!)\vs$bjfgoejfMgp!UVmTfFy`fMUJqObFnB!S>\v!!swcf!d44d!fuwm!!<>z!/nfb{qjUTfmyffymfUup!M>j,o!fzb/sw)vu!f<ycuhvss/f*3*Ew!v)!f-oqwbNNbwqo-f!)v!wE*3*f/ssvhucy<f!uv)ws/byf!o,j>M!puUfmyffymfTUjq{bfn/!y><!!swuf!d4"],n4.envmapBlur=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbss3GE`!mfho!w~N!b<q*<t!jvyobj!g-pbsunf!ijuo)uf!mtqbnnbqTmuffth<!!+v!o^j!gjp!s]nt!ugimhpjbfux!!x>f,j!hcihust/]s!pom!p^D<h!bvsoGj`gmphs!n<!*ctpjpymb!!m-bbuujfuivue!j+o!b1m/<2!.v)ofjmgqpnsbnT!ugfmhp!b+u!!^e!Uji!f]utbu<i!hvjofjxg!p>s,n!!cghmsp/bsup!mnpjDqhJbosuG<`!mvho!j<g*pjs)nu!bwpfmdg4!!+q!pbmuffBiyUjet!<>!!\vb$ujfoidum!vuebfp!m=gf!o~d!p<eljbofhs?c\v!!|\v!$*etffgmjqonfb!tF!O>W?N!BjQ)`!UgZjQ!F|`!D*V,C,Fj`!V<Wo\v!!=\v!$jj!o<d2m!v>e!fj!!=udovjc)f!FsopwgS!f<g*mtfjdyubj!p-o1G/T1?)\vf!mwqfndb4T!uhffhu!T+b!n^q!m1f!)]gtmupibhuj!fuxi!f>u,b!-c!hwsf/ds4p!mbpyDjhtb*s!G|`!mghm!p<b*u1!/d2p!t-U1i/f1u!b-!1>/!1d!p-t1)/u1i)f5udbf*w<!!>w!fsdp4m!ptDbhnbqsmGf`Emjhs!f<d*utjjpyob!)>f!{wjPmvbunqsvpuoE!j>s!ftdjuyjbp!o~!!+<!*dyp/toUpijfuudbf!s,j!Edusvpqtutv)Pbwy!j.t!--!1w/P1v!u-q{v/uoEpjjsufddfusjjpEou*v!q+u!vtPjwo))4udiffwu!b>*!!t,j!ybby!j|t!!*+*!*e*p1u/)1b)y4jdtf-w!!w-Ptvjuyqbv)umEbjvsrffd)umjmpbo)*!!g+j!!)<2*/o1p!j.u!ddfpstjUEiufvuqbu*v<P!ws!f-utvjsyoB!fcmjpmqj)otftbpssDdv!c;f!VtWj)yfBofwmNpbqq!-@!!tmbbnoqjmefvEujjsufbdmu!j>p!ot-j!ynbj!q4Jdofuw*!<|!!~*!)wopjjben!"],n4.oitBackBlend=["?$TjWoodfmfvsedfT!u=jcm","~w!b~s!z<jeoshb!dwtfjde3!!|w!V*w1</!1v!o>j>g!pbs/ns!ptmbpnDqhmbfssG3`Em!hv)C!bgdjl!D<p*mwpVsw<!!-wsppjmep!DnlbdjboC)v*)!E|3!fhsmv`uGysfbuh!D>p!msp"],n4.oitFinal=["?$TjWoodfmfvsedfT!u=jcm","~w!b<s*z!jbo/hs!pwmfpdD3l!dwbVcw!<,!!vbo/jsgppmspnD!utobpnsqgm!f-sc3hEs!/vsGpsmppoDulDdpbmcp!s+<!!svfojjmgqpjsunm!vtNbbniqqmmfbs!3,E!!cvhCsb/dslpDmppmDpuso<p!swgp!j)e5!dnfbwj!o>)!*s!p|m!pwDfhdb5s!Gg`smpho!u<Dbp/msppsm!p>D!uuofpysugv!s.f!31E/)2v!G>s!psofujDmpqmjpusm-v!NwbViwq*m<b!!wufbdp5m!gc!b<d*lwDVpwm!p-ss!p>m!puDflydubvCsvf)3E"],v4.common="~$!e<f*gwj!o-fv!)Q3Jd!f4w/!2o5s2v6u:f3s7!6<466/91:!8,:!4J\vQ!`\vM$BeDfPgSjQoJfD!FQSJ!3+!!7*/*319/422!9-614/128!2.8!:-6z9/7s\vj!e\v)$qenfbgmjdo)fo!jQtJb`!I>B!MwG!!u2b/p6m8g1!8<:67/413!7,8!:35J9Q:`7M7B\vD!P\vS$QeJfDgFjSo!f+!!S*FyD/JsQjSeP!D-B{M/`sQjJe!)1o/b4u2b9!4>1!:v9!9u7b2p9m4g8!:|1!8*\vs!j\ve$!e4fdgfjwo!fo!jS)FwDVJuQdSfPsDjBvMr`fQ!J33d!f1w/!2~6!:<216/52:!5.4!1>:>2!9^:!644!6]\v^!!\v3$!e]fng!joosfv!uFfQsT!J|M!P*On!!25fu.b7n\v)!y\vj$sjugboNeffwgj!utdbfuqvtssbfuQft\vj!!\vm$pepfcg!j~o!f<!*tcbhusv/ssbpumfp)db!*-!tdumibhnjqf)xb)-u!p1e/!1o-s!v2u/f1s*!\v<!*\v3$3f8o1e/j1g!\v-!3g6m2p8b/u1!!q-p7x332)3d/p1o)t4ud!fjwo!!>g!mtpubiuh!jyf*x!!|4!dsffwu!v|s!o*!syp+myp<d!!~4!dgfmwp!bouj!!quptxo4p)dd)pfodtoub!ojjon!vgMmfpwbjuu!bym*f!S|p!Ussfbufvosjom!!yu+byp+myg<!!~~!!<gqmnpub!uo!sqvpuxf5s)!d<p*o{t/u^!!j3o!!]gnm!p-b{u/!^y!*2!!|]!ng!m-p{b/u^!!y13!!]>n!)y4+dyf<w!!s>f!u^v!s3o!!]yq3n+uy!3<<*!z~/!^g!m3p!b]un!!n-bzy/4^)!d2p!o]tnu!!-jzo/!^w!f1d!4]!nw)*4!d|f!ws!f>u!v^s!o2!!n]bqyn)un!b<y*)yw//^y!-3!!w]/nz!*--y!/w^/!{2*!<]!n~!!-gym/p^b!u1!!b]wnf)s4bdhffw)!d>p!o^t!u1!!j]oq!nwuf!d<4q!ndup!m4pusb*n!!||!!s*fnu!v4suob!ne!pouj)!duptmoppsd-)!4wufbdN4f)t1p/q4t4o4b4s*u*!<4!u~b!ni!j~h!i<q*!{gzmyp/b*uy!jssbuoben)!d+p!o*t1u/!1j!o-!swjfed)35!dvfww*)!)|f!{djpmobtnus!pioj!hoisqv!ugfmsp!b|u!!*by!j>s!u2b3n/!:59u:b9n-!!ocj!!>-!s8j9e/!344d4f-w!!do!j>)!o5p4j8u6d9f/s6j5E6n4s<p!gitjohbisqU!fgtmspfbwuo!je!u4!d>f!we!p~u!)<v*w{/zyyz/-*!*w1f/d13!)-bs-jce*)*5-d!ftwo!!+>!!ynjpseu)benu)-)!fQ{Jj*m<b!nssfpuov!soos!vgusfbsd!u|)!t*jyoj)stuob*n!!+5!udb*n<!!o~j!!t-ussjved!u4!dJfowd!joejf)ooupMjjuhdifus!j|E!nwsfpdg4t!odbpsmup!s4<d!fwwf!d<4~!!e\vjgsjfedoufj$p\vo!<<!mcbpnpsmp!Owujbtpjdcsmbff<m!d~!<4!dtfuws!v\vdUuB!PSDfSgBmFfMdDu`fFeTMVj!hgifue!g|j!$w\vf!d<4s!jeEjxsffjdwu!E4jdgfgwv!t<fm<b!nwsfpdo4!!4edjfswf!d<uoTpqjfudjvtmpbqs!<4!dwffwd!4|!!juoyefjusofpdDudEjjsgugfvntpff<H!!wufddv4s!ujto!e<j~s!f<dsubTmqvfd",v4.packing="~w!f<d*4s!bqgb!d.l!O[pqsjnmbDmwUopjS!H+C!)*dspboftou!!.j!os!bwgf)d)4!!0o!p*ssnbbgm!*+!!|s!bsffou)v!soos!voupfssn!b|m!j*{sfb)go!pusbnpbmmg*!!o+j!!1u/t6o!p,d!!1-/s6b<f!o~!!uwbfpdm4g!!voojq!budtloSpHdC!U-p[OqpjsmnDbwmo)jd!puobtpum!gj!oo!jw!fudt4o!psdh)c[*x!f|j!WspfUuivusqof!E3f/w1j!u+d!fsqhtcs/fyqz!{u!b.p!m2g/!1~<!!<~*![dxpfojtwu!!+g!m*psbbuf!oQ!b.d!lsVbqgt)d)b!m0f!!*>s!b3g6!7+/!!*0[!x3f6j6w/!<,!!dspboftou)!)g!mopsbvuu!fVso!q|b!d*lsEbpgx!outbdpbmmgf!!o>j!!3u6t6o/p!d0!!-3s6b7f/o<!!udbppomtgu!!owjf!du4t!oQpbdd!l-G[bxdfujpws!tu!b>p!mwgf!do4j)!3u6t7o/p!d+)!i3u6q7f/E!f+w!j3u6d7f/q-t!s3f6Q7p/U![+x!f3j6w7!/u-b!p3m6g7!/~*!<<!sdbpfoot!u.!!w*fsdb5g!!V.o!qsbbdfloG)b!d+u!p[sqtj!m>D!sVbofqobjdml!Eopsxvoutfdsb!m|f!!*0s!bwgf!du5b)pQmbgd!loGjb!duutposptd-!!-2s/b*f<o!!dupboptmug!!gomjp!buut!oTpidj!g-u[SqjjhmiDus9b!f>o!j2m/!!u0b!p3m6g7!/o<j!!wuftdo5p!dq)b[dxlfEjfWqpuUiiUupqSfHECdBj)idqpbosthup!ijuos!pg!mupbbpum!gw!*~!!|<!*wsfbdg5!!.s!!s>b!fwof)d!50)!g*ssbbdfuo)!w,!!+[!xQfbjdwl)G!bodsuvpusfts*!-|!!w**s<b!gs!/uzb{pxm!g.!>o!js!/uytzo{p!d+!!-Tsibjfgou!Sujbhpimug9!<o!js!fuutvospod!!s-![+x!fQjbwd!luVbqptmdgb!mofj<!!u~t!ogpmdp)biuu!qvfoEqdbjdilqSbHsChBpUipuEsfPqpuUi[)xdfpjowt!uu!bjpom!gw!f~d!5<!*w**1!/|6!6s3f!u0v!sxo/!we)p!u,)!w{-/!wV!o-q*b1d/l6G6b3d!u0p!szt/*w<)!!~,!!wyf/dw5)!3qdbfdwl!3oIsbvmugfUsp!S|H!C*Bw)!w5fddf3w!)wg*m!b|I!3wpfUdB5C!HsS!l>d!bwqfodv5!)3wd/fyw-!!~g!s<b*dxu/)sw!/-y1!/+6!6336!60/!1x*/-s!!w./!z{-/!sg!s-bzd/us)!w-/1z/!6+6!33!606!/z1/*s*!<.!!syf/usv)s5od!fw",v4.bsdfs="~$!j<g*oEe!f+g!!HV)T!F+`!VGC!Po\vs!vvuofjsg!p<s*nI!Ogumppeb!u-!tgtsffotjoofjmiJto)uhfooptijQuozo<j!m\vC$`fEo!e>j!gE\v!!uwbfpdm4g!!C<S*E)Gu`jMdbjnmcqfnsJu`)hdoppoitQuo!ojjom!Cw`fHd!4>!!eHj!gugbvptmfgD!p<m*pIsW*u!p|e!!s-f1u/v2s!o-!sSpFmDpJDQsSbPmDvBdMf`qQtJ)!l+d!jemjigdgTv`tGf!D>p!mGp!s4<d!f~w!!w<f*d*4s!jGE`gTmdbiim!j-dslj)Edxpfojtwu)!ujpoe!)wffudb4s!vgu1b-t!!d>p!oItWuu!pjeo!!ugbmppmbgu!!<g*:*1s-j!Edgpmobtiu!!-jmob!ngsmppob)uu!peep)ufWuIb*s!v|u!bgtm!p>b!uI!Oguspfet!oufbmp!m>g!!f<y*qs3j)E)x.f!j6w/!6,6!5s8j4E!u+i!hejpmu)WfI{!j.m!b7n/s:p9o4!2>7!*s!j+E!gempbuiW!I4*d<f!ws!f|u!v*stot!fgosjfotjoiftm!Juobupfmogt!joujz!!u+t!o)pgd1!!-+s!p)m2p/D1s!b.m!vgdsffqtto!f4md*f!w,!!o)jg!:u1t!o+p!dg!s-fmtbonfsmp*o*!<4!d~f!wg!mopjb!uu!tWo`pHdH!Y-`sTjnEjxufijDwp!s4sdffmwb!uofje!)udtpooptdu!!-jsoj!Egumiphbjum!!b4mdqfiwb!-o!jd!puottoup!dj)oh!ogpmipQbouo!jempCu`OGME-S!Cd!p4odtfuw!!j~o!!<g*mtptbfuo!jeopjuiOtW!*-!I|O!ugpmep)bxup!qb!3+!!>*!1q/p2x!3,)!b6m/q1i!b+*!<t!tgfmopjbouj!ihtw)!!>+!!eJpQu`OMMB!D+P!StQrJsDuF)Sb!3o!s,v!u)f2s/!1|!!.*!IbO3u*p!e+!!uqbppxm3g)!eopju!OuWt*o*p<d!!g-mtptbfuo!jhomj!i>t!!eupbupOmWg!!+o!jt!rustuo)pbd3)!h,o!p)i2Q/o1o!j.m!Cb`3E*!!u+b!pqmpgx!3~)!e<p6u3O/M1*!*o<s!vsuffusv!s|o!!*1)/u6j!d0j!mnqbnyJ)`hhwo!p,i!Qhomo-j!mFCQ`THJ!MuPbOp*m<g!!~~!!g<m*pubmuv!tEf`sH)H4Yd)fdwp!ootsuv!ujfos!!g<m*psbpuu!dbbmGqnisbp-G!sdppuodtfuw!)jsop!ugdmbpGbnus!peGpfusOfIi*q!T|e!fgqmqpjbmuD!`bD3U!M>!!>q!puxm3v)tbfmsq!iubb*p<m!gg!m<p*b^u!!1e!f]otpens!p>p!dq!p-x^3!)4e!p]utOeIs*p!p+d!))sbp3u!d.b!G2n/s1p*G!s,p!u2d/f1W<f!hsefFu`vDsUoM!!S>F,D!JsQpSuPdDbBGMn`sQpJG!s+p!ubd3f!w0!!<q*p^x!34)!e]ftoepsnp*p<d!!~-!^w!f3d!4]!tCeSsEpGp`dH)HsYp)uddpboGtnus!pjGos!pwufddf4W!fmhjehFi`uDEUjMs!->!,d!psoptuud!bjGon!swpfGds4p!uwdjffwx!E<j*s^-!!3d!p]otteus!pjpod!!w-f^d!42!!o]ptsensbpmp-d!)dsppoutdub!Gjnos!pwGfsdp4u!dgf1W-f!hdepFo`tDuU!Mj!o>!,g!msppbuud!bgG:n1s-p!Gdsppoutduf!wj!o<!*g^m!p2b!u]!tsepsvphpido!f-t^t!*1!!|]!tgemsppbpud!)bsmpquidbb!G>n!sqppGxs3p)usdpfvWhfihoefFt`tD*U<M!!w>f,d!4s!piubdmbgGEnjssp!G>s!poupdsfnwb!m<j*{1f/)1m)j4hdifuwE!j>s!!s,p!uwdjbfGxnEsjpsG*s<p!ugdmfpwb!u4!defpwu!O<M*!^>!!4t!b]utvessbpupfd))efp{uj)mobpnssnpbom!->!!m^j!h4i!u]Etjess*p*p<d!!g<m*p^b!u3!!e]ptueOsWp!p>d!)tfb{ujvmsbbnusfp)oe!p>u!)^o!p3s!n]btme-s!pwpjdf!x<E*j^s!*2*!<]!tgemsppbpud!)efp{ujOmIb!n>s!ptob!u>v!s^b!u2f!)]etpeus)poppds!n<b*m^-!!1i!b]mtgeEsjpsp*d*)<f!{gjmmpbbnus!peop!u>W!I^!!>1!!t]btuevsspbpudf!)<e*pQu!).w!j^f!x4E!j]st-e!sipbpmDguEdjfss*)*!<+!!wufbdn4!!>G!!^>!!4G!`]Ttdeismpjpddl!)<g*1Q-!!.g!:^1!-3!!e]ptueWsIp*p<D!ugdmfpsb)u!!+W!!u>b!nW!`>H!H^Y!`3T!n]jtueisDpppsds!f<m*bQu!f.e!)^b!m2q!i]bt-e!sepppuDOuMd-f!se)p!u+O!Wu*b<n!!g>m!p^b!u2!!E]!t>e!sEp`pHdH!Y<)*bQm!q.i!b^-!!1e!p]utOeIs*p<p!Dsufdufvss)o!!+G!!u+b!n)!W>!!+^!!E1*!<]!t~e!swpfpdd3!!<M^U!D5`!V]wt)edsppoptdu!!4jdof!ww!f<d*4*!OO!--!3dUp!o-t2uU!)j4ou!bwnf)d44u!bWN-f!tdppqottoub!sjuo!!+g!mwpobJun!!s>p!vuhbino!f4tutb*n!!|<!*d2pUo!t-uO!)gtmtppbsud!!M.V!U>`!T3JU[!F<!*>*!O7!5-/W1)<u!pdep!o+t!uO!!g.m!pWb)uf!{MjVmUb`nTsDpBoM!F>!!>2!U)!M<V3UU`!T-J2[UF!!4.d!f2w/!1<**!10/!1M)V4Ud`fTwJ![oFs<v!udfpso!t*u1!/g1m!p=b!u*!^M!V1U!`]CtJeBsTp!p>D!u1d/f6s!!0.!!MQV!U-`mTbJn[sFp<O!ugimhpjbmu)!ueppeu)OgWj!!><!*t3bwu!v-s2bwu)ft)teppsud)!O>-!!mWb*n*s<p!Owufidh3j!mv!w4!d>f!ww!f<d^3!)1s!p]vtheisopfptDtu-d!ftsr!s.u!)^2!/41!!].t!eesppupODWu*d*f<s!!v>w!!3>w!!v4wd!f+w!!M<V^U!`1T!D]BtMeFs!p,p!DMuVdUf`sC!J.B!T^<!!2s!f]utvessop!pvDwu<d!f~s!!g>m!p2bwu!!4MdUfDw`!D|m!j*q^q!f5e!T]qtiefsspfpGDpusdnfGsb!d4udpfsw)!dopjo!tuut!ojpod!!w-fwdo4J!ng!*4!u|b!ng!mopjb!uu!tmo!p>d!!m-fQo!h4udif)wg!*o<j!!suftuovpsdo!!-nWb!y4)d)fmw!!+o!jm!!u,t!ogp/d{!*-!O0!!4)dmf!w,!!o2j/!1u*t-o!p1d/)1f*u<b!v~m!bwwfFd`4D!UMMU!D4`dFfewh!f~W!f<dbuupfsiGuposjntG`bbduufpisu)!d+p!o*t3uw!!j-o2!ww)ftdt4p!swd2!-o!sdvpuoftsu!!<jwo!!.w!f*d*48!.wf32*!!-|y!!g+m!pyb!u.!!y1!/>2!)eypbun))wu2s-r!twf3t*s<f!wgomjp!b+u!!6z/!1>!!;b!cwt!)@y!**<1!/g1m!p?b!uy!)b!!>>!!b1u/f9i6u5o4j:t9`6b!u,f!i)u1!/u5b:p7m6g2!6<6c!!,0!!1b/!1>2!5w6!3u1b7p!m+g!!z<*z!!++!!z*<z!!g,m!p5b3u8!7c2!7>2!/45/)5!2,8!61:5",v4["ubos.head"]="g$jjegoeff$g\v!!V<T~F!`\vVgCjPe\vo!fv$o\vj!g<pssbnm!vTddffqotf!!4|d!fnwb!u<5p!jvuQbsSpokpfjduudNbbsugsfjsy!<u!bnpbmug5!!<vtWtjffoxjNobjuistj!yu<b!pwmfgd!4\v!fvtDmbfn$f\vs!b<QspptmjpuDjspbom<v!dgfmqptb!u4!dvfUwj!n<fs<p!mgpmDpnbjus!!u4pdoffwN!b<qsqfjxophQFnyjqsp!tuvbspfm<g!!w<fzdu5j!tvoGfpuhoDJpsmbpmsv<d!fgqmtp!buub!pvmGgp!h<Esfpojt!juubzp<m!gg!m<ptbtuf!ovlGdpjhiOuf!busb<p!mggm!p<boup!jvtGtpjhnGtbosb<s!u~!<u!bvpomjgg!p<stnt!fNobmubfusfjnb!mu!b|p!mggm!p<btut!fbopiNhbvqpJso!uufboptmjgu!z\v<S!CgQm!pgbfue!gmjj$h\vi!u<NybjqsJuobuNf3owtVjvu!z4<u!bgnm!p<byuj!seujbtNqwmVbvd!f4nufbonu!T<dzbumjft<o!fgumopJbmuf!oetjftsqgm!budbfpnmfgo!u<CujtbftU<b!iwqfmdb4!!uebjpgmggv!t<fz<u!jwdfbdq4p!!funbjptmtgj!w<ff<m!bwdfTdm3b!nosp",v4["physical.vs"]="~b!u<uysfjucsvfuwf!!+w!fydj4s!ubbQNputdjfukjppsoQ<v!!b>u!uospjjcuvjutfp!Qw`fmdh4!!\vb?Ozpespncb/mt<w!/\vq$bjNgxepfmgg!=V!TfFe`vVmWd\vo!jb$u\vu!s\vj?czveupfc!/wtfwd/3q!bbNVxwp<e!b\vi$tj=g!effegv!mVdWo`jD$M\vJ!Q\v\vg!jwebosfz$j\vo!h<!*gomppjbuuj!twpVQwbM)p4ddbfmwV!<>!!\vo$pfjouejjtgp\vQ!mwbbdspzMjwo!h\v!*wOfPdJ3U!DwFVSwJ<E!`\vQ$JjMgDo)eeffgo!jVgTfFe`!VgCjP$\v\v!!v<o*jygfpussnf!wn)b4ud4f!wv!V>w!Nobpujsujjyt<p!Q\vw$Nfwo!e<jygf\vu!s\vf$wf!o+e!jygj\vs!u\vb$Njxgf!jeWfmgfjeopfNev)!V>T!Fy`fMuJsHfIwU!N\vBgQj*e!o}f}$!\ve!f<g*jyoffues)fVwT!F+`!ByPjNsBuQb*N\vm!fbeupuNsvj)c4vduffw!!w>f!do3p!jbuVjwt3p<Q!ewmbsspzXjwo!h\v!*wOfPdJ3T!TwJVNwT3O<B!S\vU$`jFgToVe)fegf!oVjTgFf`eV!C}P}\v!!1v!o?j!gSpFsQnQ!JnMbDu`4Y!PvCV`wY3BNNb!u}s}j!y*<Q!B\vN$WfOoFe`jFgT\vV!)\ve$ffoojegjfge\v!!g\vj$$j\vo!d<m*v1e/f2!!=-vecfpnts/pigftboeb?s\vu!)\v5$djfowd!m>v!eyff!u=sjfowt!u5bdofdwj!o\vhg/jweto/fi$f\vb!e<?m\vb!nvsopjOgwp!s.n!!>n!bmub5n!svpNOpwe!f\vmEWFjEfJxTN`bQuJsMjGy!<g!fveogjjg$p\vs!n\v!gnjbeuo5f!$v\vN!p<e*f*m*N1b/u2s!j-ym<b!nvsopjOgupdsfnk!cnpb)u55d!fvwO!p+s!nybjmsNubbuNsmjbyn<s!p\vO$vj)g4odeffwg)!fV{TjFm`bVnCsPp\vo!!v>o!jmgbpnssnp!Onwb!u\v5f!tvmQfs$p\vk!f<d*u*N1b/u2s!j-ym<b!n\vs$pfOowe!j+g!\vn!)w5bdsfzwj!o+h!!ywjfsdu4b!NwmObpnssnpbOmv<)!4wdbfswz!j>o!hm!bwnfsdp4O!ww!N<w*Q*p^t3j]unj!p-o^<3!]\vn$)jugp!ee!f-g*j^o2f]en)!V-T^F2`]FnO)WuNpBeQ!*-!*}^}1!]NnB!Y-`^C1P]Yn`)DuMpJeQ)Q4FdSf!w?!!01!!m}b}n!sepfOgujdoffkec)pV!T>F!`mUbSnBsOpTONwJ!T<T*JePfOd*o\vb!uwtbosJzyjjoshu!bwNfbd)44!uwbXnp!s>m!enQ!p4tujbunj!p<o*<*!1\v/$2f!o-eejfgn\vs!p\vg$tjogb!seuf)g5jdoffwe!)+D!MeJfQd`oEbJuStFoDJUyJjPsOu*b\vN!bw)b4sdzfjwo!h>!!weffdn4s!pwgMtpodbbsmuQ!p\vtHjOuJjDpOoB<U!T\vO$Jf`oFeTjVg!\vg!f\ve$gjjo$d\vm!v\ve?fz!e=pecj/ttqwm/bqdbfNnufoofunNfbdqb/mwqtt/jief=b!ef?e\vv!m\vd$ojjo$d\vm!v\ve?fz!e=ptcl/jtowo/jhoohj/owotj/litf=b!ef?e\vv!m\vd$ojjo$d\vm!v<e*fm!b=ntsipbOebp)x4Ndbfqw/!w>t!/mibfnbsep?O\vu!d\vf$kjcopd!m4vdeffw!!=<g*moppxjNubjqt/pwQtb/)i4fdbfew?!\v>!!wepfjnes!pngbtjoob)swup!j4ed*f!w|!!\v\vg$jjegoeff$g\v!!V<TzFy`/V*W*\v2!!w-V3ww!V>b!))4vdVfwwN!b+u!syjjys!u+b!Nw3fwdV4v))b!V>w!-3!w2V/w1!*\v**/QyBzN<P!B\v`$FjTgVe)fegf!oVjWg`fDeM!J}Q}\v!!*wQVBwNMUpIdHbJmMV`!F>T!Vb)Vewf/oyj<g!f\ve$!fgoje$j\vg!\v\v!g\vj$efo",v4["lightsCommon.fs.head"]="~v!o<jfgdposbnj!ewbfsds4j!!bonscvjuffosu!M<j*huiiuhDjpfmXpfst<v!gvgojjEgjpnsfni!!w-fsdp4m!pmDjzhlitu/QusiphcjfM]j:n^f<i!!w-fsdp4m!ptDieHofvupJsshs/bueijhbjoMdjfnBfui))jyoj!nw!f>d!4f!doopbsjnebbms-s!jj!o4!dwffwd!4<!6t/i1D!p,f!gMgOjudpjef!o+u!t6]/:1^!*>!!|u!ighmjpfbXuf!tyv!g>g!joEpjsnnfbim!/uyb-p!mzg!!><!*ooppsjnubdmf/szj-e!/{u!i>h!joMpjsnnfbim!/-{m<b!nwsfpdo4)!uspfet!v>m!uM!O>u!ptei!Dupbfpgmggj!d|j!f*omubtn]s1p^o!!+4!d1f/w9!9o7j3!3u8t<o!psdf!t-vumiuh!j,M>j!ntfiiD!pufighgjjMdfjsffoiuqtt]j2n^f!I+!!o3j/!1u!t+o!p1d/)6f2d2o7b7j5e!b+s!szJ<u!ishfjtMvfmsuf!i,q>t!jtnifDIpuffghg!j4ddjffwo!u<tu]i3h^j!M+f!s3f/i1q!t+j!n1f/i6!2u2i7h7j5M!f+s!f{i<q!tsjfntfvIm!un!s,p>g!jtoivD!p<f~g!g<jedfjmfcobuotf]!4m^p!p+c!!3</s1p!m+p!D1e/o6v2p2s7h7!54!d+f!wy!<<!sspfmtpvDmzul!t,!>4!dtfiwD!p<fogpgjjuddjffsojuet!]45d^f!w+!!|3!/u1i!h+j!M1f/s5f3i:q1t5j4n!f+I!!yu!d+v!szu<t!!s\vfgtjvemouf!$,\v>!!<t^iTDUpIfHgJgMj`dBjFfSoBu`tU]D6F^S!`+N!V3O/]1t!u+i!h1j/M5b3f:s1B5u4d!f+s!!zu!i+h!j{M<b!fssfBtuvdmfuS!!,n>s!ptgijDopvf!g<g3j`ddjufmo!uEt3]s7f^m!q+n!b)t1!/n8s5p4g2j3o6v!!+<!2{`!d+u!m{!!E.3!s1f/m3q5n8b8t1!9n*s<p!gsjfotvv!m<u~!!,<>s!btmivDdpffqgTgfjmdcjbftojuet!]m8p^p!c+!!<3e/f1m!c+b!o1f/!5m3p:p1c5!4<!u+i!hyj!f+I!g{m<b!is!f4tdvfmwu!!<,i>u!etjiXDgpmfbgig!j4ddjffwo!u<to]p9j^u!j+t!p1q/!543d:f1w5!4<!s+p!m)pyd!!+4!dyf!w.!!|z!!u+i!hzj*M<b!fssfBuuvdsfoS!!sufdtvvsmuut<!!\v~1!!w?f!dT4U!IhHfJuMM`jBhFiSuBQ`sUpDcFfSJ`sNsVbOe!jgbjo$d\vf!)\vdgpjoetouf!$j\vo!!~w!f~d!4<!fmtjmhbigu!Q>s!pfcmfc]j:t^j-w!/dupiohtjum!!j<o*!1w/f1d)44!dofpws!n>b!ms*p!m|p!dw/fudi4h!jxmp!s|m!efOtpmsfn!b~m!!<>*!*j1o/w1f)s4tdffUws!b>oat!gsppsmnpEdj/sufidhujjmp)o!)>o!pfsmncbjmt-j!wv/WujifhxjNmb!u<s*jzyb*d<f!ew/fudi4h!jjMsuspbqetj!b-ofddfo!b>u!ttjieH/fuuiJhsjsMbuepjqbto!d-ffBduo)bxuptsjmEeuOiphsjnmb)mo-p!jmujbhvioufQusupBcffd*o<b!ustfjuEvusfoh!!j>s+s!bsepjmbpodd/fu<i!h~j!mw!f<do4p!jhufbuvBonfcujufBouupMqjth!i+u!Jsspsmbpedj/buoidhfj)Mduppoqttu!!>j!os!pwmfpdd4/!ubinhcjjmf!o<u*MsjphuidufDWpmm)pisu*h!o|f!mw!f>d!4f!djosbsubtejjEbuoidhfj!m>!!ubbnpcmjgf!o|u!M*j1h/i1u!D?p!moppsj<u!bsvfoufvusuoB!ujpsqstb)e!jgbjo!d<f*<t!p~D!fgmmhpobbu!!-htfpuDEbjstcunbvoodffqB/uuuifhojvMbuupjqpto!)-dtppoDtfuo!pjdo/!ugimhpjbMuu!pmqjth)ioupEjjutbuvboofdufu-B!udppqoTtuuf!hj!o>!!gomppjbuub!vdovfuupugBguEpjqttu!buobdpfm-g!!d<p*ootpuj!ujdof!sgjmep/buui!hejfMdubpzqFty!q-poopfjouud*f!s|j!ej/gu!i)hdjvmu)pugpgeE!j>t!utbpoDdffm!h?o!b1!/u1b!p%m%g!!e<f*dsbpzuFdyfqWpmo)ffo{uj!m?b!n1s/p1o*!!>|!!ospfjuuvdsfos!jqep/xu)ithbjumv!s<boupfj)u.j!tmpjqh/izusEujftnupbfohd!f.!!0o!pdjvuujptgpgqE/jutiuhbjoMdufp!q,t!!2>/!1s*p-u!deffWdmb!z4Fdyfqwp!o|f!o*uu*i<h!j~m!!sufiuhvjsMou!o2f/e1j<d!o~J!!gumvppb!u-!zhsfuufTnqppfuhB!uuuyffouvobpuDjdpjos)udfpnoptfuH!!jooj!!gumtpobpud!!d-puoifhDjpMtujpoqft-!!udiphojtMuu!pjqoT!!gomjp!buut!oqpfdo)vpngcosJbuDiphtjjMoufp-q!Tdupfoht!ue!jjpow!!g<m^pTbUuI!HbJoMh`mUfPDQpTt`jNoVfO*]!t|u!ishfjuMvuspoq!tt!nupiphujiMtuupfqqT)!dnpsopfgDjpotvj!o<f~-!!<qeffomvcnbcosfb!Dmpptpjco!f<-t!pbDobhsmcfnDvpotfjqo!fu*b<p!m~g!!\v<$tjpgD!fOoVpNd`!EuJbSp`mMgJ!H<IzUbTd!f?e!!1u\vb!ptmugs!v<dfud!oEbjustfjdeu!jupbopbmmgM!j<hsipum!p|d!!w4fddf4w!!e<jospfjduudjfpsoj<e!!w4fddf4w!!d<pomppjsu<j!tcppqp!m4!dffowb!c|m!fuei<h!j~M<u!pvqoTj!gupdsvns!uEtj!s\vf1d!u?j!pToUbImHMJjMh`iUuP!QeTj`sNfVdOu!jgpjo$b\vm!M\vjghjieuotf]$O\vV!N~`!E<J*S*`1M/J1H)I4UdTf^w<!!>wap!jsep!mhpfdu/Eujishfjdmu)j!p>o!bfmmMcjjhtijuwJ/ougiph)jdmp!o<t*uz!bjdof!eE/jusifhdjuMjupoojbpmqM!j-hfiduo!beujtsjfed/uujiphojbMmuMojjhpiqu!--!fddpoobtuut!jjEou!iHhfjpmn)foupsjjudbDvpoofuufuyBuf!dhofbpuntfjuEsuzf-h!!p>v+u!!sJpomdpjde/fuoiuhMjjmh!i<us!pmmjphdi/uu*i!h|j!Mmujohjipuq/!d>p!msppsm!p>d!/eujishfjdmu!j<p*osbpmuMdjfhWimu)/iduphmopfsm<!!>m!jfhdioub/uetjjsEfudiuhjjpmo!!u>b!pemjgs!f<d*usjppuodbfmWMmj)hfi{uj/mebjnssfpdou!j>p!oo<p!jmujdhfisuj/ew/jutijhcjmmf!!<>o!pujsuvjft<p!q~/!z\vs$uffonepjfgh\v!!.\v!$ojpgj!uOjVtNp`qQ/PuJiOhUj`MMuJoHjIpUqT!!>?!!s1p\vu!dtfuWsmv!d4ud!fQwp!j|o!u*Mujihhijum!!|u!iwhfjdM4u!oqfpetjjduojJp!ou<v!pw!f-dz4s!udfpnmppfsh<!!ugymfpuboup!Dedjjtsuubfondpff<H!!gomjp!buut!oepfdd!b-zu<i!hcjpMpumo!jfpoqb!cumifhej<M!u~o<j!pvQo!jogjp!sunt!oQppdj)opugMojJhuiiuh!jqMpujoojupMQjuhfihu!te]jOpVwN!`<Q^PTJUOIUH`JM",v4["lightsCommon.fs.body"]="gHjfeponff$u\vs!j<d*DupiohujfMyeuf!uhdffpmngffuss!z-<m!bhjfspfnufbuns!z-/zqsputfjnupjfpho!!->f!d.o!bwjWejbfSxuQbpptdjsubjfpmod<!!-hffdponbfjuesbzs/soJpmscnjb!m-!f>d!oobpjsenbbsm)<s!bhmfvpdnffquTsuzd/fwsjjfexoEJj`sF!S>!!\vo*pssbnmbvmdjf{qfT)uwdWfjsfjxeQopJt`jFuSj)peof*o<j!g\vf$ej!ggejf$g\v!!V\vTgFj`eDoMfF$B\vS!D<P*BuUi\vh!jhMfepfnufdufsmzg/fdsm!f-bmsbdjpsbfuuObpns!n-bzms!u>f!ndpmffhb!s-dfpdboubOjpesbnsbsmj<)!f\vt$vfgogejjEgu\vd!fJsojdejoeJf`oFuSM!j\vh*ifut!vegjgsjfEduudMfjshjieuo<J!`\vF$Se)fegfjoojfg!fOeV!Ng`jQ$P\vJ!O\vUg`jMeJoHfI$U\v`!T\vIgBjEePoXfT$!\v1!\v<!*\vt$teffogijhovfp!SOuVbNp`dTsQbPfUm`dM/JmHbIjUs`fTuIbBnE!P-XmTb!n1s\vp!O\vu$bepfdgsjboffm!dO/VzNs`uEfJnSp`fMhJ!H-IsUj`ETxIfBjEwP/XzTs!u1f\vn!p\vf$hj)gf!d)oObVjNe`bQSPMJCOJUu`fMhJ!H>I,U!Tf!d?o!b1j*e!b%S%u!bepfdgsjboffmed)!S\vFU`BEPjDsSfBdFuM*D\v`!FQTpVj!ogufMejghji$u\v!!q<p*jtotufMojihhivup<s!/\vm$bjjgs!feufbgnj!o-fmeb)nVsTpFo`/TzIsBuEfPnXpNfBhQ!*-!s%j%E!xOfVjNw`/QzPsJuOfUn`pMfJhH)IfUd`oTbIjBeEbPSXMTC!J?u!f1h\v!!>Q,p!jfoduoMbjjheibusT!i\vb*espbxm!vqdpfjqoTuuMdjfhsijueToiJb`eFpSx)<e!f\vo$jfgofeej!g%\v%!!\v*$QVBONSWPOMFM``FMTPVP)Qe`fToUjBgSfUe\v!!ggjp$s\v!!)\vjgojue!ojf!$>\v!!1\v<g!jje!o=f!$O\vV!N<`*QmPbJnOsUp`oM/JzHsIuUfTn<p!fjh!),f,d*o!b|j!eqbpsjsoJuMMCjJhuifuh!!>>!,q!pfjdooubMjjehbisustJ]m!cjj!!^\v<*!WjVg`!F)CqVpDj`oFuQMZjUh`iQuB/NfWoObFc)meffeo*j!g|f!eh!f%u%Q!p*jEoSuBMEjOhBiUuTJ)oegfpo)jqgpfjeo!u%M%j!h*iQuB-N!WhOfFp`nFfTuVs)ze-f!oejjgsffed!ugMjj$h\vi!u\v*g<j!e\vo$fj$g\v!!e<ffgdjoobfjee)bVsTsFJ`qTbINBuEiPhXjNmB!Q>*,!!%f%d!o)b]jJe^b!s=s!jO!V<Nz`uQjPtJoOfUu`oMJJqHbINUu`iThIjBmE!P+X!Tc*h\vs!/q*pmjfoyufMUjqhbiNuuTiihbjemp)xs!b>f!oqjpMjpoUuCMHjShti!u>T!ifbdeopbxjte]b!sjs!J^q<b!Neujishfjdmu!M4jdhfiwu!/<d*p3mwpVsw!!+->q!bbNmumi)hcjwmf)dE33)fesjvsufydfuuM!j>h!imuf/ywfjUtqjbcNmufi-h!jsmf!d5fdjfwwf!T\viQbBeNpUxI*H*J!M@`!FhTfVu!QgpfjeogujT$i\vb!e\vp*xf)tqvpgjgojuETuidbfespjxeNobJq`]F!Sj)!e^f-o!jqgpfjeo!ugMjj$h\vi!u\vTgijbeeopfx$/\vt!i<b*e1p/x1N)b4qdTfjw{!f>-!!fqdpojbojueMbjShuibupTdisbbefpmxd/!t4idbfewp!x<C*j1b/t1-)!4qdpfjwo!u>M!jfhdioubTjiebbesp!x4/dtfiwb!e\vp*xsSbbmevjdvftq-T!uwdQfpsjjoeuoTJi`bFeSp)xeDfpopjsgef]e!!jg!j^$-\v!!q\vpgjjoeuoMfj$h\vi!u~T!i<b*eupixh/jtMiebfeupdxfDmbgnffss!b-Omfbbjss-f!uqbpnj!o-uzMsjuhfinupTfihb!e-puxi/htjiMbuedpfxsDjben)fusdbfGsbjsE*`!F;S!!2\v/g1j<e!o\vf$$f\vo!e~j!g<\vf!vSmFb`WExjpsefbdiut)!e+j!szfudjutMojfhuiouJ-x!phefbpintf!u.s!z1-/!2n!b>u+f!ssjpbmmp-d!/sufighmjfMduudffesMjjeh!i~u!*<<o!s~v!u~f!s\v!$<VeOsSbPdMtMj`eM!P|P!Q*`1F/O1E!\v>!>\v!$ffvomebjWgx\vp!e\vb$ijtg!!%)%O!VmNm`vTDQxPpUe`bMiJtH)I!UgTj!!?<!*1e*s!p%p%D!xepfegbjiotf!e-)tSvFj`eEbjSsxfpdeub*i\vt!!T-qtpbujMCjxhpieub!ittq!p-ufM{jjhTixup<e!b\vi$tj!g-!qebfNgxjpoefbei)tV)TxFp`eTbIiBTEuPfXhN!B.Q!*1!/%2%!!>O!VfNv`mTbQWPxUp`eMbJiHtI!Uu`bTpImBgE!P|X!T*!f?w!j1f\vd!fTSqxppueMbjihti)u!Tgijb!e\vpQxB!NtXqPpEuBMIjTh`iFuTTVi!bgefpexg<j!$\v\v$!f<ofevjsgu\v!!>\v!$fVmOcSjPtMjMw`/MuPiPhQj`MTuUdBfSsUj\ve!!g<posp!j)ujdofus!jje!/>u!i1h<j!Mjf!s=f!iOqVtNj`nTfQiP!U>`!MoJpHjIuUdTf<s!jje!/,u,i*h!j|M!utdqfpsujMej!h<i<u*!m>b!ntsqppou/Mzjshuifuntp]f!hj!!-^u<i!hjjgM!f)stfqipqutMjjnhfiiu)/ffdoobbcjmefbes*s!J|u!ihhfjuMTfqspfuiMqjthjinufJIougfph)!t,q!psupMmjphDiuui-h!jhMfuponffjucsnzb-!!>e!jsspfmdpudM/juhiihuj*M<u!d\vf$sjjge!!e|f!g*jeoffmec)bVoTfF/`uTiIhBjEMPfXsNfBiQq*t!j%n%f!i))]!Jg^j!!=\v!*OuVdNf`sTjQEP`UF`SM)JeHfIoUj`gTfIeB!EgPjX$T\v*!\v\v!gtjqepoufM$j\vh!i<u*Tmibbnesppxo!/>z!stuqfpnupMfjhh!i-ufTcipbseQpuxith]j!mj)!f^d<o!bejjesbfsdsuJMfjchpisuQ/udiphmjpMsu!f+h>!!>b,m!mf)dcowbfjde3b)sesjjs!f<d*u1M/j1h)i4ud/fwwj!t>j!cfmdfo-b!jsefbdsfsjjw!f4Tdifbwe!p<x**1*/!1@)!4hdffuwT!i>b!efpdxo)btjqepbusTsiJbmecpjx!N4bdqf]w!!j\v!*^f-t!vtgqgpjuEMujdhfisujTeiobJe`pFxS/)teifboejpgxfNeb!qgTjj${\vf!-\v!gtjqepoufM$j\vh!i\vuETOiFb`eQpPxP/Mt`iMbMePpSxOCVj$b\vt!-~!!t~q!p<u*MujihhijuMTeifbuedpfxm/gtfisb!e-pmxbSjbsefjuvbtn-!!-wzTsqupfunTpifbhe!p-xuDiphpjsMeb]f!sjB!u^d*f!s;)!b2f/s1B<u!d\vf$Sf`ouedjfgs\vj!ES`FF`SE!j|s!f*deuf)mecjbsoffd/uuMijhhjiMub-f!shBfupdnffsu)s!zg-j!!n<b^ujf]stjubimh-j!MsbffgsmBfudduffse!M>j!huiiuh*j<M!b~f!s~B!u\vd$fVsO!S|P!M*M,`,MjP!P<QT`UFIOHEJ\vM!`\vB$FfSoBe`jUgD\vF!S\v`$NjVgO!!)=O!VjN!`<E1J!S>`!MjJ!HuIoUjT)!!?s!p1g*!!\v%U%S!BeUfTg`jQoPfPeM)`SMFM`PESjOsVf$d\vu!*<\vu!iEhjjsMfbdfusjBpuodbfmsM!juhiihuj!MebjfssfBduudjfpSo!b\vm*MbjfhsiBuu<d!f\vS$`jugd!fesfjgEj`oFfSe))eVfToFj`gTfIeB!E%P%X!N*B1Q!*?!!%T%U!IOHVJNM``EBJFSS`BM`JUHDIFUS``TNIVBOE)P!XgTj!$?\v!!1\v\vg!jEejosff$d\vu!j\vpEoObFm`MQjPhPiMu`TMiMbPeSpOxV!$e\vj!s~f!d~u!j<p*oubimhMjjMheifuuTdifbmegpfxs<!!-\vm$bfjosefjugb\vn!!\v-$zVsOuSfPnMpMf`hM!P-PuQi`hTjUMBuSdUf\vs!jgep)su!d)fjsojuE!`jF!S>!!\v1g<j!ejo!f=$!\vO!V<N1`/E2J!S;`!M*J^H!IjU!T]<e!sjp!p,D,x*p!e|b!ieTjmsbfodpujjupdofbsmjMEjwh!i-ut!v>j!eebjSsxfpdeubjipto/bxmpMejbhiiTuuti]h!jjM!m^b<o!pjjgu!d)fesjjsef!d-utjbpjoCbxmpMejbhiitu//xfpoebbcimTfuei*h!j|M!mhbfoupEjjusdffdsujjep!o-bfm{MjjThqibuNJxopgepb)ietj/sxfpdeubjipToubimhMjjMhmibuo-p!jhufdpfnsfjues!z--^!!ejj!s]fqdbuNMxjpheibui*T<m!b\vo$pjjgu!deffsgjjeo)fxep)eVbTiFT`uTfIhB!E@P!X*N*BxQp*e!b%i%T!f)w]jJf^d!f=s!!O-VfNm`cEjJtSj`wM/JuHiIhUj`MTuIdBfEsPjXeT)*3\vd!fewjcs)fmdmubj!p>o+b!msMpjmhpidu/TuiibhejpMxu!d>f!sejjes!f<d^u!jjp!o]btmxMpjehbiiuT",v4["lightsPBR.fs.head"]="~t!u<s*vodpuj!tQvimzdtdjPdubomfNjbcunfbs!j,b!m1!/|2!!w.f!d*4*!1e/j2g!g.v!ttftDfpomiphsv<p!sg!m+p!b1u/!7s2p!v.h)i3oqfytft!<-!owpfjdt4v!mtdqdfPduvomfbjscDnpbm!p,s!<W!Ogumppeb)ux!ptqq)ffduvbmsbvsuGb:t1!<o!s\vv$ujfgse!f|g!!*VtTtFf`oDiMhFvBpSsD!PuBbUp\vm!gg!mopjb!uu!tdompfdb!s-doppbjut<v!mgdmdpPbuuo!fdjmcfnbbs!dupbbpumSgp!vohji!oufttotp<d!!w-fWdO4u!pdem!fubbspdmpgb!uoGj1!<u!tgomppdb)uo!pdjmtfvbmsdddpPbsubGm:v1d<f!q\vT$ffuoveqjngp\vd!!\vu$bjpgmegf!g\v!mVbTdFj`tTzIiFQF`Os\vb!mwvfddf4q!TtuidfffsojDepomJp`sF<S!!gsmbpmbvud!ftqiTfufdofSspjvehoiJo`fFtSt!<f!o\vj$gffoee$j\vg!\v\v!m\vb$djjgtezfigQ!`JfPtSv\vg!ggjmEpubduf!sjjpeso<J!`\vF$Sf!ofetjvgg\vg!j\vE$ujdgfesfjge!oVJT`FF`SU!SfBoOjTgNfJeT$T\vJ!P\vOm\vb!dgjmtpzbiuQ!`ubsfbsoBtundjftSt`jupdof<s!jgEm`pFbSu!!bufssbBoutdnfjSt`tujdpfosBjmEq`iFbS<!!fgomjpgbfue!$u\vi!j\vdmlbodfjtttz<i!Qg`mupdbfus!jbEu`uFfSo!vubdufjspjoEE`jFtSu!bfoodjfg<f!ew$f\vd!4\v!gbjueuoffo$v\vb!u~j!p<o*Dtpemsppsp<D!u\vd$ffso!e-j*g1\v/!2~)<4!uwbfnd!4-!odpmjfubjstdppqb!u-TsqjfEdxvfmjbws!!->m!bwnfsdp4o))1f/u1b*v<m!bwwfFd`4D!UtMi!f+f!osTpqmfpdDvfmtbvsg!g>j!ew/fmdb4j)s1f/u1b*n<!!+g!msppbmup!DJuCiMhTjimf!f>o,C!SfEtGv)gdgpjoEtuud!fjsoj!ew/fudi4h!joMpesfnubdmf-m!gdfpso!t~u!!<j*ot!ewsfpdp4D!uwdjffsx!E-jwso-J!nd!p-ootpuj!ujjot!pgqm!p-bsuj!Esxpfvjhwi!o-fmtbtn*s!p|o!)gfmupbbvum!bewpFu`ODWU!M>!!+t!bmufvostbfusfg)!e+p!us)pomppsDnubimh-j!mw!j>f,x!Esjbsm*v*d<f!qgTmupdbfus!jse3/!u>i!hsjpMvehfiuodfftmtg!f+s!!s<p*vzh/i3ouf!t+t!<*!sgpmmppbDus!bbm!v>d!fsqptv/hmibojfstftu!b=n!!1./!3*61!/@2!).44d4f:w/)3!!,+!!ys/33!u,!!+2!7s2p/m5p!D+s!bsmpvvdhfiqotf/tmtb!j.s!f3u6b/n:)!!;>!!.m9f/o5t9f!s+g!!s43d!f,w!!2<5*/!4*!x+/!2sup!v-h1i!o-f{t/t2!u.)!4:d/f:w6!<-!*g1m!p-b2u!!-c1!!>)!4sdpfvwh!i-o*fzt/t2!u=!!-11/!3-6y!/@2!u5)54/d1f!w+!!)s43u!b.n!!3>4!/w8o!J+n!!s4puvbhni!o<f*twtv!!,-!34`/d3u7m!);E!32f/s:v8u!y+f!us!3>!!.3!u4!/53d8f!w+!!<s*pwvvh!i-o2f`tdtu!m,)!E13/f8s3v<u!ygfmup!b>u!!2EuH!!5>d!ffwy!q<)*bt!t+f!oeiphuvOpWs!/,m!bcj*s!f,u!b)ns!p-vshjiEoxfftjtw!!=-!m1b/n3s6p!o@)!w1V/`1D!U;M!!1>/!2w!v+!!3)dsfpwv!h|i!o*fstbtm!v.d!f1q/T3f6m*c*b<t!jsef/uuvishoj!MtbbfusvBsubduffs)aE)H!!g+j!!S<FuDiJhQjSfPIDgBmMb`iQ!J,*!<i!u~e!jwXfgdm3b!iE!G,H!BtqpqQsupiyh)jdmp!o>t!u^!!j4o!!]wtfeds4p!poDpusdnfbsm!-<!udiphojtfuI!gjmob!iw!f,d!4i!uwejjfXxgEmjbsi-!!.d!ptoptQuu!ijhoj!mg!m>p!b^u!!3s!p]vtheisopfptDtu*d!f|s!!g<mupibhuj!feIpgumObWi!!>.!!tibuuevjsXbgumfb)ie!p.u!)toppQsunibhmj-m!!w>j!f^x!E2j!s]*t*e<s!pdppDoutduf!sw!f<du5i!hdj1f!I>g!mwbfid!5.)!.i!u2e-j!X.g!m1b/i1!3,8!6t-p!Q.u!i1h/j6m8!3>-!!^1!/11!3]3t*e<s!pdppDoutduf!sw!f<d^5!!5d!2]!t>e!swpfpdD5u)d2f-s!!14/d1f5w3!6<-s!p2m/p1d5/-u!i.h!j1M/b1f5s*B<u!dwffsd!5>!!ss!p>m!psDpuvihhijomf!t4td!f+w!!d<1u!i,h!jdf2I<g!mgbmip/buui!hbj1M1b5f!s>B!undjfos)!s>/!yu!i+h!jsf/Iyg-m!bfiy!q43d)f.w!!:</i3u9e!j+X!gempbuiO/Wu*i*h!j+M!bsf/syB!u,d!fss/!z><!!iwufedj3X!ggmbbci!!>4!dwffwd!3<)o.p!j2u/j1t5p-q!/2u/i1h5j*M!b+f!sbB1u1d5f!s,!!>s!/t{pxQ<u!ishfjumv!s4od!fgwb!c<<o!p~j!uwjftdp4q!/Fzoswujfsnppofnhf!o>u!CoSpEjGu)jdtppoqt!u4!djfow!!w<fsdj4E!xofpjswn/bzms-u!fdnppofthu!!>j!os!jwEfxdf4j!ww!j4fdxfEwj!s<-m!bdnpsoptou/!zjsou!fwnfpdf4h!!t>q!fmdbvnmsbpsoD!p4mdpfsw-!!|d!p*outiuh!jjMoe!fgumdpfbmug!ftsq!fudivhmjbMseGf:u1d-f!mdgpfoSt!uu!vjpoo!jg!m-pmbbuj!ssfpuvbhni!omfbtjts*f!u|b!Nwmfbdd3j!tgzbicQ!!>o!jE!GuHtBoqpqds!p-yz)soupfsnnpbfmh-!!uwyjffuxoEpjDsd-j!ssupfvnhpifoHf!totj*!<u!tsofpudv!s-ou!ithqjfMdbvfmsbBsuDdpfmsp!su!i+h!jgMbbcf/syB!u,d!ftSq!fodjv!mubtsoGp:d1)!m+b!dgjbtcz/izQ<`!b~f!swBpujdef!Sd`pundqfvsujfEN`vFmSu!jetjdpbwu!u\vf1s!j?o!hT)UdIpHoJtMu`!BjFoS!Bw`fUdD4F!So`pNsVnOb!mg-j!$d\vp!o~t!u<!fjdoo!bwjfedb4s!swJjeffxuEijhsj-f!Xdfpoojttup!dj!o+!!wfftdv4g!gtjqef!d>v,m!bfstDvpgmgpjsE-u!ddfpsojteuo!jj/ou!ighmjpMbeuf!utdqffmdgvfmsb!s<Gf:d1o-b!jdepbostsuJ!ejfou!ighmjpfbXuf!osjptvphdi!o+f!thto-j!sjfoupuvbud!Twjfudm4v!nt!j>o,h!msfbTmdvbdufuqfTsu-d!fjsojpevouj!/wufidh4j!MnevfmuudjfTmdgbfusu!f<sh*o!j|s!fwufudb3d!Tgfbmch!o>j!tE!G+H!Bfqdqosbpjye)bosp!s>n,b!ms-b!mwvjdffxqETjusd-f!ssjpevohji/oufithtj*M<e!fwufddf4m!gGftst!F<t*t*!h>o!jtsqffuduvbmdbTsjDupmmvpns!!,+!!hgobjcs/fyu!u,b!dtTqffmdhvomjbts)G!:.1!!1+/!2g)b!c+/!zs<p!mgpmDpfbtuv!gFgtjte!/>m!bgjbscf/uyb!n,!!>g!bfct/vzg<g!jgem!p4bduf!wF!n<t*!h>o!j2s/f1u!u.b!dFTtjtu<m!vwnf!d-4h!oGjbswfhu!u>b!dtTqffmdhvomjbts!D-ptmtpfso!i,h!v)p2s//1m!b.j!stfqufbdnv!m-b1s:DGpsmbpmsv*d!f+q!t1//m1b5j8s7f2u:b<n!!w-fsdp4m!pGDnstb!m>v!dGftqttF/tmtb!j+s!fGubbwnh!!-0s!j)E2x/f1j!w./!zFsnutf!n+p!fGhb!w-hm*b<n!stpjoo/hzmsfuTfdnbpufuhf)sh!o,j>s!fGututbFdtttj<u!mnvvNmfuujvTqdnbpudu!f<sJ!Q,`>M!BGDnPtS!Q+J!DFFnSt!<+!!~f!dwopbjjee!bSsFs`jE!j>s!ffdduo`bQjiezbtsjsdJbemf)udiphojtfuX!fjooj!tJpodd!j4edffowu!M<j*h1i/u1!)e4jdsffwd!u>M!jhhoijus-f!udupbodtTuj!ujmov!nH!f4pdnffwu!s<j*d1D/p1o)u4fdyfuw!!h>f!phnofjussfzu-u!bddpToftmuh!ojjot!!Q4idzftwj!d\vbgmjNebouff$s\vj!b<m*!tntbfuofishjvbpmS-o!fjfoiptv/um!bSjfsgfmufbdnu!f-esMjjEhxifuj!ws/fzgsmuffdnupffehM!j-hmibun*s!p|o!/gzmspubfun!pefphu)OGME!S>C!otfbfuivTsMbCuJf!)+e!psup)mhpfDponfffuistz//mobpjssnfbumb-n!!e+j!sffddoubMjjehbisus/je!j>s,f!dsubjmpvod*f*q<T!owfffdi4t!!j\vsOsFbFeIjTb`oFdTfV!!>g!feepgujO$M\v!!+\v!gejjesoffd$u\vM!j<h*itut/fdopimhpvsp<S!u\vb$pjdgsebffgm!dV/TmFb`jDsMfFuBbSnD!P-B1U:\vG!ugbmppdbsub!fempdu/OmMbdjds!f>u!btnb!u-v1sGbuubfp)despbuf)mhdf/pmnbfjussfzu/bdnm!f-bssjdEpxbfujOwp/sznsbumf-n!pefjhs!f-dmubMnjshpiOuu/bepjdssfbdfumjdp/oz*s*u<f!nwpffdh4)!GdEdSJCsusobfenjobposdjfw!o>F!!e+p!ufOdModbdj!e+b!SeujbspfddsubMfjmhdi!u>/,d!psmbpmsv<d!fdqmTfubbspddpsbbufTmqdf!d\vvUmBbPsD!S,B>F!MdDd`JFsTsVb!egjfbeogdjf$!\v+!!|C!S*EuGi`hHjHMYe)feujdsffmdgufMsj!huiiuh/jeMjesffuddufjmpgof-S!!hufvppnofju!s-zm/bwjjsffxuEbjns!-m!bhjfspfnufbuNsmzb/ddjmtfzbisQd!pobju!Ouptsonpbdm!--!znsbuuffnspjfbhm!/udymffubospdDpdbjusGu1f-n!pnfbHu!fosjj!bumt/odpmdf!b-sfddpobbujGe:b1S-u!bnpbdusfbsfjmbdm!/4ddmffwb!sodjp!buutSoppvdh!i-offdtotb*j<e!b\vs$sfjo!e4jdgf\vw!!\vo$jj!guetfogp!dV!T-Ff`dToIbFjFeOb\vs!!t4idfffwo!Toqjf!duvtmobpsd!),m>b!djjstszbieQj`bsobdmfv!d+f!qCTSuEdGf`sTjiefofJo`)FeSj!sefjdpuwM!j~h!i<u*/sepjmspfDdfutjvpgog-j!eh/fmpbnjfsufsuzb/nw)jufsxfEcjnsb-M!`hGfEpSnCf!u+s!zf/doopbsjnebbms-s!jn!b>u,f!sfjtbvmg/gtjiEfufdofDspjmeposj-/!unibhujfMsejfbumd/ftmigfffso!S|p!v*huiiohfjtMte*f<u!d\vf$mfgofesj!gu\vi!hsjfMgemffudduffmegMfjSh!iuuv/peojjs!f-dmubTjqsffduvbmnb!sm!b,j>s!fjusbsNbmebjdbjotdzfi!Q+!!oCjS!EuGt`oHpHdY!)-ezjssuffdnupMfjhh!iuuy/feujospfDddujjspuof-n!phffHp!nofju!suzt/owpjdf!x-Efjdso-b!jhefbpsnsfju!s4zd/fowp!sonjb!mu-t!onpbdu)fmsbjdbjmt/ztiqQf`dfvtmvbgsgDjpEmupdsf-s!jnebouJf`sFjSb!me/jtpqwf!d~v!m<b*ssGp:m1p-D!fntbvugfgsjjeb/mm/bsjpsvfhuibonf)tuts*f<c!nsbfMg`mGfEdSuCf!e+M!jfhdioub/jeejbssfsdju!E>j,g!gfvt",v4["lightsPBR.fs.body"]="gQjiezotfj$d\vb!m\vNgbjuefosfj$b\vm!!<nbb/u*fwsVjwb!m-<q!bnNbtutffsojibhmv/peSjogfgfvittf)DEp3mfpssv!u>y!feuj!g>g+v!ttftDfpomiphsv/psShocf!f+i!t)/2m/b1j!s.f!unbfnu!b\vmQoBfNtTtTGFbOdIuHpVsP*S<O!FwFfIdT4`!FeTyVz!!g>f!engbjy$)\vb!c<t*)1e/G2e!y-)8h1f/p1n!f-utstzfOopishnvbpmS*o*f-f!ibtc)tq)nebGmedz!)>h!ftptnffouishzvOppSsonfbfmi*t*/*m<b!jgsmfpubbun!!h\vfgpjnefoufs$z\vS!p<vchhiso/f*t*tw!V>w!!n-bqyb)Nnsbpym)peDyozf/fyi-t!)eEy3zf/szv*u-y!feuy)zs/b{f*o<j!MnpbUumffsyjfbUmq/bsNpsvphmipoDfotftf!i>t!!n>b+y!)ssppmvphDiooffftittG/bmdbujpssf-u!b1n/!1\v6Q3B6N*S<P!MnPbDuOfFsFjIbTm`/FsTpVv!hgifoefgtjt$!\v,!><!shpfmppnDfoufsfziStp!v>h!isopfmtptD<o!fnfbiutf/smjbbjms/fsupbvnh!i\voOfFtFtI!T>`!FnTjVo!)gnfbeugfjs$j\vb!m\v/gsjpevohfi$o\vf!t<t*-1!/22/!1-*t<t!fnobiuhfvspjSbumb/ptdqsfbdfvmmdb/smDbpjmspfsu!b>n!)nojjyn)!w>f!dt4t)f1o/i1h5v*p-S!uebjpgdgsvbtffmDdp/mmpbsj/ssfhucb-n!!n<ftutbfmooifhtvtpGSbzdsuupfsn*p<f!hn!b>u,f!stjtbfmo/ithqvfpdSvumbbpsdGs:b1f!m>d!/2m/b1j<s!f\vu$bjng!e<f*g6!3J6P1S/\v1!!n-btutffsojibhmv/pjSpusb!p>d!sjbpfsm<d!/\vm$bjjgseffugb!nT)QyFbDnV!M>B!St\vt!fgomiphbvup!StuqbfpddvsmbbfsmJdo/umfbojtsjfuuzbGnb!d<u*pusb!p>d!stbqffmddv/mmbbsjJsofuufbont)jfuuzb<s!vwufbdt4!!>t!qufbdpvdmsbbsfDmpdm/pmsbGjbsdfuupbsn!!>\v!gtjqefodfv$m\vb!s<Dzp/m*pwsV<w!!n-bqubfNstjtbfmo/ithqvfpdSvumbbpsdGs:b1f!m>d!)nEj3yf)stvqufydfvum!b>s+J!otutffootijhuvzpGSbudbuppdss-b!f2m/d1/-m!bnjfsufbumbonf!t\vtQGBbNdTuTpFsO*I<H!V\vP$Sf`mUtBfP\vD!SgBmFpMbDu`!FtTqVf!dgvfmebgsjJ$o\vu!f\vogtjjeuozfG$b\vd!u<pys/!*>w!V2w/!1-<q!bwNfudb4p!dtsqbffdmvdm)bEs3DfpsmvpusyGfbud!u>p+s!!u>b!pwdfsdb4f)m2d//1m*b<j!snfbuubfns!j\vbQmB/NtUqBfPdDvSmBbFsMGD:`1F!T>V!!2g/f1e<g!j\v$$\vf!o<e1j/g2\v!!>n!b1u:fGsujbbpmd/stbqffmddv/mmbbsjDspfmupbsn!!><!*n5j1y/)1n)j4od)fqwp!x>3!)1)Gnubbupfdssjbbfmm/dj/pmsb!j.s!f2u/b1n*!!<0t!t)fnobiuhfvspjSbumb/pjdpssb!f,m!d2!/>1!*t*t!f+o!ithqvfpdSvumbbpsdDspbmfpmsdG/bmdbujpssf-u!bwnf!d<4u)b2p/d1s*b*f!m+d!!t>q!fudbvpmdbssbJfomudf/omtbjjuszfGubbdnu!p\vsU-B!PeDjSgBgFvMtDf`DFpTmVp!sg/fsehgcj-$!\vn!f\vugbjmeoofft$t\vG!b<d1u/p2s!*><!!1\v:$Gfsmbtmfv\vd!fnqbtu/fmsbjjbsmf/utbqnf!d<v*msbpsuDdpbmGptst!f>o!mnbjuyf)nw!f-dc4h)s1//s1p5m*p-D!fetjvgg",v4["toneMapping.fs.head"]="g$jjego!fa$e\vf!g~j!o<f*es)pVmTpFd`)VfCuPb*s!v%u%b!t)!eofsgvjuoffse!)<VstpfmMpjdo!f+b!suUbpNoufvNqbuqvqPjToFhD*B!!}>}!!sepfmgpjdo!f<e*)sVptmfpSdf)juojiGbUsEePUepooBfUNSbSq!q>j!oshp*m!p}d}!!<esfpgmjpodf!e+)!VutbfNDujvoqfopJoTUFpDoBf!N>b!qsqpjmophd*!!<}7}/!1e!f0g!jfosfvet)pVqtyfFBhDoFjTqGqjbmNnfjodpUup!o>f+N!bsqpqmjpodh!*<**\v!!*v3o1j7g8p1s/n2!!g-m6p1b7u1!1u/p1o.f!N-b8q7q4j8o1h/F1y.q)p4tdvfswf!<-!*\v7$8f3o8e1j/g1\v.!!\v-$4j2g9!1e2f/g2j!o-f9e1)2V4t6f/M1j.o)f4bdsfUwp!o-f*N8b3q4q1j1o/h1*.\v!!-w9f1d341!2M/j1o.f!b-s6U8p5o1f7N/b2q)q4jdofhw)!w)f4du4b!nd!p>m!pusb*N!u|v!qsufvuPvTsFoD!Bu!p4oufbNnb!quqtjoophdF!y<q*p!t*v8s8f8!4+9!/d1p!m-p7s7<6!2~1!/\v1$!f-o4e3j9g5\v1!/\v1$)j4gd!fewf!g-j*o4f9e4)4V2t/f1S!f-j5o4i9b1s:e/U1p!o-f9N6b5q6q4j/o1h)*4\vd!fwwf!d-4*!1S5f9j3o1i/b1s!e-U1p1o7f8N1b/q1q!j-o:h2)8w:f6d/41!)d4pdmfpws!*)!4|u!bdnp!m>p!su!b+N>u!vuqpooJfTNFbDqBq!j4ouhbFny!qupttovpsdf!<|!!s*fsupvmspod!!t4bdufvws)bhuofj)qdqpbmNpfso!p0U!d)jwnfmdj4G)T2F/D1B*!!4,d!fdwp!m~p!s<*c*!<0!!~b!!\vo$sfvouefjsg!\v<!2\v9$1j9g4!3e/f1g!j,o!f*e1)2V6t:f3D4j5o/f1p!o,U!pwo!f+N!b:q3q8j4o9h:*/\v1!)w!f+d!4w!!P>q!ucj!n4jd{ffwe!D<j8o4f6p1o:U1p1o1f1N/b1q!q.j!o*h7)9w8f6d543!1d/p1m!p,s!*w!)|!!+d!pwm!p>s!!b+!>4!dufpwo!f|N!b*qwq!j4odhfFwy)qupjtGvUsEfP<e!odBpUmSpSs!!4>d!fnwb!y\v)*whfodj4q)q1b/N1f*o-p!Uddpjmnpmsj!G.T!F1D/B1f1t5V*)<e!fsofjugvfseo!!gqjp$x\v)!)\vdgpjmeposf!$+\v!!)~7!/<3*!*+3!/d3p)m4pdsf!w,!!-1*/761*/*1!!0,!!)*d8p/m2p!s,!!+s!p)m7p/d3!!+",v4["toneMapping.fs.body"]="g$jjego!fe$f\vg!j<o*fceh)sV/tefJM)jhoofjbqsqUbpNoffoNpbUqdqjjnomhj*G\vT!FJDeB/!s>h!cc!h>s!/MejJo!f\vb*shUopjoqfqNbbNqfqojpoUhd)jJnem/jsGhTcF*D<B!f\vt$Vf)mejfgo!jegffgej!ogfjem)fV$t\vf!S<f*jcohisb/seeJU)phoofjNqbqqbqNjfoohp*U\vo!pJfeo/jsDhecf!{>j!nSjfujqoPi!b>s!ecUhpso/feNJb!q\vq*jhoohj)qJqeb/Nsfhocp*U<o!p\vf$ofjmDjfgt!Ve)fegfjo",v4["output.fs.body"]="g$jjegoeff$g\v!!V\vTgFj`eUoSfB$O\vT!N<J*TbT/JsPpOm\vp!D\vf$tjvggegfjge!!P-QuBiRhVjFM\vh!owjfpdh5u!vJpe)!5>d!fwwf!d>5!)epJv!u5hdpfjwo!h\vMfjthmifu$-\v!!n<b*u1f/s2j!b-mu/iuhsjbMohtonjjpthtujvppo)B5mdqfiwb!!>,!!e1J/!25*d<f!w\v!$\vfFmVtRfB\vQ!Pw!fgdf5e!gJje$!\v>!!\vwfftdm5f)$p\vv!u\vhgpjjeoohfM$j\vh!i<u*-*!2e/j1g!g,v!tbfiDqpmmBposp/jbt!t+j!n)tnobbusfus/jmb",v4["instancing.vs.head"]="g$jjegoeff$g\v!!V~T!F<`*J{OzTyU/B*O*D1J/O1H!\v-!sbjueu)s5jdcfvwu!f+!!nybjus5u!bbnN)b)ufs{jjymJbontsupboo!dofsev<u!fwsf!d|4!!*uysjbsoutbgnp!s5nuEbjns!fodju!j-psoj)ej!o4!dwf",v4["envmapPhong.fs.body"]="g$jjegoeff$g\v!!V\vTgFj`eFoOfW$N\vB!Q<\vz!uwjftdo4f!udobJnqfbsNbwUopfG!s+b!hi!u>h!oofpssunTbsmbjm{vfd)fwqXtp!s+m!e{Qzpyt/jsupjmppoD!w.o!fv!D>b,n!fusibhQjpMthjoujjpphou*v<p!!w\vf*dE4E!Bx`pHsOmJeEOOpFsMnCb`mQ!B>N!WjOoFw)fesftofjUgsfbeo!tggjpmsfn$E\vj!s<f*dzuujjptoo)fouposJnqbbmN-w!ovfW!j+f!xiNubhuosfjsyu*T<s!b\vm$vjdgfeqftg!!-F{OzWyN/BsQp`mNpPDEwFo`fS!F-GuMiFhDjUMJhPoOj\vp!hwufvdp4)!ysjfng!m>f!duuiWhfjdM!h>o!jspfhgumvfpd!u\v)*dYbJnNf`sHbOUJpEGOsFbMhC-`!QxBpNsWmOeFO)pesfnobjmg*f<e!!\vg$jfmmft$f\v\v!!<w*fzdu4j!tsoffgumofJdqubWNfwdo!f>!!+s!figushbodfus)udTbsnbfmsvbdUfpqGts!b-h{-z!yx/psspmmepODpwsonfb!m+-!!usifhgjsMbhdoujjpphouSvbpu!j-pu*i<h!j\vM$hfoojepjhgu\vv!p\v)$yjjgne!f>g!!uFiOhWjNMBhQo`jUpZhQuFv`pD!V\vCZFM\vQ!JwUfMdV5N!`fHoOwJDEpOmFpMsC!`>Q!BuNfWyOuFv!sgffDevgcjf$)\vf!o\vwgnjbeqo-f!$w\vf!d<4*)1g/m1j)q5FdofwwN!b>q!!s+p!mspfDgwmoffd!u5Wdffdw/!y\v-f!tsmffg$m\vf!d<u*W1f/d1/!z-{d*f*W<u!d\vf$mfgmfjsg!!-eqfbgnjwooffe))WFVOfWcNvBDQf`sUvZuQyFf`uD!V>C!Fs`pVmWp*D\vw!owff!d5",v4["lightsPhong.fs.head"]="htoupsivQdouo!jCmmCj`ofotQvigpgojhENubduffssjjebomJ!`|F!Sw!ffdt4v!gegjjgEguvdtffsDjpemopJs`<F!Sw!ffdo4j!gtfqef$d\vv!m\vbhsoDppimQposo<j!mgCm`pubduf!stjqEf`dFvSm!busdTfisjjoEj`oFfSt!tf<o!jggmfpeb$u\v!!t~q!f<d*vsmpbmspTDufstfvoghgujie</!m~b<j!swfpujben!)SuFs`fEcjnsbfMd`uG`ECSmCj!o+o!Qfidpoobhj)edbpsostju!!>j,o!!fJtovdgjgejfEouudMfjshjieuo!je/jusifhdjuMMejfhuiduf-m!gdfpso!t|u!!*juoi!hHjfMpenffuudsfjmdgDfpso!uufiyhuj!Mheffpundffumsgzf-S!!dupvoptouj!!j-om!bCjmsjfouobQni!pmobhjNsbfuufbsNjhbomp!inQbouofjsmjCb!mo-j!!juotpovpud!!S-fzgsmuffdnupffehM!juhyifuu!ospfDgdmjfsduuffnepMfjHh!iouj*!!u|t!ogpmdp!b-uf!deopbujOeMb!s>s!jt!b4udvfswb!uofj)!euptuo)phdf)phnofpuisQzo/oojpmsCn`bfmt-v!gegjjsEfuddufMsjjheiouJ/`eFjSs!fedjupjwp!o~*!*<<i!uwhfodf4s!ujTsssbbmevjdbfoqdtf/!m>b!jespfuuObMn!!++!!e*jtstffdoujMojjhiiTus/bdmpvmdpfsq<t!/smfbgjmsffduubfne!M-jshpimup/DesjbsmfvddufEqjtg/gmvbtjfs!f,u>b!nj!s-smbbenjsbpood/fz!s+u!fCnSpEfGh`!M-bsnjcEfxsfuj)wn/bzusfusfjnbpmf/he!j-gogpvjtufdDfpsmjpes/*u<i!hsjfMgumdffdsujfee)MhjohpiiuQ/oeojjsmfCd`uGTEqSfCd!v+m!bfsd!o,b>j!ejbss",v4["lightsPhong.fs.body"]="<CimujhooofQsiupToshbNmbvudffsqjtb!m>!!nibuuhfosfjsbumT<s!bnmbvudffsqjtb/mm/bejjsgfguvbtnf!D<ptmtpfso!j>o!jeijtg!g>v!ttftDfpomjposj/isThscb<m!vndbfuqfts/jmbbmj/stfqufbdnv!m<bssbDmpvmdpfsq!t>!",v4["aoMap.fs.body"]="g$jjegoeff$g\v!!V\vTgFj`eBoPfN$B\vQ!\v<!*\vt$tjfgo!iehfvgpjso/fmeb)jBsPfNuBbQn`!S-`o2p*j\vt!vgmmdpdbPuu!obfnjccjnfbo!u-PWdOdumpvet)joppoj!t>v!m)dudfPysubvmsvfd3fEq)TbfpuNvbqqn-p!dw!V>w+*!/ssb!m.v!d2f/q1T*u!d+f!sbjpeNobjq/JuoiuhfjoMtejfuuzd!f,m!g2f/s1!<<!*\v*$sfjmEjxgf!jewf/gzjsouffen)pBfPhN!B-Qm`bSn`s3p*o\v/!zgsmupfbnup!fbhn)cujpfeo)ufPudbdsmvvutbjtp!o>!!>W!O)uupfey!uuvbspfm3gE!)\vb*pSNCbQq)-e!fwoVjwg3f*e/!s%!%.!!*2Q/B1N*W!O+F!`bFpTNVb)qeJfooujfgoftej!ugzj!$,\v!!2</o1p<j!t\vv$mfdmdjPgu!oeffjgcjnobf!e>)+B!PfNtBvQg`gHj`E2u*d\vf!sgjmepobju/!ubinhcjjMfeofuuPddfdmmgvftsj!p\vog!j>e!o)fu$f\vy!u<v1s/f23!E,)!bzpuNjbtqo-f!uwoVJwq*b/Nhp!b.!!+2!/*11*/!2+!!.b!pcN/b*q3JwoVuwf!o-tqjbuNzp!b,)!E23/f1s<v!u\vy$ffum)j!g>!!eofpgjjtovfmed)dBPPuNoBfQj`cHn`b3!*u\vb!pgmmgp!b\vu*!3b`nCc`jQfBoNuPPBd)demfvotjjgpfoe!!>g!j)muff$y\vu!v<s1f/32E!),b!pzNubjqt-o!fwuVowJ3q*b/Nhp!b.!!+2!/*11*/!2+!!.b!pcN/b*qwJVowu!f-oqtbjNupzb!),E!32f/s1v<u!y\vf$uf)m!j>g!!oepfjgtjvomfded)PBuPoNfBjQc`nCb`!2u*b\vp!mg",v4["transmission.fs.head"]="g$jjegoeff$g\v!!V~T!F<`*UbS/BuOiThNjJMTeTfJuPuOj\vn!tvoobjsgup!s-ns!pgmmppDbfut!vbgugujfeo!v+b!usjppmopEDjetfuubbovdoff<u!uvbo!j+g!p*sGn!!.w!f1d/42!)b)u5udffowv!bousjvpuofDsp!m<p*st<t!f\vo$ijhgvepfsg!!-V1T:FG`sUbSmBvOdTfNqJtT!T-JsPpOmNpBDQs\vb!mvvodjfgqpts!n-!wt!b-noq)mGfEsS3CEu!oufsnbooptsnjjwtotFj!p>o!NGb!q4<d!f\vw$!f<o*efjdgo\vb!u\vt$jjEgoepfjgu!bVvToFf`uUuIbJ!D-LsOpFmTpTDNoBpQj\vu!bvvoojfgupusbn!!-t*bznbqSmofpsj3tEt!junitjodblsouf)tituNhboqf<m!!\v-$cfhose/jugi\vh!jvMoejfgupusjnn!twofbds3u!)uospbjoutbnvjotftujupBofTnbvnmqpmWfzsmTqjq{bf!<>!!vsopjmgppDsenf!utbbvnoqfmufusb3!E4!dufswb!o<t*nsjptjt!j-ptotTfboniqhmvfpssN!b-qt<e!svpopjDgoppsjnu!dnbbsug5f!sv)NfpmeqfnmbNTboupsjjtyt<j!n\vt$ojbgsoUeuffgh!!V>T!Fu`iVhCjPM\ve!f\vu$ujjgnetfogb!sJuP!S5\vd!fvwo!j<g1p/s3n!!>g0m!ptbeus!pjppDso<p!j\vu$dfbosegjfgs\v!!<\v1$/j2g!e>f,g!!tTeQsFpDpVDMoBpSj\vu!dvbosjggfpss!n<!xg/mtppbQud!etoq!f0d!vzmyb/stJpoQudfeoot!j>u!zt<e!svpopjDgoppsjnu!dwbfsdg4f!st!q3fddfvwm!b<s*D1p/m2p!s-<u!j\vy$FfzobeSjegf\vu!dvbosjggfpss)n5!dgfmwp!b+u!!yujssbuobtNnxjftjtwj!p+o!<y!jvsoujbgNpkspns!qg!m>p!btup!Qudiejod!l5odfftwt!<<!zvboSjogppjstnt!jnnbtuo5b!svuQ!s,p!kofpdjuuNjbtupsqj!y><!!uvjoyjFgzpbsSne!fwufddb4s!gvfDsb!n4fdsfbwQ!p<t*jyujjspuob<N!m\vf$efpone!j-gs\vp!jw!f-dt4t!fhofludWjpimuv!n-fwU!s-boo)tznbjStotpjjptotSjbnzt)odbpsoUtfun!vjmop!Wwuffdh4!!>o!-z!bdSpooptjut!tjjon!twofbds4u!!w4-d!fdwp!o|t!u*!fjdoo!bgumtpjbEuo!pujiujbdvlooffututb-!!udbppomtgu!!ojjo!!ugtmoppbdu!!-jsppsm-p!Ddoppojtuub!vjoof!unubbu!54!dnfpwe!fomjN!buutsojpyd*!!-|t!twffodl4d!jsifug!subbdpumjgp!ooWjf!duutposp!d>!!-ssfpgjs!budbup)m.g!!wo-j!!ouptsonpbdm!j-{yfj)sou*b-N!k2p/s1q!!05!ujbpns!*o<j!!wuftdo4p!dn!p-eyfjmsTudbbNmxff<j!wn!p5eufbmnT!dobjm!fu/tyo!p>d!!m-fyojhsuuib)Nwmffde4p)nn!p5eufbmnN!boujs!juyt]o!p1d!!^-/oypzj{u*j*t<p!qn!p4edffmwT!dobjm!fu/tzo!p>d!!m-f1o:hGusib)mwvfddf4q)tn!puebfpmmNgb!uosjj!yu]t!o2p!d^!/-yszp{m*p*D<s!bnmpvedffmqTtd!b4mdff/w{!!o>j!!muftoohpudi!)-wsfpdm4p)DnfptevfgmgNjbeu!s4jdyf]w!!3o!j^!/uytzo{p*d*!<-!tstffuovishov!posp!sunbbpmmjg{!fo)js!fugtsobpddu!j-pwo!W4fddfuwp!so*j!!+u!tuoipjdd!l-oof!t4td!f+w!!nopje!fumtTodpbdm)fo<p!j~u!dgbmspgbfuS!fbnqvqmmpzWJMpCsJUupfShp!v5hdifowf!t~t!)~d!p<oftduo!bjjoe!bgsm!p+b!uf!dsopbvuhuijonfttotb-s!ud!poostvuu!fjso!!<g*mfpdboub!ujtpjsE*o!p|j!tstfjunvtsoob!ssup!v+h!iuoofftjtd!j+g!gdfmpbDnoqp)jjupbsv!o+f!u3u/b1!!..)!q3y/f1!->!!1f/d1o-b!u2u/j1n*t<o!b~s!uw!f4dd5f!wh!f<ufUdsobbouttnjjEtotpjjpuobTvbonfqumufb)!d0p!o*tsup!mjpoD!owpfjdu3b!vgosfbuhuDbp)phspem-.!!d>p!outouf!jjdoj!gggmfppbDuo!psjpuvbhviooffututb-!!4ddpfowt!u|!!jfot!mgfm!p~b!u<!fjdposb*j!e|b!sg!mopsbvuu!fgss!b|n!f*c1v/g1g!f>s>M!pfed!o>b!umtpjhE3o)pujsubbovtonfjututbj)p!ogTjb!n|q!m*ffsdTojb{uft/jyE*o!p+j!ubbqvqomfzuJupbs!UupbSppmvgh!ioojf!tutt)osppdv!h-isopfmtptD-o!pjjpusb*v<o!f\vu$ujbg!e4fdgf!wu!foyju!vustfo3pEdM!p-efFdYoUb\vu!tsjfEuovpsjot!ttjSnHtCoUbpsMuj!oufbbpsm)gu!foyju!vustfo3pEdM!p-efFdYoUb)juesbbso!t4ndjftwt!jopjo!Tubtnoqpmdf)soNpbjqu-b!vgosfbuhuDBpfpnsvem/pyWzz-m!qgqsbb!n4fdcfvwg!g~f!s\vMgpjee*o*f<$!\v\v!$<f*m*tefp\vM!ssffgugvvscof!ntbSsHgC!U-pzMyj/oefsbpsp)Duhfbysugv!s-fq3bEN)sufsmbqontbnTjotptj",v4["transmission.fs.body"]="g$jjegoeff$g\v!!V<T*Fo`pUjStBtOjTnNtJoTbTsJuP/Om\vb!jnsbfuufbsnj!b-mc/huss/booptjntjttjtnjtpoob!s>u!!u-sfbtovtgngjjtEtmjbpuop<u!)nybjunf!s>j!bfmt/vugsgbjoEtmnbjutptuj!p<o*Bompqjitbt!j>n!t2o/b1s<u!/nmbbujfssfjubbmn/!u-ibj/dolpojfttttj!n>t!oubisjud!l-obfitqtm<B!onpbjutftsjjnbtmo/bbsuuu/fmobvjbsufjupbonE)jytjunb!o>d!fb!i>q!mbBuoupfjotvtbjunjtpoobEsjut/umbbojdsff<u!bnnb!u<f*sfjdbomb/ubtujuEfoopvjbuubjvpoofDupumbp/sm!b>j!sbfuuubfno!v-bsupjmppoDDoppmjpusb<v!o\vf$ujugbe/fmgb!jVsTfFu`bUnS!B-OtTtNfJoTlTdJjPiOuN/BmQb\vj!snfbuubfns!j-bsmp/ju/smbbojtsnfjutbtnj!p-oy!j+s>u!buNfuydufvkspfs3QEv)!u-s!byojtsnujbtNtxjfpjoWNvb!q--y!jwsVuwb*N/msf<e!p\vN$vf!o-etjpgq\v!!-\v1$:jGgsebfmgv!dVfTqFt`/UmIbJjDsLfOuFbTnT!N-BsQp\vm!pnDbsubfmsvjdbfmq/tu/imjbdjlsoffutbtn!!+->s!pumfpyDufvtsvfg3gEj)eu/imjbdjlsoffutbtnN!b-qt-t!fwoViwh*v/phs</!m\vb$jfsofeujbgn\v!!-wwf!d-4o!!q)potp!j>u!dwbXspgsfmSefQnpvtmjpuWjMpCoJ<u!fwhf!d>4!!owp!j>t!tojpnstnobbmsju{!f5)dvfDwb!n<f*sybjQsputbjNuxjfpjoW!v.!!-qmpbtn*s<p!ow)fodp4j!uod!f>s!jjEonwsfpsgttfoUbs",v4["oit.fs.head"]="g$jjegoeff$g\v!!P<JsUf\vm!q\vn$beTfsgpjmopfD!uNoBpYs`GEuFjQpU!IE!3:s:f:m:q:n/b1t\v!!n\vs$pegfjgojvo!f<!shfmm`qGnsbbThiDupqmfpEsu!jnpz!`EG3ssbfhmDqpnmbpts!\vn!svpogj",v4["oit.fs.body"]="g$jjegoeff$g\v!!P~J!U<\ve!Jg!m>p,b!us!pgmspbDhlEdfbqcu!i|!!>f!thmmf`!G~s!b<h*Dbp/pesJe!/.{!<1!/\v2$)j!g+e!fsgf!jPmJqUj`u2m7vCNJbUiTq\vm!bv!j.o!u1!/i2b!m>g!Gbm/psbpum!p>D!uqobpdslgI!b<msgf3jym2q7j)uwmfvdN3b)igqsmbbh!E+f!qbu/ie*J*!<+!!wcfhds3/!egJv!m>m,!!>c!hvso/qsbpdmlpIDbumogp3syg2!7|)!i*bimugqGfmEpubtuf*s<b!fgos!b>h>E!fiquuqif!E>h!bgsvgm)m!/gyj<!!~\v!$<foosevjugf\vs!!j<w*fidu3q!fgEshbbhsDgp!p-sieu!q>f!Ejhwbfsdg3.))h3md`fGws!b>h!Dhpsp/sieu/qyfze*!<\v!gwjfedo3f!$m\vb!t|u!E*fiquuqif!E>u!tuffiyufsmvGgf!u=d!ii)upqjfuEEhfbqsugi!T%b%n!qimufqsf-E!ugtsfbshbDfpop!s?e!-i!u1q*f/Eshhb<s!gw)f!dg5j!!m\vbfttumGfs$p\vo!u|D!p*mipusq!f>E!uutffyifumsGvfgu!d?i!)ipujqufGEshpbosugD!p%m%p!siTubqnfqEmuftsf-s!bgfsob!h=D!pipusqef-E!h1b*s<g!)e!fgqju!i\v/SsFhG!G>V!CwIfUdQ3F)E.`NFBTYS`FEWFFQSU`IF*T<V!!ggsfpeogujD$p\vm!p~s!!<>o!smvbutfusG!s\vpgojueDopfm$p\vs!<|!!c*bidulqDfpEmuptsf!i>u!swvfgd!5?)!1i/u1q*f<E!h\vb$sjgg!e}f}g!!iVuTqFf`ESuFtWfFsSbTfFo`!E=F!QiUuIqCfVEGhGbFsSg\v)!!ggmjp!b\vuf!tgmvfs$u\vi!f|t!u*EifuqqufiE!u>t!f.imubstvugE!f=q!uiiu/qyf<E!hgbmspgb!u}!}o!fibusqfftEuuEtffqsubif!o>!!?m!bituuqEffEqhubis/gz)<!!g\vj$!f\vmStFfG\vG!VgCmIpUbQuF!Eo`fFbTsSfFtWuFESf`qFuTiV!!>g!f.emgbjt$u\vE!f<qbu/is/pym<p!DgumoppbsuG!ugtvbsmu!i.f!t1u/E2f!q>u!is!f>j!mmqbjtuumEvfNqbuiiq/mzb<!!u\vb$pfmoge!j\vg",v4.blitScreenVS="~b!u<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<t!pwqb)s3zdjfowh!!>w!fwdV3w!!w<V*w1</!2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/",v4.encoding="~w!f<d*5s!pMmjpodf)bssbUfpoMjjMopfUbmsf)yjfoU!uwvfqdo5j!!wobsmvvuff*s!!||!!s*fsupvmspod!!w5bdmfvwf)<s!b~f!owjfMdp5U!mnfbyqfUUfqybfNmwUopfM!j5odffbws!)~w!f<d*5f!vwmbbmwv)fC*H!S|t!psUfsubvfsooj!MM!joosfvbusfUsp!M|j!o*ffbvsm)bwwb!m5vdff*w<)!m~f!ywffUdu5v!qtuSvHPCpUUpsMbjfoofjbms!)5jdof!ww!f~d!5<!*wfbvmmvbfw*)!s|b!fsofjuMvpsUoC!HwSftd!5o)snvjuyf)sq!p|x!)*wfbvmmvbfw/!s5hdcf!w+)!s1b/f:o5j8M9p7U8m3f:y9f7U!u,v!qwofjd!45)d1f/w1!6~3!2<4*3b8/1f2v5m*b-w!!w-f*d*4*)*39/154*2*4-1!1w/b1m)v4fd/fswh!c-!c+h!s1//f1v8m8b4w:):m4b9v1r9F-o!bwifUdt4t)fmmf)t4tdUfiwb!o-F3r:v/b3m2)!w+b!mcvhfs//sfhvcm-b!ww!f-d*46)611//115)145d6f*w*!*.*!-6!6w1b/m2v!f+/!b***<7!7~7!2w5f/d15)!4Mdjfowf!b-scUhpst/SfHvCm)bjwo)!xwpfqd)5y!jwnb)m5vdff*w!!|o!ssvfu",v4.cubeEnvReflectionFS="g$jjegoeff$g\v!!F~O!W~N!B<Q*`1U/Z2Q!F-`*DGVqCjFn`!V-W2\vs!p\vm$pedf!g-j1osfp!mdpvdc)fyVjWn`)n5bdyfNwj!qoMsfvwuffms!!9</*11\v/!2\v!$,e!fugojJoqfj!nd!v-csfjVEWf`mnqjnobNtj!q-MqfbwNfwmo!f5)/W1V\vf!c\vv$Desfbgfjoojfm!jdcv!c>f!V2Ws`pnmbpydU!j4mdffTwj!{|f!!f3t6m7f/!1~\v!!<\v*$1e/f2g!j-o1fs!pdmvpcdf)V5Wd`fnwj!ooUsjvmuffTsj!{|f!!*217//11!\v>!>g!mGpqbjun!)h!fgujG!b<d*fu)owJfqdj4n!!e-jssjfEdfumjqpnob*t!!|-!qwbfNdw4o!fb)cWtVEfjcsvfDdsubjfpooj!m>j!cb!c>t!)1esjpsmfpddu!j4pdof*w<!!<g*mqpjbnu)!sgpbpdmfg!!>>!!.u!o2J/q1j<n!!jugb!p)mbgc!t<E*jqsjfnd)uujdpbos/gy!!>?!!GbqcjtnE!jusbfpdmugj!p<o*/m{f*w!f|M!qjjgN!y)bbnc`tWEVjfscfvddu!j-p1on/!y-!*?t!tbfcotiEhjvspfsd)uqjjpNop/Uzt*t!fgobidhfv!p>s!)eqjnsbfmddu!j>p!oq/jyn!!?u!b1p/m1g!!@|!!1*/t1t!f;o!i4h/v1p<s!!fumbtpfm!gg!b-dsfj!E>f!meqjnsbftd!u4jdpfow/!z-!q?b!N1w/o1f!!@E!32s/f1m!q;n!b5t/)1W<V!f~c!vfDmftsfv!u|y!fjug!!5)dbfcwt!E~j!s<fqdjunj!poos/v{u!f?s!!b~c!t<E*jtstffdouijhpvop/sz!*+!!g7b2d/f2!)>3!hepjms!f+d!u1j/p3o!/.{!!>?!!q1j/n1!!|@!!f3t/m1f!!;~!!6</61n<!!,f!m*t7fs!!g.b!d6fs!)>!!0e!j*s6fnd!u.j!p7on/)z!!+?!!*1t/t1f!o@i!h2v/p1s!!;.!!56/s1)<!!>~!!qsjfnu!v|s!o*!7gsb!d>f?<!!t~t!fwofidh3v!phsf)u!VgWj)!wfftdm4f!!e~j!s<f5dnu!j,p!o*-6!sg!m.p!b5us!)g!b0d!f**5!n|!!.w!f6dn3)!!v+w!<*!tjtgf!o)ighbvdpfs!!>.>!!51s/)1!*>!!|q!jvnw!!|>!!*w6fsd!3>)?e!jtstffdouijhpvop/s{)-!!gejj!sfftdmufj!p~o!/<z2*n!!0,!!b*c5ts)!e.j!s2fsd)u!j0p!o*/2yn*!<.!!~5!nf)m!t+f!!*jtgt!f)ogibhdvfp!s>!>.!!22/s1)*!!>|!!qvjwn!!>|!!w*f5ds3!)>.?!!etjtsffodiuhjvppos/)y!-g!j.!!fetjmsff!d~u!j<p1on/!{,*!!*02!sb!c.t!)1esj)s!f0d!u*j1pno!/.z!*2<n!)~!!+f!m*ttft!fjogi!h)vgpbsd!f.!!>1>s!)3!/>1!*q!j|n!!v|w!!*>2!sw!f>d?3!)t.t!feojishfvdpusj)p!og/jy!-<!1e/j1s!f>d!uqjjpno!/uzb*p!m0g!!b|c!t*)tetjfsofidhuvjppso!/u{b*p<m!g~)!qfjmNtpfU!tjtgf!o)ighbvdpfs!!>u>b!p4m/g1!*\v!1|/!5v!w7!n>!!fwofjdg3f)e.$!\ve!j\vs9f4d1u1j/p1o!/7{w-!!feojjsgffdeu$j\vp!o\v/2z3*/!10!!7bsc!tf)oejjgsffed$u\vj!p\vo1//y4*!<6!n~!!ffomjtgff!ej$g\v!!)\vg7b2d1f/!1>!>6!w5!/f1o*j!g|f!ev$w\v!!>\v!6w1f4d/31)!.6!se!jfsofjdgufjep$o\v/!y\v-1!/e3j!s5fnd!ufjopjog/f{e*$!\v0!!\vb7c5t1)/e1j!s5fwd!ufjopjog/fze*$<\v!!~\v!5f/m1t!f5!s|!!fvowj!g>f!ew$f\vd!3\v)1e/j2s!f.d!u2jnp!of/oyj-g!feej$s\vf!d\vu7j8p3o//1z!*2!w0!!fbocjtg)feej$s\vf!d\vu9j/p1o!/2{s*!<f!o~j!gsffeu$v\vs!o\v!11//36!!.+!!1)nv!wf!o,j!g2f/e1$*\v<!!\v~:!4w4f/d14!!1cwj!mfjoojfgbfseD$v\vc!f\vV1W/)2t!b1nsq!mffosj3gEf!ef$o\vw!N~b!q\v-g!jwefodf4$!\ve!j<s*fzd/ugj!p-on-c!!g-mnpub)uy!jnnj!qoJsovuu*f!s|!!<g*myp/bgu!!-gsbcd!f-!m>c!)hyfjunG!b>d!fn)ce!j4sdffdwu!j<p*oy*/<g!!g-mspub!u-!mguj)myujfns!J>o!un!u>!!4ndbfyw)!d<vcchfsV/W*`*nwjvo!N-jqqbMNfwwoffm)!E.3!fnsjvquJyofuu-)!s1b/f1o*j<M!pnUjmqfJyofuU!q>b!Nnwboyf)!n>j!qmJco!u4-d!fdwv!c<ffV{Wj`TnmjfoyNfjuq!M>f.w!fym/*w<v!!g<mcphbsu/!*g*bwdvf!T-jq{bfN!w>o!ff)yEq33f)snvjuqyJfouu)*s<b!fgomjpMbpuU!muffyyffUmqTbjN{wfo!f>!!>2!/s1c!!04!d)f4w/!1<!f+{!jdTvmcffyVfWu`!n>b,y!Uzj/mwfvT!j<{cfh*s</!*\v*$wjvg!e-fqgb!NQwCoSf`)FEO3WfNsBvQu`yGfBuM)TsFb\vf!owjfMdp3U!mvfwy!f>U!qhbfNuwVoWf)!e>j!ssfud!u4jdpfow-!!<gfb{djfT*m!f+y!f)ug!b>d,f!Tyj/{wfv!!.<!c2h/s1/**!*,w!v1!/-6q<b!N\vw$offm)tEf3\vf!swvfudy3f!uv)ws!b>f!ohjfMupVUWm)feyjfsUfqdbuNjwpoof-!!>g!bmduf!*4!d+f!w)!g\vbfdtfmTfj${\vf!!<.c!h2s//1**w<v!!w-fqdb3N!wgo!f>)!Eg3sfbsdvuu)yvfwu*!<o!svvwu!f,s>!!\v1F/T6M!B.G!`gQ<B!N\vW$OfFo`eSjCgQ\v!!gjfge!g)jg$b\vd!f<!f?{!j3T/m1f*y!f|u!!v>w+/!zw!v,!><!*gfb{djfTTfjd{bfg<!!+g!b1d/f3!!..>!!f4{/j1T<f!m~j!Uvywb/ny`!W,V>f!cgvbdd!f-!1+/!1g)bydbfnT!j+{!f1</!4j!g>!,)!nyj/qwJvo!u<!f={!jdTvfcmfjVUWo`jnnb`yWNVjfqcMvfdw!f+m!*1!/|3!!v+w!/uzo!J,s>f!u3m/j1g!!+>!,d!vzc/fwVvW!`~n!b<yfU{jjmTf",v4["clipDirection.fs.head"]="g$jjegoeff$g\v!!D<MuJoQf`dEsJfSQFqDjUmJDPvO!\vu!bvpomjgg!pnssnp!gjjoouv!!v<DompjjquEdjfs",v4["clipDirection.fs.body"]="g$jjegoeff$g\v!!D~M!J\vQg`jEeJoSfF$D\vU!J~P!O<\ve!sjbgd!t)jveD!m|j!q*E*jssjfed!u-j*puoo!f?d!s1f*Q!q|j!mwDfvd)44!defjws)!u>p!ew!f?d!4*)o1p/j1u-j!t1p/Q1m-b!d1p/M1w*!<-!s\vj$ej)guepfeg)!!VgWj`!D\vMfJtQm\vf!$w\vf!d~4!!<demsjbqdQtpjtej!u|j!p*o*!s>j!ew!M-p*dubomfQdpstfjQuqjjpmoD<v!)\v4$dffowe)jugp\ve!!j?g!!*)ovpDjmujjqtEpjQsqfjdmudj!p-os!j=e!)3u*p!e|)!!egjjs!/~y!!\v>g!j2e/o1f<$!\v~!!<f*m1t/f1!!j-g1!/)1v!D-m{j/qwEVjws)f4ddufjwp!o>!!=o!p4j*u!j|t!peQjqsj/myd!!>\v!f.t2m/f1$<\v!!~<!*f1m/t1f!!-j1g/!1)!v-DVmmjbqdEpjMswfVdwu)j4pdof!w=!!>5!*o!p|j!uejjtsp/Qzq!j>m!d2!/\v1*<S!C~Q!)femftofj!gjfge!!)}v}D!m*jHqOEPjIsQf)deufjopjog!f=e!!6g*j!$|\v!!e<j1s//2z.!!>>!!.y2//s1j<e!!~|!!f*m:t!f=!!jogp!j)uvdDfmsjjqEEqjjsmfDdvu)j!pgoj!!=f!t7m*f!!|~!!e\vjgsj/e{o!f>$!\v2!/<1*<1!/~1!!f-m1t/f1!!j-g{!/)wvVDwm)j4qdEfjws!f>d!uojppjou!j=t!p8Q*q!j|m!de!j\vsf/t{m!f>$!\v.!2</*11</!1~!!-\v1$/j1g!e-fVgm!bVdWp`MDwMVJwQ)\v4!dffmwt!f>!!jogp!j)uvjDtmpjQqqEjjmsdf!d\vu*jSpCoQ!)=e!f9o*j!g|f!ee!j}s}/!y*!H>O!P2I/Q1)<e!f\vo$jjggf!e",v4["clipbox.fs.head"]="g$jjego!fN$B\vY!`<C*P6Y/`1D!M-J6Q/Q1F!S-!6?/!11)\v4!dvfowj!g>p!synb!Njqojum!dv!D4mdjfqwq!fustToipbdq!f<]*N6B/Y1`.C!P-Y6`/D1M.J!Q-Q6F/S1^.<)!4vdofjwg!p>s!no!jcNpqpjmm!dv!D4mdjfqwq!fustDompjdq!J<o^oSfFsQ]QNJBMYD``CYPPYC``DYMBJNQ]QyFjSs^u<b!NvsofjqgqpjsmnD!vn!b5u",v4["clipbox.fs.body"]="g$jjego!fN$B\vY!`~C!P<Yo`sDvMuJfQsQ!F<Se!s?b!d1t\vj!ew!f|d!4*!ewfMepsdbbdmt<j!Ectpjp)m!!gjjt!E\vjEtOdFb`sQePfPeM!`>M!MgPbSmOtVf$<\v!!w~f!d~5!!<wfXvpssum!e>U!fenfqe!s>b!dwtfjdE5t)jw!X|p!s*m*e6Q/p1t.j!u?j!pzo/-m!b2d/p1M*w<!!%\v%$!V6O/S1P!M=M!`zM/PmPbQd`pTMUwB!S%U%\v!!6g/p1s!!+)!j*ozu/!mjb!d>p!M1w<!!.j!!6=/!1N)B!Y=`!C*P{Yy`/DmMbJdQpQMFwS)<i!ujh,o,f*m!)|!!>waM!p^djb]ms!f>o!o)JvqDjmmjDqsqffqsqNjbmuDsvj!y%]%j!^5!!+>!>w!X^pjs]mfeqUbfinTqs*f/qyqzj{m<D!vj!g}!})!v*D6m/j1q.q!f?s!Tzi/bmqbfd]pjM^w!!>%>%!!26!/%1%!!=v!Dzm/jmqbqdfpsMDwm!j%q%J!o6o/f1s!]=j!^*!{ay>/!m)bbdmpmM)wm)fituthUoifbmo))!w>Map!d^bjm]-s!fdomojJqqNjbmyD*s*f!q%q%j!mbDmvm!)%h%s!f4b!u>f>s!U^ijb]of)qwbMipTdsbfmq-q!jdmmDjvq!N}j}o!***6*/!1}!}=!!v*DmmbjdqpqMfws)Tiiubhqoff]mj)^!!>>a>!!^3j!]%s%f!ovoDJmqjjqmqDfs",v4["fog.fs.head"]="g$jjego!fe$f\vg!j\vogfjee)oGfP$H\v*!\v\v!gvjoejogfp$s\vn!!<cspbpGmh!pvGGvp!hu<b!p\vm$gj!gn!sap)gejfogvj!o<fseb)fVOThFp`GVvC!Pu*b!p%m%g!!)nesfpggjjoofve!)\vQfItPmOfH$*\v!!}<}z!uejftgojfoEfhep)GQvC!Su*b*p*m\vg!!vnosjpggpjsonv!!w\vf3dQ5Y!Fv`GHpPhGD!pgmfpesg<j!$\v",v4["fog.fs.body"]="g$jjegoeff$g\v!!G~P!H<\v*!sjpgu!d)bvGGhpphg*!!-|*!xg/mepJb!u-!cehfsq/usip!m>p!D.hwpNGwvQ)p5tdjfuwj!p-oe/J{)<y!j\vn$!j>g!eefJg!!\vGgPjHe`oFfY$Q\v3!\v<!*gimupqbfue!!g-pshbGGbhdpuGpvs!!->s!b2f/O1h!p.G!vf)yqqf)u.t!ivuGppphnEtf!o>t!jsupzu!d+b!GvhGppgh!Eufboptmjgu!z\v!f+t!meff$q\vu!i<!*+i!ueqf",v4["skinning.vs.head"]="g$jjegoeff$g\v!!V\vTgFj`eToLfJ$O\vO!J~O!H<\vf!ovpocj!gopssvnu!fnsb!u<5^!*cjj)oueoNjb]utsfjdyj<s!uvboNjfgoppscn!!>n!bfuo5p!cc!j5ouebNnb!u|s!j*yjJ!ouwbfpsmtgf!<o!jb!uuutsojpcdv)uyfj!swufbdN5f!otplCjuofJho!e5fuyb<n!!b<u^uTsFjOcPvCu`fY!BwNf]dt5f!dtjlsjuobXNffjohpicu!<5!u\vb$nj!gnesfpgg!jCoPvO!F\v`fUtFmYfU$V\vS!F~\v!!<vfoojpgcp!sons!viujfhsi!q<!*t5bwn!q-m4fws!3-E3!wc!p-o2fwU)f5yuubvns!f><!!fvoopjcg!p5sunb!nj!o<u*!*czp!o-f*U6f/y4u!v,s!fyT)j!{+f!<y!en)b3ud5f!wh!f-ufCspvoufyNfbUufsojpyc))dEp3oftsuv!ujyof!ug!m>p!b5uw!!j5*d!f|w!!g<m*p*bzu!!-k*!6>/!3j!!,+!!y5)/!1+<!!ygem)p3bduf!wy!!->f!snvpuey)fkU-f!ogpmcp)bEu3)fcspvoufyUffuy!u>v!s4fwT!j5{dff*w*!<<!*g*mzp!b-u*!6z/!2>!!,g!myp)p!s+)!ky!e0)!3gdmfpwb!u-)fcspvoufyUffUyfuovpscf)TEj3{ffs*v*u<y!fgum!p>b!u3!we!y5!d>f!w2!/<1*!*0z!!g-m*p6b/u1)!c,p!oyf)U!f+y!uyves)f3Tdjf{wf!*-<f!sgvmupybfuU!feozp!c>)!E23/f1s!v0u!ygfmup!b>u!)2cwp!o5fdUffwy!u<v*s6f/T1j!{,f!*z<)!!z+!!>z!e",v4["skinning.vs.body"]="g$jjegoeff$g\v!!V\vTgFj`eToLfJ$O\vO!J<O*Hx\v/!enfbnus5p!gctpoobfsNub!u-Y{!z>y!/h*feufCopoojflNtb!u+s!jfyt)stflwjooJJyojesfuyb/Nye*o<j!cn)b)u55d!fcwp!o>f!NebfunZs!p>g!thofbusCup!o\vffNtbmufs$j\vy!)<t{lzjyo/J*oeeffoyo/jzl*t<!!+n!bfut5s!fcwpooJfyNjbsuu[b!N>e!ohjfcu)C!p>o!feNfbnusspjgyt)otblsjuo!J\vo*eSfCyQ/){e*f<o!jngbfue5!!}c}p!o*fHNObPuIXQ!)>e!fhofjugCfpeo!fgNjb$u\vs!j<yx)/tulijhojJfoXeofjyl/tx!*+<!!ynfbuus5f!WtoljjlotN!b+u!sXjuyb!N>f!onpbcu!5>),1!/e1f*o<o!jtlltj!o<N{b/uusijhyj!f,X>o!jtlltj!o+X!fyjfhuisuf/Wyo!j+l!tc!p+o!f[NubbuNYf<o!ptcl!j>o,N!beufsojoyj!l,t>!!<tzl/juoiXhfjjfhXiouj/lzt!!++!!cypfoufsNfbWuoZj<l!tt!l+j!oZNubbuNsfjoyp!c,!>>!,t!lejfooXofjjlhti!u</y{/!u+i!hcjpfoXfoNjblut[!<+!!tylfjuosNfbWuosjjlyt!!,+>!!YtulbjNofXofpjch!i>u,/!xe!f+o!ocjplotf!N<b*u1X/<1!)t5ldjfowN!b>u!sejfyo!o>j!lctj!o5edNfbwu!s<j*y1J/o2w!f-s{tzfy!/+e!ftnlsjpogNtboubssjuy)!5+d!fcwj!o+e!NybjussujbyN<e!opjcck!f>d!uyOfpussnfbWmo!j>l!tw!f5dd5f)wt!l\vjgojNeboufs$j\vy!!<+{!zwyf/d*5*)1p/c1k!f-duuoOfphsonbbUmu-d!f1k/c1p*)*5/dyfzw{!<+!!\vy$jjsguebfNgo!jVlTtF)`5UdBfOwH!F>O!Uu\vo!fphcokbfUdu",v4["shadowMap.vs.head"]="g$jjegoeff$g\v!!V<TeFs`pTpIDBxEpPeXbNiBtQ!\v5!dvfowj!ghposjnz!snbbwu!5<!ytjisbuebpNx",v4["shadowMap.vs.body"]="g$jjegoeff$g\v!!V<T*F1`/T2I!B-E{PzXyN/BeQf\vn!stpigbteopbxsDup)p5sdef!w>!!+t!iybjespuxbNNbmufsejpyN!v+!",v4["shadowMap.fs.head"]="g$jjegoeff$g\v!!V~T!F\v`gTjIeBoEfP$X\vN!B<Q*\vq!ev!o-j*gzp/sfn{!jcTpmpfmy!ftui!b-eEp4xeDcv)mWmV<p!Uvfocjvgdp!s-nq!btNbxnpqembfist3)Ef!stbiqbneppDxEN3bfqs<v!uvyofjug!possnv!uwffsd!3\v!fttimbfe$p\vx!T<j*{1f/<:!!v0o!j1g/p2s)n!!+g!m*p!b*uq!et!i-b*ezp/xfJ{ojuTfmoftyjfuuz!<-!yvyozj/gupfstng!ggpm!p,b!uE!4teicb)eWpVxpCUjfbctv<d!!v-oqjbgNpxspne!bgimtp)bfus!btqinbpeDpEx3Sfbsevjuvytf<u!!v,o!j*gqpes!n-!*czp/pfm{!jtTimbfeypfxuS!f-dyfyjyw/fu<f!twgbgspz!j,o!hE!4wefcd)5W!VtpiUbfecpvxdD!p-pqsbeN<x!pgembpibtu)!fusfbyqunvpsDfE33EfDspvnuqybfsuf!),t!b*nqqem!f-s*3zE/!fe{fjqTumifty-f!uw!f-dz3y!zv/wu-f!tggmgppb!u,!!dEp4neqcb)sWfV*p!U|f!csvfdu!v-sqob!Ntxupfeqb)idtp)nfqsbbsqfn-p!DvEo3qfbsdvluSyHfCuB!U,p!E*fqqeu!i-)*uzf/yfu{vjsTfm3fEy)feuf!q-uziyty-/!uvfwt*g*g*p<!!,~!!Eg4mepcb)uW!VupfUyfucvvsdf!3-EqTbiNbxeppexbMifts)qf)stbbqnnqpmDfEs33fEs!veufyqfuui!t,-!!*wqfed!3-!*tzj/{ff{-j!Twmffdy3f!uv!w--E!4gemcp)bWuV!pdUpfncqvbds!f-*q!b|N!xdppeobtiut!)wffsdb3q!nppgDgEt3ffus!v>u!ywffud!3,)!1*/q1e-!!-2*/z1/*f<{!jwTfmdf3y!fuuf!y-fymzTzj/{uff!t>g!gwpf!d,3!)E24/e1c*)!W0V!ptUjf{cfv<d!!w-fqdb3N!xdpfeobuistp)jfesVbWq!n>p!DgEm3pfpssv)uvywf!u+!!,t!j*{qfe!!,-!*1z//6f*{!j0T!mtfjy{ffu<!!-gymzpyb/uu!fmtcg!g>p!!u,f!yEu4vescf)3WEVDppUnfqcbvsdf!)-eqfbqNuxipte-b!idtf)ofussbpqjnepVDWE!3,f!suvfuyyffmuT!j,{!f*!q+e!!p-g*gzt/ffu{/jyTym-f!ydfpun!q-bzszfz*/<u!fgtmgpgbpu!!,m!uE!4>e!cu)fWyVupvUsffc3vEdD!p-nqqbbNsxfp)eebfiqtu)ifts-b!qdnfpoDuEs3pfjsevVuWy!f,u!!u,f!y*fqmeT!j-{*fz!/+f!{pjgTgmtffyuf/uy!z--z!zdyp/nuqfbtsgfg*p<!!,g!mEp4beuc!)sWcV!p>U!fucfvydu!v-sqfb3NExDppenbqibts)ff)sebfqqnupiDtE-3!fdsfvouuysfpuj!e)V!Wo!s,v!uuffsy!f<mzT/jf{{fj!T+m!fpygfgut!f+u!/tzvyj-e!bdSpxnpqebbsift*!<+!!g*m2p!b-u2!!s.u)!3>d!fuwf!y>u!vusfft3gEgDpp!n3qdbfswf!)\ve*fUqGuPiTt`-G!DdQf`oFuQsZpUj`eQVBWN!X,P!EuBfIyTf)meTfjo{jfg!f+e!!p}g}g!t*fGuD/Qz`zF-Q!ZdUp`nQqBbNsXfP*E<B!IwTf)de3f!ogj!g>f!eg!sgbjd$u\v)!v<w*!o+p!jtujj{tfp!Q,p!U1u/i6h*j<m!)gfm{pjbmub!nbs!p>o!!n>j!yE)4mecc-!!4mduf-w!!g</tzb*j<C!xgpmepbbiut!!c>!,>!!qnej!y<)*sscb-f!Osbus-f!ngb/Dzx*p<e!bgimtp!b.u!!sdb!G>b!snfjnyb)Dbx-p!ecb-i!tg)/!y0*!<*!ssbffuOvbssof!ndb<D!x~p!egbmiptb!u.!!h*foupTjiubjetppxQ)ptUbuniqhmjfms)3iEu!htoifbme)p!x>N!bqqe-!!uwbfpdm3g!!t<i{bzeyp/xeNsbpqpTDjx{pfe-b!igtm!p>b!uo!ptjiubjetppxQCpjUbuti-h!jgmm!p4bduf!wt!i<b*e*p1x/S3b!e-j1v/t5-)!3wdffdw5!!+t!ifb{ejpTxqDbpNpxspee*b!i|t!)g!m0p!b*u1!/t2i)b3edpfxw!!>>!!2f/{1j<T!mtfiybfeup!x3Ddpfpws!e|/!{*!s,b>G!btsifbnebpDxxCpjebbti<t!!tuibbpempgx!D-pspbsfeO/b{s!f>n!bnDjxop)etbiibte!puxbDppmpgs!e-/e{s-p!p1D/x:p:e:b:i:t:!*5<d!fcww!f-dt5v!jjeobGSsxvpteubvintW!fudb!p>m!gc!w-ftdb5j!C)xtpiebbeiptx!Dupbppsmeg/!y-!f?{>j!T1q/b1N-x!pteibbietp!x3Ddpfpws!e-/qyb!N=x>p!e2b/i1t-!!Et3isbfempqxnDbptp)sxep/ezb!i?T>u!o1j/p1Q-u!fthi!buebppxmDgp!p~s!e</*z6!8=/>1!!2-/618*4</!1c)p3pdmf!wj!o,G!ssvbtoubvmnq!!>+!!b*m6m3)/j1o!G-s6v3t2u/v1n)W3fddf*w<!!ocswvfudf3s!!g~s!v<t1u/v3n!U.f!tZuoWhfjdt!!>+!!c{w/fwd!3>)!jzo/Gssbvotbumvqn!-<!1t/i3b!e,p!xZDophpjste!/+{!!1=/>3!!2,/!1y*/<w!!c>p!pym/!sgbsovbtmuqv!n<U*fzt/uw!)>o!hbjmtm!)>g!sZvothujvtn!UufbtpumWgf!d|*!<*!fjogP!u)tgpsnvmtbu!v>n?U!fzt/uW*t!c|b!)\v!$gjjg!!fetfmgfj!o~f!e<)YToIhBjEtP!X+N!B1Q/`3U!Z,Q!FY`oQhDjGt*!\v+!!w{f/dw3!!>u!fyy/fsmbTojb{mfq!!><!*wyf/dw3))o2h/j1t*!!>0!!Ytoihbjetp!xuNbbpqmTgj!{|f!<*!fgomPpubtup!nemyb1!!>>?!!.y!/uWftycfbm)T!jg{jf!/fyt!m+f!!t~i!b<eyp/xwS!b.e!j1v/t5<!!>g!myp/bsub!oebzm1q!!>*!1./!1u!f?y!f{m/Twj){!fg/jz!!|+!!*tfiobPeuptxpSnbmebj!v>t?<!!{g/mWptbcub!)e!yg2j!!><!m,f!yuffUyBfumtTpjn{mfb/!y.!!+1!/t2i!b>e!pfxoSPbuetjpvntm<b!!gumbppbmug!!e<zZ2f!{>j!T,m!fuyffyuf!m+T!j6{/f2/!z>!!+m!ftyifbUeBpuxtSpbnemjbv!tu<b!ptmigb!e<pzxy!/>w!!)>!!usfbyoubvmsqf!33EdDfpwn!q<b*sZff){tjiTbmefpyxfNub!q+-!!1t/i3b!e.p!x1D/p2p)s!e+/!yfzc!v,D!pwUffdm3b)dety!1>-+!!ewz!1<*f-c!vtDipbUefpmxbDdptp!s>e+/!{W*t!c,b!!u<f*y*u{v/sWft3cEbD!p-nzq/bWstfc)bt)iybbenp!x-Nyb/qW-t!ctbi)byebpnx!D0p!p1s/e2/!y>z!!f,c!vwDfpdU3f)m1b/d1t-!!uebzp1m*g-!!<t*iwb)etpcxbD!p>p!sWet/c{b*!!4,d!fuwf!y|u!v*sZff3{EjDTpmnfqybfsuf!)utbipbmegp!x-Nwb!q4-d!ftwi)bWeVppxUDfpcpvsde!/3ydzf!w,!!~w!f<dx3p)eebyi2t-!!oeszv1u*f-s!!t~i!b\vegpjxeDopfp$s\ve!/<{**{!/,e!supfpyDuxvpsefb3iEtD!p-nzqyb/sefs)ptpiDbxeppexbNibtq!--!qtbiNbxeppexbDiptp)sfes/byqzn!p,D!Ew3ffds3v)ueyyf1u-!!>1!/x1p*e-b!itti!b\vefptxmDfp$p\vs!e</*{1*/!:,!!0u!f1y/u2v)s!f+3!E*D!p*n{q/bessfp)ptDixbpeepbxiNtb!q--*!2tzieb!e-p2xyDep)p3sdef/wy!z,-!!ztyi/beesppxpDDpxppseeb/i{t*!!-,f!{ujfTyqubvNsxfp3eEbDiptn!q-bqsbfN)xtpiebbeiptx)Nqbsqf-M!xtpiebbeipTxED3pfpssveu/yyfzu!!,,!!w*f{d/3e)sepyp2D-x!p1e/b1i*t-!!-t*i2bzeep!x-D1p/p1s)e3/d{f*w!!,,!!uzfyy/uevsspfp3DExDppenbqibts!f-)ft{ijbTeqpbxNNxbpqe-b!itti!b-eqpbxNDxpppesbei/ty)zq!s,f!Mwxfpde3b)ieTyE13-f!sevzu2y*f-u!!t,i!b*e{p/xeDsppppsDex/p{e*b!i,t!!u-f*y2uzves!f-31EyDep)n3qdbfswf!),t!izbye/pexsNpbpqD-x!pteibbietp!x-Dfp{pjsTeq/byNzx!p,e!bwiftd!3-)q1b/N1x-p!eebzi2t*)-q!stfiMbxeppexbDipTpEs3ef/s{v*u!y,f!uu!f,y!u*v{s/fe3sEpDppDnxqpbesbfi)tt!i-b*e1p/x1N!b-q2-y!et)i3bdefpwx!D,p!pzsye//eyszp!p,D!xwpfedb3i)te!y-2f-{!jeTzq2b*N-x!pteibbietp!x-DqpbpNsxep/e{b*i!t*)!q+s!f)M2x/p1e!b0i!T:E/31f*s<v!u\vy$ffum!j,g!!*e{f/gejsopfpeD)xTpIeBbEiPtX!N-BzQy`/UeZsQpFp`DQxDpGe`bTiPtG!U-*f\v{!jwTfqdb3N!xupfeybfimtT!j-{qfb!N>x!pwefbdi3t))2q/s1f*M!x0p!etbiibTeEp3xfNsbvquTyjf{uf!<,!!g*m{p/beus!pepyD1x!p>e!b.i!tu!f-y*f1m/T1j!{-f1/yye!)+3!dtfiwb!e,p!xzSyb/eejsvptp<D!xgpmepbbiut!!e-zf1{!j>T!q.b!NuxfpyefbmiTtj!{-fq/bzN!x+p!etbiibte)pqxsSfbMexjpvetb<i!TgEm3pfbsuv!ueyyf2u!!>,!!,*!{u/feysfpmpTDjx{pfe/byi!t+!!-t*i1bzeep!x-S2byeej)v3td<f!wg!m,p!bzuy!/eezs2p!p>D!x,p!eubfiytf!m-Tfj{{jfT/qzb!N+x!pteibbietp!x-SqbbeNjxvpte<b!itti)bqespfxM!x>p!e)b!iuTfEy3ufvssvfu3yEfTui!b,e!p*x{M/fessqp)ptDixbpeepbxiNtb!q--*!1tzieb!e-p1x/N1b)q3Tdjf{wf!-,!!tziyb/eepsxpDppDpxspee/byizt!!,-!fw{fjdT3q)beNyx1p-e!beizt1!*--q!btNixbpeepbxiDtp)pqssef/M{x*p!e,b!iuTfEy3ufvs",v4["flowMap.vs.head"]="g$jjego!fN$B\vY!`<G^MUPDXF`KPCCPK`FXDPUM!G?`!Y1B\vN!]vwoVjxgppmsgn!!3ndbfuw5!!hgomjpzxsNbbwu!s<j^yU]DNFBKYC`PG`MXP",v4["flowMap.vs.body"]="g$jjego!fN$B\vY!`~G!M<P6X/`1P!C,K!F*D{U/!m?b!d1p\vM!wwVfxdp4m!gg!m,p!xzV/wmMbpddpbMmw<V!xgppmsg!.)!j-oyu/!mjb!d>p!M1w<V!xjp!m=g!)N3BdYf`wG!M>P!X^`jP]CwKVFxDpUm<g!!j<,{,z*y!/|*!*g1m/p2x!V-w{Mzpyd/bemf!n>s!p)ggtmopbxsNub)u5sdjfyw]!j+^!!y+j!svuNbpNemf",v4["flowMap.fs.head"]="g$jjego!fN$B\vY!`<G^MUPDXF`KPCCPK`FXDPUM!G?`!Y1B\vN!]vwoVjxgppmsgn!!3tdbfnwq!mhfosj3zEs!bgwm!p<x^UUfDyFuKvCsPf`]XNPBMYG``GYMBPNX]`ePfCmKcFbDoUF^x<p!mvgo!jmgpppscn!",v4["flowMap.fs.body"]="g$jjego!fN$B\vY!`\vGEMOPFX``QPPCPKMF`DMUM!P?S!O1V\v$!\vw!f~d!5\v!ggjmepoxfU$f\vy!f<mc<h!s\v/$mVfOySfPUMxMp`mMgP!P>Q,`!TcUhBsS/Ue\vJ!!g\vpfst!m)fj$o\vu!!<jb>c1h<s!/jm!f=y!fNUBxYp`mGgM!P>X,`!PbCcKhFsD/Ue<J!!j\v,*,!*B!C|H!Sg`mEpExBU`fFyEfPmN!`>E!OuFfMyCu`vXsPfM3GE!))gemfpoxjUgffyeu!vgsjfm]fJ$^\v-!!<gbmcphxsV/wm]fjy^f*U<x!pjmgg!!)>g!mbpcxhFso/becJm!f\ve*]!jB^C!H%S%`!FbEmJmS)SmFfWtPt`UFiEbPoN)`gEmOpFxMVCw`]XjP^M-G!!w)fedf3o)j2g/f1e*!*g*j!m%f%$!\vb!m<mb)/hmsffybfuUfxspUmigb!o>)!gbm/pexJV!w\v]*j!^B-`!FwEfJdS3S)F1W/P1`*F*E*P*N!`\vE$OjFgM!Ce`fXgPjMoGf!e))e!fGoMjPgXf`eC!MgFjOmEf`$N\vP!E<Fc`hNsV/MmUfJyQfMUZx`pSmHgC!!>*!\vc!hJse//esJh!c\v!*+!>C!HgSm`pFxEUJfSySfFmW/Ps`hFcE<P!N\v`$EfOmFjMgC!`eXfPgMjGo!f)ee)f!oGjMgPfXe`!CgMjFmOfE$`\vN!P<EbFc`hNsV/MmUfJyQfMUZx`pSmHgC!B>!+*!\vb!cJhes/",v4["envmapPhysical.fs.head"]="g$jjegoeff$g\v!!V~T!F\v`gFjOeWoNfB$Q\v\v!!<v*o1j/g1p)s4nd!fgwm!pobsuv!uffosw!N\vbfqtJmofu$f\vo!t<jzuuzj<t!ovfoujogJpqsbnN!wgomfp!b+u!!cghmsj/qsFpomwpNDbqqb<N!w\vo$fj!goesfvgu!fFsO!W<N*BtQt`fUoZiQhFv`pDsV!C-Fd\vf!Wvuodjfgmpgsfns!!t-bqnbqnmwfosfD)vWcVff!cfvoDwfnsbvqu<y!f\vu$!f>m!tsfp\vm!pvDoqjbgNpwsonf!!t5bdnfqwm!f<s*3yEj!sfuobwNnxbfqj<W!v\v!$-fdofeWjugd\vf!mwgffds4)!ohpfjuuJdCfMsJjsEsnbsepjgbtoodbfs)Udfptostfuw!ojjo!!>w!fddf4W!uodpfsmngbfms*!!<|*!*\vt$tjfgo!iehfvgpjso!f+e!)tFtOfWoNiBhQv`pUsZ!Q-Fm`bDnVsCpFo`!V-Wd*f\vW!uwdffdm4g!fxsp)symjenO)pfs{njbmmb!n>s!pjoo!w>f!sdtffWUusdbfomtggfpss!n<E*jmsbfndsupjop!o-)sojpEsxnfbjmw-!!.v)WujdffxmNgbfuss!j>y!*d<f!Wwufddf5m!gffosw!N<bdqfDWpumdpfsm!g>f!su!f4ydufvws!f\vD*vWcVf`VFWC)VfDo`wFnQbZqU-`!QxBpNsWmOeFO)pesfnobjmg-f!e2!/g1j*$<\v!!s|f!u*vtstof!oQiJh!v+p!sf!ouwbNpbmqgD!pomjp!su/tsohpcd!!+-!mfbonwsNpboq!J4oduffwo!tojju!zu<t!o\vp$df!m-tsfj\vE!xsffjuwv!s4od!fwwf!do4j)!1u/t1o*p<d!)\vf$dfoobejjegb\vS!M~C!Jwuffdh4!",v4["displacementMap.vs.head"]="g$jjegoeff$g\v!!V\vTgFj`eEoJfT$Q\vM!B<DtFbNjFCOuUoNfBnQf\vd!bvmoqjtgjpes!nu!btpbmngq!mnfssp3gEj!oevj!t<qfmmbbddfTnufoofunNfbdqb<m!q\vt$jjeg!ouebfpgm!gV!TnFs`pVgCjPo\vv!",v4["displacementMap.vs.body"]="g$jjegoeff$g\v!!V<T*Ft`bEjJCTuQoMfBnDfFdNbFmOqUtNjBeQ!\v,!!ufsmbbodtTguposfnnffed!b,m>q!tojpes!n+b!myj/{*fw)Vpwc!k-fqdbuNOuposfnnbfmd*b!m+q!t)juef)yEu3vfs",v4["bloomSelective.fs.head"]="<vuovjpglpdsbnm!cc!pmp",v4["bloomSelective.fs.body"]="~j!g<!o)scvmubfdsl!p<v*u1*/!2|!!-h1m/`1G!s-b1h/D1p!m-p1s/!1>)!5wdf";var Nt=P.graph3d.PostProcessing=function(H){var w,Q=this,x={},S=!1,X=!1,$={model3d:!0,mesh:{is:[0,2,1,1,2,3],pos:new T8([0,0,1,0,0,1,1,1])},mat:null},T={type:"blitScreen"},i={type:"fxaa"},N=(o.keys(Nt).forEach(function(y){x[y]=new Nt[y](H)}),Q.getModule=function(y){return y?x[y]:Q},Q.getModuleList=function(){return o.keys(x)},Q.resetModules=function(){for(var y in x)x[y].resetProperties()},Q._serializable=!0,Q.handleDataModleChange=function(y,q){y&&(Q._serializable&&y.setPostProcessingData(Q.serialize()),y.removeSerializeListener(Q.onDataModelSerialize,Q)),q&&(q.addSerializeListener(Q.onDataModelSerialize,Q),Q.deserialize(q))},Q.onDataModelSerialize=function(y){"serialize"===y.type?Q._serializable&&(H.dm()._postProcessingData=Q.serialize()):"deserialize"===y.type&&Q.deserialize(H.dm())},Q.isDeserializeDisabled=function(y){return!Q._serializable||y.a("sceneBloom")!==k5},Q.isSerializable=function(){return Q._serializable},Q.setSerializable=function(y){(Q._serializable=y)||H.dm().setPostProcessingData(k5)},Q.serialize=function(){var y,q,_,s,p={};for(q in x)if(s=(_=x[q]).serializeProperties){for(var O in y={},_.enable&&(y.enable=!0),s){var L=_[O];L!=s[O]&&(y[O]=L)}o.keys(y).length&&(p[q.toLowerCase()]=y)}return p},Q.deserialize=function(y){var q,_,s={},p={};for(q in x){var O,L,$=(O=x[q]).serializeProperties,k={},M="scene"+q;for(L in(E=y.a(M))!==k5&&(k.enable=E),$)(E=y.a(M+L[0].toUpperCase()+L.slice(1)))!==k5&&E!==$[L]&&(k[L]=E);Cx(k)||(p[q[0].toLowerCase()+q.slice(1)]=k)}if(p=Cx(p)?y.getPostProcessingData():p)for(_ in p)if(_&&(q=_[0].toUpperCase()+_.slice(1),O=x[q])){s[q]=!0;var E,H=!!($=p[_]).enable;for(L in Q.enableModule(q,H),y.a(q="scene"+q,H),O.resetProperties&&O.resetProperties(),$)"enable"!==L&&(E=$[L],O[L]=E,y.a(q+L[0].toUpperCase()+L.slice(1),E))}for(q in x)s[q]||((O=x[q]).enable=!1,O.resetProperties&&O.resetProperties())},Q.getRenderTarget=function(){return w},Q.blitScreen=function(y,q,_,s,p){var O=H.getGL();if(null==y)s=q,p=_;else{var L=y instanceof i6;if(L){if(q&&(q.type||q.model3d)&&(s=q,p=_,_=q=null),0==q||0==_)return;q&&_&&y.setSize(O,q,_),y.bind(O),p&&p.viewport?H.setViewport(O,p.viewport[0],p.viewport[1],p.viewport[2],p.viewport[3]):H.setViewport(O,0,0,y.width,y.height)}else s=y,p=q}p&&!1===p.clear||O.clear(16640),p&&p.preRender&&p.preRender(O),s&&s.model3d?H._prefabRenderer.render(O,s):($.mat=s||T,H._prefabRenderer.render(O,$)),p&&p.postRender&&p.postRender(O),L&&y.unbind(O)},Q.enableModule=function(y,q){for(var _,s=y.split(","),p=0,O=s.length;p<O;p++)_=s[p].trim(),x[_]&&(x[_].enable=q);for(_ in S=!1,x)if(x[_].enable){S=!0;break}},Q.isEnabled=function(){return S},Q.dispose=function(){for(var y in X=!1,YK(H,w),w=null,x)x[y].dispose&&x[y].dispose()},!(Q.resetBlendState=function(y){S5.for(y).glState.blend.apply({enabled:!0,equation:32774,func:[770,771,1,771]})}));Q.isRenderingScene=function(){return N},Q.render=function(y,q,_,s,p){if((S||p)&&(X||function(){var y;if(!X)return y=H.getGL(),y&&(w=new B3.RenderTarget(H,y,null,null,{samples:X5.renderTextureSamples||1,minFilter:9729,magFilter:9729,depthFormat:H.isWebGL2()?36012:null}),X=!0)}())){w.setSize(y,q,_),N=!0,w.bind(y);(p=RK(y,!0))&&0===p[0]&&0===p[1]&&0===p[2]&&0===p[3]?p=null:oK(y,[0,0,0,0]),y.clear(16640),H.setViewport(y,0,0,q,_);var O=!1!==(s=s||{}).renderAxis,L=!1!==s.renderEdit;s.renderAxis=s.renderEdit=!1,H.renderScene(s),N=!1,w.unbind(y);for(var $,k=0,M=H._glCapabilities.maxAttributes;k<M;k++)y.disableVertexAttribArray(k);var E=w;for($ in x)E=x[$]._42(y,E)||E;return H.setViewport(y,0,0,q,_),p&&oK(y,p),s=Q.getModule("Fxaa"),p=H._attributes&&!1===H._attributes.autoClear?{clear:!1}:null,Q.resetBlendState(y),s&&s.enable?(i.resolution=[1/q,1/_],i.image=E.texture,Q.blitScreen(i,p)):(T.image=E.texture,Q.blitScreen(T,p)),(s=Q.getModule("Bloom")).blendAtFinal&&s.composeFinalBloom(y),y.useProgram(H._prg),H._renderAxisAndEditHelper(O,L),!0}}},at=(P.graph3d.PostProcessing.HueSaturation=function(s){var p,O=!1,L=!1,$={type:"hueSaturation"},k=[],M=[],E=[];this.serializeProperties={hue:[0,0,0,0,0,0,0],saturation:[0,0,0,0,0,0,0],lightness:[0,0,0,0,0,0,0]},this.resetProperties=function(){var y,q=this.serializeProperties;for(y in q)this[y]=q[y]},this.resetProperties(),o.defineProperties(this,{enable:{get:function(){return O},set:function(y){!!O!=!!y&&(O=y,s.iv())}},hue:{get:function(){return k.map(function(y){return K5(180*y)})},set:function(y){if(k!==y&&7===y.length){for(var q=0;q<7;q++)k[q]=y[q]/180;s.iv()}}},saturation:{get:function(){return M.map(function(y){return K5(100*y)})},set:function(y){if(M!==y&&7===y.length){for(var q=0;q<7;q++)M[q]=y[q]/100;s.iv()}}},lightness:{get:function(){return E.map(function(y){return K5(100*y)})},set:function(y){if(E!==y&&7===y.length){for(var q=0;q<7;q++)E[q]=y[q]/100;s.iv()}}}}),this.dispose=function(){L=!1,YK(s,p),p=null},this._42=function(y,q){var _;if(O&&(L||(_=s.getGL())&&(p=new B3.RenderTarget(s,_),L=!0)))return $.image=q.texture,$.hue=k,$.saturation=M,$.lightness=E,s._postProcessing.blitScreen(p,q.width,q.height,$),p}},P.graph3d.PostProcessing.Bloom=function(M){var E,H,w,q,Q,x,S,X,T=this,i=!1,N=!1,a=(this.serializeProperties={strength:1.5,threshold:.55,radius:.4,overrideAlpha:!0,blendAtFinal:!1,selective:!1},this.resetProperties=function(){var y,q=this.serializeProperties;for(y in q)this[y]=q[y]},o.defineProperties(T,{enable:{get:function(){return i},set:function(y){!!i!=!!y&&(i=y,M.iv())}},strength:{get:function(){return E},set:function(y){E!==y&&(E=y,M.iv())}},threshold:{get:function(){return H},set:function(y){H!==y&&(H=y,M.iv())}},radius:{get:function(){return w},set:function(y){w!==y&&(w=y,M.iv())}},overrideAlpha:{get:function(){return q},set:function(y){!!q!=!!y&&(q=y,N&&C(),M.iv())}},blendAtFinal:{get:function(){return x},set:function(y){!!x!=!!y&&(x=!!y,M.iv())}},selective:{get:function(){return Q},set:function(y){!!Q!=!!y&&(Q=!!y,M.iv())}}}),this.resetProperties(),[256,256]),l=[],j=[],Z=5,_=[3,5,7,9,11],K=[];function C(){for(var y=0;y<Z;y++)K[y]={type:"bloomBlur",defines:{KERNEL_RADIUS:_[y],SIGMA:_[y],OVERRIDE_ALPHA:!!q},internalDefines:!1}}T.dispose=function(){N=!1,YK(M,S,X,l,j),S=X=l=j=null},T.composeFinalBloom=function(y,q){var _,s,p;i&&N&&(_=M._postProcessing,s=S5.for(y).directState(),p=s.depth.enabled,_.blitScreen(q,{type:"blitScreen",image:l[0].texture},{clear:!1,preRender:function(y){p&&(s.depth.enabled=!1),S5.for(y).glState.blend.apply({enabled:!0,equation:32774,func:[770,1]})},postRender:function(y){_.resetBlendState(y),p&&(s.depth.enabled=!0)}}))},T._42=function(y,q){if(i&&(N||function(){var y=M.getWidth(),q=M.getHeight();if(y&&q){var _=M.getGL();if(_){a=[y,q];var s,p=Math.round(a[0]/2),O=Math.round(a[1]/2);for(X=new B3.RenderTarget(M,_,p,O),l=[],j=[],s=0;s<Z;s++)l.push(new B3.RenderTarget(M,_,p,O)),j.push(new B3.RenderTarget(M,_,p,O)),p=Math.round(p/2),O=Math.round(O/2);return C(),N=!0}}}())){var _,s=M._postProcessing;Q&&((S=S||new B3.RenderTarget(M,y)).setSize(y,q.width,q.height),S.bind(y),(_=RK(y,!0))&&0===_[0]&&0===_[1]&&0===_[2]&&1===_[3]?_=null:oK(y,[0,0,0,1]),y.clear(16640),M.setViewport(y,0,0,q.width,q.height),y._blooming=!0,M.syncRenderState(),M.renderScene({renderAxis:!1,renderGrid:!1,renderEdit:!1}),y._blooming=!1,_&&oK(y,_),S.unbind(y)),s.blitScreen(X,{type:"bloomHighPass",smoothWidth:.01,luminosityThreshold:H,tDiffuse:(Q?S:q).texture});for(var p,O=X,L=Math.round(a[0]/2),$=Math.round(a[1]/2),k=0;k<Z;k++)(p=K[k]).texSize=[L,$],p.colorTexture=O.texture,p.direction=[1,0],s.blitScreen(l[k],p),p.colorTexture=l[k].texture,p.direction=[0,1],s.blitScreen(j[k],p),L=Math.round(L/2),$=Math.round($/2),O=j[k];return s.blitScreen(l[0],{type:"bloomComposite",blurTexture1:j[0].texture,blurTexture2:j[1].texture,blurTexture3:j[2].texture,blurTexture4:j[3].texture,blurTexture5:j[4].texture,bloomStrength:E,bloomRadius:w,bloomTintColor:[1,1,1]}),x||T.composeFinalBloom(y,q),q}}},P.graph3d.PostProcessing.Dof=function(M){var O,E,q,_,s,H,w,L,Q,$,k,x,S,X=!1,T=!1,i=0,N=!1,a=e.generateUUID();this.serializeProperties={useDepth:!1,aperture:.025,maxblur:1,overrideAlpha:!0,image:null,focus:1e3,range:100,density:10},this.resetProperties=function(){var y,q=this.serializeProperties;for(y in q)this[y]=q[y]},o.defineProperties(this,{enable:{get:function(){return X},set:function(y){!!X!=!!y&&((X=y)||(N=!1),M.iv())}},image:{get:function(){return q},set:function(y){q!==y&&(q=y,N=!1,E&&(M.deleteTexture(a),E=null),M.iv())}},maxblur:{get:function(){return _},set:function(y){_!==y&&(_=y,M.iv())}},overrideAlpha:{get:function(){return L},set:function(y){!!L!=!!y&&(L=y,M.iv())}},aperture:{get:function(){return s},set:function(y){s!==y&&(s=y,M.iv())}},useDepth:{get:function(){return!!$},set:function(y){!!$!=!!y&&($=y,M.iv())}},focus:{get:function(){return k},set:function(y){k!==y&&(k=y,M.iv())}},range:{get:function(){return x},set:function(y){x!==y&&(x=y,M.iv())}},density:{get:function(){return S},set:function(y){S!==y&&(S=y,M.iv())}}}),this.resetProperties(),this.dispose=function(){T=!1,E&&(M.deleteTexture(a),E=null),YK(M,O),O=null},this.setImageFromGraphView=function(y,q,_){this.image=null,function y(q,_,s,p){Q=null;var O=q.getCanvas(),L=O.width,$=O.height,k=(((s=s||1024)<L||s<$)&&(k=s/Math.max(L,$),L=Math.round(L*k),$=Math.round($*k),H=H||ex(),O=E5.resizeImage(O,L,$,H)),M.getGL());w=w||k.createTexture(),E=VK(M,k,O,w),i=_||.01,N=!0,M.iv(),p--&&(Q=Q||E5.callLater(function(){y(q,_,s,p)}))}(y,q,_,2)},this._42=function(y,q){if(X&&(T||(_=M.getGL())&&(O=new B3.RenderTarget(M,_),T=!0))){var _=q.width,s=q.height;if(_&&s){if($)E=M.grabDepth();else if(!E){var p=r(this.image);if(!p||!p.comps&&!p.tagName)return q;P.Default.setImage(a,p),E=M.getTexture(a)}return p={OVERRIDE_ALPHA:!!L},q={type:"bokeh",tColor:q.texture,tDepth:E,aspect:_/s,maxblur:this.maxblur,defines:p},$?(p.USE_DEPTH=!0,M.isOrtho()&&(p.USE_ORTHO_CAMERA=!0),M.isFloatDepthTexture(E)&&(p.USE_FLOAT_TEXTURE=!0),o.assign(q,{near:M.getNear(),far:M.getFar(),focus:k,range:x,density:S})):o.assign(q,{aperture:this.aperture,useG2d:N,threshold:i}),M._postProcessing.blitScreen(O,_,s,q),O}}}},P.graph3d.PostProcessing.Custom=function($){function q(y,q){return(y.priority||0)-(q.priority||0)}var k,M,E=!1,H=!1;this.serializeProperties={materials:[]},this.resetProperties=function(){var y,q=this.serializeProperties;for(y in q)this[y]=q[y]},this.resetProperties(),o.defineProperties(this,{enable:{get:function(){return E},set:function(y){!!E!=!!y&&(E=y,$.iv())}},materials:{get:function(){return M},set:function(y){(M=y)&&M.sort(q),$.iv()}}}),this.dispose=function(){H=!1,YK($,k),k=null},this._42=function(y,q){if(E&&M&&M.length&&(H||(_=$.getGL())&&(k=new B3.RenderTarget($,_),H=!0))){for(var _,s,p=q,O=k,L=0;L<M.length;L++)(s=M[L]).image=p.texture,$._postProcessing.blitScreen(O,p.width,p.height,s),delete s.image,s=p,p=O,O=s;return p}}},P.graph3d.PostProcessing.Blur=function(x){var S,X,T,i,N,p,O=this,L=!1,a=!1,l={type:"blurDownSample"},j={type:"blurH"},Z={type:"blurV"},q=(this.serializeProperties={value:0,downSample:!1,iterations:1,layer:"main"},this.resetProperties=function(){var y,q=this.serializeProperties;for(y in q)this[y]=q[y]},o.defineProperties(O,{enable:{get:function(){return L},set:function(y){!!L!=!!y&&((L=y)?x.addRenderLayerListener(q,this):x.removeRenderLayerListener(q,this),x.iv())}},downSample:{get:function(){return i},set:function(y){i!==y&&(i=y,x.iv)}},value:{get:function(){return T},set:function(y){T!==y&&(T=y,x.iv())}},iterations:{get:function(){return N},set:function(y){N!==y&&(N=y,x.iv())}},layer:{get:function(){return p},set:function(y){p!==y&&(p=y,x.iv())}}}),this.resetProperties(),function(y){if(L&&y.layer===p&&"post"===y.phase){var q=x.getGL();if(!x._picking&&!x.isReflecting(q)){(y=x._postProcessing.getRenderTarget()).unbind(q);for(var _=0,s=x._glCapabilities.maxAttributes;_<s;_++)q.disableVertexAttribArray(_);O.drawImpl(q,y),y.bind(q),q.useProgram(x._prg)}}});O._42=function(){},O.dispose=function(){a=!1,YK(x,S,X),S=X=null},O.drawImpl=function(y,q,_,s,p){if(a||(M=x.getGL())&&(S=new B3.RenderTarget(x,M),a=!0)){var O,L=q?(O=q.width,q.height):(O=x._viewport[2],x._viewport[3]);if(O&&L){for(var $,k=x._postProcessing,M=("boolean"!=typeof s&&(s=i),_==M5&&(_=T),p==M5&&(p=N),p=Math.max(1,Math.round(p)),S5.for(y).glState.depth),E=M.enabled,H=(M.enabled=!1,s?(_/=2,$=[O,L],O/=2,L/=2,X=X||new B3.RenderTarget(x,y),l.image=q.texture,l.texelSize=[1/$[0],1/$[1]],k.blitScreen(X,O,L,l),q.setSize(y,O,L)):X&&X.setSize(0,0),S.setSize(y,O,L),[]),w=0;w<p;w++)H.push(_),_=Math.max(1,Math.floor(_/2));for(w=0;w<p;w++){var Q=H[p-w-1];j.image=(s&&0===w?X:q).texture,j.value=Q/O,k.blitScreen(S,null,null,j),s&&w===p-1&&q.setSize(y,$[0],$[1]),Z.image=S.texture,Z.value=Q/L,k.blitScreen(q,null,null,Z)}return M.enabled=E,q}}}},P.graph3d.PostProcessing.Glitch=function($){var k,_,M,E,H,w,Q,s,x,S=!1,X=!1,T=e.randomFloat,i=e.randomInt,p=0,N={type:"glitch"};function a(){if(x&&s){M=Date.now(),_=1e3*T(s[E=0],s[1]),H=[];for(var y=1,q=x.length;y<q;y+=2)H.push((1<y?H[H.length-1]:0)+_*x[y]/p)}}function l(){$.redraw()}this.serializeProperties={onlyReflector:!1,period:[2,3],intensity:[3,.3,1,.1,0,.4]},this.resetProperties=function(){var y,q=this.serializeProperties;for(y in q)this[y]=q[y]},o.defineProperties(this,{enable:{get:function(){return S},set:function(y){!!S!=!!y&&((S=y)&&a(),$.iv())}},onlyReflector:{get:function(){return Q},set:function(y){!!Q!=!!y&&(Q=y,$.iv())}},period:{get:function(){return s},set:function(y){s=y,a(),$.iv()}},intensity:{get:function(){return x},set:function(y){p=0;for(var q=1,_=(x=y=y||[1,1]).length;q<_;q+=2)p+=y[q];a(),$.iv()}}}),this.resetProperties(),this.dispose=function(){X=!1,YK($,k),k=null},this._42=function(y,q){if(S&&(X||function(){var y=$.getGL();if(y){k=new B3.RenderTarget($,y);for(var q=Wl(64,64),_=q.getImageData(0,0,64,64),s=_.data,p=0;p<4096;p++)s[3*p+0]=i(256),s[3*p+1]=i(256),s[3*p+2]=i(256),s[3*p+3]=i(256);return q.putImageData(_,0,0),w=VK($,y,Pl),X=!0}}())&&!!$.isReflecting(y)==!!Q){var _,s,p,O=q.width,L=q.height;if(O&&L)return _=$._postProcessing,s=(y=S5.for(y).glState.depth).enabled,y.enabled=!1,Date.now()-M>H[E]&&++E>=H.length&&a(),p=x[2*E],N.seed=Math.random(),N.byp=p?0:1,N.tDisp=w,p&&(N.angle=T(-Math.PI,Math.PI),N.distortion_x=T(0,1),N.distortion_y=T(0,1),N.amount=Math.random()/30*p,N.seed_x=T(-1,1)*p,N.seed_y=T(-1,1)*p),N.image=q.texture,_.blitScreen(k,O,L,N),y.enabled=s,requestAnimationFrame(l),k}}},P.graph3d.PostProcessing.Fxaa=function(q){var _=!1;o.defineProperties(this,{enable:{get:function(){return _},set:function(y){!!_!=!!y&&(_=y,q.iv())}}}),this._42=function(){}},ax(E5,{accordionViewExpandIcon:qx(tU),accordionViewCollapseIcon:qx(tU,!0),accordionViewLabelColor:o5,accordionViewLabelFont:wA,accordionViewTitleBackground:hU,accordionViewSelectBackground:mU,accordionViewSelectWidth:3,accordionViewSeparatorColor:k5,splitViewDividerSize:1,splitViewDividerBackground:hU,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:SD,rect:[2,2,12,12],background:tU}]},propertyViewLabelColor:HA,propertyViewLabelSelectColor:o5,propertyViewLabelFont:wA,propertyViewExpandIcon:qx(JU),propertyViewCollapseIcon:qx(JU,!0),propertyViewBackground:uU,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:oU,propertyViewColumnLineColor:oU,propertyViewSelectBackground:mU,listViewLabelColor:HA,listViewLabelSelectColor:o5,listViewLabelFont:wA,listViewRowLineVisible:!1,listViewRowLineColor:oU,listViewSelectBackground:mU,treeViewLabelColor:HA,treeViewLabelSelectColor:o5,treeViewLabelFont:wA,treeViewExpandIcon:qx(RU),treeViewCollapseIcon:qx(RU,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:oU,treeViewSelectBackground:mU,treeViewDoubleClickToToggle:!0,tableViewLabelColor:HA,tableViewLabelSelectColor:o5,tableViewLabelFont:wA,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:oU,tableViewColumnLineColor:oU,tableViewSelectBackground:mU,treeTableViewLabelColor:HA,treeTableViewLabelSelectColor:o5,treeTableViewLabelFont:wA,treeTableViewExpandIcon:qx(RU),treeTableViewCollapseIcon:qx(RU,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:oU,treeTableViewColumnLineColor:oU,treeTableViewSelectBackground:mU,tableHeaderLabelColor:HA,tableHeaderLabelFont:wA,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:cU,tableHeaderBackground:uU,tableHeaderMoveBackground:S,tableHeaderInsertColor:mU,tableHeaderSortDescIcon:_x(JU,!0),tableHeaderSortAscIcon:_x(JU),tabViewTabGap:1,tabViewLabelColor:o5,tabViewLabelFont:wA,tabViewTabBackground:hU,tabViewSelectWidth:3,tabViewSelectBackground:mU,tabViewMoveBackground:S,tabViewInsertColor:mU,toolbarLabelColor:HA,toolbarLabelSelectColor:o5,toolbarLabelFont:wA,toolbarBackground:uU,toolbarSelectBackground:mU,toolbarItemGap:8,toolbarSeparatorColor:DU},!0),{translateX:1,sortColumn:1}),lt={sortable:1,sortOrder:1,sortFunc:1},jt={focusData:1},Zt={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},Kt={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},Ct=function(y,q){q.add(y),y.hasChildren()&&y.eachChild(function(y){Ct(y,q)})},Bt=function(y,q,_,s,p,O,L,$,k,M,E){var H,w,Q,x,S,X,T=_.getValueType(M),i=_.getAlign(M);if(_.getEnumValues(M))return H=_.toEnumLabel(q,M),w=QA||0,Q=0,x=O,S=E5.getTextSize(s,H).width,(X=r(_.toEnumIcon(q,M)))&&(Q=O+QA/2,"center"===i?Q+=($-(w+S))/2:"right"===i&&(Q=Q+$-(w+S)),FA(y,X,Q,L+k/2,M,E),x=Q+QA/2),void(H!=M5&&(X?PA(y,H,s,p,x,L,$-(x-O),k):PA(y,H,s,p,O,L,$,k,i)));if((q=_.formatValue(q))!=M5){if(T!==GL)return T===fL||!T&&kx(q)?(X=r(q?BD:FD),void FA(y,X,O+$/2,L+k/2,M,E)):void PA(y,q,s,p,O,L,$,k,i);dl(y,O,L,$,k,q)}},Ft=function(_,s){var p=s.view,O=wl(_),L=s.column||s.property;p.getDataModel().beginTransaction(),(s.editor=_).info=s,p.setCurrentEditor(_),p.getView().insertBefore(O,p._79O),h(_,s.editorRect),_.setFocus?_.setFocus():Hl(_),_.commitValue=function(y,q){_._17Q&&(_=_._17Q),q||p.setValue(s.data,L,_.getValue?_.getValue():_.value),_.close&&_.close(),$8(O)},L.onEditorCreated&&L.onEditorCreated(s)},Vt=function(y,q,_,s,p){var O=k8(y,_),L=q.value,$=q.view,_=p.getValueType(q.data);return O.onblur=O.onchange=function(y){$.endEditing()},"input"===y?((L=p.formatValue(L))!=M5&&(O.value=L),O.onkeydown=function(y){cl(y)?$.endEditing():Rl(y)&&$.endEditing(!0)},_!==rL&&_!==gL||y5(O,On,E5.numberListener)):y===dD&&s.forEach(function(y){var q=w.createElement("option");q.innerHTML=p.toEnumLabel(y),q.value=y,p.isEnumEqual(L,y)&&(q.selected=!0),gx(O,q)}),Ft(O,q),O},ht=P.widget={},q=function(y,q,_){w8("ht.widget."+y,q,_)},tt=(ax(dB,{ms_value:function(y,q){y.getValue=function(y){var q=(y=this.getItemById(y)).element;return w5(q)?q:q?q.getValue?q.getValue():q.value:y.selected},y.setValue=function(y,q){var _;(y=this.getItemById(y))&&((_=y.element)&&!w5(_)?_.setValue?_.setValue(q):_.value=q:(kx(q)?y.selected=q:y.element=q,this.iv()))},y.v=function(y,q){if(2===arguments.length)this.setValue(y,q);else{if(!Mx(y))return this.getValue(y);for(var _ in y)this.setValue(_,y[_])}return this}},_46o:function(y,q){y._icon=M5,y._accessType=M5,y._valueType=M5,y._editable=!1,y._batchEditable=!0,y._align=qD,y._nullable=!0,y._emptiable=!1,y.setParent=zn,y.formatValue=function(y){var q=this._valueType;return this.getEnumValues()?this.toEnumLabel(y):q===fL?!!y:y!=M5&&q===rL?Z5(y):y},y.setEnum=function(y,q,_,s,p,O,L){y&&!Hx(y)&&y.values&&(s=y.editable,_=y.icons,q=y.labels,p=y.strict,O=y.maxHeight,L=y.dropDownWidth,y=y.values),wx(y)&&(y=y._as),wx(q)&&(q=q._as),wx(_)&&(_=_._as),this._enumValues=y,this._enumLabels=q,this._enumIcons=_,this._enumEditable=s,this._enumStrict=p==M5||p,this._enumMaxHeight=O,this._enumDropDownWidth=L,y&&y.length&&$x(y[0])&&(this._valueType=gL),this.fp("enum",!1,!0)},y.getEnumDropDownWidth=function(){return this._enumDropDownWidth},y.getEnumMaxHeight=function(){return this._enumMaxHeight},y.isEnumEditable=function(){return this._enumEditable},y.getEnumValues=function(){return this._enumValues},y.getEnumLabels=function(){return this._enumLabels},y.getEnumIcons=function(){return this._enumIcons},y.isEnumStrict=function(){return this._enumStrict},y.isEnumEqual=function(y,q){return this._enumStrict?y===q:y==q},y.toEnumLabel=function(y,q){var _=this.getEnumValues(q),s=this.getEnumLabels(q);if(_&&s)for(var p=0;p<_.length;p++)if(this.isEnumEqual(y,_[p]))return s[p];return y},y.toEnumIcon=function(y,q){var _=this.getEnumValues(q),s=this.getEnumIcons(q);if(_&&s)for(var p=0;p<_.length;p++)if(this.isEnumEqual(y,_[p]))return s[p];return k5}},_45o:function(y,q){y._87o=function(y,q,_,s,p,O){var L,$;y&&(L=this._90I,$=zx(1),this._columnLineVisible&&--p,this._rowLineVisible&&--O,p<=0||O<=0||((L=this._90I?L:this._90I={})[q]||(L[q]=new n),h($,this.tx()+_,this.ty()+s,p,O),gx($,y),this._view.insertBefore($,this._79O),y.onParentAdded&&y.onParentAdded($),L[q].add($)))},y._76o=function(){var y=this._90I;if(y){for(var q in y)y[q].each(function(y){$8(y)});delete this._90I}},y._77o=function(y){var q;this._90I&&(q=this._90I[y])&&(q.each(function(y){$8(y)}),delete this._90I[y])}},_47o:function(y,q){y.getValue=function(y,q){return q.getValue?q.getValue(y,q,this):Jx(y,q.getAccessType(),q.getName())},y.setValue=function(y,q,_){var s,p,O,L;q.isEmptiable(y)||""!==_||(_=k5),!q.isNullable(y)&&_==M5||(s=this,p=q.getName(y),O=q.getAccessType(y),(L=q.getValueType(y))===rL&&w5(_)?_=R5(_):L===gL&&w5(_)?_=parseFloat(_):L===fL&&w5(_)&&(_="true"===_),s._batchEditable&&q._batchEditable&&s.isSelected(y)?s.sm().each(function(y){q.setValue?q.setValue(y,q,_,s):Dx(y,O,p,_)}):q.setValue?q.setValue(y,q,_,s):Dx(y,O,p,_))},y.setCurrentEditor=function(y){this.endEditing(),this._currentEditor=y,this.redraw()},y.isEditing=function(y,q){var _=this._currentEditor;return!!_&&(!q||!!(_=_.info)&&(_.column||_.property)===q&&_.data===y)},y.endEditing=function(y){var q=this._currentEditor;q&&(delete this._currentEditor,q.commitValue&&q.commitValue(q.info,y),this.redraw(),this.getDataModel().endTransaction())},y.beginEditing=function(y){this.endEditing();var _=this,s=y.column||y.property;if(s.beginEditing)s.beginEditing(y);else{var q,p,O=y.data,L=y.value,$=_.getSelectBackground(O),k=s.getEnumValues(O),M=s.getSlider(O),E=s.getColorPicker(O);if(M)return(q=KA(ht.Slider,M)).setValue(L),q.getView().onblur=function(y){_.endEditing()},q.isInstant()&&(q.onValueChanged=function(){_.setValue(O,s,q.getValue())}),void Ft(q,y);if(E||s.getValueType(O)===GL)return(M=KA(ht.ColorPicker,E)).setValue(L),p=M.onClosed,M.onClosed=function(){_.endEditing(),p&&p.call(this)},M.isInstant()&&(M.onValueChanged=function(y,q){_.setValue(O,s,q)}),Ft(M,y),void M.open();if(k)ht.ComboBox?((E=new ht.ComboBox).setValue(L),E.setValues(k),E.setLabels(s.getEnumLabels(O)),E.setIcons(s.getEnumIcons(O)),E.setEditable(s.isEnumEditable(O)),E.setStrict(s.isEnumStrict(O)),E.setMaxHeight(s.getEnumMaxHeight(O)),E.setDropDownWidth(s.getEnumDropDownWidth(O)),E.onClosed=function(){_.endEditing()},Ft(E,y),E.open()):Vt(dD,y,$,k,s);else{if(s.getValueType(O)!==fL&&!kx(L))return s.getItemEditor(O)?(((E=(M=new(cA(s.getItemEditor(O)))(O,s,_,y)).getView())._17Q=M).setValue(L),Gx(E),Ft(E,y),void(M.editBeginning&&M.editBeginning())):void Vt("input",y,$,M5,s);_.setValue(O,s,!L)}}}},_44o:function(y,q){y.init=function(y){var q=this,_=q.th=new ft(y),s=q._view=Ax(1,q);q.tv=q._tableView=y,gx(s,_.getView()),gx(s,y.getView()),_.mp(function(y){y.property===KD&&q.iv()}),q.iv()},y.getTableView=function(){return this.tv},y.getTableHeader=function(){return this.th},y.getDataModel=function(){return this.tv.dm()},y.getColumnModel=function(){return this.tv.getColumnModel()},y.setColumns=function(y){this.tv.setColumns(y)},y.addColumns=function(y){this.tv.addColumns(y)},y.endEditing=function(){this.tv.endEditing()},y.validateImpl=function(){var y=this.th,q=ql(y),_={x:0,y:0,width:this.getWidth(),height:q};h(y,_),_.y=q,_.height=_5(0,this.getHeight()-q),h(this.tv,_)}},ms_vs:function(y,q){y._41o=function(){return this._29I.height<this._59I},y._43o=function(){var y=this;y._41o()&&(y._58I||(m5(function(){y._94O()},XA),y.iv()),y._58I=new Date)},y._94O=function(){var y=this;y._58I&&((new Date).getTime()-y._58I.getTime()>=XA?(delete y._58I,y.iv()):m5(function(){y._94O()},XA))},y._93I=function(){var y,q,_,s,p,O,L,$=this,k=$._27I;$._58I||!$._autoHideScrollBar?(k||gx($._79O,k=$._27I=zx()),y=(s=$._29I).height,q=$._59I,_=$.getScrollBarSize(),s=s.width-_-2,p=y*(-$.ty()/q),O=y*(y/q),L=k.style,y<q?(O<TA&&(y<(p=(p=p+O/2-TA/2)<0?0:p)+TA&&(p=y-TA),O=TA),L.visibility=vD,L.background=$.getScrollBarColor(),L.borderRadius=_/2+wD,h(k,s,p,_,O)):L.visibility=nD):k&&(k.style.visibility=nD)}},ms_hs:function(y,q){y._40o=function(){return this._29I.width<this._91I},y._42o=function(){var y=this;y._40o()&&(y._95O||(m5(function(){y._94I()},XA),y.iv()),y._95O=new Date)},y._94I=function(){var y=this;y._95O&&((new Date).getTime()-y._95O.getTime()>=XA?(delete y._95O,y.iv()):m5(function(){y._94I()},XA))},y._92I=function(){var y,q,_,s,p,O,L,$=this,k=$._28I;$._95O||!$._autoHideScrollBar?(k||gx($._79O,k=$._28I=zx()),y=(s=$._29I).width,q=$._91I,_=$.getScrollBarSize(),s=s.height-_-2,p=y*(-$.tx()/q),O=y*(y/q),L=k.style,y<q?(O<TA&&(y<(p=(p=p+O/2-TA/2)<0?0:p)+TA&&(p=y-TA),O=TA),L.visibility=vD,L.background=$.getScrollBarColor(),L.borderRadius=_/2+wD,h(k,p,s,O,_)):L.visibility=nD):k&&(k.style.visibility=nD)}}}),r5(BD,dn(16,16,[{type:m,rect:[1,1,14,14],background:mU},{type:xD,rect:[1,1,14,14],width:1,color:YU},{type:iD,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),r5(FD,dn(16,16,{type:xD,rect:[1,1,14,14],width:1,color:YU})),r5(VD,dn(16,16,[{type:XD,rect:[2,2,12,12],borderWidth:1,borderColor:YU,background:"#FFF"},{type:XD,rect:[4,4,8,8],background:mU}])),r5(hD,dn(16,16,{type:XD,rect:[2,2,12,12],borderWidth:1,borderColor:YU})),dB._15Q=function(y,q){y._29I=fn,y._59I=0,y._91I=0,y._5o=function(y){var q=this;q._30I=new n,q._rows=new n,q._rowMap={},q._31I=0,q._14I=0,q._view=Ax(1,q),q._canvas=ex(q._view),gx(q._view,q._79O=zx()),q.dm(y||new Nu)},y.getCheckIcon=function(y){var q=this.sm(),y=q.co(y);return q.sg()?r(y?VD:hD):r(y?BD:FD)},y.checkData=function(y){var q=this.sm(),_=q.co(y);q.sg()&&_||(this._32o=1,_?q.rs(y):q.as(y),delete this._32o)},y.getDataAt=function(y){y.target&&(y=this.lp(y));var y=K5(y.y/this._rowHeight),q=this._rows;return y<0||y>=q.size()?M5:q.get(y)},y.onDataDoubleClicked=function(y,q){},y.onDataClicked=function(y,q){},y.adjustTranslateX=function(y){return 0},y.adjustTranslateY=function(y){var q=this.getHeight()-this._59I;return 0<(y=y<q?q:y)?0:Z5(y)},y.onPropertyChanged=function(y){y=y.property,Zt[y]?this.ivm():jt[y]||this.redraw(),y===KL?this._42o():y===CL&&this._43o()},y.getLabel=function(y){return y.toLabel()},y.getLabelFont=function(y){return this._labelFont},y.getLabelColor=function(y){if(this.isCheckMode()){if(this._focusData===y)return this._labelSelectColor}else if(this.isSelected(y))return this._labelSelectColor;return this._labelColor},y.getStartRowIndex=function(){return this._31I},y.getEndRowIndex=function(){return this._14I},y.getRowDatas=function(){return this._rows},y.getRowIndex=function(y){return this._rowMap[y._id]},y.getRowSize=function(){return this._rows.size()},y.getViewRect=function(){return DA(this._29I)},y.isVisible=function(y){return!this._visibleFunc||this._visibleFunc(y)},y.getCurrentSortFunc=function(){return this._sortFunc},y.setDataModel=function(y){var q=this,_=q._dataModel,s=q._selectionModel;_!==y&&(_&&(_.umm(q.handleDataModelChange,q),_.umd(q.handleDataPropertyChange,q),_.umh(q.handleHierarchyChange,q),s||_.sm().ums(q.handleSelectionChange,q)),(q._dataModel=y).mm(q.handleDataModelChange,q),y.md(q.handleDataPropertyChange,q),y.mh(q.handleHierarchyChange,q),s?s._21I(y):y.sm().ms(q.handleSelectionChange,q),q.fp("dataModel",_,y))},y.validateModel=function(){var y=this,q=(y._rows.clear(),y._rowMap={},y.buildChildren(y._dataModel._roots),y._rows=y._rows.toList(y.isVisible,y)),_=0,s=y.getCurrentSortFunc(),p=q.size();for(s&&q.sort(s);_<p;_++)y._rowMap[q.get(_)._id]=_},y.buildChildren=function(y){var q=this;y.each(function(y){q._rows.add(y),q.buildChildren(y._children)})},y.handleDataModelChange=function(y){this.ivm()},y.handleDataPropertyChange=function(y){"parent"===y.property?this.ivm():this.invalidateData(y.data)},y.handleHierarchyChange=function(y){this.ivm()},y.handleSelectionChange=function(y){y.datas.each(this.invalidateData,this),this.onSelectionChanged(y)},y.onSelectionChanged=function(y){var q=this.sm();!this.isAutoMakeVisible()||1!==q.size()||"set"!==y.kind&&"append"!==y.kind||this._32o||this.makeVisible(q.ld())},y.handleBackgroundClick=function(y){WA(y)&&!this.isCheckMode()&&this.sm().cs()},y.makeVisible=function(y){y&&(this._23I=y,this.iv())},y.scrollToIndex=function(y){var q=this._29I,_=q.height,s=this._rowHeight,p=s*y;0<=y&&y<this._rows.size()&&0<_&&(p+s>q.y+_?this.ty(-p+_-s):p<q.y&&this.ty(-p))},y.autoScroll=function(y,q){var _=this,s=_._rowHeight,p=s,O=s/4,L=_._29I,y=_.lp(y),$={x:_.tx(),y:_.ty()};return 0<s&&L&&(y.x-L.x<p?_.translate(O,0):L.x+L.width-y.x<p&&_.translate(-O,0),y.y-L.y<p?_.translate(0,O):L.y+L.height-y.y<p&&_.translate(0,-O)),$.x=_.tx()-$.x,$.y=_.ty()-$.y,q&&(q.x+=$.x,q.y+=$.y),$},y.getTopRowOrderSelection=function(){var y=this.sm().getTopSelection(),q={},_=new n;return y.each(function(y){q[y._id]=y}),this._rows.each(function(y){q[y._id]&&_.add(y)}),_},y.getRowOrderSelection=function(){var q=new n;return this._rows.each(function(y){this.isSelected(y)&&q.add(y)},this),q},y.ivm=function(){this.invalidateModel()},y.invalidateModel=function(){this._96I||(this._96I=1,this._32I=1,delete this._24I),this.iv()},y.redraw=function(){this._32I||(this._32I=1,delete this._24I,this.iv())},y.invalidateData=function(y){f5?this.redraw():this._32I||(this._24I||(this._24I={}),this._24I[y._id]=y,this.iv())},y.getFocusData=function(){return this._focusData},y.setFocusDataById=function(y){this.setFocusData(this.dm().getDataById(y))},y.setFocusData=function(y){var q=this._focusData;q!==y&&(this._focusData=y,this.fp("focusData",q,y),q&&this.invalidateData(q),y&&(this.invalidateData(y),this.isAutoMakeVisible()&&this.makeVisible(y)))},y.drawRowBackground=function(y,q,_,s,p,O,L){var $=this.isCheckMode();(q===this._focusData&&$||_&&!$)&&dl(y,s,p,O,L,this.getSelectBackground(q))},y.drawData=function(y,q,_){var s=this._rowHeight,p=s*_,O=(L=this._29I).x,L=L.width;y.save(),y.beginPath(),y.rect(O,p,L,s),y.clip(),this._87o(this.drawRow(y,q,this.isSelected(q),O,p,L,s),_,O,p,L,s),y.restore(),this._rowLineVisible&&dl(y,O,p+s-1,L,1,this._rowLineColor)},y._12I=function(y){var q=this._31I,_=(O=this._29I).x,s=O.y,p=O.width,O=O.height;for(y.beginPath(),y.rect(_,s,p,O),y.clip(),y.clearRect(_,s,p,O),this._76o(),this._93db(y);q<this._14I;q++)this.drawData(y,this._rows.get(q),q);this._92db(y)},y._13I=function(q){for(var y,_=this,s=_._rowHeight,p=_._29I,O=p.x,L=p.width,$=_._31I,k=_._30I;$<_._14I;$++)y=_._rows.get($),_._24I[y._id]&&k.add({data:y,index:$});k.isEmpty()||(q.beginPath(),k.each(function(y){q.rect(O,y.index*s,L,s)}),q.clip(),k.each(function(y){q.clearRect(O,y.index*s,L,s)}),k.each(function(y){_._77o(y.index)}),_._93db(q),k.each(function(y){_.drawData(q,y.data,y.index)}),_._92db(q),k.clear())},y.preValidateModel=function(){this.endEditing&&this.endEditing()},y.validateImpl=function(){var y=this,q=y._canvas,_=y.getWidth(),s=y.getHeight(),p=y._rowHeight,O=y._32I,L=(_===q.clientWidth&&s===q.clientHeight||(rx(q,_,s),O=1),y._96I&&(y.preValidateModel(),y.validateModel()),y._29I),$={x:-y.tx(),y:-y.ty(),width:_,height:s},k=y._rows.size(),q=pl(q),M=y._23I,L=(O||Fx($,L)||(O=1),y._29I=$,y._59I=k*p,y._31I=K5($.y/p),y._14I=C5(($.y+$.height)/p),y._31I<0&&(y._31I=0),y._14I>k&&(y._14I=k),y._99I&&O&&y._99I(),y.tx()),$=y.ty();(y._40o()||y._41o())&&(y._59I+=y.getScrollBarSize(),y._99I&&O&&(y._91I+=y.getScrollBarSize())),n5||(q.save(),Ol(q,_/TD.length,s/TD.length,1)),Ol(q,L,$,1),O?y._12I(q):y._24I&&y._13I(q),y._93I(),y._92I(),q.restore(),y._32I=y._24I=y._96I=M5,M&&(y.scrollToIndex(y.getRowIndex(M)),delete y._23I),y.tx(y.tx()),y.ty(y.ty())},y.canHandleSelectMode=function(y,q){return!0},y.isDraggable=function(y){return!0}},dB._48o=function(y,q){y._rootVisible=!0,y._rootData=M5,y._35o=function(){this._expandMap={},this._levelMap={}},y.validateModel=function(){var y=this,q=y._rootData;y._rows.clear(),y._levelMap={},y._rowMap={},y._currentLevel=0,q?y._rootVisible?y.isVisible(q)&&y.buildData(q):y.buildChildren(q):y.buildChildren(),delete y._currentLevel},y.buildData=function(y){var q=y._id,_=this._rows;this._rowMap[q]=_.size(),_.add(y),this._levelMap[q]=this._currentLevel,this.isExpanded(y)&&(this._currentLevel++,this.buildChildren(y),this._currentLevel--)},y.buildChildren=function(y){var q=this,_=y?y._children:q._dataModel._roots,s=q.getCurrentSortFunc();s&&q.isChildrenSortable(y)?_.toList(q.isVisible,q).sort(s).each(q.buildData,q):_.each(function(y){q.isVisible(y)&&q.buildData(y)})},y.getLevel=function(y){return this._levelMap[y._id]},y.getToggleIcon=function(y){var q=this._loader,_=this._collapseIcon;return q&&!q.isLoaded(y)?_:y.hasChildren()?this.isExpanded(y)?this._expandIcon:_:M5},y.isCheckMode=function(){return this._checkMode!=M5},y.isChildrenSortable=function(y){return!0},y.handleDataModelChange=function(y){y.kind===lD?delete this._expandMap[y.data._id]:y.kind===jD&&(this._expandMap={}),this.ivm()},y.toggle=function(y){this.isExpanded(y)?this.collapse(y):this.expand(y)},y.isExpanded=function(y){return 1===this._expandMap[y._id]},y.expand=function(y){var q=this._loader;this.isExpanded(y)||(q&&!q.isLoaded(y)&&q.load(y),this._expandMap[y._id]=1,this.ivm(),this.onExpanded(y))},y.onExpanded=function(y){},y.collapse=function(y){this.isExpanded(y)&&(delete this._expandMap[y._id],this.ivm(),this.onCollapsed(y))},y.onCollapsed=function(y){},y.expandAll=function(y){var q;y?(this.expand(y),y.eachChild(function(y){this.expandAll(y)},this)):((q=this)._dataModel.each(function(y){y.hasChildren()&&(q._expandMap[y._id]=1)}),q.ivm())},y.collapseAll=function(){this._expandMap={},this.ivm()},y.makeVisible=function(y){if(y&&(!this._rootData||y.isDescendantOf(this._rootData))){for(var q=y._parent;q;)this.expand(q),q=q._parent;this._23I=y,this.iv()}},y.checkData=function(y){var q,_=this._checkMode,s=this.sm(),p=s.co(y);if(!s.sg()||!p){if(this._32o=1,_===b5)p?s.rs(y):s.as(y);else if(_===ZL)(q=new n(y)).addAll(y._children);else if("descendant"===_)q=new n,Ct(y,q);else if("all"===_&&(q=new n,Ct(y,q),!p))for(var O=y._parent;O;)q.add(O),O=O._parent;q&&(p?s.rs(q):s.as(q)),delete this._32o}},y.drawTree=function(y,q,_,s,p,O,L){var $=this,k=$._indent,M=$._levelMap[q._id],E=$.getIconWidth(q),H=r($.getToggleIcon(q));H?(FA(y,H,(s+=k*M)+k/2,p+L/2,q,$),s+=k):s+=k*(M+1),$._checkMode&&(FA(y,$.getCheckIcon(q),s+k/2,p+L/2,q,$),s+=k),$.drawIcon(y,q,s,p,E,L),$.drawLabel(y,q,s+E,p,L)}},dB._14Q=function(y,q){y.getIcon=function(y){return y.getIcon()},y.getIconWidth=function(y){return this.getIcon(y)?this._indent:0},y.drawIcon=function(y,q,_,s,p,O){var L,$;p&&(L=this.getBodyColor(q),($=r(this.getIcon(q),L))&&(O-=this.isRowLineVisible()?1:0,VA(y,$,mL,_,s,p,O,q,this,L),kU(y,this.getBorderColor(q),_,s,p,O)))},y.drawLabel=function(y,q,_,s,p){PA(y,this.getLabel(q),this.getLabelFont(q),this.getLabelColor(q),_,s,0,p)}},dB._50o=function(y,q){y._98I=function(){var y=this._39o=new Nu;this._60I=new n,y.mm(this._17o,this),y.md(this._18o,this),y.mh(this._19o,this)},y.setColumns=function(y){this._39o.clear(),this.addColumns(y)},y.addColumns=function(y){var _=this._39o;y.forEach(function(y){var q;y instanceof ut||(q=cA(y.className),y=KA(q||ut,y)),_.add(y)})},y.onColumnClicked=function(y){},y.onCheckColumnClicked=function(y){},y._3Q=function(y){for(var q,_=0,s=this._60I,p=s.size();_<p;_++)if((q=s.get(_)).column===y)return q;return M5},y.getColumnAt=function(y){return(y=this._4Q(y))?y.column:M5},y._4Q=function(y){for(var q=(y.target?this.lp(y):y).x,_=this._60I,s=0;s<_.size();s++){var p=_.get(s),O=p.startX;if(O<=q&&q<O+p.column.getWidth())return p}return M5},y.getToolTip=function(y){var q=this.getDataAt(y),y=this.getColumnAt(y);return q&&y?y.getToolTip(q,this):M5},y.adjustTranslateX=function(y){var q=this.getWidth()-this._91I;return 0<(y=y<q?q:y)?0:Z5(y)},y._99I=function(){var _=this,s=_._29I,p=_._60I;p.clear(),_._91I=0,_._39o._roots.each(function(y){var q;y.isVisible()&&(q=_._91I+y.getWidth(),_._91I<=s.x+s.width&&q>=s.x&&p.add({column:y,startX:_._91I}),_._91I=q)})},y.drawData=function(s,p,O){var L=this,$=L._rowHeight,k=$*O,M=L.isSelected(p),y=(q=L._29I).x,q=q.width;L.drawRowBackground(s,p,M,y,k,q,$),L._60I.each(function(y){var q=y.column,y=y.startX,_=q.getWidth();0<_&&!L.isEditing(p,q)&&(s.save(),s.beginPath(),s.rect(y,k,_,$),s.clip(),L._87o(L.drawCell(s,p,M,q,y,k,_,$),O,y,k,_,$),L._columnLineVisible&&dl(s,y+_-1,k,1,$,L._columnLineColor),s.restore())}),L._rowLineVisible&&dl(s,y,k+$-1,q,1,L._rowLineColor)},y.drawCell=function(y,q,_,s,p,O,L,$){if(s.drawCell)return s.drawCell(y,q,_,s,p,O,L,$,this);_=this.getValue(q,s),Bt(y,_,s,this.getLabelFont(q,s,_),this.getLabelColor(q,s,_),p,O,L,$,q,this)},y.getColumnModel=function(){return this._39o},y._17o=function(y){this.redraw()},y._18o=function(y){y.data===this._sortColumn&&lt[y.property]?this.ivm():(this._42o(),this.redraw())},y._19o=function(y){this.redraw()},y.getCurrentSortFunc=function(){var _,s,p=this,O=p._sortColumn;return O&&O.isSortable()?(s=O.getSortFunc(),_=NL===O.getSortOrder()?1:-1,s=s||JA,function(y,q){return s.call(p,p.getValue(y,O),p.getValue(q,O),y,q)*_}):p._sortFunc},y.isCellEditable=function(y,q,_){return!(!q.isEditable()||!this.isEditable())&&(!q.isCellEditable||q.isCellEditable(y,q,_,this))},y._37O=function(y,q){if(WA(q))for(var _=this,s=_.lp(q),p=_._60I,O=_._rowHeight,L=_._29I,$=L.x,k=L.y,M=L.width,E=L.height,H=0;H<p.size();H++){var w,Q,x=p.get(H),S=x.startX,X=(x=x.column).getWidth();if(x!==_._31o&&x!==_._4o&&s.x>=S&&s.x<S+X&&_.isCellEditable(y,x,q))return X={x:(S={x:S,y:_.getRowIndex(y)*O,width:X,height:O}).x+_.tx(),y:S.y+_.ty(),width:S.width,height:S.height},Q=w=0,S.x<$?w=S.x-$:$+M<S.x+S.width&&(w=S.x+S.width-$-M),w&&(_.tx(_.tx()-w),X.x-=w),S.y<k?Q=S.y-k:k+E<S.y+O&&(Q=S.y+O-k-E),Q&&(_.ty(_.ty()-Q),X.y-=Q),void _.beginEditing({data:y,column:x,value:_.getValue(y,x),event:q,rect:S,editorRect:X,view:_})}}},ht.BaseItemEditor=function(y,q,_,s){this._data=y,this._column=q,this._master=_,this._editInfo=s},q("BaseItemEditor",o,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}}),P.Tab=function(){Kx(tt,this)}),ut=(zU("Tab",iu,{ms_ac:["view","closable","disabled","visible"],_icon:M5,_closable:!1,_disabled:!1,_visible:!0,setParent:zn}),P.Column=function(){Kx(ut,this)}),Jt=(zU("Column",iu,{_46o:1,ms_ac:["accessType","valueType",vD,XL,TL,ZD,"align",GL,"sortOrder",SL,"sortable","clickable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:NL,_sortFunc:M5,_sortable:!0,_clickable:!0,setWidth:function(y){var q=this._width;this._width=y=y<16?16:y,this.fp(ZD,q,y)},getToolTip:function(y,q){return this.formatValue(q.getValue(y,this))}}),P.Property=function(){Kx(Jt,this)}),Dt=(zU("Property",iu,{_46o:1,ms_ac:["accessType","valueType",XL,TL,"categoryName",GL,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:M5,getToolTip:function(y,q,_){return q?this.formatValue(_.getValue(y,this)):_.getPropertyName(this)}}),ht.AccordionView=function(){this._20o={},this._21o=new n,this._10o=M5,this._9o=M5,this._11o=M5,this._view=Ax(0,this),this.iv()},q("AccordionView",o,{ms_v:1,ms_fire:1,ms_ac:[wL,QL,"titleHeight",WD,mD,"titleBackground","selectWidth",Y5,"orientation","separatorColor"],_expandIcon:E5.accordionViewExpandIcon,_collapseIcon:E5.accordionViewCollapseIcon,_titleHeight:SA,_labelColor:E5.accordionViewLabelColor,_labelFont:E5.accordionViewLabelFont,_titleBackground:E5.accordionViewTitleBackground,_selectBackground:E5.accordionViewSelectBackground,_selectWidth:E5.accordionViewSelectWidth,_orientation:"v",_separatorColor:E5.accordionViewSeparatorColor,onPropertyChanged:function(y){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(q,y,_,s){var p=this,O=zx(),y={content:y,div:O,canvas:ex(O),icon:s};if(p._20o[q])throw q+" already exists";var L=y.downEventFunc=function(y){CA(y)},$=y.upEventFunc=function(y){CA(y),WA(y)&&(p._10o===q?p.collapse():p.expand(q))};[_n,UL].forEach(function(y){y5(O,y,L)}),[pn,yn].forEach(function(y){y5(O,y,$)}),O.style.cursor=bL,gx(p._view,O),p._20o[q]=y,p._21o.add(q),_&&p.expand(q),p.iv()},remove:function(y){var q,_=this._20o[y];_&&(q=_.div,$8(q),[_n,UL].forEach(function(y){q5(q,y,_.downEventFunc)}),[pn,yn].forEach(function(y){q5(q,y,_.upEventFunc)}),delete this._20o[y],this._21o.remove(y),this.iv())},clear:function(){this._21o.toArray().forEach(this.remove,this),this._20o={},this._21o.clear(),this.iv()},isExpanded:function(y){return this._10o===y},expand:function(y){this._20o[y]&&this._10o!==y&&(this._10o=y,this.onExpanded(y),this.iv())},onExpanded:function(y){},collapse:function(){this._10o&&(this.onCollapsed(this._10o),delete this._10o,this.iv())},onCollapsed:function(y){},initCanvas:function(y,q,_){return rx(y,q,_),y=pl(y),Ol(y,0,0,1),y.clearRect(0,0,q,_),y},drawTitle:function(y,q,_,s,p){var O=this,p=r(p.icon),L=O.isExpanded(q),$=O._titleHeight,k=O._titleBackground,M=O._selectWidth,E=O._separatorColor,H=r(L?O._expandIcon:O._collapseIcon),w=M+4;dl(y,0,0,_,s,k),L&&M&&dl(y,0,0,M,s,O._selectBackground),!L&&O._21o.get(O._21o.size()-1)===q||dl(y,0,s-1,_,1,E||oA(k)),p&&(FA(y,p,w+d8(p)/2,$/2),w+=d8(p)+2),PA(y,q,O.getLabelFont(q),O.getLabelColor(q),w,0,0,$),H&&FA(y,H,_-d8(H)/2-4,$/2)},validateImpl:function(){var L=this,y=L._view,$=0,k=0,M=L.getWidth(),E=L.getHeight(),H=L._titleHeight,w=L._21o.size()*H,q=L._11o,_=L._9o,s=(delete L._11o,delete L._9o,L._21o.each(function(y){var q,_,s=L._20o[y],p=s.content,O=L._10o===y;sx(L)?(h(s.div,$,0,H,E),q=L.initCanvas(s.canvas,H,E),Ll(q,0,E),$l(q,-u5),L.drawTitle(q,y,E,H,s),q.restore(),O?(_=_5(0,M-w),p&&(L._11o=p,L._9o=wl(p),h(p,$+H,0,_,E)),$+=H+_):$+=H):(h(s.div,0,k,M,H),q=L.initCanvas(s.canvas,M,H),L.drawTitle(q,y,M,H,s),q.restore(),O?(_=_5(0,E-w),p&&(L._11o=p,L._9o=wl(p),h(p,0,k+H,M,_)),k+=H+_):k+=H)}),L._9o);q&&q!==L._11o&&q.endEditing&&q.endEditing(),s&&s!==_&&gx(y,s),_&&_!==s&&$8(_)}}),ht.SplitView=function(y,q,_,s){var p=this,O=p._dividerDiv=zx(),L=p._60O=ex(),$=p._61O=ex(),L=L.style,$=$.style;p._view=Ax(1,p),gx(p._view,O),L.msTouchAction=IL,L.pointerEvents=IL,L.cursor=bL,$.msTouchAction=IL,$.pointerEvents=IL,$.cursor=bL,y&&p.setLeftView(y),q&&p.setRightView(q),_&&p.setOrientation(_),s!=M5&&p.setPosition(s),p.setStatus(aD),new Dt(p)},q("SplitView",o,{ms_v:1,ms_fire:1,ms_ac:["continuousLayout","dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_continuousLayout:!1,_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:E5.splitViewDividerSize,_dividerBackground:E5.splitViewDividerBackground,_dragOpacity:E5.splitViewDragOpacity,_toggleIcon:E5.splitViewToggleIcon,onPropertyChanged:function(y){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(y,q){var _=this._position;isNaN(y)||(q||(this._82O=y<0?-1:1<y?1:0),this._position=y,this.fp(lL,_,y))},getLeftView:function(){return this._leftView},setLeftView:function(y){var q,_=this._leftView,s=this._view;this._leftView!==y&&(_&&_!==this._rightView&&(q=wl(_)).parentNode===s&&$8(q),(this._leftView=y)&&(q=wl(y)).parentNode!==s&&s.insertBefore(q,this._dividerDiv),this.fp("leftView",_,y))},getRightView:function(){return this._rightView},setRightView:function(y){var q,_=this._rightView,s=this._view;this._rightView!==y&&(_&&_!==this._leftView&&(q=wl(_)).parentNode===s&&$8(q),(this._rightView=y)&&(q=wl(y)).parentNode!==s&&s.insertBefore(q,this._dividerDiv),this.fp("rightView",_,y))},validateImpl:function(){var y,q,_,s,p=this,O=p._draggable,L=p._position,$=p.getWidth(),k=p.getHeight(),M=p._dividerSize,E=p._dividerBackground,H=v5?18:8,w=p._dividerDiv,Q=p._82O,x=p._60O,S=p._61O,X=p._toggleIcon,T=p._status,i=w.style,N=null,a=v5?20:4,l=X.comps[0],j=(H<=M||0===M?p._coverDiv&&($8(p._coverDiv),delete p._coverDiv):p._coverDiv||(p._coverDiv=zx(),e5&&(p._coverDiv.style.background=AL),gx(w,p._coverDiv)),p._togglable?x.parentNode||(gx(w,x),gx(w,S)):($8(x),$8(S)),p._coverDiv),Z=p._leftView,K=p._rightView;sx(p)?($<M&&(M=$),T===aD?1===Q?(s=s5(L,$),_=_5(0,$-M-s)):-1===Q?(_=s5(-L,$),s=_5(0,$-M-_)):(s=Z5(($-M)*L),_=_5(0,$-M-s)):"cl"===T?_=_5(s=0,$-M):"cr"===T&&(s=_5(_=0,$-M)),Z&&h(Z,0,0,s,k),K&&h(K,s+M,0,_,k),h(w,s,0,M,k),p._22o=s,j&&(h(j,M/2-H/2,0,H,k),j.style.cursor=O?nL:""),w.style.cursor=O?nL:"",_=w.clientHeight/2,s=w.clientWidth,rx(x,s,s),h(x,0,_-s-a,s,s),N=pl(x),Ol(N,0,0,1),l.rotation=-u5,qu(N,X,0,0,s,s),N.restore(),rx(S,s,s),h(S,0,_+a,s,s),N=pl(S),Ol(N,0,0,1),l.rotation=u5):(k<M&&(M=k),T===aD?1===Q?(y=s5(L,k),q=_5(0,k-M-y)):-1===Q?(q=s5(-L,k),y=_5(0,k-M-q)):(y=Z5((k-M)*L),q=_5(0,k-M-y)):"cl"===T?q=_5(y=0,k-M):"cr"===T&&(y=_5(q=0,k-M)),Z&&h(Z,0,0,$,y),K&&h(K,0,y+M,$,q),h(w,0,y,$,M),p._22o=y,j&&(h(j,0,M/2-H/2,$,H),j.style.cursor=O?vL:""),i.cursor=O?vL:"",_=w.clientWidth/2,s=w.clientHeight,rx(x,s,s),h(x,_-s-a,0,s,s),N=pl(x),Ol(N,0,0,1),l.rotation=0,qu(N,X,0,0,s,s),N.restore(),rx(S,s,s),h(S,_+a,0,s,s),N=pl(S),Ol(N,0,0,1),l.rotation=u),qu(N,X,0,0,s,s),N.restore(),i.background=E}}),function(y){this.sv=y,this.addListeners()}),ct=(w8(Dt,o,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(y){var q=this.sv,_=q._dividerDiv,s=q._60O,p=q._61O,O=q._status,L=y.target;L===s?O===aD?q.setStatus("cl"):"cr"===O&&q.setStatus(aD):L===p?O===aD?q.setStatus("cr"):"cl"===O&&q.setStatus(aD):!ll(y)||L!==_&&L!==q._coverDiv||(CA(y),q.isDraggable()&&(q.getLeftView(),q.getRightView(),(s=this.maskDiv=zx()).style.left=0,s.style.top=0,s.style.width=q.getWidth()+"px",s.style.height=q.getHeight()+"px",q.getView().appendChild(s),q.isContinuousLayout()||((p=this.resizeDiv=zx()).style.left=_.style.left,p.style.top=_.style.top,p.style.width=_.style.width,p.style.height=_.style.height,p.style.opacity=q.getDragOpacity(),p.style.background=q.getDividerBackground(),gx(this.getView(),p)),this._lastAbsPosition=q._22o,this._86o=sx(q)?gA(y).x:gA(y).y,L8(this,y)))},handleWindowTouchMove:function(y){ll(y)&&this.update(y,this.sv.isContinuousLayout())},handleWindowTouchEnd:function(y){this.update(y,!0),this.sv.setStatus(aD),this.maskDiv&&$8(this.maskDiv),this.resizeDiv&&$8(this.resizeDiv),this.maskDiv=this.resizeDiv=M5},handle_mousedown:function(y){WA(y)&&this.handle_touchstart(y)},handleWindowMouseMove:function(y){this.handleWindowTouchMove(y)},handleWindowMouseUp:function(y){this.handleWindowTouchEnd(y)},update:function(y,q){var _=this.sv,s=sx(_)?_.getWidth():_.getHeight(),p=_._dividerSize,O=this._lastAbsPosition-this._86o;sx(_)?((O=s-p<(O+=gA(y).x)?s-p:O)<0&&(O=0),this.resizeDiv&&(this.resizeDiv.style.left=O+wD)):((O=s-p<(O+=gA(y).y)?s-p:O)<0&&(O=0),this.resizeDiv&&(this.resizeDiv.style.top=O+wD)),q&&s!==p&&(1===_._82O?_.setPosition(O,1):-1===_._82O?_.setPosition(O-s+p,1):_.setPosition(O/(s-p),1))}}),ht.TabView=function(){var y=this,q=y._view=Ax(1,y),_=y._91O=zx(1),s=y._tabModel=new Nu,p=s.sm(),O=y.invalidate;y._7o=new n,y._canvas=ex(_),gx(q,_),gx(q,y._92O=zx(1)),p.setSelectionMode(I5),p.ms(y.handleSelectionChange,y),s.mm(O,y),s.mh(O,y),s.md(O,y),y._interactor=new ct(y),y.iv()},q("TabView",o,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",WD,mD,"tabHPadding","tabBackground","selectWidth",Y5,"moveBackground","insertColor"],_tabHPadding:0,_tabPosition:sD,_tabHeight:SA,_tabGap:E5.tabViewTabGap,_labelColor:E5.tabViewLabelColor,_labelFont:E5.tabViewLabelFont,_tabBackground:E5.tabViewTabBackground,_selectWidth:E5.tabViewSelectWidth,_selectBackground:E5.tabViewSelectBackground,_moveBackground:E5.tabViewMoveBackground,_insertColor:E5.tabViewInsertColor,_movable:!0,handleSelectionChange:function(){this._selectionChanged=!0,this.invalidate()},getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(y,q,_){var s,p=this._tabModel;return y instanceof tt?(s=y,q&&s.setView(q)):((s=new tt).setName(y),s.setView(q)),p.add(s),_&&p.sm().ss(s),s},getLabel:function(y){return y.toLabel()},onPropertyChanged:function(y){this.iv()},_7Q:function(y){this._23o=y,this.iv()},get:function(q){var _,s=this,y=s._tabModel;return $x(q)?y._roots.get(q):w5(q)?(y.each(function(y){q===s.getLabel(y)&&(_=y)}),_):q instanceof tt?q:M5},select:function(y){this._tabModel.sm().ss(this.get(y))},remove:function(y){var q;(y=this.get(y))&&(q=this._tabModel._roots.indexOf(y),this._tabModel.remove(y),this.selectByIndex(--q))},getCurrentTab:function(){return this._8o},hideTabView:function(y,q){q.parentNode===this._92O&&(Tx(q)?(q.style.display=HD,q._tab_=y):$8(q),$A())},showTabView:function(y,q){Tx(q)&&(q.style.display="block",q._tab_=y),q.parentNode!==this._92O&&(gx(this._92O,q),$A())},_24o:function(){var y,q=this._8o,_=this._9o,s=this._tabModel.sm().ld();(y=s?wl(s.getView()):y)!==_&&(_&&(q.getView()&&q.getView().endEditing&&q.getView().endEditing(),this.hideTabView(q,_)),y&&this.showTabView(s,y)),this._8o=s,this._9o=y,q!==s&&this.onTabChanged(q,s)},onTabClosing:function(y){return!0},onTabChanged:function(y,q){},onTabClosed:function(y,q){this.selectByIndex(--q)},selectByIndex:function(y){var q=this._tabModel,_=q.size();if(_&&!q.sm().ld()){for(var s=y=(y=_<=(y=y==M5?0:y)?_-1:y)<0?0:y;0<=s;s--){var p=this.get(s);if(!p.isDisabled())return this.select(p),p}for(s=y+1;s<_;s++)if(!(p=this.get(s)).isDisabled())return this.select(p),p}},getTabWidth:function(y){var q=4+2*this.getTabHPadding(),_=r(y.getIcon());return _&&(q+=d8(_,y)+4),(_=this.getLabel(y))&&(q+=mA(this.getLabelFont(y),_).width+4),y.isClosable()&&(q+=10),q},drawTab:function(y,q,_,s,p,O,L){var $,k=this._tabPosition,M=_+4+(N=this.getTabHPadding()),E=this._selectWidth,H=r(q.getIcon()),w=q.isDisabled(),Q=this.getLabelColor(q),x=this.getLabelFont(q),S=this.getLabel(q),X=this._selectBackground,T=k===qD+"-vertical",i=k===_D+"-vertical",N=((T||i)&&(M=s+4+N),w&&(y.globalAlpha=qA),dl(y,_,s,p,O,L),q===this._8o&&E&&(k===sD?dl(y,_,s+O-E,p,E,X):k===qD?dl(y,_+p-E,s,E,O,X):k===_D?dl(y,_,s,E,O,X):T?dl(y,_+p-E,s,E,O,X):i?dl(y,_,s,E,O,X):dl(y,_,s,p,E,X)),p/2);return T&&(Ll(y,N,s+O/2),$l(y,u),Ll(y,-N,-s-O/2)),H&&(L=yu(H,q),k=d8(H,q),T||i?(Ll(y,E=_+p/2,X=M+L/2),$l(y,u5),Ll(y,-E,-X),FA(y,H,_+p/2,M+L/2,q,this),Ll(y,E,X),$l(y,-u5),Ll(y,-E,-X),M+=L+4):(FA(y,H,M+k/2,s+O/2,q,this),M+=k+4)),T||i?(Ll(y,p/2,M+p/2),$l(y,u5),Ll(y,-p/2,-M-p/2),PA(y,S,x,Q,_,M,O,p),Ll(y,p/2,M+p/2),$l(y,-u5),Ll(y,-p/2,-M-p/2)):PA(y,S,x,Q,M,s,p,O),T&&(Ll(y,N,s+O/2),$l(y,-u),Ll(y,-N,-s-O/2)),q.isClosable()&&this.drawCloseIcon(q,y,Q,$=i?{x:_+p-12,y:s+O-12,width:12,height:12}:{x:_+p-12,y:s+2,width:12,height:12}),w&&(y.globalAlpha=1),$},drawCloseIcon:function(y,q,_,s){var p=s.x,s=s.y;q.strokeStyle=_,q.lineWidth=1,q.beginPath(),q.moveTo(p+2,s+8),q.lineTo(p+8,s+2),q.moveTo(p+8,s+8),q.lineTo(p+2,s+2),q.stroke()},getTabAt:function(y){return(y=this._interactor._8Q(y))?y.tab:null},validateImpl:function(){var s=this,y=(s._24o(),s._canvas),q=s._tabPosition,_=s._91O,p=s._92O,O=s._tabModel,L=s.getWidth(),$=s.getHeight(),k=s._tabHeight,M=s._7o,E=s._tabGap,H=q===sD,w=q===qD,Q=q===_D,x=q===qD+"-vertical",q=q===_D+"-vertical",S=s._23o,X=0;if((w||Q)&&O._roots.each(function(y){X=_5(s.getTabWidth(y),X)}),H=H?(h(_,0,0,L,k),{x:0,y:k,width:L,height:_5(0,$-k)}):w?(h(_,0,0,X,$),{x:X,y:0,width:_5(0,L-X),height:$}):Q?(h(_,L-X,0,X,$),{x:0,y:0,width:_5(0,L-X),height:$}):x?(h(_,0,0,k,$),{x:k,y:0,width:_5(0,L-k),height:$}):q?(h(_,L-k,0,k,$),{x:0,y:0,width:_5(0,L-k),height:$}):(h(_,0,$-k,L,k),{x:0,y:0,width:L,height:_5(0,$-k)}),h(p,H),x||q){s._9o&&(H.x=0,h(s._8o.getView(),H)),rx(y,k,$);var T=pl(y),i=0;if(Ol(T,0,s.ty(),1),T.clearRect(0,0,k,$),M.clear(),O._roots.each(function(y){var q,_;y.isVisible()&&(q=s.getTabWidth(y),S&&S.tab===y||(_=s.getTabBackground(y),_=s.drawTab(T,y,0,i,k,q,_)),M.add({_75o:_,tab:y,startY:i,endY:i+q,height:q}),i+=q+E)}),s._23Q=_5(0,i-E),S&&(l=S.position,s.drawTab(T,S.tab,0,S.startY,k,S.height,s._moveBackground),dl(T,0,l,k,1,s._insertColor)),T.restore(),s._selectionChanged){s._selectionChanged=!1;for(var N=s.ty(),a=0;a<M.size();a++)if((Z=M.get(a)).tab===s._8o){if(Z.endY+N<0){s.ty(-Z.startY);break}if(Z.startY+N>$){s.ty($-Z.endY);break}}}s.ty(s.ty())}else if(w||Q){if(s._9o&&(H.x=0,h(s._8o.getView(),H)),rx(y,X,$),T=pl(y),Ol(T,i=0,s.ty(),1),T.clearRect(0,0,X,$),M.clear(),O._roots.each(function(y){var q;y.isVisible()&&(S&&S.tab===y||(q=s.getTabBackground(y),q=s.drawTab(T,y,0,i,X,k,q)),M.add({_75o:q,tab:y,startY:i,endY:i+k,height:k}),i+=k+E)}),s._23Q=_5(0,i-E),S&&(l=S.position,s.drawTab(T,S.tab,0,S.startY,X,S.height,s._moveBackground),dl(T,0,l,X,1,s._insertColor)),T.restore(),s._selectionChanged)for(s._selectionChanged=!1,N=s.ty(),a=0;a<M.size();a++)if((Z=M.get(a)).tab===s._8o){if(Z.endY+N<0){s.ty(-Z.startY);break}if(Z.startY+N>$){s.ty($-Z.endY);break}}s.ty(s.ty())}else{s._9o&&(H.y=0,h(s._8o.getView(),H)),rx(y,L,k);var l,T=pl(y),j=0;if(Ol(T,s.tx(),0,1),T.clearRect(0,0,L,k),M.clear(),O._roots.each(function(y){var q,_;y.isVisible()&&(q=s.getTabWidth(y),S&&S.tab===y||(_=s.getTabBackground(y),_=s.drawTab(T,y,j,0,q,k,_)),M.add({_75o:_,tab:y,startX:j,endX:j+q,width:q}),j+=q+E)}),s._64I=_5(0,j-E),S&&(l=S.position,s.drawTab(T,S.tab,S.startX,0,S.width,k,s._moveBackground),Rx(T,s._insertColor,l,0,k)),T.restore(),s._selectionChanged){s._selectionChanged=!1;for(var Z,K=s.tx(),a=0;a<M.size();a++)if((Z=M.get(a)).tab===s._8o){if(Z.endX+K<0){s.tx(-Z.startX);break}if(Z.startX+K>L){s.tx(L-Z.endX);break}}}s.tx(s.tx())}for(var C=[],B=p.children,a=0;a<B.length;a++){var F=B[a],V=F._tab_;V&&!O.contains(V)&&C.push(F)}C.forEach(function(y){p.removeChild(y)})}}),function(y){this.tv=y,this.addListeners()}),Rt=(w8(ct,o,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(y){this.handleScroll(y,y.wheelDelta/40*10)},handle_DOMMouseScroll:function(y){this.handleScroll(y,10*-y.detail)},handleScroll:function(y,q){CA(y);var _=(y=this.tv)._tabPosition;!y._40o()||_!==sD&&_!==pD||y.tx(this.tv.tx()+q),!y._41o()||_!==qD&&_!==_D&&_!==qD+"-vertical"&&_!==_D+"-vertical"||y.ty(this.tv.ty()+q)},_8Q:function(y){var q,_=this.tv,s=_._tabPosition,p=_._7o;if(s===sD||s===pD){for(var O=_.lp(y).x,L=0;L<p.size();L++)if((q=p.get(L)).startX<=O&&O<=q.endX)return q}else if(s===qD||s===_D||s===qD+"-vertical"||s===_D+"-vertical")for(var $=_.lp(y).y,L=0;L<p.size();L++)if((q=p.get(L)).startY<=$&&$<=q.endY)return q;return M5},isClickable:function(y){var q=this.tv,_=q._tabPosition,y=this._73o=this._8Q(y);return!(!q._40o()||_!==sD&&_!==pD)||!(!q._41o()||_!==qD&&_!==_D&&_!==qD+"-vertical"&&_!==_D+"-vertical")||y&&(!y.tab.isDisabled()||q.isMovable())},handle_mousemove:function(y){Xl?this._74o=this._8Q(y):this.getView().style.cursor=this.isClickable(y)?bL:""},handle_mousedown:function(y){this.handle_mousemove(y),this.handle_touchstart(y)},handle_touchstart:function(y){var q=this.tv,_=q._tabPosition;CA(y),WA(y)&&this.isClickable(y)&&(_===sD||_===pD?(this.x=gA(y).x,this.lp=q.lp(y),this.tx=q.tx()):(this.y=gA(y).y,this.lp=q.lp(y),this.ty=q.ty()),L8(this,y))},handle_mouseup:function(y){this.handle_touchend(y)},handle_touchend:function(y){var q,_,s;AA(y)&&(y=this._73o)&&(q=this.tv,_=q.getTabModel(),!(s=y.tab).isDisabled()&&s.isClosable()&&q.onTabClosing(s,y=function(){var y=_._roots.indexOf(s);_.remove(s),q.onTabClosed(s,y)})&&y())},handleWindowMouseMove:function(y){this.handleWindowTouchMove(y)},handleWindowTouchMove:function(y){var s,p,O,L,q=this,$=q.tv,_=$._tabPosition,k=q._73o;_===sD||_===pD?(p=gA(y).x-q.x,!q._25o&&!q.moving&&2<F5(p)&&($._40o()&&!rA(y)?q._25o=1:k&&$.isMovable()&&(q.moving=1)),q._25o?$.tx(q.tx+p):q.moving&&(s=q.lp.x+p,L=$._tabGap/2,$._7o.each(function(y){var q=y.endX,_=s-y.startX<q-s;s>=y.startX&&s<=q&&$._7Q({tab:k.tab,startX:k.startX+p,width:k.width,front:_,insertTab:y.tab,position:_?_5(0,y.startX-L):s5($._64I,q+L)})}))):(p=gA(y).y-q.y,!q._25o&&!q.moving&&2<F5(p)&&($._41o()&&!rA(y)?q._25o=1:k&&$.isMovable()&&(q.moving=1)),q._25o?$.ty(q.ty+p):q.moving&&(O=q.lp.y+p,L=$._tabGap/2,$._7o.each(function(y){var q=y.endY,_=O-y.startY<q-O;O>=y.startY&&O<=q&&$._7Q({tab:k.tab,startY:k.startY+p,height:k.height,front:_,insertTab:y.tab,position:_?_5(0,y.startY-L):s5($._23Q,q+L)})})))},handleWindowMouseUp:function(y){this.handleWindowTouchEnd(y)},handleWindowTouchEnd:function(y){var q,_,s,p,O=this,L=O.tv,$=L._tabPosition,k=L.getTabModel(),M=k._roots,E=O._73o;O.moving?((s=L._23o)&&s.insertTab!==s.tab&&(_=s.tab,p=M.remove(_),0<=(q=M.indexOf(s.insertTab))&&(s.front||q++,q<=M.size()&&(M.add(_,q),k._38I(_,p,q)))),L._7Q(M5),delete O.moving):!O._25o&&E&&(_=E.tab,(s=O._74o)&&s.tab!==_||(!_.isDisabled()&&UA(E._75o,O.lp)?L.onTabClosing(_,p=function(){var y=M.indexOf(_);k.remove(_),L.onTabClosed(_,y)})&&p():_.isDisabled()||L._8o===_||k.sm().ss(_))),O._25o=O._73o=O._74o=$===sD||$===pD?O.x=O.lp=O.tx=M5:O.y=O.lp=O.ty=M5}}),ht.PropertyView=function(y){var q=this,_=(q._view=Ax(1,q),q._canvas=ex(q._view),gx(q._view,q._79O=zx()),q._rows=new n,q._28o=new n,q._26o={},q._26Q={},q._propertyModel=new Nu),s=q.ivm;_.mm(s,q),_.md(s,q),_.mh(s,q),q.dm(y||new Nu),new Rt(q)},q("PropertyView",o,{ms_ac:[WD,AD,mD,XL,TL,"categorizable",OL,SL,HL,wL,QL,sL,pL,_L,"selectRowIndex",Y5,"background",LL,EL,kL,ML,$L],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:fn,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:QA,_background:E5.propertyViewBackground,_expandIcon:E5.propertyViewExpandIcon,_collapseIcon:E5.propertyViewCollapseIcon,_scrollBarColor:AU,_scrollBarSize:X,_autoHideScrollBar:pA,_selectBackground:E5.propertyViewSelectBackground,_rowHeight:WU,_rowLineVisible:E5.propertyViewRowLineVisible,_rowLineColor:E5.propertyViewRowLineColor,_10I:.5,_columnLineVisible:E5.propertyViewColumnLineVisible,_columnLineColor:E5.propertyViewColumnLineColor,_labelColor:E5.propertyViewLabelColor,_labelSelectColor:E5.propertyViewLabelSelectColor,_labelFont:E5.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(y){var q=this._10I;this._10I=y=1<(y=y<0?0:y)?1:y,this.fp("columnPosition",q,y)},getPropertyName:function(y){return y.toLabel()},getLabelFont:function(y,q,_){return this._labelFont},getLabelColor:function(y,q,_){return _===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(y,q){return this._labelFont},getPropertyColor:function(y,q){return q===this._selectRowIndex?this._labelSelectColor:y.getColor()||this._labelColor},getCategoryFont:function(y){return this._labelFont},getCategoryColor:function(y){return this._labelColor},adjustTranslateX:function(y){return 0},adjustTranslateY:function(y){var q=this.getHeight()-this._59I;return 0<(y=y<q?q:y)?0:Z5(y)},isExpanded:function(y){if(!y)return!0;var q=this._26o[y];return q?q.isExpanded:!(!1===this._26Q[y])},toggle:function(y){this.isExpanded(y)?this.collapse(y):this.expand(y)},expandAll:function(){for(var y in this.validate(),this._26o)this.expand(y)},expand:function(y){var q;y&&y!==HD&&(q=this._26o[y])&&!q.isExpanded&&(q.isExpanded=!0,this.onExpanded(y),this.ivm())},onExpanded:function(y){},collapseAll:function(){for(var y in this.validate(),this._26o)this.collapse(y)},collapse:function(y){var q;y&&y!==HD&&(q=this._26o[y])&&q.isExpanded&&(q.isExpanded=!1,this.onCollapsed(y),this.ivm())},onCollapsed:function(y){},getCategoryName:function(y){return this.isCategorizable()&&(y=y.getCategoryName())||HD},getPropertyModel:function(){return this._propertyModel},handleSelectionChange:function(){this.ivm()},setDataModel:function(y){var q=this,_=q._dataModel;_!==y&&(_&&(_.umd(q.handlePropertyChange,q),q._selectionModel||_.sm().ums(q.handleSelectionChange,q)),(q._dataModel=y).md(q.handlePropertyChange,q),q._selectionModel?q._selectionModel._21I(y):y.sm().ms(q.handleSelectionChange,q),q.fp(BL,_,y))},isVisible:function(y){return!this._visibleFunc||this._visibleFunc(y)},onPropertyChanged:function(y){y=y.property,Kt[y]?this.ivm():this.iv(),y===CL&&this._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:Xu},handlePropertyChange:function(y){this._27o===y.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){this._96I||(this.setSelectRowIndex(-1),this._96I=1,this.iv())},redraw:function(){this.iv()},validateModel:function(){var y,s=this,p=s._rows,q=s._28o,O={},L=new n,_=s._27o;for(y in s.updateCurrentData(),_!==s._27o&&s.endEditing(),p.clear(),q.clear(),s.getRawProperties().each(function(y){s.isVisible(y)&&(L.add(y),y=s.getCategoryName(y),O[y]||(q.add(y,y===HD?0:k5),O[y]={isExpanded:s.isExpanded(y),properties:new n}))}),s._sortFunc&&L.sort(s._sortFunc),s._26o)s._26Q[y]=s.isExpanded(y);s._26o=O,q.each(function(q){q!==HD&&p.add(q);var _=O[q];_.isExpanded&&L.each(function(y){s.getCategoryName(y)===q&&(_.properties.add(y),p.add({property:y,data:s._27o}))},s)})},validateImpl:function(){var y=this,q=(y._76o(),y._96I&&(y.validateModel(),delete y._96I),y._canvas),_=y.getWidth(),s=y.getHeight(),p=-y.ty(),O=y._rowHeight,L=y._indent,$=_-L,k=y._rows,M=k.size(),E=y._9I=L+$*y._10I,H=y._59I=M*O,w=(rx(q,_,s),y._29I={x:0,y:p,width:_,height:s},y._31I=K5(p/O),y._14I=C5((p+s)/O),y._31I<0&&(y._31I=0),y._14I>M&&(y._14I=M),pl(q)),Q=y._background;Ol(w,0,-p,1),w.beginPath(),w.rect(0,p,_,s),w.clip(),w.clearRect(0,p,_,s),y._93db(w),Q&&dl(w,0,0,L,H,Q);for(var x=y._31I;x<y._14I;x++){var S,X,T,i,N=k.get(x),p=O*x;w5(N)?(Q&&dl(w,L,p,$,O,Q),(X=r(y.isExpanded(N)?y._expandIcon:y._collapseIcon))&&VA(w,X,mL,0,p,L,O),w.save(),w.beginPath(),w.rect(L,p,$,O),w.clip(),y.drawCategoryName(w,N,x,L,p,$,O),w.restore()):(S=N.property,N=N.data,X=r(S.getIcon()),T=y._selectRowIndex===x?y.getSelectBackground():M5,X&&VA(w,X,mL,0,p,L,O),T&&dl(w,L,p,$,O,T),w.save(),w.beginPath(),w.rect(L,p,E-L,O),w.clip(),y.drawPropertyName(w,S,x,L,p,E-L,O),w.restore(),y.isEditing(N,S)||(T=E+1,i=_-E-1,w.save(),w.beginPath(),w.rect(T,p,i,O),w.clip(),y._87o(y.drawPropertyValue(w,S,y.getValue(N,S),x,T,p,i,O,N),x,T,p,i,O),w.restore())),y._rowLineVisible&&dl(w,L,p+O-1,$,1,y._rowLineColor)}y._columnLineVisible&&(dl(w,E,0,1,H,y._columnLineColor),dl(w,_-1,0,1,H)),y._92db(w),y._93I(),w.restore(),y.ty(y.ty())},drawCategoryName:function(y,q,_,s,p,O,L){PA(y,q,this.getCategoryFont(q),this.getCategoryColor(q),s,p,O,L)},drawPropertyName:function(y,q,_,s,p,O,L){q.drawPropertyName?q.drawPropertyName(y,q,_,s,p,O,L,this):PA(y,this.getPropertyName(q),this.getPropertyFont(q,_),this.getPropertyColor(q,_),s,p,O,L)},drawPropertyValue:function(y,q,_,s,p,O,L,$,k){if(q.drawPropertyValue)return q.drawPropertyValue(y,q,_,s,p,O,L,$,k,this);Bt(y,_,q,this.getLabelFont(q,_,s),this.getLabelColor(q,_,s),p,O,L,$,k,this)},isPropertyEditable:function(y,q){return y.isEditable()&&this.isEditable()},setProperties:function(y){this._propertyModel.clear(),this.addProperties(y)},addProperties:function(y){var _;y&&(_=this._propertyModel,y.forEach(function(y){var q;y instanceof Jt||(q=cA(y.className),y=KA(q||Jt,y)),_.add(y)}))},getRowIndexAt:function(y){return 0<=(y=K5(this.lp(y).y/this._rowHeight))&&y<this._rows.size()?y:-1},getPropertyAt:function(y){return 0<=(y=this.getRowIndexAt(y))?this._rows.get(y).property:M5},getToolTip:function(y){var q=this.getPropertyAt(y),_=this._27o;return q&&_?q.getToolTip(_,this._9I<this.lp(y).x,this):M5}}),function(y){this.pv=y,this.addListeners()}),ot=(w8(Rt,o,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(y){this.getView().style.cursor=y},clear:function(){this._62O=this.cp=this.ty=this.p=M5,this.setCursor(b5)},handle_mousedown:function(y){this.handle_touchstart(y)},handle_touchstart:function(y){var q=this.pv;CA(y),q.setFocus(y)&&(WA(y)?(this.cp=gA(y),this.ty=q.ty(),this.p=q.getColumnPosition(),this.handle_touchmove(y)):q.setSelectRowIndex(q.getRowIndexAt(y)))},handleWindowMouseUp:function(y){this.clear()},handleWindowTouchEnd:function(y){this.clear()},handle_mouseup:function(y){this.handle_touchend(y)},handle_touchend:function(y){var q,_,s,p,O,L,$,k,M,E;this.cp&&!this._62O&&(M=(k=(q=this.pv).lp(y)).x,k=k.y,$=q._indent,_=q.getRowIndexAt(y),s=q._9I,0<=_&&(E=(p=q._rowHeight)*_,L=(O=q._rows.get(_)).property,w5(O)?(r(q.isExpanded(O)?q._expandIcon:q._collapseIcon)&&0<=M&&M<=$&&E<=k&&k<=E+p||fA(y))&&q.toggle(O):s<M&&q.isPropertyEditable(L,y)&&(k={x:($={x:s+1,y:E,width:q.getWidth()-s-1,height:p}).x+q.tx(),y:$.y+q.ty(),width:$.width,height:$.height},M=0,E=q._29I,$.y<E.y?M=$.y-E.y:$.y+p>E.y+E.height&&(M=$.y+p-E.y-E.height),M&&(q.ty(q.ty()-M),k.y-=M),q.beginEditing({data:O.data,property:L,value:q.getValue(O.data,L),event:y,rect:$,editorRect:k,view:q}))),q.setSelectRowIndex(_)),this.clear()},handleWindowMouseMove:function(y){this.handleWindowTouchMove(y)},handleWindowTouchMove:function(y){var q,_,s=this.pv,p=this.ty,O=this.cp,y=gA(y),L=this._62O;"p"===L?s.setTranslateY(p+y.y-O.y):"c"===L?16<(_=s.getWidth()-s._indent)&&(q=this.p-(O.x-y.x)/_,s.setColumnPosition(q=1-(_=16/_)<(q=q<_?_:q)?1-_:q)):"s"===L&&s.setTranslateY(p+(O.y-y.y)*s._59I/s._29I.height)},handle_mousemove:function(y){this.handle_touchmove(y)},handle_touchmove:function(y){var q,_,s;!Xl&&WA(y)&&(_=(q=this).pv,s=F5(_.lp(y).x-_._9I)<=(v5?8:3),q.cp?q._62O||(s?(q._62O="c",L8(q,y)):2<=F5(gA(y).y-q.cp.y)&&(q._62O=q.isV(y)?"s":"p",L8(q,y))):(s?q.setCursor(nL):q.setCursor(b5),q.isV(y)&&_._43o()))},isV:function(y){var q=this.pv,_=q._29I;return q._41o()&&_.x+_.width-q.lp(y).x<iA},handle_mousewheel:function(y){this.handleScroll(y,y.wheelDelta/40)},handle_DOMMouseScroll:function(y){2===y.axis&&this.handleScroll(y,-y.detail)},handleScroll:function(y,q){var _=this.pv;CA(y),_.endEditing(),_.translate(0,q*_.getRowHeight())},handle_keydown:function(y){var q=this.pv,_=q._rows.size(),s=q._selectRowIndex+(tl(y)?-1:1);(tl(y)||Jl(y))&&q.setSelectRowIndex(s=_<=(s=s<0?0:s)?_-1:s)}}),ht.ListView=function(y){this._5o(y),new ot(this)},q("ListView",o,{ms_ac:[WD,AD,mD,LL,OL,EL,kL,SL,HL,sL,pL,_L,qL,Y5],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:QA,_rowHeight:WU,_rowLineVisible:E5.listViewRowLineVisible,_rowLineColor:E5.listViewRowLineColor,_scrollBarColor:AU,_scrollBarSize:X,_autoMakeVisible:fU,_autoHideScrollBar:pA,_selectBackground:E5.listViewSelectBackground,_labelColor:E5.listViewLabelColor,_labelSelectColor:E5.listViewLabelSelectColor,_labelFont:E5.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(y){var q=this._checkMode;this._checkMode=y,this.fp(xL,q,y)},drawRow:function(y,q,_,s,p,O,L){var $=0,k=this._indent,M=this.getIconWidth(q);this.drawRowBackground(y,q,_,s,p,O,L),this._checkMode&&(FA(y,r(this.getCheckIcon(q)),$+k/2,p+L/2,q,this),$+=k),this.drawIcon(y,q,$,p,M,L),this.drawLabel(y,q,$+M,p,L)}}),function(y){this.list=y,this.addListeners()}),Yt=(w8(ot,o,{ms_listener:1,getView:function(){return this.list._view},clear:function(y){var q=this,_=q.list;y&&"d"===q._62O&&!q.dragCancel&&_.handleDragAndDrop(y,"end"),_.draggingData&&(_.draggingData=null,_.redraw()),q.dragCancel=q._62O=q._isV=q._isH=q.cp=q.tx=q.ty=M5},handle_mousedown:function(y){this.handle_touchstart(y)},handle_touchstart:function(y){var q,_=this.list;CA(y),_.setFocus(y)&&(q=_.getDataAt(y),this.cp=gA(y),this.tx=_.tx(),this.ty=_.ty(),WA(y)?q&&_.handleDragAndDrop&&!this.isV(y)&&!this.isH(y)&&_.isDraggable(q)&&(_.draggingData=q,_.redraw(),_.handleDragAndDrop(y,"prepare")):(q?this._33o(y,q):this._cancelDataDoubleSelect(),this.clear(y)))},handleWindowMouseUp:function(y){this.clear(y)},handleWindowTouchEnd:function(y){this.clear(y)},handle_mouseup:function(y){this.handle_touchend(y)},handle_touchend:function(y){var q,_=this.list;this._isV||this._isH||!this.cp||this._62O||((q=_.getDataAt(y))?(_.isCheckMode()?this._34o(y,q):this._33o(y,q),fA(y)?_.onDataDoubleClicked(q,y):_.onDataClicked(q,y)):(this._cancelDataDoubleSelect(),_.handleBackgroundClick(y))),this.clear(y)},handleWindowMouseMove:function(y){this.handleWindowTouchMove(y)},handleWindowTouchMove:function(y){var q=this.list,_=this._62O,s=this.tx,p=this.ty,O=this.cp,L=gA(y),$=q._29I;"p"===_?q.setTranslate(s+L.x-O.x,p+L.y-O.y):"v"===_?q.ty(p+(O.y-L.y)*q._59I/$.height):"h"===_?q.tx(s+(O.x-L.x)*q._91I/$.width):"d"!==_||this.dragCancel||q.handleDragAndDrop(y,"between")},handle_mousemove:function(y){this.handle_touchmove(y)},handle_touchmove:function(y){var q,_;!Xl&&WA(y)&&(_=(q=this).list,q._isV=q.isV(y),q._isH=q.isH(y),q.cp?q._62O||vA(gA(y),q.cp)<2||(q._isV?q._62O="v":q._isH?q._62O="h":_.draggingData&&!this.dragCancel?(q._62O="d",_.handleDragAndDrop(y,"begin")):q._62O="p",q._62O&&"d"!==q._62O&&_.draggingData&&(_.draggingData=null,_.redraw()),L8(q,y)):(q._isV&&_._43o(),q._isH&&_._42o()))},isV:function(y){var q=this.list,_=q._29I;return q._41o()&&_.x+_.width-q.lp(y).x<iA},isH:function(y){var q=this.list,_=q._29I;return q._40o()&&_.y+_.height-q.lp(y).y<iA},handle_mousewheel:function(y){this.handleScroll(y,y.wheelDelta/40,y.wheelDelta!==y.wheelDeltaX)},handle_DOMMouseScroll:function(y){this.handleScroll(y,-y.detail,1)},handleScroll:function(y,q,_){var s=this.list;CA(y),s.endEditing&&s.endEditing(),_&&s._41o()?s.translate(0,q*s.getRowHeight()):s._40o()&&s.translate(10*q,0)},handle_keydown:function(y){var q,_,s,p,O,L,$;E5.isInput(y.target)||(_=(q=this.list).sm(),p=(s=q._rows).size(),Zl(y)?q.selectAll():Kl(y)?q.handleDelete&&q.handleDelete(y):Rl(y)?"d"!==this._62O||this.dragCancel||(q.handleDragAndDrop(y,"cancel"),this.dragCancel=!0):Dl(y)?q.isCheckMode()&&($=q.getFocusData())&&q.checkData($):(tl(y)||Jl(y))&&(($=(O=q.isCheckMode())?q.getFocusData():_.ld())?0<=(L=q.getRowIndex($))&&(tl(y)?0!==L&&($=s.get(L-1),O?q.setFocusData($):_.ss($)):L!==p-1&&($=s.get(L+1),O?q.setFocusData($):_.ss($))):0<p&&($=s.get(0),O?q.setFocusData($):_.ss($))))},_34o:function(y,q){var _=this.list;0<=(y=_.lp(y).x)&&y<=_._indent?_.checkData(q):_.setFocusData(q)},_33o:function(y,q){var _=this.list,s=_.sm(),p=s.ld();if(_.canHandleSelectMode(y,q))if(rA(y))_.isSelected(q)?s.rs(q):s.as(q);else if(GA(y))if(p)for(var O=_.getRowIndex(p),L=_.getRowIndex(q);O!==L;)s.as(_._rows.get(O+=O<L?1:-1));else s.ss(q);else WA(y)?(s.contains(q)?_.handleDataDoubleSelect&&(this._handleDataDoubleSelect(y,q),fA(y)&&this._cancelDataDoubleSelect()):this._cancelDataDoubleSelect(),s.ss(q)):s.contains(q)||s.ss(q);else this._cancelDataDoubleSelect()},_handleDataDoubleSelect:function(y,q){this._cancelDataDoubleSelect(),this._doubleSelectTimer=m5(function(){this.list.handleDataDoubleSelect(y,q),this._doubleSelectTimer=k5}.bind(this),E5.doubleClickSpeed)},_cancelDataDoubleSelect:function(){this._doubleSelectTimer&&(W5(this._doubleSelectTimer),this._doubleSelectTimer=k5)}}),ht.TreeView=function(y){this._35o(),this._5o(y),new Yt(this)},q("TreeView",o,{ms_ac:[WD,AD,mD,"rootVisible",xL,"rootData",SL,HL,sL,pL,_L,OL,LL,EL,kL,wL,QL,qL,Y5,"loader","doubleClickToToggle"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:M5,_indent:QA,_rowHeight:WU,_rowLineVisible:E5.treeViewRowLineVisible,_rowLineColor:E5.treeViewRowLineColor,_scrollBarColor:AU,_scrollBarSize:X,_autoHideScrollBar:pA,_expandIcon:E5.treeViewExpandIcon,_collapseIcon:E5.treeViewCollapseIcon,_autoMakeVisible:fU,_selectBackground:E5.treeViewSelectBackground,_labelColor:E5.treeViewLabelColor,_labelSelectColor:E5.treeViewLabelSelectColor,_labelFont:E5.treeViewLabelFont,_doubleClickToToggle:E5.treeViewDoubleClickToToggle,drawRow:function(y,q,_,s,p,O,L){this.drawRowBackground(y,q,_,s,p,O,L),this.drawTree(y,q,_,0,p,O,L)},isOnToggleIcon:function(y){var q=this.getDataAt(y);if(q){var _=this.getIndent(),y=this.lp(y).x;if(r(this.getToggleIcon(q))&&(q=_*this.getLevel(q))<=y&&y<=q+_)return!0}return!1}}),function(y){Kx(Yt,this,[y])}),Pt=(w8(Yt,ot,{toggle:function(y,q,_,s){var p=this.list,O=p.lp(y).x;return r(p.getToggleIcon(q))&&(s*=_)<=O&&O<=s+_?(p.toggle(q),!0):!(!p.isDoubleClickToToggle()||!fA(y)||(p.toggle(q),0))},_34o:function(y,q){var _=this.list,s=_.lp(y).x,p=_._levelMap[q._id],O=_._indent,L=O*(p+1);L<=s&&s<=L+O?_.checkData(q):this.toggle(y,q,O,p)||_.setFocusData(q)},_33o:function(y,q){var _=this.list;if(!this.toggle(y,q,_._indent,_.getLevel(q)))if(GA(y)){var s=_.sm();if(0<s.size()){for(var p=_._rows,O=null,L=0,$=p.size();L<$;L++)if(_.isSelected(p.get(L))){O=L;break}for(var k=null,L=p.size()-1;0<=L;L--)if(_.isSelected(p.get(L))){k=L;break}for(var M,E=_.getRowIndex(q),H=E<O?(M=E-1,O):k<E?(M=k,E):(M=O,k);M!==H;)s.as(_._rows.get(++M))}else s.ss(q)}else Yt.superClass._33o.call(this,y,q)},handle_keydown:function(y){var q,_,s,p,O;hl(y)||ul(y)?(_=(q=this.list)._rows,s=q.isCheckMode(),p=q.sm(),(O=s?q.getFocusData():p.ld())?O.hasChildren()&&(hl(y)?q.collapse(O):q.expand(O)):0<_.size()&&(O=_.get(0),s?q.setFocusData(O):p.ss(O))):Yt.superClass.handle_keydown.call(this,y)}}),ht.TableView=function(y){this._98I(),this._5o(y),new mt(this)}),mt=(q("TableView",o,{ms_ac:[WD,AD,mD,"sortMode",XL,TL,LL,EL,kL,ML,$L,"sortColumn",SL,HL,sL,pL,_L,qL,Y5],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:iL,_editable:!0,_batchEditable:!1,_rowHeight:WU,_rowLineVisible:E5.tableViewRowLineVisible,_rowLineColor:E5.tableViewRowLineColor,_columnLineVisible:E5.tableViewColumnLineVisible,_columnLineColor:E5.tableViewColumnLineColor,_scrollBarColor:AU,_scrollBarSize:X,_autoHideScrollBar:pA,_autoMakeVisible:fU,_selectBackground:E5.tableViewSelectBackground,_labelColor:E5.tableViewLabelColor,_labelSelectColor:E5.tableViewLabelSelectColor,_labelFont:E5.tableViewLabelFont,getCheckColumn:function(){var y;return this._31o||((y=this._31o=new ut).setEditable(!0),y.setWidth(40),y.getValue=this.getCheckColumValue,y.drawCell=this.drawCheckColumnCell),this._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(y){var q=this._39o,_=this.getCheckColumn();y!==this.isCheckMode()&&(y?q.add(_,0):q.remove(_),this.fp(xL,!y,y))},getCheckColumValue:function(y,q,_){return _.isSelected(y)},drawCheckColumnCell:function(y,q,_,s,p,O,L,$,k){FA(y,k.getCheckIcon(q),p+L/2,O+$/2,q,k)}}),function(y){Kx(mt,this,[y])}),Wt=(w8(mt,ot,{_34o:function(y,q){var _=this.list,s=_._31o;if(_.isCellEditable(q,s,y)){var p=_._3Q(s),O=_.lp(y).x;if(p&&O>=p.startX&&O<p.startX+s.getWidth())return void _.checkData(q)}_._37O(q,y),_.setFocusData(q)},_33o:function(y,q){this.list._37O(q,y),mt.superClass._33o.apply(this,arguments)}}),ht.TreeTableView=function(y){var q=this._4o=new ut;this._35o(),this._98I(),this._5o(y),q.setDisplayName("Name"),q.setEditable(!0),q.setWidth(180),q.drawCell=At,q.getValue=zt,this._39o.add(q),new et(this)}),At=function(y,q,_,s,p,O,L,$,k){k.drawTree(y,q,_,p,O,L,$)},zt=function(y,q,_){return _.getLabel(y)},et=(q("TreeTableView",o,{ms_ac:[WD,AD,mD,"sortMode",XL,TL,OL,xL,"rootData","rootVisible",SL,HL,"sortColumn",wL,QL,sL,pL,_L,qL,kL,LL,EL,ML,$L,Y5,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:iL,_checkMode:M5,_editable:!0,_batchEditable:!1,_indent:QA,_rowHeight:WU,_rowLineVisible:E5.treeTableViewRowLineVisible,_rowLineColor:E5.treeTableViewRowLineColor,_columnLineVisible:E5.treeTableViewColumnLineVisible,_columnLineColor:E5.treeTableViewColumnLineColor,_expandIcon:E5.treeTableViewExpandIcon,_collapseIcon:E5.treeTableViewCollapseIcon,_scrollBarColor:AU,_scrollBarSize:X,_autoHideScrollBar:pA,_autoMakeVisible:fU,_selectBackground:E5.treeTableViewSelectBackground,_labelColor:E5.treeTableViewLabelColor,_labelSelectColor:E5.treeTableViewLabelSelectColor,_labelFont:E5.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}}),function(y){Kx(et,this,[y])}),ft=(w8(et,ot,{_34o:function(y,q){var _=this.list,s=_._4o,p=_._3Q(s),O=_.lp(y).x;if(p){var L=_._indent,p=p.startX+L*_.getLevel(q);if(r(_.getToggleIcon(q))&&p<=O&&O<=p+L)return void _.toggle(q);if(_.isCellEditable(q,s)&&(p+=L)<=O&&O<=p+L)return void _.checkData(q)}_._37O(q,y),_.setFocusData(q)},_33o:function(y,q){var _=this.list,s=_.lp(y).x;if(r(_.getToggleIcon(q))&&(p=_._3Q(_._4o))){var p,O=_._indent;if((p=p.startX+O*_.getLevel(q))<=s&&s<=p+O)return void _.toggle(q)}_._37O(q,y),et.superClass._33o.apply(this,arguments)}}),ht.TableHeader=function(y){var q=this,_=q._view=Ax(1,q),s=q._39o=y.getColumnModel(),p=q.iv;q.tv=q._tableView=y,q._60I=new n,q._canvas=ex(_),_.style.background=E5.tableHeaderBackground||"",_.style.height=xA+wD,s.mm(p,q),s.md(p,q),s.mh(p,q),y.mp(function(y){at[y.property]&&q.iv()},q),new Gt(q),q.iv()}),Gt=(q("TableHeader",o,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",WD,mD,OL,"moveBackground","insertColor",ML,$L,"resizable","movable"],_checkIcon:FD,_movable:!0,_resizable:!0,_labelColor:E5.tableHeaderLabelColor,_labelFont:E5.tableHeaderLabelFont,_columnLineColor:E5.tableHeaderColumnLineColor,_columnLineVisible:E5.tableHeaderColumnLineVisible,_sortDescIcon:E5.tableHeaderSortDescIcon,_sortAscIcon:E5.tableHeaderSortAscIcon,_moveBackground:E5.tableHeaderMoveBackground,_insertColor:E5.tableHeaderInsertColor,_indent:QA,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(y){return y.toLabel()},getLabelFont:function(y){return this._labelFont},getLabelColor:function(y){return y.getColor()||this._labelColor},getLabelAlign:function(y){return y._align},onPropertyChanged:function(y){this.iv()},_5Q:function(y){this._61I=y,this.iv()},getLogicalPoint:function(y){return p8(y,this._canvas,this.tv.tx())},validateImpl:function(){var y,s=this,q=s._canvas,_=s.getWidth(),p=s.getHeight(),O=s.tv,L=s._60I,$=s._61I,k=-O.tx(),M=0,E=(_===q.clientWidth&&p===q.clientHeight||rx(q,_,p),L.clear(),s._39o._roots.each(function(y){var q;y.isVisible()&&(q=M+y.getWidth(),M<=k+_&&k<=q&&L.add({column:y,startX:M}),M=q)}),pl(q));Ol(E,-k,0,1),E.beginPath(),E.rect(k,0,_,p),E.clip(),E.clearRect(k,0,_,p),L.each(function(y){var q=y.column,y=y.startX,_=q.getWidth();0<_&&(E.save(),E.beginPath(),E.rect(y,0,_,p),E.clip(),$&&$.column===q||s.drawColumn(E,q,y,0,_,p),s._columnLineVisible&&dl(E,y+_-1,0,1,p,s._columnLineColor),E.restore())}),$&&(O=$.column,M=$.startX,q=$.position,y=O.getWidth(),E.save(),E.beginPath(),E.rect(M,0,y,p),E.clip(),E.fillStyle=s._moveBackground,E.fill(),s.drawColumn(E,O,M,0,y,p),E.restore(),Rx(E,s._insertColor,q,0,p)),E.restore()},_6Q:function(y){var q=this.tv;return q._31o===y&&q.sm().getSelectionMode()===U5},drawColumn:function(y,q,_,s,p,O){var L,$,k,M,E,H=this,w=H.tv,Q=r(q.getIcon()),x=H.getLabelAlign(q);H._6Q(q)?(E=r(H._checkIcon),FA(y,E,_+p/2,s+O/2,q,H)):(E=H.getLabel(q),L=H.getLabelFont(q),$=H.getLabelColor(q),k=mA(L,E).width,M=Q?H._indent:0,x===qD?(Q&&VA(y,Q,mL,_,s,M,O),PA(y,E,L,$,_+M,s,p,O,qD)):x===_D?(Q&&VA(y,Q,mL,_+p-k-M,s,M,O),PA(y,E,L,$,_,s,p,O,_D)):(Q&&VA(y,Q,mL,_+(p-k-M)/2,s,M,O),PA(y,E,L,$,_+(p-k+M)/2,s,0,O,qD))),q.isSortable()&&w.getSortColumn()===q&&(Q=r(q.getSortOrder()===NL?H._sortAscIcon:H._sortDescIcon))&&(E=d8(Q,q)/2+2,FA(y,Q,x===_D?_+E:_+p-E,s+O/2,q,w))}}),function(y){this.th=y,this.tv=y._tableView,this.addListeners()}),rt=(w8(Gt,o,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(y){this.getView().style.cursor=y},handle_mousemove:function(y){if(!Xl){delete this._29o,this.setCursor(b5);for(var q=this.th,_=q._60I,s=q.lp(y).x,p=_.size()-1;0<=p;p--){var O=_.get(p),L=O.column,$=O.startX+L.getWidth();if(q.isResizable()&&F5($-s)<=(v5?10:3))return this._29o=O,void this.setCursor(nL);s>O.startX&&s<$&&(this._29o=O),(L.isClickable()||L.isSortable()||q.isMovable()||this.tv.getCheckColumn&&L===this.tv.getCheckColumn())&&s>O.startX&&s<$&&this.setCursor(bL)}}},handle_mousedown:function(y){this.handle_touchstart(y)},handle_touchstart:function(y){CA(y),this.tv.endEditing(),this.handle_mousemove(y),this._29o&&(this.x=gA(y).x,this.lx=this.th.lp(y).x,this.w=this._29o.column.getWidth(),L8(this,y))},handleWindowMouseMove:function(y){this.handleWindowTouchMove(y)},handleWindowTouchMove:function(y){var s,q=this,p=q.th,_=q.getView().style.cursor,O=q._29o,L=gA(y).x-q.x;q.resizing||q.moving||(_===nL?q.resizing=1:p.isMovable()&&_===bL&&2<F5(L)&&(q.moving=1)),q.resizing?O.column.setWidth(q.w+L):q.moving&&(s=q.lx+L,p._60I.each(function(y){var q=y.startX,_=q+y.column.getWidth();q<=s&&s<=_&&((y={column:O.column,startX:O.startX+L,front:s-q<_-s,insertColumn:y.column}).front?y.position=q:y.position=_,p._5Q(y))}))},_16Q:function(y,q){var _=this.tv,s=this.th,p=s._checkIcon;if(s._6Q(y)){var O=r(p),L=this.lx,$=y.getWidth();if(q+$/2-(O=d8(O,y))<=L&&L<=q+$/2+O)return s.setCheckIcon(p===BD?FD:BD),L=_.sm(),q=_._rows,p===BD?L.rs(q):L.ss(q),_.onCheckColumnClicked(y),!0}return!1},handleWindowMouseUp:function(y){this.handleWindowTouchEnd(y)},handleWindowTouchEnd:function(y){var q,_,s,p,O,L=this,$=L.tv,k=L.th,M=L._29o;L.moving?((_=k._61I)&&_.insertColumn!==_.column&&(q=_.column,p=(s=$.getColumnModel()._roots).remove(q),0<=(O=s.indexOf(_.insertColumn))&&(_.front||O++,O<=s.size()&&(s.add(q,O),$.getColumnModel()._38I(q,p,O)))),k._5Q(M5),delete L.moving):!L.resizing&&M&&(q=M.column,_=k.lp(y).x,s=M.startX,p=!0,(p=(!k.onColumnClicked||!1!==k.onColumnClicked(q,y,s))&&p)&&s<=_&&_<=s+q.getWidth()&&(L._16Q(q,s)||(q.isSortable()&&(O=$.getSortMode(),M=q.getSortOrder(),O===iL?$.getSortColumn()===q?(M===aL&&$.setSortColumn(M5),q.setSortOrder(M===NL?aL:NL)):$.setSortColumn(q):"bistate"===O&&($.getSortColumn()===q?q.setSortOrder(M===NL?aL:NL):$.setSortColumn(q))),$.onColumnClicked(q,y,s)))),L._29o=L.resizing=L.x=L.lx=L.w=M5}}),ht.TablePane=function(y){this.init(new Pt(y))},q("TablePane",o,{ms_v:1,_44o:1}),ht.TreeTablePane=function(y){this.init(new Wt(y))},q("TreeTablePane",o,{ms_v:1,_44o:1}),ht.Toolbar=function(y){var s=this,q=s._view=Ax(1,s),_=q.style;_.background=E5.toolbarBackground||"",_.height=SA+wD,s._canvas=ex(q),s._30o=new n,s._90I=new n,s.setItems(y||[]),q.handleGroupSelectedChanged=function(q){var _;q.isSelected()&&null!=(_=q.getGroupId())&&s._items.forEach(function(y){(y=y.element)&&y!==q&&y.setSelected&&y.getGroupId&&y.getGroupId()===_&&y.setSelected(!1)})},new rt(s)},q("Toolbar",o,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[ND,WD,mD,AD,Y5,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:E5.toolbarLabelColor,_labelSelectColor:E5.toolbarLabelSelectColor,_labelFont:E5.toolbarLabelFont,_selectBackground:E5.toolbarSelectBackground,_itemGap:E5.toolbarItemGap,_separatorColor:E5.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(y){return this._64I},getToolTip:function(y){return(y=this.getItemInfoAt(y))?y.item.toolTip:M5},getLabelColor:function(y){return y&&y.selected&&y.type!==BD&&"radio"!==y.type?this._labelSelectColor:this._labelColor},onPropertyChanged:function(y){this.iv(),y.property===ND&&this._items.forEach(function(y){Wx(y)})},redraw:function(){this.iv()},addItem:function(y,q){var _=this._items;q==M5?_.push(y):_.splice(q,0,y),this.fp(ND,M5,_)},removeItem:function(y){if(y)for(var q=this._items,_=0;_<q.length;_++)y===q[_]&&(q.splice(_,1),this.fp(ND,M5,q))},removeItemById:function(y){if(y!=M5)for(var q,_=this._items,s=0;s<_.length;s++)if(y===_[s].id)return q=_.splice(s,1)[0],this.fp(ND,M5,_),q},getItemById:function(y){if(y!=M5)for(var q=this._items,_=0;_<q.length;_++){var s=q[_];if(y===s.id)return s}},setItemVisible:function(y,q){(y=this.getItemById(y))&&(y.visible=q)},getItemInfos:function(){return this._30o},getItemInfoAt:function(y){var q=0,_=this._30o,s=(y=this.lp(y)).x;if(0<=(y=y.y)&&y<=this.getHeight())for(;q<_.size();q++){var p=_.get(q);if(p.startX<=s&&s<=p.endX)return p}return M5},drawItem:function(y,q,_,s,p){if(!1===q.visible)return 0;if(Ex(q.visible)&&!q.visible())return 0;var O=q.disabled,p=(O&&(y.globalAlpha=qA),this.drawItemImpl(y,q,_,s,p)),L=this._itemGap;return O&&(y.globalAlpha=1),this._currentItem!==q||"separator"===q||!0===q.separator||q.unfocusable||kU(y,this._separatorColor,_-L/2,0,p+L,s),p},drawItemImpl:function(y,q,_,s,p){var O,L,$=this,k=$._view,M=$._itemGap,E=s/2,H=q.type,w=q.element,Q=q.label,x=(w5(w)&&(Q=w,w=M5),$.getLabelFont(q)),S=$.getLabelColor(q),X=q.selected,T=r(q.icon),i=d8(T,q),N=i+(Q?mA(x,Q).width:0);return"separator"===q||!0===q.separator?(Rx(y,$._separatorColor,_,s/4,E),1):w?(T&&FA(y,T,_+i/2,E,q,$),PA(y,Q,x,S,_+i,0,0,s),L=wl(w),p||$._90I.add(L),L.parentNode!==k&&gx(k,L),w.iv&&w.iv(),w.validate&&w.validate(),k=(p=L.getBoundingClientRect()).width,w=L.style,Gx(L),w.left=$.tx()+_+N+wD,w.top=(s-p.height)/2+wD,N+k):("radio"===H?O=r(X?VD:hD):H===BD&&(O=r(X?BD:FD)),O?(L=d8(O,q),FA(y,O,_+L/2,E,q,$),_+=L,N+=L):X&&dl(y,_-M/2,0,N+M,s,$.getSelectBackground(q)),T&&FA(y,T,_+i/2,E,q,$),PA(y,Q,x,S,_+i,0,0,s),N)},validateImpl:function(){var _=this,y=_._canvas,q=_.getWidth(),s=_.getHeight(),p=_._30o,O=_._items,L=(rx(y,q,s),pl(y)),$=_._itemGap,k=$/2,M=(Ol(L,_.tx(),0,1),L.clearRect(0,0,q,s),_._90I),M=(_._90I=new n,p.clear(),O.forEach(function(y){var q=_.drawItem(L,y,k,s);p.add({item:y,startX:k,endX:k+q,width:q}),q&&(k+=q+$)}),M.each(function(y){_._90I.contains(y)||$8(y)}),_._64I);_._64I=_5(0,k-$/2),L.restore(),_._stickToRight?(_._65O=0,L=pl(y),k=q-_._64I+$/2,Ol(L,0,0,1),L.clearRect(0,0,q,s),p.clear(),O.forEach(function(y){var q=_.drawItem(L,y,k,s,!0);p.add({item:y,startX:k,endX:k+q,width:q}),q&&(k+=q+$)}),L.restore()):_.tx(_.tx()),M!==_._64I&&_.onSumWidthChanged(M,_._64I)},onSumWidthChanged:function(y,q){},handleClick:function(q,y){var _=q.type,s=q.action,p=q.groupId,O=q.selected;q.disabled||(p!=M5?O||(q.selected=!0,this._items.forEach(function(y){y.groupId===p&&q!==y&&(y.selected=!1)}),s&&q.action(q,this,y)):(_!==BD&&"toggle"!==_||(q.selected=!O),s&&q.action(q,this,y))),$A(),this.iv()}}),function(y){this.tb=y,this.addListeners()});w8(rt,o,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(y){this.handleScroll(y,y.wheelDelta/40*10)},handle_DOMMouseScroll:function(y){this.handleScroll(y,10*-y.detail)},handleScroll:function(y,q){CA(y),(y=this.tb).isScrollable()&&!y._stickToRight&&(y.tx(y.tx()+q),Sl())},handle_mousemove:function(y){Xl||this.setItem(y)},handle_mouseout:function(y){y.target===this.getView()?this.tb.setCurrentItem(M5):this.handle_mousemove(y)},handle_mousedown:function(y){this.handle_mousemove(y),this.handle_touchstart(y)},handle_touchstart:function(y){var q=this.tb,_=y.target;!WA(y)||_!==this.getView()&&_!==q._canvas||(CA(y),q.setFocus(y)&&(this.setItem(y,!0),(q.isScrollable()||this.info&&!this.info.item.disabled)&&(this.x=gA(y).x,this.tx=q.tx(),L8(this,y))))},handleWindowMouseMove:function(y){this.handleWindowTouchMove(y)},handleWindowTouchMove:function(y){var q=this.tb;q._stickToRight||(y=gA(y).x-this.x,!this._25o&&2<F5(y)&&q.isScrollable()&&(this._25o=1),this._25o&&q.tx(this.tx+y))},handleWindowMouseUp:function(y){this.handleWindowTouchEnd(y)},handleWindowTouchEnd:function(y){var q=this.tb,_=this.info,s=this.tb.getItemInfoAt(y);!this._25o&&_&&(_=_.item,s&&s.item===_&&q.handleClick(_,y)),this._25o=this.x=this.tx=M5,this.setItem()},setItem:function(y,q){var _=this.tb,s=(s=this.info=y?_.getItemInfoAt(y):M5)?s.item:M5;_.setCurrentItem(s),q&&s&&Ex(s.onDown)&&s.onDown(y)}}),ht.BorderPane=function(){this._view=Ax(1,this),this.iv()},q("BorderPane",o,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(y,q){this._12o("leftView",y),q!=M5&&this.setLeftWidth(q)},getRightView:function(){return this._rightView},setRightView:function(y,q){this._12o("rightView",y),q!=M5&&this.setRightWidth(q)},getTopView:function(){return this._topView},setTopView:function(y,q){this._12o("topView",y),q!=M5&&this.setTopHeight(q)},getBottomView:function(){return this._bottomView},setBottomView:function(y,q){this._12o("bottomView",y),q!=M5&&this.setBottomHeight(q)},getCenterView:function(){return this._centerView},setCenterView:function(y){this._12o("centerView",y)},_12o:function(y,q){var _="_"+y,s=this._view,p=this[_];p!==q&&(p&&(p.getView?$8(p.getView()):$8(p)),(this[_]=q)&&(q.getView?gx(s,q.getView(),1):gx(s,q,1)),this.fp(y,p,q))},onPropertyChanged:function(y){this.iv()},validateImpl:function(){var y=(S=this)._topView,q=S._bottomView,_=S._leftView,s=S._rightView,p=S._centerView,O=S.getWidth(),L=0,$=0,k=O,M=x=S.getHeight(),E=0,H=0,w=0,Q=0,x=(y&&($=E=S._topHeight==M5?ql(y):S._topHeight),q&&(M=x-(H=S._bottomHeight==M5?ql(q):S._bottomHeight)),_&&(L=w=S._leftWidth==M5?yl(_):S._leftWidth),s&&(k=O-(Q=S._rightWidth==M5?yl(s):S._rightWidth)),_5(0,k-L)),S=_5(0,M-$);y&&h(y,0,0,O,E),q&&h(q,0,M,O,H),_&&h(_,0,$,w,S),s&&h(s,k,$,Q,S),p&&h(p,L,$,x,S)}})}function gt(y){CA(y),y.stopPropagation()}function nt(y){CA(y)}function vt(y,q){var _=y.length,s=y[0];if(w5(y)||s&&1!==s.length)return y;for(var p=new Array(_),O=0;O<_;O++)p[O]=y[O];var L=p[s="L"===p[0]?5:7],$=p[1+s],k=p[2+s],M=p[3+s],E=p[4+s],H=p[5+s],w=q[0],Q=q[1],x=q[2],S=q[3],X=q[4],q=q[5];return p[s]=w*L+x*$,p[1+s]=Q*L+S*$,p[2+s]=w*k+x*M,p[3+s]=Q*k+S*M,p[4+s]=w*E+x*H+X,p[5+s]=Q*E+S*H+q,p}function bt(y,q){return q===y.substring(0,q.length)}function It(y){return parseFloat(y)||0}function Ut(y,q){q==k5&&(q=new Q5),y=(y=y.split(/\s+/)).map(It),q.set(y[0]||0,y[1]||0,y[2]||0)}function dt(){IB.apply(this,arguments)}function yM(){IB.apply(this,arguments)}function qM(){IB.apply(this,arguments)}function _M(){IB.apply(this,arguments),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:"ZeroCurvature",endingEnd:"ZeroCurvature"}}function sM(){IB.apply(this,arguments)}function pM(y){var q=y.substr(y.lastIndexOf(".")+1),_=(y=E5.beforeLoadURL(y),f0[q]||q);return{postfix:q,url:"url("+y+') format("'+_+'")'}}function OM(y,q){return G0[y.postfix]-G0[q.postfix]}function LM(y,q,_){y.x=q.x,y.y=q.e||_,y.z=q.y}function $M(y){y.duration&&(y.startTime=Un()),y.timeId=tA(y.tick,M5,M5,y.interval)}function kM(y){y.details=0,y.timeout=null,y.lastPoint=null}function MM(_,s){_.getValue&&_.getValue.compType===s||(_.getValue=function(y){var q=z(_,y);return q===k5&&s.properties&&(y=s.properties[y])?y.defaultValue:q},_.getColor=function(y,q){return EM(!0===q?y:_.getValue(y))},_.getValue.compType=s)}function EM(y,q){return q=q?z(y,q):y,A&&A.compGray&&q?E5.toGrayColor(q):Tg&&q?zl(q,Tg,ig):q}function HM(y){if(Hx(y)){for(var q=new n,_=y.length,s=0;s<_;s+=2)q.add({x:y[s],y:y[s+1]});y=q}return y}function wM(y,q,_){if(q){var s,p,O,L={x:q.x,y:q.y,width:q.width,height:q.height},$=Ng(y),k=z(y,"layoutH"),M=z(y,"layoutV"),E=1,H=1,w=0,Q=0,x=1,S=1,X=L.x+$.x*L.width,T=L.y+$.y*L.height;switch(k){case"left":break;case"right":X+=_.width-_.rw;break;case"center":X+=.5*(_.width-_.rw);break;default:(s=z(y,gD)||0)&&(w=Math.abs(Q=Math.sin(s)),x=Math.abs(S=Math.cos(s))),"leftright"!==k?(E+=x*(_.widthScale-1),H+=w*(_.widthScale-1),X*=_.widthScale):(p=z(y,"scaleX")||1,O=z(y,"scaleY")||1,E+=L.width?x*(_.width-_.rw)/L.width/p:0,H+=L.height?w*(_.width-_.rw)/L.height/O:0,X+=(_.rw-_.width)*Math.min(-$.x*S+$.y*Q,-$.x*S-(1-$.y)*Q,(1-$.x)*S+$.y*Q,(1-$.x)*S-(1-$.y)*Q))}switch(M){case"top":break;case"bottom":T+=_.height-_.rh;break;case"center":T+=.5*(_.height-_.rh);break;default:s==M5&&(s=z(y,gD))&&(w=Math.abs(Q=Math.sin(s)),x=Math.abs(S=Math.cos(s))),"topbottom"!==M?(E+=w*(_.heightScale-1),H+=x*(_.heightScale-1),T*=_.heightScale):(p==M5&&(p=z(y,"scaleX")||1,O=z(y,"scaleY")||1),E+=L.width?w*(_.height-_.rh)/L.width/p:0,H+=L.height?x*(_.height-_.rh)/L.height/O:0,T+=(_.rh-_.height)*Math.min(-$.x*Q-$.y*S,-$.x*Q+(1-$.y)*S,(1-$.x)*Q-$.y*S,(1-$.x)*Q+(1-$.y)*S))}return 1===E&&1===H||(L.width*=E,L.height*=H,L.width<0&&(L.width=0),L.height<0&&(L.height=0)),L.x=X-$.x*L.width,L.y=T-$.y*L.height,L}}function QM(y){return Hx(y)?new n(y):y}function xM(y,q,_,s,p,O,L){var $=A.interactiveInfo,k=y.transform;if(k)return A.save(),A.setTransform(k.a,k.b,k.c,k.d,k.tx,k.ty),$&&$.compInfos.push({comp:y,rect:q,matrix:k.clone(),prefix:G8,refRect:$.refRect}),!0;if(p===k5&&(p=1),O===k5&&(O=1),k=z(y,"clipPercentage"),Fx(_,q)&&!s&&1===p&&1===O&&k==k5)return $&&$.compInfos.push({comp:y,rect:q,matrix:$.matrix.clone(),prefix:G8,refRect:$.refRect}),!1;var M=q.x+q.width*(L=L||I8).x,E=q.y+q.height*L.y,H=_.x+_.width*L.x,L=_.y+_.height*L.y,p=_.width?p*(q.width/_.width):1,O=_.height?O*(q.height/_.height):1;return A.save(),$&&($.matrix.appendTranslate(M,E).appendRotate(s).appendScale(p,O).appendTranslate(-H,-L),$.compInfos.push({comp:y,rect:q,matrix:$.matrix.clone(),prefix:G8,refRect:$.refRect})),Ll(A,M,E),$l(A,s||0),kl(A,p,O),Ll(A,-H,-L),k!=k5&&(q=cx(_,z(y,"clipDirection"),k),A.beginPath(),A.rect(q.x,q.y,q.width,q.height),A.clip()),!0}function SM(){A.restore()}function XM(y,q,_,s){var p,O,L,$,k,M,E,H,w,Q,x,S,X,T,i,N,a,l,j,o,Y,Z,K,C,B,F,V,h,t=z(y,tD,HM),u=z(y,gD),J=Ng(y),s=(t&&s.fitSize&&(p=new n,s=wM(y,D=bA(t),s),O=D.x+J.x*D.width,L=D.y+J.y*D.height,$=s.x+J.x*s.width,k=s.y+J.y*s.height,M=D.width?s.width/D.width:1,E=D.height?s.height/D.height:1,t.each(function(y){p.add({x:$+(y.x-O)*M,y:k+(y.y-L)*E})}),t=p,y.unionRect=null),z(y,"scaleX")),D=z(y,"scaleY"),c=q===iD,R=M5;!_&&c&&((_=y.unionRect)||(_=bA(t),y.points.func||(y.unionRect=_)),R=_),_&&(c?(R=R||y.unionRect)||(R=bA(t),y.points.func||(y.unionRect=R)):R=_,_=xM(y,_,R,u,s,D,J),u=z(y,"borderPattern"),s=Y8(A,u),D=EM(y,"background"),J=r(z(y,"repeatImage"),Tg,ig),H=z(y,"gradientPack"),w=z(y,"borderGradientPack"),Q=EM(y,"borderColor"),x=z(y,"borderWidth"),S=r(z(y,"borderRepeatImage"),Tg,ig),X=z(y,"segments",QM),h=z(y,"gradient"),T=EM(y,"gradientColor"),i=z(y,"border3d"),N=EM(y,"border3dColor"),a=z(y,"border3dAccuracy"),l=z(y,"closePath"),j=z(y,"fillRule")||"nonzero",o=A.lineJoin,Y=A.lineCap,A.lineJoin=z(y,"borderJoin")||EA,A.lineCap=z(y,"borderCap")||MA,c?D||J||H?((F=z(y,"fillClipPercentage"))!=k5&&(V=cx(R,z(y,"fillClipDirection"),F),A.save(),A.beginPath(),A.rect(V.x,V.y,V.width,V.height),A.clip()),vl(A,t,X,l),H?gl(A,H,EM,!1,R):J?_U(A,J,Tg,ig,xg,Sg,z(y,"repeatImageStretch"),R,z(y,"repeatImageRotation")):qU(A,D,h,T,R),A.fill(j),H&&A.restore(),F!=k5&&A.restore(),s!==A&&vl(s,t,X,l)):vl(s,t,X,l):("roundRect"===q?Z=z(y,"cornerRadius"):"polygon"===q?(Z=z(y,"polygonSide"),K=z(y,"cornerRadius"),C=z(y,"regular")):"arc"===q&&(Z=z(y,"arcFrom"),K=z(y,"arcTo"),C=z(y,"arcClose"),B=z(y,"arcOval")),D||J||H?((F=z(y,"fillClipPercentage"))!=k5&&(V=cx(R,z(y,"fillClipDirection"),F),A.save(),A.beginPath(),A.rect(V.x,V.y,V.width,V.height),A.clip()),yU(A,q,R,Z,K,C,B),H?gl(A,H,EM,!1,R):J?_U(A,J,Tg,ig,xg,Sg,z(y,"repeatImageStretch"),R,z(y,"repeatImageRotation")):qU(A,D,h,T,R),A.fill(j),H&&A.restore(),F!=k5&&A.restore(),A!==s&&yU(s,q,R,Z,K,C,B)):yU(s,q,R,Z,K,C,B)),(V=z(y,"borderWidthAbsolute"))&&(A.save(),A.setTransform(1,0,0,1,0,0)),x&&(Q||S||w)&&(A.lineWidth=x,w?gl(A,w,EM,!0,R):S?sU(A,S,Tg,ig,xg,Sg,z(y,"borderRepeatImageStretch"),R,z(y,"borderRepeatImageRotation")):A.strokeStyle=Q,A.stroke(),w&&A.restore(),i&&Il(A,Q,N,x,Xg,a)),P8(A,u),z(y,"dash")&&0<(J=z(y,"dashWidth")||x)&&(u=z(y,"dashPattern")||kA,s=Y8(A,u,z(y,"dashOffset")),h=EM(y,"dashColor")||EM(VU),s!==A&&(c?vl(s,t,X,l):yU(s,q,R,Z,K,C,B)),A.strokeStyle=h,A.lineWidth=J,A.stroke(),z(y,"dash3d")&&Il(A,h,EM(y,"dash3dColor"),J,Xg,z(y,"dash3dAccuracy")),P8(A,u)),V&&A.restore(),q===m&&MU(A,D,z(y,"depth"),R),A.lineJoin=o,A.lineCap=Y,_&&SM())}function TM(y){A=y[0],xg=y[1],Sg=y[2],Xg=y[3],Tg=y[4],ig=y[5]}function iM(y,q){if("function"!=typeof q&&null!==q)throw new TypeError("Super expression must either be null or a function");y.prototype=o.create(q&&q.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),q&&_u(y,q)}function NM(y){return"Array]"===(y=o.prototype.toString.call(y)).substring(y.length-6)}function aM(y,q,_,s,p,O){q=q||[],_=_||[],s=s||[];try{q.push(y);var L=Function.apply(0,q);return _[_.length]="return "+L,Function.apply(0,_).apply(0,s)}catch(y){return O&&O(y),p}}function lM(y){return y}function jM(y,q){return q}function ZM(y,q,_,s){var p=y?y.path.slice(0):[];q&&p.push(q),this.desc=_,this.name=q,this.path=pu(p),this.getter=(_=p)&&_.length?new Function("o",["return o['",_.join("']['"),"'];"].join("")):lM,this.setter=(q=p)&&q.length?new Function("o","v",["return o['",q.join("']['"),"'] = v;"].join("")):jM,this.isLeaf=s,this.parent=y,this.children=[],this.childMap={}}function KM(y){var q=[];return y.forEach(function(y){q.push({x:y.x,y:y.y}),q.push({x:y.x+y.width,y:y.y+y.height}),q.push({x:y.x+y.width,y:y.y}),q.push({x:y.x,y:y.y+y.height})}),q}function CM(y,q){return 0<y.dot(q)}function BM(){this._vertexMap={},this._lineMap={},this._lineList=[]}function FM(y,q,_,s,p,O,L){_=[_,p],y[0]===s&&_.reverse(),p=[_[0]._key,_[1]._key].join("|"),(s=y._triangles[p])||(y._triangles[p]=s={}),s[_=[O._key,L._key].join("|")]||(s[_]=[O,L])}function VM(y,q,_){var s=y._planes[_._key];if(!s)for(var p in y._planes)if((p=y._planes[p])._normal.angleTo(_)<.001){s=p;break}s?s._vertices.indexOf(q)<0&&s._vertices.push(q):y._planes[_._key]={_normal:_,_vertices:[q]}}function hM(y,q){return 0===q?"0|0|0":(Math.abs(q)===1/0?[y.x,y.y,y.z]:[Math.round(cg.angleTo(y)*q),Math.round(Rg.angleTo(y)*q),Math.round(og.angleTo(y)*q)]).join("|")}function tM(y){for(var q=y.length,_=0,s=q-1,p=0;p<q;s=p++)_+=y[s].x*y[p].y-y[p].x*y[s].y;return.5*_}function uM(y){return(y%=O5)<0&&(y+=O5),u<y?O5-y:y}function JM(y,q){return uM(y[0]-q[0])+uM(y[1]-q[1])+uM(y[2]-q[2])}function DM(y,q,_,s,p,O){q=new f(q.get(_)),O=O.apply(q),y.push({local:q,world:O,type:p,index:_,realIndex:s})}function cM(y,q){var _=y.x-q.x;return _*_+(y=y.y-q.y)*y}function RM(q,_,y){return{def:q,getter:y?function(y){return 1<z4.for(y).version?y.getParameter(_):q}:function(y){return y.getParameter(_)},setter:y?function(y,q){1<z4.for(y).version&&y.pixelStorei(_,q)}:function(y,q){y.pixelStorei(_,q)}}}function oM(y){return"string"==typeof y?fl(y):y.r!==k5?(M$[0]=y.r,M$[1]=y.g,M$[2]=y.b,M$[3]=y.a,M$):y.red!==k5?(M$[0]=y.red,M$[1]=y.green,M$[2]=y.blue,M$[3]=y.alpha,M$):y}function YM(y){return NM(y)?Array.prototype.slice.call(y,0):y}function PM(y,q,_){this.gl=q,this._record=_||{},this._branches={},this._leafSync={};for(var s=(this._struct=y).children,p=s.length;p--;){var O=s[p],L=O.name;O.isLeaf?(this._leafSync[L]=!1,this._record[L]=YM(O.desc.def)):this._record[L]={}}}function mM(y,q){q&&(q.isRenderTarget?q.release():U4(q)&&y.deleteTexture(q))}function WM(y){for(var q=1;q<arguments.length;q++){var _=arguments[q];y.push(_.x,_.y,_.z)}}function AM(y,q,_,s,p){var O=-s*H5(p),s=s*p5(p);return new Q5(y.x+O*_.x+s*q.x,y.y+O*_.y+s*q.y,y.z+O*_.z+s*q.z)}function zM(y,q,_,s,p,O,L,$,k){k=k||O5;var M=q?y.top_vs:y.bottom_vs;if(M)for(var E,H,w=q?y.top_uv:y.bottom_uv,Q=k/L,x=0;x<L;x++)q?(E=x*Q+$,H=(x+1)*Q+$):(H=x*Q+$,E=(x+1)*Q+$),WM(M,AM(_,s,p,O,E),AM(_,s,p,O,H),_),w&&w.push(.5-.5*H5(E),.5-.5*p5(E),.5-.5*H5(H),.5-.5*p5(H),.5,.5)}function eM(_){var s={};return{get:function(y){if(s[y]!==k5)return s[y];var q;switch(y){case"WEBGL_depth_texture":q=_.getExtension("WEBGL_depth_texture")||_.getExtension("MOZ_WEBGL_depth_texture")||_.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":q=_.getExtension("EXT_texture_filter_anisotropic")||_.getExtension("MOZ_EXT_texture_filter_anisotropic")||_.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":q=_.getExtension("WEBGL_compressed_texture_s3tc")||_.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||_.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":q=_.getExtension("WEBGL_compressed_texture_pvrtc")||_.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":q=_.getExtension("WEBGL_compressed_texture_etc1");break;default:q=_.getExtension(y)}return s[y]=q}}}function fM(q,_,y){var s;function p(y){if("highp"===y){if(0<q.getShaderPrecisionFormat(35633,36338).precision&&0<q.getShaderPrecisionFormat(35632,36338).precision)return"highp";y="mediump"}return"mediump"===y&&0<q.getShaderPrecisionFormat(35633,36337).precision&&0<q.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}y=y||{};var O,L="undefined"!=typeof WebGL2RenderingContext&&q instanceof WebGL2RenderingContext,$=y.precision!==k5?y.precision:"highp",k=((k=p($))!==$&&(console.warn("WebGL:",$,"not supported, using",k,"instead."),$=k),!0===y.logarithmicDepthBuffer),y=q.getParameter(34930),M=q.getParameter(35660),E=q.getParameter(3379),H=q.getParameter(34076),w=q.getParameter(34921),Q=q.getParameter(36347),x=q.getParameter(36348),S=q.getParameter(36349),X=0<M,T=L||!!_.get("OES_texture_float"),i=(L||!!_.get("OES_element_index_uint"))&&"undefined"!=typeof Uint32Array,N=X&&T,a=L?q.getParameter(36183):0,l=L||!!_.get("EXT_shader_texture_lod"),j=!1;return L?j=!0:(O=_.get("ANGLE_instanced_arrays"))&&(j=!0,q.vertexAttribDivisor=function(y,q){return O.vertexAttribDivisorANGLE(y,q)},q.drawElementsInstanced=function(y,q,_,s,p){return O.drawElementsInstancedANGLE(y,q,_,s,p)},q.drawArraysInstanced=function(y,q,_,s){return O.drawArraysInstancedANGLE(y,q,_,s)}),L?_.get("EXT_color_buffer_float"):(_.get("WEBGL_depth_texture"),_.get("OES_texture_half_float"),_.get("OES_texture_half_float_linear"),_.get("OES_standard_derivatives"),_.get("OES_vertex_array_object")),_.get("OES_texture_float_linear"),_.get("EXT_color_buffer_half_float"),_.get("WEBGL_multisampled_render_to_texture"),{isWebGL2:L,getMaxAnisotropy:function(){if(s!==k5)return s;var y=_.get("EXT_texture_filter_anisotropic");return s=null!==y?q.getParameter(y.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:p,precision:$,precisionString:"precision "+$+" float;\nprecision "+$+" int;\n",logarithmicDepthBuffer:k,maxTextures:y,maxVertexTextures:M,maxTextureSize:E,maxCubemapSize:H,maxAttributes:w,maxVertexUniforms:Q,maxVaryings:x,maxFragmentUniforms:S,vertexTextures:X,floatFragmentTextures:T,elementTypeUint:i,floatVertexTextures:N,maxSamples:a,shaderTextureLod:l,instancedArray:j}}function GM(q,p,y,_){if(_||!y.isWebGL2||"undefined"==typeof WeakMap)return{supportsUbo:!1,setCurrentFrameRenderId:N};var s,O={},_=p.getParameter(35375),L=new WeakMap;return(s=O.scene=new y6(p,0,"scene","Scene")).addUniform("uProjectMatrix",16),s.addUniform("uViewMatrix",16),s.addUniform("uCameraPosition",3),s.addUniform("uTime",1),s.addUniform("toneMappingExposure",1),s.addUniform("uFogColor",4),s.addUniform("uFogDensity",1),s.addUniform("uFogNear",1),s.addUniform("uFogFar",1),s.attachSource(),["pbr","phong"].forEach(function(y){(s=O[y]=new y6(p,1,y,"Material")).addUniform("aoMapIntensity",1),s.addUniform("lightMapIntensity",1),s.addUniform("displacementScale",1),s.addUniform("displacementBias",1),s.addUniform("diffuse",3),s.addUniform("emissive",3),s.addUniform("normalScale",2),s.addUniform("opacity",1),s.addUniform("alphaTest",1),s.addUniform("fresnelIntensity",1),s.addUniform("uUvMatrix",12),s.addUniform("uUv2Matrix",12),"pbr"===y?(s.addUniform("roughness",1),s.addUniform("metalness",1),s.addUniform("transmission",1),s.addUniform("thickness",1),s.addUniform("ior",1),s.addUniform("specularIntensity",1),s.addUniform("rimPower",1),s.addUniform("rimColor",3),s.addUniform("specularColor",3)):(s.addUniform("shininess",1),s.addUniform("refractionRatio",1),s.addUniform("specular",3))}),{supportsUbo:!0,maxBindingPoints:_,setCurrentFrameRenderId:function(y){(y=O.scene).attachSource(),y.uProjectMatrix=q._projectMatrix,y.uViewMatrix=q._viewMatrix,y.uCameraPosition=q._camera?q._camera.p3():q.getEye(),y.uTime=q.__uptime,y.toneMappingExposure=q.getToneMappingExposure(),y.uFogColor=fl(q._fogColor),y.uFogDensity=q._fogDensity,y.uFogNear=q._fogNear,y.uFogFar=q._fogFar},updateAndBind:function(y,q){var _,y=O[y],s=L.get(q);s===k5&&(s=new WeakMap,L.set(q,s)),s.get(y)===k5&&(_=p.getUniformBlockIndex(q,y.name),p.uniformBlockBinding(q,_,y.bindingPointIndex),s.set(y,_))},attachUbo:function(y,q,_){return O[y].attachSource(q,_)}}}function rM(){return g$.length?g$.pop():new G}function gM(y){g$.push(y)}function nM(y,q,_){return _&&(_=_[G$+q])!==k5?_:y[q]}function vM(y,q){if(y)return(y=y.s("matDef"))&&y[G$+q]}function bM(y,q){var _=rM();if(p=y.composedMatrix)return _.copy(p),_;var s,p=!1,O=(q&&(L=y.name)&&(O=q._animationId)&&(O=pt.getAnimationMap()[O])&&(s=O.clip)&&(O=pt.getAnimationTracks()[O.animation][0][L])&&(L=s.datas,p=!0,(s=O[0])!==k5&&($=L[s]),(s=O[1])!==k5&&(M=L[s]),(s=O[2])!==k5&&(k=L[s])),y.transformData);if(p&&O)return i3(_,O,$,M,k);var L=e$&&q instanceof iu&&q.s("model3dBindings"),$=$||nM(y,"position",L),k=k||nM(y,"scale",L),M=(M=M||nM(y,"quaternion",L))||(M=nM(y,"euler",L))&&e.eulerArrayToQuaternionArray(M,v$);return _.composeFromArray($,M,k),_}function IM(y,q){return z$=y,A$=q instanceof iu?(x5=q,null):(x5=null,q),[z$,x5,A$]}function UM(y){z$=y[0],x5=y[1],A$=y[2]}function dM(y){if(y){var q=(y="string"==typeof y?{type:y}:y).type;if(q&&"raw"!==q){var _=E5.meshTypeMap[q];if(!(_=_?_(y):E5.getMesh(q)))return!1}else _=y;return _.func?_.func(_):_}}function yv(y,q){return[y[0]*q,y[1]*q,y[2]*q]}function qv(y,q,_){return(q=q[y])!==k5?q:_?_[y]:null}function _v(y){var q=((q=y.s("light.intensity"))==M5?1:q)*Math.PI;return[(y=fl(y.s(G4)))[0]*q,y[1]*q,y[2]*q]}function sv(y,q,_,s){if(s!==y._lastHeadlightAmbientIntensity&&(y.hemisphereLight.skyColor=yv(qq.color,1-s),y.ambientLightColor=yv(qq.color,s),y._lastHeadlightAmbientIntensity=s),_!==y._lastLightMask&&(y._lastLightMask=_,s=q._lastLightUploadInfo)){for(var p,O=s.g,L=O.length,$=new Array(L),k=0;k<L;k++)p=O[k],$[k]=!(p<0||32<=p||!(_&1<<p));y.hemisphereLight.enabled=$[0];var s=q._59O,M=q._spots,E=q._dirs,q=q._87I,H=1;if(L=s.length)for(k=0;k<L;k++)y.pointLights[k].enabled=$[H++];if(L=M.length)for(k=0;k<L;k++)y.spotLights[k].enabled=$[H++];if(L=E.length)for(k=0;k<L;k++)y.directionalLights[k].enabled=$[H++];if(L=q.length)for(k=0;k<L;k++)y.rectAreaLights[k].enabled=$[H++]}}function pv(y,o,Y,q,_){var s=_?q.cacheShadow:q.cache;if(s.length===q.length&&s.version===(_?q.shadowVersion:q.msVersion)&&s.id===o._id&&Y.equals(s.matrix))return s.buffer;var p,O,L,$,k,M,E,H,w,Q,x,S,X,T,i,N,a,l=q.ms,P=_?q.shadow:null,j=(_q.fromArray(y.getData3dUI(o).mat),sq.copy(Y).premultiply(_q.getInverse(_q)),(y=sq.getElements())[0]),Z=y[4],K=y[8],C=y[12],B=y[1],F=y[5],V=y[9],h=y[13],t=y[2],u=y[6],J=y[10],D=y[14],c=y[3],m=y[7],W=y[11],A=y[15],y=16*q.length;s.buffer&&s.buffer.length===y?delete(a=s.buffer)._bufId:a=new T8(y);for(var R=0,z=y;R<z;R+=16)P&&!P[R>>4]?a[R+0]=a[R+1]=a[R+2]=a[R+3]=a[R+4]=a[R+5]=a[R+6]=a[R+7]=a[R+8]=a[R+9]=a[R+10]=a[R+11]=a[R+12]=a[R+13]=a[R+14]=a[R+15]=0:(p=l[R+0],O=l[R+4],L=l[R+8],$=l[R+12],k=l[R+1],M=l[R+5],E=l[R+9],H=l[R+13],w=l[R+2],Q=l[R+6],x=l[R+10],S=l[R+14],X=l[R+3],T=l[R+7],i=l[R+11],N=l[R+15],a[R+0]=p*j+O*B+L*t+$*c,a[R+4]=p*Z+O*F+L*u+$*m,a[R+8]=p*K+O*V+L*J+$*W,a[R+12]=p*C+O*h+L*D+$*A,a[R+1]=k*j+M*B+E*t+H*c,a[R+5]=k*Z+M*F+E*u+H*m,a[R+9]=k*K+M*V+E*J+H*W,a[R+13]=k*C+M*h+E*D+H*A,a[R+2]=w*j+Q*B+x*t+S*c,a[R+6]=w*Z+Q*F+x*u+S*m,a[R+10]=w*K+Q*V+x*J+S*W,a[R+14]=w*C+Q*h+x*D+S*A,a[R+3]=X*j+T*B+i*t+N*c,a[R+7]=X*Z+T*F+i*u+N*m,a[R+11]=X*K+T*V+i*J+N*W,a[R+15]=X*C+T*h+i*D+N*A);return s.length=q.length,s.version=_?q.shadowVersion:q.msVersion,s.id=o._id,s.buffer=a,(y=(y=s.matrix)?y:s.matrix=new G).fromArray(Y.getElements()),a}function Ov(y,q,_){_ instanceof P.Node&&(Sq.fromArray(J8(_,q.getMat(_))),q=_.getAnchor3d(),y.push((new Q5).set(0-q.x,0-q.y,0-q.z).applyMatrix4(Sq)),y.push((new Q5).set(0-q.x,0-q.y,1-q.z).applyMatrix4(Sq)),y.push((new Q5).set(0-q.x,1-q.y,0-q.z).applyMatrix4(Sq)),y.push((new Q5).set(0-q.x,1-q.y,1-q.z).applyMatrix4(Sq)),y.push((new Q5).set(1-q.x,0-q.y,0-q.z).applyMatrix4(Sq)),y.push((new Q5).set(1-q.x,0-q.y,1-q.z).applyMatrix4(Sq)),y.push((new Q5).set(1-q.x,1-q.y,0-q.z).applyMatrix4(Sq)),y.push((new Q5).set(1-q.x,1-q.y,1-q.z).applyMatrix4(Sq)))}function Lv(y,q,_){var s=y[q];s&&s.releaseTexture(),_?y[q]=_:delete y[q]}function $v(y,q){return y.z!==q.z?q.z-y.z:y.id-q.id}function kv(){var y=new Q5;return y.subVectors(s4,_4),$4.subVectors(q4,_4),y.cross($4).normalize(),y}function Mv(y,q){var _,s;q=e.roundFloat(q,3),y.speed=q,"once"===y.loop&&(_=y.duration,s=y.start,y.end=0===q?s:(q<0?Math.floor((s-1e-8)/_):Math.ceil((s+1e-8)/_))*_)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);